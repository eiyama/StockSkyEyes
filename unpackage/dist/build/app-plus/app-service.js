(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([["app-service"],{"0079":function(t,e,i){"use strict";var n,r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",[i("cu-custom",{attrs:{bgColor:"bg-red",isBack:!0,_i:1}},[i("template",{slot:"content"})],2),i("view",{staticClass:t._$s(3,"sc","text-center"),attrs:{_i:3}},[i("view"),i("view")])],1)},o=[];i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},"0481":function(t,e,i){"use strict";i.r(e);var n=i("dc43"),r=i("ef6f");for(var o in r)"default"!==o&&function(t){i.d(e,t,(function(){return r[t]}))}(o);var a,s=i("f0c5"),c=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);e["default"]=c.exports},"0713":function(t,e,i){"use strict";i.r(e);var n=i("3f2c"),r=i("35dd");for(var o in r)"default"!==o&&function(t){i.d(e,t,(function(){return r[t]}))}(o);var a,s=i("f0c5"),c=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);e["default"]=c.exports},"0831":function(t,e){t.exports="static/img/icon-play.png"},"0b2a":function(t,e,i){"use strict";var n={"mescroll-uni":i("a000").default},r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",[n("view",[n("view",{staticClass:t._$s(2,"sc","status_bar bg-red"),attrs:{_i:2}}),n("view",{staticClass:t._$s(3,"sc","flex justify-center align-center text-white bg-red"),attrs:{_i:3}},[n("image",{attrs:{src:t._$s(4,"a-src","/"+i("485e")),_i:4}})])]),n("mescroll-uni",{attrs:{fixed:!0,top:"185",down:t.downOption,up:t.upOption,_i:5},on:{down:t.downCallback,up:t.upCallback,init:t.mescrollInit}},t._l(t._$s(6,"f",{forItems:t.listData}),(function(e,i,r,o){return n("view",{key:t._$s(6,"f",{forIndex:r,key:i}),staticClass:t._$s("6-"+o,"sc","bg-white"),attrs:{_i:"6-"+o},on:{click:function(i){return t.viewDetail(e.id)}}},[n("view",{staticClass:t._$s("7-"+o,"sc","content"),attrs:{_i:"7-"+o}},[n("view",{staticClass:t._$s("8-"+o,"sc","text-black"),attrs:{_i:"8-"+o}},[t._v(t._$s("8-"+o,"t0-0",t._s(e.title)))]),n("view",{staticClass:t._$s("9-"+o,"sc","text-gray text-sm flex margin-tb-sm"),attrs:{_i:"9-"+o}}),n("view",{staticClass:t._$s("10-"+o,"sc","text-detail"),attrs:{_i:"10-"+o}},[n("view",[n("view",[n("text",[t._v(t._$s("13-"+o,"t0-0",t._s(e.author)))]),n("text",[t._v(t._$s("14-"+o,"t0-0",t._s(e.durationDisplay.slice(0,10))))])])])])]),n("view",[n("image",{attrs:{src:t._$s("16-"+o,"a-src",e.coverMediaUrl),_i:"16-"+o}})])])})),0)],1)},o=[];i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},"0de9":function(t,e,i){"use strict";function n(t){var e=Object.prototype.toString.call(t);return e.substring(8,e.length-1)}function r(){return"string"===typeof __channelId__&&__channelId__}function o(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];console[t].apply(console,i)}function a(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var o=e.shift();if(r())return e.push(e.pop().replace("at ","uni-app:///")),console[o].apply(console,e);var a=e.map((function(t){var e=Object.prototype.toString.call(t).toLowerCase();if("[object object]"===e||"[object array]"===e)try{t="---BEGIN:JSON---"+JSON.stringify(t)+"---END:JSON---"}catch(r){t="[object object]"}else if(null===t)t="---NULL---";else if(void 0===t)t="---UNDEFINED---";else{var i=n(t).toUpperCase();t="NUMBER"===i||"BOOLEAN"===i?"---BEGIN:"+i+"---"+t+"---END:"+i+"---":String(t)}return t})),s="";if(a.length>1){var c=a.pop();s=a.join("---COMMA---"),0===c.indexOf(" at ")?s+=c:s+="---COMMA---"+c}else s=a[0];console[o](s)}i.r(e),i.d(e,"log",(function(){return o})),i.d(e,"default",(function(){return a}))},"0f36":function(t,e,i){"use strict";var n,r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",[n("cu-custom",{attrs:{bgColor:"bg-white",isBack:!0,backColor:"text-red",_i:1}},[n("template",{slot:"content"},[t._v(t._$s(2,"t0-0",t._s(t.userName)))])],2),n("view",{staticClass:t._$s(3,"sc","content-c"),attrs:{_i:3},on:{touchstart:t.hideDrawer}},[n("scroll-view",{staticClass:t._$s(4,"sc","msg-list"),attrs:{"scroll-with-animation":t._$s(4,"a-scroll-with-animation",t.scrollAnimation),"scroll-top":t._$s(4,"a-scroll-top",t.scrollTop),"scroll-into-view":t._$s(4,"a-scroll-into-view",t.scrollToView),_i:4},on:{scrolltoupper:t.loadHistory}},[n("view",{directives:[{name:"show",rawName:"v-show",value:t._$s(5,"v-show",t.isHistoryLoading),expression:"_$s(5,'v-show',isHistoryLoading)"}],staticClass:t._$s(5,"sc","loading"),attrs:{_i:5}},[n("view",{staticClass:t._$s(6,"sc","spinner"),attrs:{_i:6}},[n("view",{staticClass:t._$s(7,"sc","rect1"),attrs:{_i:7}}),n("view",{staticClass:t._$s(8,"sc","rect2"),attrs:{_i:8}}),n("view",{staticClass:t._$s(9,"sc","rect3"),attrs:{_i:9}}),n("view",{staticClass:t._$s(10,"sc","rect4"),attrs:{_i:10}}),n("view",{staticClass:t._$s(11,"sc","rect5"),attrs:{_i:11}})])]),t._l(t._$s(12,"f",{forItems:t.msgList}),(function(e,r,o,a){return n("view",{key:t._$s(12,"f",{forIndex:o,key:r}),staticClass:t._$s("12-"+a,"sc","row"),attrs:{id:t._$s("12-"+a,"a-id",e.id),_i:"12-"+a}},[[t._$s("14-"+a,"i","out"==e.flow)?n("view",{staticClass:t._$s("14-"+a,"sc","my"),attrs:{_i:"14-"+a}},[n("view",{staticClass:t._$s("15-"+a,"sc","left"),attrs:{_i:"15-"+a}},[t._$s("16-"+a,"i","TIMTextElem"==e.type)?n("view",{staticClass:t._$s("16-"+a,"sc","bubble"),attrs:{_i:"16-"+a}},[n("rich-text",{attrs:{nodes:t._$s("17-"+a,"a-nodes",t.nodesFliter(e.payload.text)),_i:"17-"+a}})]):t._e()]),n("view",{staticClass:t._$s("18-"+a,"sc","right"),attrs:{_i:"18-"+a}},[n("image",{attrs:{src:t._$s("19-"+a,"a-src","/"+i("18bb")),_i:"19-"+a}})])]):n("view",{staticClass:t._$s("20-"+a,"sc","other"),attrs:{_i:"20-"+a}},[n("view",{staticClass:t._$s("21-"+a,"sc","left"),attrs:{_i:"21-"+a}},[n("image",{attrs:{src:t._$s("22-"+a,"a-src","/"+i("18bb")),_i:"22-"+a}})]),n("view",{staticClass:t._$s("23-"+a,"sc","right"),attrs:{_i:"23-"+a}},[n("view",{staticClass:t._$s("24-"+a,"sc","username"),attrs:{_i:"24-"+a}},[n("view",{staticClass:t._$s("25-"+a,"sc","name"),attrs:{_i:"25-"+a}},[t._v(t._$s("25-"+a,"t0-0",t._s(e.nick||"用户"+e.from)))]),n("view",{staticClass:t._$s("26-"+a,"sc","time"),attrs:{_i:"26-"+a}},[t._v(t._$s("26-"+a,"t0-0",t._s(t.timeFliter(e.time))))])]),t._$s("27-"+a,"i","TIMTextElem"==e.type)?n("view",{staticClass:t._$s("27-"+a,"sc","bubble"),attrs:{_i:"27-"+a}},[n("rich-text",{attrs:{nodes:t._$s("28-"+a,"a-nodes",t.nodesFliter(e.payload.text)),_i:"28-"+a}})]):t._e()])])]],2)}))],2)]),n("view",{staticClass:t._$s(29,"sc","popup-layer-s"),class:t._$s(29,"c",t.popupLayerClass),attrs:{_i:29},on:{touchmove:function(e){return e.stopPropagation(),e.preventDefault(),t.discard(e)}}},[n("swiper",{staticClass:t._$s(30,"sc","emoji-swiper"),class:t._$s(30,"c",{hidden:t.hideEmoji}),attrs:{_i:30}},t._l(t._$s(31,"f",{forItems:t.emojiList}),(function(e,i,r,o){return n("swiper-item",{key:t._$s(31,"f",{forIndex:r,key:i})},t._l(t._$s("32-"+o,"f",{forItems:e}),(function(e,i,r,a){return n("view",{key:t._$s("32-"+o,"f",{forIndex:r,key:i}),attrs:{_i:"32-"+o+"-"+a},on:{click:function(i){return t.addEmoji(e)}}},[n("image",{attrs:{src:t._$s("33-"+o+"-"+a,"a-src","/static/img/emoji/"+e.url),_i:"33-"+o+"-"+a}})])})),0)})),0),n("view",{staticClass:t._$s(34,"sc","more-layer"),class:t._$s(34,"c",{hidden:t.hideMore}),attrs:{_i:34}},[n("view",{staticClass:t._$s(35,"sc","list"),attrs:{_i:35}},[n("view",{staticClass:t._$s(36,"sc","box"),attrs:{_i:36},on:{click:t.chooseImage}},[n("view",{staticClass:t._$s(37,"sc","icon tupian2"),attrs:{_i:37}})]),n("view",{staticClass:t._$s(38,"sc","box"),attrs:{_i:38},on:{click:t.camera}},[n("view",{staticClass:t._$s(39,"sc","icon paizhao"),attrs:{_i:39}})]),n("view",{staticClass:t._$s(40,"sc","box"),attrs:{_i:40},on:{click:t.handRedEnvelopes}},[n("view",{staticClass:t._$s(41,"sc","icon hongbao"),attrs:{_i:41}})])])])]),n("view",{staticClass:t._$s(42,"sc","input-box-s"),class:t._$s(42,"c",t.popupLayerClass),attrs:{_i:42},on:{touchmove:function(e){return e.stopPropagation(),e.preventDefault(),t.discard(e)}}},[n("view",{staticClass:t._$s(43,"sc","textbox"),attrs:{_i:43}},[n("view",{staticClass:t._$s(44,"sc","voice-mode"),class:t._$s(44,"c",[t.isVoice?"":"hidden",t.recording?"recording":""]),attrs:{_i:44},on:{touchstart:t.voiceBegin,touchmove:function(e){return e.stopPropagation(),e.preventDefault(),t.voiceIng(e)},touchend:t.voiceEnd,touchcancel:t.voiceCancel}},[t._v(t._$s(44,"t0-0",t._s(t.voiceTis)))]),n("view",{staticClass:t._$s(45,"sc","text-mode"),class:t._$s(45,"c",t.isVoice?"hidden":""),attrs:{_i:45}},[n("view",{staticClass:t._$s(46,"sc","box"),attrs:{_i:46}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textMsg,expression:"textMsg"}],attrs:{_i:47},domProps:{value:t._$s(47,"v-model",t.textMsg)},on:{focus:t.textareaFocus,input:function(e){e.target.composing||(t.textMsg=e.target.value)}}})]),n("view",{staticClass:t._$s(48,"sc","em"),attrs:{_i:48},on:{click:t.chooseEmoji}},[n("image",{attrs:{src:t._$s(49,"a-src","/"+i("aae1")),_i:49}})])])]),n("view",{staticClass:t._$s(50,"sc","send"),class:t._$s(50,"c",t.isVoice?"hidden":""),attrs:{_i:50},on:{click:t.sendText}},[n("image",{attrs:{src:t._$s(51,"a-src","/"+i("67cc")),_i:51}})])]),n("view",{staticClass:t._$s(52,"sc","record"),class:t._$s(52,"c",t.recording?"":"hidden"),attrs:{_i:52}},[n("view",{staticClass:t._$s(53,"sc","ing"),class:t._$s(53,"c",t.willStop?"hidden":""),attrs:{_i:53}},[n("view",{staticClass:t._$s(54,"sc","icon luyin2"),attrs:{_i:54}})]),n("view",{staticClass:t._$s(55,"sc","cancel"),class:t._$s(55,"c",t.willStop?"":"hidden"),attrs:{_i:55}},[n("view",{staticClass:t._$s(56,"sc","icon chehui"),attrs:{_i:56}})]),n("view",{staticClass:t._$s(57,"sc","tis"),class:t._$s(57,"c",t.willStop?"change":""),attrs:{_i:57}},[t._v(t._$s(57,"t0-0",t._s(t.recordTis)))])]),n("view",{staticClass:t._$s(58,"sc","windows"),class:t._$s(58,"c",t.windowsState),attrs:{_i:58}},[n("view",{staticClass:t._$s(59,"sc","mask"),attrs:{_i:59},on:{touchmove:function(e){return e.stopPropagation(),e.preventDefault(),t.discard(e)},click:t.closeRedEnvelope}}),n("view",{staticClass:t._$s(60,"sc","layer"),attrs:{_i:60},on:{touchmove:function(e){return e.stopPropagation(),e.preventDefault(),t.discard(e)}}},[n("view",{staticClass:t._$s(61,"sc","open-redenvelope"),attrs:{_i:61}},[n("view",{staticClass:t._$s(62,"sc","top"),attrs:{_i:62}},[n("view",{staticClass:t._$s(63,"sc","close-btn"),attrs:{_i:63}},[n("view",{staticClass:t._$s(64,"sc","icon close"),attrs:{_i:64},on:{click:t.closeRedEnvelope}})]),n("image",{attrs:{_i:65}})]),n("view",{staticClass:t._$s(66,"sc","from"),attrs:{_i:66}},[t._v(t._$s(66,"t0-0",t._s(t.redenvelopeData.from)))]),n("view",{staticClass:t._$s(67,"sc","blessing"),attrs:{_i:67}},[t._v(t._$s(67,"t0-0",t._s(t.redenvelopeData.blessing)))]),n("view",{staticClass:t._$s(68,"sc","money"),attrs:{_i:68}},[t._v(t._$s(68,"t0-0",t._s(t.redenvelopeData.money)))]),n("view",{staticClass:t._$s(69,"sc","showDetails"),attrs:{_i:69},on:{click:function(e){return t.toDetails(t.redenvelopeData.rid)}}},[n("view",{staticClass:t._$s(70,"sc","icon to"),attrs:{_i:70}})])])])])],1)},o=[];i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},1101:function(t,e){t.exports="static/img/icon-group-gray 2.png"},1468:function(t,e,i){"use strict";i.r(e);var n=i("4617"),r=i("3096");for(var o in r)"default"!==o&&function(t){i.d(e,t,(function(){return r[t]}))}(o);var a,s=i("f0c5"),c=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);e["default"]=c.exports},"18bb":function(t,e){t.exports="static/img/default-avatar.png"},"1fb9":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={down:{textInOffset:"下拉刷新",textOutOffset:"释放更新",textLoading:"加载中 ...",offset:80},up:{textLoading:"加载中 ...",textNoMore:"-- END --",offset:80,isBounce:!1,toTop:{src:"http://www.mescroll.com/img/mescroll-totop.png?v=1",offset:1e3,duration:300},empty:{use:!0,icon:"http://www.mescroll.com/img/mescroll-empty.png?v=1",tip:"~ 暂无相关数据 ~"}}},r=n;e.default=r},"202f":function(t,e){t.exports="static/img/mycenter/icon-user-red.png"},"203d":function(t,e,i){"use strict";i.r(e);var n=i("e749"),r=i("e180");for(var o in r)"default"!==o&&function(t){i.d(e,t,(function(){return r[t]}))}(o);var a,s=i("f0c5"),c=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);e["default"]=c.exports},"28a2":function(t,e,i){"use strict";var n,r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",[n("view",{staticClass:t._$s(1,"sc","status_bar"),attrs:{_i:1}}),n("view",[n("view",{staticClass:t._$s(3,"sc","grid margin-bottom text-center"),class:t._$s(3,"c","col-1"),attrs:{_i:3}},[n("view",[n("view",{staticClass:t._$s(5,"sc","openBack"),attrs:{_i:5},on:{click:t.openBack}},[n("image",{attrs:{src:t._$s(6,"a-src","/"+i("b198")),_i:6}})]),n("image",{attrs:{src:t._$s(7,"a-src",t.headImg),_i:7},on:{click:function(e){return t.viewPersonageInfo()}}}),n("view"),n("view",{staticClass:t._$s(9,"sc","flex justify-center align-center"),attrs:{_i:9}},[t._$s(10,"i","VIP"==t.Level)?n("image",{attrs:{src:t._$s(10,"a-src","/"+i("3b49")),_i:10}}):t._e(),n("text",[t._v(t._$s(11,"t0-0",t._s(t.userInfo.memberName)))])])])])]),n("view",{staticClass:t._$s(12,"sc","cu-list menu"),attrs:{_i:12}},[n("view"),n("view",{staticClass:t._$s(14,"sc","cu-item arrow"),attrs:{_i:14},on:{click:function(e){return t.viewPersonageInfo()}}},[n("view",{staticClass:t._$s(15,"sc","content"),attrs:{_i:15}},[n("image",{attrs:{src:t._$s(16,"a-src","/"+i("202f")),_i:16}}),n("text")])]),t._$s(18,"i","VIP"==t.Level)?n("view",{staticClass:t._$s(18,"sc","cu-item arrow"),attrs:{_i:18},on:{click:t.toConsult}},[n("view",{staticClass:t._$s(19,"sc","content"),attrs:{_i:19}},[n("image",{attrs:{src:t._$s(20,"a-src","/"+i("2d39")),_i:20}}),n("text")])]):t._e(),n("view",{staticClass:t._$s(22,"sc","cu-item arrow"),attrs:{_i:22},on:{click:t.toliveshow}},[n("view",{staticClass:t._$s(23,"sc","content"),attrs:{_i:23}},[n("image",{attrs:{src:t._$s(24,"a-src","/"+i("a5c2")),_i:24}}),n("text")])])])])},o=[];i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},"298f":function(t,e,i){"use strict";i.r(e);var n=i("5563");for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);var o,a,s,c,u=i("f0c5"),l=Object(u["a"])(n["default"],o,a,!1,null,null,null,!1,s,c);e["default"]=l.exports},"2bb1":function(t,e){t.exports="static/img/qiang.png"},"2d39":function(t,e){t.exports="static/img/mycenter/icon-infos.png"},"2ea0":function(t,e,i){"use strict";i.r(e);var n=i("ea63"),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=r.a},"2ed1":function(t,e,i){"use strict";i.r(e);var n=i("8cb0"),r=i("4f6f");for(var o in r)"default"!==o&&function(t){i.d(e,t,(function(){return r[t]}))}(o);var a,s=i("f0c5"),c=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);e["default"]=c.exports},"2f62":function(t,e,i){"use strict";i.r(e),i.d(e,"Store",(function(){return g})),i.d(e,"install",(function(){return x})),i.d(e,"mapState",(function(){return D})),i.d(e,"mapMutations",(function(){return M})),i.d(e,"mapGetters",(function(){return L})),i.d(e,"mapActions",(function(){return O})),i.d(e,"createNamespacedHelpers",(function(){return N}));
/**
 * vuex v3.0.1
 * (c) 2017 Evan You
 * @license MIT
 */
var n=function(t){var e=Number(t.version.split(".")[0]);if(e>=2)t.mixin({beforeCreate:n});else{var i=t.prototype._init;t.prototype._init=function(t){void 0===t&&(t={}),t.init=t.init?[n].concat(t.init):n,i.call(this,t)}}function n(){var t=this.$options;t.store?this.$store="function"===typeof t.store?t.store():t.store:t.parent&&t.parent.$store&&(this.$store=t.parent.$store)}},r="undefined"!==typeof window&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function o(t){r&&(t._devtoolHook=r,r.emit("vuex:init",t),r.on("vuex:travel-to-state",(function(e){t.replaceState(e)})),t.subscribe((function(t,e){r.emit("vuex:mutation",t,e)})))}function a(t,e){Object.keys(t).forEach((function(i){return e(t[i],i)}))}function s(t){return null!==t&&"object"===typeof t}function c(t){return t&&"function"===typeof t.then}var u=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var i=t.state;this.state=("function"===typeof i?i():i)||{}},l={namespaced:{configurable:!0}};l.namespaced.get=function(){return!!this._rawModule.namespaced},u.prototype.addChild=function(t,e){this._children[t]=e},u.prototype.removeChild=function(t){delete this._children[t]},u.prototype.getChild=function(t){return this._children[t]},u.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},u.prototype.forEachChild=function(t){a(this._children,t)},u.prototype.forEachGetter=function(t){this._rawModule.getters&&a(this._rawModule.getters,t)},u.prototype.forEachAction=function(t){this._rawModule.actions&&a(this._rawModule.actions,t)},u.prototype.forEachMutation=function(t){this._rawModule.mutations&&a(this._rawModule.mutations,t)},Object.defineProperties(u.prototype,l);var f=function(t){this.register([],t,!1)};function h(t,e,i){if(e.update(i),i.modules)for(var n in i.modules){if(!e.getChild(n))return void 0;h(t.concat(n),e.getChild(n),i.modules[n])}}f.prototype.get=function(t){return t.reduce((function(t,e){return t.getChild(e)}),this.root)},f.prototype.getNamespace=function(t){var e=this.root;return t.reduce((function(t,i){return e=e.getChild(i),t+(e.namespaced?i+"/":"")}),"")},f.prototype.update=function(t){h([],this.root,t)},f.prototype.register=function(t,e,i){var n=this;void 0===i&&(i=!0);var r=new u(e,i);if(0===t.length)this.root=r;else{var o=this.get(t.slice(0,-1));o.addChild(t[t.length-1],r)}e.modules&&a(e.modules,(function(e,r){n.register(t.concat(r),e,i)}))},f.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),i=t[t.length-1];e.getChild(i).runtime&&e.removeChild(i)};var p;var g=function(t){var e=this;void 0===t&&(t={}),!p&&"undefined"!==typeof window&&window.Vue&&x(window.Vue);var i=t.plugins;void 0===i&&(i=[]);var n=t.strict;void 0===n&&(n=!1);var r=t.state;void 0===r&&(r={}),"function"===typeof r&&(r=r()||{}),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new f(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new p;var a=this,s=this,c=s.dispatch,u=s.commit;this.dispatch=function(t,e){return c.call(a,t,e)},this.commit=function(t,e,i){return u.call(a,t,e,i)},this.strict=n,y(this,r,[],this._modules.root),_(this,r),i.forEach((function(t){return t(e)})),p.config.devtools&&o(this)},d={state:{configurable:!0}};function m(t,e){return e.indexOf(t)<0&&e.push(t),function(){var i=e.indexOf(t);i>-1&&e.splice(i,1)}}function v(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var i=t.state;y(t,i,[],t._modules.root,!0),_(t,i,e)}function _(t,e,i){var n=t._vm;t.getters={};var r=t._wrappedGetters,o={};a(r,(function(e,i){o[i]=function(){return e(t)},Object.defineProperty(t.getters,i,{get:function(){return t._vm[i]},enumerable:!0})}));var s=p.config.silent;p.config.silent=!0,t._vm=new p({data:{$$state:e},computed:o}),p.config.silent=s,t.strict&&A(t),n&&(i&&t._withCommit((function(){n._data.$$state=null})),p.nextTick((function(){return n.$destroy()})))}function y(t,e,i,n,r){var o=!i.length,a=t._modules.getNamespace(i);if(n.namespaced&&(t._modulesNamespaceMap[a]=n),!o&&!r){var s=w(e,i.slice(0,-1)),c=i[i.length-1];t._withCommit((function(){p.set(s,c,n.state)}))}var u=n.context=S(t,a,i);n.forEachMutation((function(e,i){var n=a+i;C(t,n,e,u)})),n.forEachAction((function(e,i){var n=e.root?i:a+i,r=e.handler||e;I(t,n,r,u)})),n.forEachGetter((function(e,i){var n=a+i;b(t,n,e,u)})),n.forEachChild((function(n,o){y(t,e,i.concat(o),n,r)}))}function S(t,e,i){var n=""===e,r={dispatch:n?t.dispatch:function(i,n,r){var o=T(i,n,r),a=o.payload,s=o.options,c=o.type;return s&&s.root||(c=e+c),t.dispatch(c,a)},commit:n?t.commit:function(i,n,r){var o=T(i,n,r),a=o.payload,s=o.options,c=o.type;s&&s.root||(c=e+c),t.commit(c,a,s)}};return Object.defineProperties(r,{getters:{get:n?function(){return t.getters}:function(){return E(t,e)}},state:{get:function(){return w(t.state,i)}}}),r}function E(t,e){var i={},n=e.length;return Object.keys(t.getters).forEach((function(r){if(r.slice(0,n)===e){var o=r.slice(n);Object.defineProperty(i,o,{get:function(){return t.getters[r]},enumerable:!0})}})),i}function C(t,e,i,n){var r=t._mutations[e]||(t._mutations[e]=[]);r.push((function(e){i.call(t,n.state,e)}))}function I(t,e,i,n){var r=t._actions[e]||(t._actions[e]=[]);r.push((function(e,r){var o=i.call(t,{dispatch:n.dispatch,commit:n.commit,getters:n.getters,state:n.state,rootGetters:t.getters,rootState:t.state},e,r);return c(o)||(o=Promise.resolve(o)),t._devtoolHook?o.catch((function(e){throw t._devtoolHook.emit("vuex:error",e),e})):o}))}function b(t,e,i,n){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(t){return i(n.state,n.getters,t.state,t.getters)})}function A(t){t._vm.$watch((function(){return this._data.$$state}),(function(){0}),{deep:!0,sync:!0})}function w(t,e){return e.length?e.reduce((function(t,e){return t[e]}),t):t}function T(t,e,i){return s(t)&&t.type&&(i=e,e=t,t=t.type),{type:t,payload:e,options:i}}function x(t){p&&t===p||(p=t,n(p))}d.state.get=function(){return this._vm._data.$$state},d.state.set=function(t){0},g.prototype.commit=function(t,e,i){var n=this,r=T(t,e,i),o=r.type,a=r.payload,s=(r.options,{type:o,payload:a}),c=this._mutations[o];c&&(this._withCommit((function(){c.forEach((function(t){t(a)}))})),this._subscribers.forEach((function(t){return t(s,n.state)})))},g.prototype.dispatch=function(t,e){var i=this,n=T(t,e),r=n.type,o=n.payload,a={type:r,payload:o},s=this._actions[r];if(s)return this._actionSubscribers.forEach((function(t){return t(a,i.state)})),s.length>1?Promise.all(s.map((function(t){return t(o)}))):s[0](o)},g.prototype.subscribe=function(t){return m(t,this._subscribers)},g.prototype.subscribeAction=function(t){return m(t,this._actionSubscribers)},g.prototype.watch=function(t,e,i){var n=this;return this._watcherVM.$watch((function(){return t(n.state,n.getters)}),e,i)},g.prototype.replaceState=function(t){var e=this;this._withCommit((function(){e._vm._data.$$state=t}))},g.prototype.registerModule=function(t,e,i){void 0===i&&(i={}),"string"===typeof t&&(t=[t]),this._modules.register(t,e),y(this,this.state,t,this._modules.get(t),i.preserveState),_(this,this.state)},g.prototype.unregisterModule=function(t){var e=this;"string"===typeof t&&(t=[t]),this._modules.unregister(t),this._withCommit((function(){var i=w(e.state,t.slice(0,-1));p.delete(i,t[t.length-1])})),v(this)},g.prototype.hotUpdate=function(t){this._modules.update(t),v(this,!0)},g.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(g.prototype,d);var D=R((function(t,e){var i={};return P(e).forEach((function(e){var n=e.key,r=e.val;i[n]=function(){var e=this.$store.state,i=this.$store.getters;if(t){var n=k(this.$store,"mapState",t);if(!n)return;e=n.context.state,i=n.context.getters}return"function"===typeof r?r.call(this,e,i):e[r]},i[n].vuex=!0})),i})),M=R((function(t,e){var i={};return P(e).forEach((function(e){var n=e.key,r=e.val;i[n]=function(){var e=[],i=arguments.length;while(i--)e[i]=arguments[i];var n=this.$store.commit;if(t){var o=k(this.$store,"mapMutations",t);if(!o)return;n=o.context.commit}return"function"===typeof r?r.apply(this,[n].concat(e)):n.apply(this.$store,[r].concat(e))}})),i})),L=R((function(t,e){var i={};return P(e).forEach((function(e){var n=e.key,r=e.val;r=t+r,i[n]=function(){if(!t||k(this.$store,"mapGetters",t))return this.$store.getters[r]},i[n].vuex=!0})),i})),O=R((function(t,e){var i={};return P(e).forEach((function(e){var n=e.key,r=e.val;i[n]=function(){var e=[],i=arguments.length;while(i--)e[i]=arguments[i];var n=this.$store.dispatch;if(t){var o=k(this.$store,"mapActions",t);if(!o)return;n=o.context.dispatch}return"function"===typeof r?r.apply(this,[n].concat(e)):n.apply(this.$store,[r].concat(e))}})),i})),N=function(t){return{mapState:D.bind(null,t),mapGetters:L.bind(null,t),mapMutations:M.bind(null,t),mapActions:O.bind(null,t)}};function P(t){return Array.isArray(t)?t.map((function(t){return{key:t,val:t}})):Object.keys(t).map((function(e){return{key:e,val:t[e]}}))}function R(t){return function(e,i){return"string"!==typeof e?(i=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),t(e,i)}}function k(t,e,i){var n=t._modulesNamespaceMap[i];return n}var G={Store:g,install:x,version:"3.0.1",mapState:D,mapMutations:M,mapGetters:L,mapActions:O,createNamespacedHelpers:N};e["default"]=G},"2fa8":function(t,e,i){"use strict";i.r(e);var n=i("ef7c"),r=i("3a95");for(var o in r)"default"!==o&&function(t){i.d(e,t,(function(){return r[t]}))}(o);var a,s=i("f0c5"),c=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);e["default"]=c.exports},3096:function(t,e,i){"use strict";i.r(e);var n=i("a333"),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=r.a},"331e":function(t,e){t.exports="static/img/icon-group-yellow.png"},"349d":function(t,e,i){"use strict";i.r(e);var n=i("63e0"),r=i("69c1");for(var o in r)"default"!==o&&function(t){i.d(e,t,(function(){return r[t]}))}(o);var a,s=i("f0c5"),c=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);e["default"]=c.exports},"35dd":function(t,e,i){"use strict";i.r(e);var n=i("f3f0"),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=r.a},3864:function(t,e,i){"use strict";i.r(e);var n=i("be3f"),r=i("e514");for(var o in r)"default"!==o&&function(t){i.d(e,t,(function(){return r[t]}))}(o);var a,s=i("f0c5"),c=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);e["default"]=c.exports},3920:function(t,e){t.exports="static/img/success.png"},"3a95":function(t,e,i){"use strict";i.r(e);var n=i("d95c"),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=r.a},"3b49":function(t,e){t.exports="static/img/icon-VIP.png"},"3f2c":function(t,e,i){"use strict";var n,r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:t._$s(0,"sc","content"),attrs:{_i:0}},[n("cu-custom",{attrs:{bgColor:"bg-orange",isBack:!0,_i:1}},[n("template",{slot:"content"})],2),n("view",[n("view",{staticClass:t._$s(4,"sc","text-center"),attrs:{_i:4}},[n("image",{attrs:{src:t._$s(5,"a-src","/"+i("da27")),_i:5}})]),t._$s(6,"i",!t.isBuy)?n("view",[n("view",[n("view",{staticClass:t._$s(8,"sc","text-center"),attrs:{_i:8}},[n("view",[n("text"),n("text")]),n("view",[n("text"),n("text")])])]),n("view",[n("view",[n("text")]),n("view",[n("text",{staticClass:t._$s(19,"sc","block"),attrs:{_i:19}}),n("text",{staticClass:t._$s(20,"sc","block"),attrs:{_i:20}}),n("text",{staticClass:t._$s(21,"sc","block"),attrs:{_i:21}})])]),n("view",{staticClass:t._$s(22,"sc","flex justify-center"),attrs:{_i:22}},[n("button",{staticClass:t._$s(23,"sc","cu-btn margin-tb-sm lg text-white round"),attrs:{_i:23},on:{click:t.buyFunds}})])]):t._e(),t._$s(24,"i",t.isBuy)?n("view",[n("view",{staticClass:t._$s(25,"sc","flex justify-center"),attrs:{_i:25}},[n("image",{attrs:{src:t._$s(26,"a-src","/"+i("3920")),_i:26}})]),n("view",{staticClass:t._$s(27,"sc","text-center"),attrs:{_i:27}},[n("text",[t._v(t._$s(28,"t0-0",t._s(t.dataDetail.createdTime)))])]),n("view",{staticClass:t._$s(29,"sc","text-center"),attrs:{_i:29}},[n("text",{staticClass:t._$s(30,"sc","block"),attrs:{_i:30}}),n("text",{staticClass:t._$s(31,"sc","block"),attrs:{_i:31}})])]):t._e()])],1)},o=[];i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},4062:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={pages:{},globalStyle:{}};e.default=n},4522:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(i("4795"));function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){h(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function s(t,e,i,n,r,o,a){try{var s=t[o](a),c=s.value}catch(u){return void i(u)}s.done?e(c):Promise.resolve(c).then(n,r)}function c(t){return function(){var e=this,i=arguments;return new Promise((function(n,r){var o=t.apply(e,i);function a(t){s(o,n,r,a,c,"next",t)}function c(t){s(o,n,r,a,c,"throw",t)}a(void 0)}))}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,i){return e&&l(t.prototype,e),i&&l(t,i),t}function h(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var p=function(){function t(){var e=this;u(this,t),h(this,"config",{baseUrl:"",header:{"content-type":"application/json;charset=UTF-8"},method:"GET",dataType:"json",responseType:"text"}),h(this,"interceptor",{request:function(t){t&&(e.requestBeforeFun=t)},response:function(t,i){t&&i&&(e.requestComFun=t,e.requestComFail=i)}})}return f(t,[{key:"requestBeforeFun",value:function(t){return t}},{key:"requestComFun",value:function(t){return t}},{key:"requestComFail",value:function(t){return t}},{key:"validateStatus",value:function(t){return 200===t}},{key:"setConfig",value:function(t){this.config=t(this.config)}},{key:"request",value:function(){var e=c(n.default.mark((function e(){var i,r=this,o=arguments;return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=o.length>0&&void 0!==o[0]?o[0]:{},i.baseUrl=this.config.baseUrl,i.dataType=i.dataType||this.config.dataType,i.responseType=i.responseType||this.config.responseType,i.url=i.url||"",i.data=i.data||{},i.params=i.params||{},i.header=i.header||this.config.header,i.method=i.method||this.config.method,e.abrupt("return",new Promise((function(e,n){var o=!0,s={};i.complete=function(t){t.config=s,r.validateStatus(t.statusCode)?(t=r.requestComFun(t),e(t)):(t=r.requestComFail(t),n(t))};var c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"handle cancel",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,r={errMsg:t,config:e};n(r),o=!1};s=a({},r.requestBeforeFun(i,c));var u=a({},s);if(o){var l=t.posUrl(i.url)?i.url:i.baseUrl+i.url;if("{}"!==JSON.stringify(i.params)){var f=t.addQueryString(i.params);l+=-1===l.indexOf("?")?"?".concat(f):"&".concat(f)}u.url=l,uni.request(u)}})));case 10:case"end":return e.stop()}}),e,this)})));function i(){return e.apply(this,arguments)}return i}()},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request(a({url:t,method:"GET"},e))}},{key:"post",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request(a({url:t,data:e,method:"POST"},i))}},{key:"put",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request(a({url:t,data:e,method:"PUT"},i))}},{key:"delete",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request(a({url:t,data:e,method:"DELETE"},i))}},{key:"connect",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request(a({url:t,data:e,method:"CONNECT"},i))}},{key:"head",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request(a({url:t,data:e,method:"HEAD"},i))}},{key:"options",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request(a({url:t,data:e,method:"OPTIONS"},i))}},{key:"trace",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request(a({url:t,data:e,method:"TRACE"},i))}},{key:"upload",value:function(e,i){var n=this,r=i.files,o=i.filePath,s=i.name,c=i.header,u=i.formData;return new Promise((function(i,l){var f=!0,h={},p={baseUrl:n.config.baseUrl,url:e,files:r,filePath:o,method:"UPLOAD",name:s,header:c||n.config.header,formData:u,complete:function(t){t.config=h,200===t.statusCode?(t=n.requestComFun(t),i(t)):(t=n.requestComFail(t),l(t))}},g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"handle cancel",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p,i={errMsg:t,config:e};l(i),f=!1};h=a({},n.requestBeforeFun(p,g));var d=a({},h);f&&(d.url=t.posUrl(e)?e:n.config.baseUrl+e,uni.uploadFile(d))}))}}],[{key:"posUrl",value:function(t){return/(http|https):\/\/([\w.]+\/?)\S*/.test(t)}},{key:"addQueryString",value:function(t){var e="";return Object.keys(t).forEach((function(i){e+=i+"="+t[i]+"&"})),e.substring(0,e.length-1)}}]),t}();e.default=p},4563:function(t,e,i){"use strict";(function(e){var i={yAxisWidth:15,yAxisSplit:5,xAxisHeight:15,xAxisLineHeight:15,legendHeight:15,yAxisTitleWidth:15,padding:[10,10,10,10],pixelRatio:1,rotate:!1,columePadding:3,fontSize:13,dataPointShape:["circle","circle","circle","circle"],colors:["#1890ff","#2fc25b","#facc14","#f04864","#8543e0","#90ed7d"],pieChartLinePadding:15,pieChartTextPadding:5,xAxisTextPadding:3,titleColor:"#333333",titleFontSize:20,subtitleColor:"#999999",subtitleFontSize:15,toolTipPadding:3,toolTipBackground:"#000000",toolTipOpacity:.7,toolTipLineHeight:20,radarLabelTextMargin:15,gaugeLabelTextMargin:15},n=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];if(null==t)throw new TypeError("Cannot convert undefined or null to object");if(!i||i.length<=0)return t;function r(t,e){for(var i in e)t[i]=t[i]&&"[object Object]"===t[i].toString()?r(t[i],e[i]):t[i]=e[i];return t}return i.forEach((function(e){t=r(t,e)})),t},r={toFixed:function(t,e){return e=e||2,this.isFloat(t)&&(t=t.toFixed(e)),t},isFloat:function(t){return t%1!==0},approximatelyEqual:function(t,e){return Math.abs(t-e)<1e-10},isSameSign:function(t,e){return Math.abs(t)===t&&Math.abs(e)===e||Math.abs(t)!==t&&Math.abs(e)!==e},isSameXCoordinateArea:function(t,e){return this.isSameSign(t.x,e.x)},isCollision:function(t,e){t.end={},t.end.x=t.start.x+t.width,t.end.y=t.start.y-t.height,e.end={},e.end.x=e.start.x+e.width,e.end.y=e.start.y-e.height;var i=e.start.x>t.end.x||e.end.x<t.start.x||e.end.y>t.start.y||e.start.y<t.end.y;return!i}};function o(t,e){var i=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,n=t.replace(i,(function(t,e,i,n){return e+e+i+i+n+n})),r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n),o=parseInt(r[1],16),a=parseInt(r[2],16),s=parseInt(r[3],16);return"rgba("+o+","+a+","+s+","+e+")"}function a(t,e,i){if(isNaN(t))throw new Error("[uCharts] unvalid series data!");i=i||10,e=e||"upper";var n=1;while(i<1)i*=10,n*=10;t="upper"===e?Math.ceil(t*n):Math.floor(t*n);while(t%i!==0)"upper"===e?t++:t--;return t/n}function s(t,e,i,n){for(var r=[],o=0;o<t.length;o++){for(var a={data:[],name:e[o],color:i[o]},s=0,c=n.length;s<c;s++)if(s<t[o])a.data.push(null);else{for(var u=0,l=0;l<t[o];l++)u+=n[s-l][1];a.data.push(+(u/t[o]).toFixed(3))}r.push(a)}return r}function c(t,e,i,n,r){var o=r.width-r.area[1]-r.area[3],a=i.eachSpacing*(r.chartData.xAxisData.xAxisPoints.length-1),s=e;return e>=0?(s=0,t.event.trigger("scrollLeft")):Math.abs(e)>=a-o&&(s=o-a,t.event.trigger("scrollRight")),s}function u(t,e,i){function n(t){while(t<0)t+=2*Math.PI;while(t>2*Math.PI)t-=2*Math.PI;return t}return t=n(t),e=n(e),i=n(i),e>i&&(i+=2*Math.PI,t<e&&(t+=2*Math.PI)),t>=e&&t<=i}function l(t,e,i){var n=t,r=i-e,o=n+(i-r-n)/Math.sqrt(2);o*=-1;var a=(i-r)*(Math.sqrt(2)-1)-(i-r-n)/Math.sqrt(2);return{transX:o,transY:a}}function f(t,e){function i(t,e){return!(!t[e-1]||!t[e+1])&&(t[e].y>=Math.max(t[e-1].y,t[e+1].y)||t[e].y<=Math.min(t[e-1].y,t[e+1].y))}var n=.2,r=.2,o=null,a=null,s=null,c=null;if(e<1?(o=t[0].x+(t[1].x-t[0].x)*n,a=t[0].y+(t[1].y-t[0].y)*n):(o=t[e].x+(t[e+1].x-t[e-1].x)*n,a=t[e].y+(t[e+1].y-t[e-1].y)*n),e>t.length-3){var u=t.length-1;s=t[u].x-(t[u].x-t[u-1].x)*r,c=t[u].y-(t[u].y-t[u-1].y)*r}else s=t[e+1].x-(t[e+2].x-t[e].x)*r,c=t[e+1].y-(t[e+2].y-t[e].y)*r;return i(t,e+1)&&(c=t[e+1].y),i(t,e)&&(a=t[e].y),(a>=Math.max(t[e].y,t[e+1].y)||a<=Math.min(t[e].y,t[e+1].y))&&(a=t[e].y),(c>=Math.max(t[e].y,t[e+1].y)||c<=Math.min(t[e].y,t[e+1].y))&&(c=t[e+1].y),{ctrA:{x:o,y:a},ctrB:{x:s,y:c}}}function h(t,e,i){return{x:i.x+t,y:i.y-e}}function p(t,e){if(e)while(r.isCollision(t,e))t.start.x>0?t.start.y--:t.start.x<0?t.start.y++:t.start.y>0?t.start.y++:t.start.y--;return t}function g(t,e,i){var n=0;return t.map((function(t){if(t.color||(t.color=i.colors[n],n=(n+1)%i.colors.length),t.index||(t.index=0),t.type||(t.type=e.type),"undefined"==typeof t.show&&(t.show=!0),t.type||(t.type=e.type),t.pointShape||(t.pointShape="circle"),!t.legendShape)switch(t.type){case"line":t.legendShape="line";break;case"column":t.legendShape="rect";break;case"area":t.legendShape="triangle";break;default:t.legendShape="circle"}return t}))}function d(t,e){var i=0,n=e-t;return i=n>=1e4?1e3:n>=1e3?100:n>=100?10:n>=10?5:n>=1?1:n>=.1?.1:n>=.01?.01:n>=.001?.001:n>=1e-4?1e-4:n>=1e-5?1e-5:1e-6,{minRange:a(t,"lower",i),maxRange:a(e,"upper",i)}}function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.fontSize;t=String(t);t=t.split("");for(var n=0,r=0;r<t.length;r++){var o=t[r];/[a-zA-Z]/.test(o)?n+=7:/[0-9]/.test(o)?n+=5.5:/\./.test(o)?n+=2.7:/-/.test(o)?n+=3.25:/[\u4e00-\u9fa5]/.test(o)?n+=10:/\(|\)/.test(o)?n+=3.73:/\s/.test(o)?n+=2.5:/%/.test(o)?n+=8:n+=10}return n*e/10}function v(t){return t.reduce((function(t,e){return(t.data?t.data:t).concat(e.data)}),[])}function _(t,e){for(var i=new Array(e),n=0;n<i.length;n++)i[n]=0;for(var r=0;r<t.length;r++)for(n=0;n<i.length;n++)i[n]+=t[r].data[n];return t.reduce((function(t,e){return(t.data?t.data:t).concat(e.data).concat(i)}),[])}function y(t,e,i){var n,r;return t.clientX?e.rotate?(r=e.height-t.clientX*e.pixelRatio,n=(t.pageY-i.currentTarget.offsetTop-e.height/e.pixelRatio/2*(e.pixelRatio-1))*e.pixelRatio):(n=t.clientX*e.pixelRatio,r=(t.pageY-i.currentTarget.offsetTop-e.height/e.pixelRatio/2*(e.pixelRatio-1))*e.pixelRatio):e.rotate?(r=e.height-t.x*e.pixelRatio,n=t.y*e.pixelRatio):(n=t.x*e.pixelRatio,r=t.y*e.pixelRatio),{x:n,y:r}}function S(t,e){for(var i=[],n=0;n<t.length;n++){var r=t[n];if(null!==r.data[e]&&"undefined"!==typeof r.data[e]&&r.show){var o={};o.color=r.color,o.type=r.type,o.style=r.style,o.pointShape=r.pointShape,o.disableLegend=r.disableLegend,o.name=r.name,o.show=r.show,o.data=r.format?r.format(r.data[e]):r.data[e],i.push(o)}}return i}function E(t){var e=t.map((function(t){return m(t)}));return Math.max.apply(null,e)}function C(t){for(var e=2*Math.PI/t,i=[],n=0;n<t;n++)i.push(e*n);return i.map((function(t){return-1*t+Math.PI/2}))}function I(t,e,i,n){for(var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=t.map((function(t){var e=[];return e=n||t.data,{text:r.format?r.format(t,e[i]):t.name+": "+t.data,color:t.color}})),a=[],s={x:0,y:0},c=0;c<e.length;c++){var u=e[c];"undefined"!==typeof u[i]&&null!==u[i]&&a.push(u[i])}for(var l=0;l<a.length;l++){var f=a[l];s.x=Math.round(f.x),s.y+=f.y}return s.y/=a.length,{textList:o,offset:s}}function b(t,e,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=t.map((function(t){return{text:r.format?r.format(t,n[i]):t.name+": "+t.data,color:t.color,disableLegend:!!t.disableLegend}}));o=o.filter((function(t){if(!0!==t.disableLegend)return t}));for(var a=[],s={x:0,y:0},c=0;c<e.length;c++){var u=e[c];"undefined"!==typeof u[i]&&null!==u[i]&&a.push(u[i])}for(var l=0;l<a.length;l++){var f=a[l];s.x=Math.round(f.x),s.y+=f.y}return s.y/=a.length,{textList:o,offset:s}}function A(t,e,i,n,r,o){arguments.length>6&&void 0!==arguments[6]&&arguments[6];var a=o.color.upFill,s=o.color.downFill,c=[a,a,s,a],u=[],l={text:r[n],color:null};u.push(l),e.map((function(e){0==n&&e.data[1]-e.data[0]<0?c[1]=s:(e.data[0]<t[n-1][1]&&(c[0]=s),e.data[1]<e.data[0]&&(c[1]=s),e.data[2]>t[n-1][1]&&(c[2]=a),e.data[3]<t[n-1][1]&&(c[3]=s));var i={text:"开盘："+e.data[0],color:c[0]},r={text:"收盘："+e.data[1],color:c[1]},o={text:"最低："+e.data[2],color:c[2]},l={text:"最高："+e.data[3],color:c[3]};u.push(i,r,o,l)}));for(var f=[],h={x:0,y:0},p=0;p<i.length;p++){var g=i[p];"undefined"!==typeof g[n]&&null!==g[n]&&f.push(g[n])}return h.x=Math.round(f[0][0].x),{textList:u,offset:h}}function w(t){for(var e=[],i=0;i<t.length;i++)1==t[i].show&&e.push(t[i]);return e}function T(t,e,i,n){for(var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=-1,a=0,s=[],c=0;c<e[0].length;c++)s.push(e[0][c].x);return"line"!=i.type&&"area"!=i.type||"justify"!=i.xAxis.boundaryGap||(a=i.chartData.eachSpacing/2),i.categories||(a=0),M(t,i,n)&&s.forEach((function(e,i){t.x+r+a>e&&(o=i)})),o}function x(t,e,i){var n=-1;if(D(t,e.area)){for(var r=e.points,o=-1,a=0,s=r.length;a<s;a++)for(var c=r[a],u=0;u<c.length;u++){o+=1;var l=c[u]["area"];if(t.x>l[0]&&t.x<l[2]&&t.y>l[1]&&t.y<l[3]){n=o;break}}return n}return n}function D(t,e){return t.x>e.start.x&&t.x<e.end.x&&t.y>e.start.y&&t.y<e.end.y}function M(t,e,i){return t.x<=e.width-e.area[1]+10&&t.x>=e.area[3]-10&&t.y>=e.area[0]&&t.y<=e.height-e.area[2]}function L(t,e,i){var n=2*Math.PI/i,r=-1;if(k(t,e.center,e.radius)){var o=function(t){return t<0&&(t+=2*Math.PI),t>2*Math.PI&&(t-=2*Math.PI),t},a=Math.atan2(e.center.y-t.y,t.x-e.center.x);a*=-1,a<0&&(a+=2*Math.PI);var s=e.angleList.map((function(t){return t=o(-1*t),t}));s.forEach((function(t,e){var i=o(t-n/2),s=o(t+n/2);s<i&&(s+=2*Math.PI),(a>=i&&a<=s||a+2*Math.PI>=i&&a+2*Math.PI<=s)&&(r=e)}))}return r}function O(t,e){for(var i=-1,n=0,r=e.series.length;n<r;n++){var o=e.series[n];if(t.x>o.funnelArea[0]&&t.x<o.funnelArea[2]&&t.y>o.funnelArea[1]&&t.y<o.funnelArea[3]){i=n;break}}return i}function N(t,e){for(var i=-1,n=0,r=e.length;n<r;n++){var o=e[n];if(t.x>o.area[0]&&t.x<o.area[2]&&t.y>o.area[1]&&t.y<o.area[3]){i=n;break}}return i}function P(t,e){for(var i=-1,n=e.chartData.mapData,r=e.series,o=Ut(t.y,t.x,n.bounds,n.scale,n.xoffset,n.yoffset),a=[o.x,o.y],s=0,c=r.length;s<c;s++){var u=r[s].geometry.coordinates;if($t(a,u)){i=s;break}}return i}function R(t,e){var i=-1;if(k(t,e.center,e.radius)){var n=Math.atan2(e.center.y-t.y,t.x-e.center.x);n=-n;for(var r=0,o=e.series.length;r<o;r++){var a=e.series[r];if(u(n,a._start_,a._start_+2*a._proportion_*Math.PI)){i=r;break}}}return i}function k(t,e,i){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(i,2)}function G(t){var e=[],i=[];return t.forEach((function(t,n){null!==t?i.push(t):(i.length&&e.push(i),i=[])})),i.length&&e.push(i),e}function U(t,e,i,n){var r={area:{start:{x:0,y:0},end:{x:0,y:0},width:0,height:0,wholeWidth:0,wholeHeight:0},points:[],widthArr:[],heightArr:[]};if(!1===e.legend.show)return n.legendData=r,r;var o=e.legend.padding,a=e.legend.margin,s=e.legend.fontSize,c=15*e.pixelRatio,u=5*e.pixelRatio,l=Math.max(e.legend.lineHeight*e.pixelRatio,s);if("top"==e.legend.position||"bottom"==e.legend.position){for(var f=[],h=0,p=[],g=[],d=0;d<t.length;d++){var v=t[d],_=c+u+m(v.name||"undefined",s)+e.legend.itemGap;h+_>e.width-e.padding[1]-e.padding[3]?(f.push(g),p.push(h-e.legend.itemGap),h=_,g=[v]):(h+=_,g.push(v))}if(g.length){f.push(g),p.push(h-e.legend.itemGap),r.widthArr=p;var y=Math.max.apply(null,p);switch(e.legend.float){case"left":r.area.start.x=e.padding[3],r.area.end.x=e.padding[3]+2*o;break;case"right":r.area.start.x=e.width-e.padding[1]-y-2*o,r.area.end.x=e.width-e.padding[1];break;default:r.area.start.x=(e.width-y)/2-o,r.area.end.x=(e.width+y)/2+o}r.area.width=y+2*o,r.area.wholeWidth=y+2*o,r.area.height=f.length*l+2*o,r.area.wholeHeight=f.length*l+2*o+2*a,r.points=f}}else{var S=t.length,E=e.height-e.padding[0]-e.padding[2]-2*a-2*o,C=Math.min(Math.floor(E/l),S);switch(r.area.height=C*l+2*o,r.area.wholeHeight=C*l+2*o,e.legend.float){case"top":r.area.start.y=e.padding[0]+a,r.area.end.y=e.padding[0]+a+r.area.height;break;case"bottom":r.area.start.y=e.height-e.padding[2]-a-r.area.height,r.area.end.y=e.height-e.padding[2]-a;break;default:r.area.start.y=(e.height-r.area.height)/2,r.area.end.y=(e.height+r.area.height)/2}for(var I=S%C===0?S/C:Math.floor(S/C+1),b=[],A=0;A<I;A++){var w=t.slice(A*C,A*C+C);b.push(w)}if(r.points=b,b.length){for(var T=0;T<b.length;T++){for(var x=b[T],D=0,M=0;M<x.length;M++){var L=c+u+m(x[M].name||"undefined",s)+e.legend.itemGap;L>D&&(D=L)}r.widthArr.push(D),r.heightArr.push(x.length*l+2*o)}for(var O=0,N=0;N<r.widthArr.length;N++)O+=r.widthArr[N];r.area.width=O-e.legend.itemGap+2*o,r.area.wholeWidth=r.area.width+o}}switch(e.legend.position){case"top":r.area.start.y=e.padding[0]+a,r.area.end.y=e.padding[0]+a+r.area.height;break;case"bottom":r.area.start.y=e.height-e.padding[2]-r.area.height-a,r.area.end.y=e.height-e.padding[2]-a;break;case"left":r.area.start.x=e.padding[3],r.area.end.x=e.padding[3]+r.area.width;break;case"right":r.area.start.x=e.width-e.padding[1]-r.area.width,r.area.end.x=e.width-e.padding[1];break}return n.legendData=r,r}function F(t,e,i,n){var r={angle:0,xAxisHeight:i.xAxisHeight},o=t.map((function(t){return m(t,e.xAxis.fontSize||i.fontSize)})),a=Math.max.apply(this,o);return 1==e.xAxis.rotateLabel&&a+2*i.xAxisTextPadding>n&&(r.angle=45*Math.PI/180,r.xAxisHeight=2*i.xAxisTextPadding+a*Math.sin(r.angle)),r}function $(t,e,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,r=v(t),o=[];r=r.filter((function(t){return"object"===typeof t&&null!==t?t.constructor==Array?null!==t:null!==t.value:null!==t})),r.map((function(t){"object"===typeof t?t.constructor==Array?"candle"==e.type?t.map((function(t){o.push(t)})):o.push(t[0]):o.push(t.value):o.push(t)}));var a=0,s=0;if(o.length>0&&(a=Math.min.apply(this,o),s=Math.max.apply(this,o)),n>-1?("number"===typeof e.xAxis.data[n].min&&(a=Math.min(e.xAxis.data[n].min,a)),"number"===typeof e.xAxis.data[n].max&&(s=Math.max(e.xAxis.data[n].max,s))):("number"===typeof e.xAxis.min&&(a=Math.min(e.xAxis.min,a)),"number"===typeof e.xAxis.max&&(s=Math.max(e.xAxis.max,s))),a===s){var c=s||10;s+=c}for(var u=d(a,s),l=u.minRange,f=u.maxRange,h=[],p=(f-l)/e.xAxis.splitNumber,g=0;g<=e.xAxis.splitNumber;g++)h.push(l+p*g);return h}function j(t,e,i){var n={angle:0,xAxisHeight:i.xAxisHeight};n.ranges=$(t,e,i),n.rangesFormat=n.ranges.map((function(t){return t=e.xAxis.format?e.xAxis.format(t):r.toFixed(t,2),t}));var o=n.ranges.map((function(t){return t=r.toFixed(t,2),t=e.xAxis.format?e.xAxis.format(Number(t)):t,t}));n=Object.assign(n,Z(o,e,i));var a=n.eachSpacing,s=o.map((function(t){return m(t)})),c=Math.max.apply(this,s);return c+2*i.xAxisTextPadding>a&&(n.angle=45*Math.PI/180,n.xAxisHeight=2*i.xAxisTextPadding+c*Math.sin(n.angle)),!0===e.xAxis.disabled&&(n.xAxisHeight=0),n}function q(t,e,i,n,r){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=r.extra.radar||{};a.max=a.max||0;for(var s=Math.max(a.max,Math.max.apply(null,v(n))),c=[],u=function(r){var a=n[r],u={};u.color=a.color,u.legendShape=a.legendShape,u.pointShape=a.pointShape,u.data=[],a.data.forEach((function(n,r){var a={};a.angle=t[r],a.proportion=n/s,a.position=h(i*a.proportion*o*Math.cos(a.angle),i*a.proportion*o*Math.sin(a.angle),e),u.data.push(a)})),c.push(u)},l=0;l<n.length;l++)u(l);return c}function H(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=0,r=0,o=0;o<t.length;o++){var a=t[o];a.data=null===a.data?0:a.data,n+=a.data}for(var s=0;s<t.length;s++){var c=t[s];c.data=null===c.data?0:c.data,c._proportion_=0===n?1/t.length*i:c.data/n*i,c._radius_=e}for(var u=0;u<t.length;u++){var l=t[u];l._start_=r,r+=2*l._proportion_*Math.PI}return t}function B(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t=t.sort((function(t,e){return parseInt(e.data)-parseInt(t.data)}));for(var n=0;n<t.length;n++)t[n].radius=t[n].data/t[0].data*e*i,t[n]._proportion_=t[n].data/t[0].data;return t.reverse()}function V(t,e,i,n){for(var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=0,a=0,s=[],c=0;c<t.length;c++){var u=t[c];u.data=null===u.data?0:u.data,o+=u.data,s.push(u.data)}for(var l=Math.min.apply(null,s),f=Math.max.apply(null,s),h=n-i,p=0;p<t.length;p++){var g=t[p];g.data=null===g.data?0:g.data,0===o||"area"==e?(g._proportion_=g.data/o*r,g._rose_proportion_=1/t.length*r):(g._proportion_=g.data/o*r,g._rose_proportion_=g.data/o*r),g._radius_=i+h*((g.data-l)/(f-l))}for(var d=0;d<t.length;d++){var m=t[d];m._start_=a,a+=2*m._rose_proportion_*Math.PI}return t}function K(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;1==i&&(i=.999999);for(var n=0;n<t.length;n++){var r=t[n];r.data=null===r.data?0:r.data;var o=void 0;o="circle"==e.type?2:e.endAngle<e.startAngle?2+e.endAngle-e.startAngle:e.startAngle-e.endAngle,r._proportion_=o*r.data*i+e.startAngle,r._proportion_>=2&&(r._proportion_=r._proportion_%2)}return t}function z(t,e,i){for(var n=e-i+1,r=e,o=0;o<t.length;o++)t[o].value=null===t[o].value?0:t[o].value,t[o]._startAngle_=r,t[o]._endAngle_=n*t[o].value+e,t[o]._endAngle_>=2&&(t[o]._endAngle_=t[o]._endAngle_%2),r=t[o]._endAngle_;return t}function Y(t,e,i){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=0;r<t.length;r++){var o=t[r];if(o.data=null===o.data?0:o.data,"auto"==i.pointer.color){for(var a=0;a<e.length;a++)if(o.data<=e[a].value){o.color=e[a].color;break}}else o.color=i.pointer.color;var s=i.startAngle-i.endAngle+1;o._endAngle_=s*o.data+i.startAngle,o._oldAngle_=i.oldAngle,i.oldAngle<i.endAngle&&(o._oldAngle_+=2),o.data>=i.oldData?o._proportion_=(o._endAngle_-o._oldAngle_)*n+i.oldAngle:o._proportion_=o._oldAngle_-(o._oldAngle_-o._endAngle_)*n,o._proportion_>=2&&(o._proportion_=o._proportion_%2)}return t}function W(t){t=H(t);for(var e=0,i=0;i<t.length;i++){var n=t[i],o=n.format?n.format(+n._proportion_.toFixed(2)):r.toFixed(100*n._proportion_)+"%";e=Math.max(e,m(o))}return e}function J(t,e,i,n,r,o){return t.map((function(t){return null===t?null:(t.width=Math.ceil((e-2*r.columePadding)/i),o.extra.column&&o.extra.column.width&&+o.extra.column.width>0&&(t.width=Math.min(t.width,+o.extra.column.width)),t.width<=0&&(t.width=1),t.x+=(n+.5-i/2)*t.width,t)}))}function X(t,e,i,n,r,o,a){return t.map((function(t){return null===t?null:(t.width=Math.ceil((e-2*r.columePadding)/2),o.extra.column&&o.extra.column.width&&+o.extra.column.width>0&&(t.width=Math.min(t.width,+o.extra.column.width)),n>0&&(t.width-=2*a),t)}))}function Q(t,e,i,n,r,o,a){return t.map((function(t,i){return null===t?null:(t.width=Math.ceil((e-2*r.columePadding)/2),o.extra.column&&o.extra.column.width&&+o.extra.column.width>0&&(t.width=Math.min(t.width,+o.extra.column.width)),t)}))}function Z(t,e,i){var n=e.width-e.area[1]-e.area[3],r=e.enableScroll?Math.min(e.xAxis.itemCount,t.length):t.length;("line"==e.type||"area"==e.type)&&r>1&&"justify"==e.xAxis.boundaryGap&&(r-=1);var o=n/r,a=[],s=e.area[3],c=e.width-e.area[1];return t.forEach((function(t,e){a.push(s+e*o)})),"justify"!==e.xAxis.boundaryGap&&(!0===e.enableScroll?a.push(s+t.length*o):a.push(c)),{xAxisPoints:a,startX:s,endX:c,eachSpacing:o}}function tt(t,e,i,n,r,o,a){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,c=[],u=o.height-o.area[0]-o.area[2];return t.forEach((function(t,a){if(null===t)c.push(null);else{var l=[];t.forEach((function(t,c){var f={};f.x=n[a]+Math.round(r/2);var h=t.value||t,p=u*(h-e)/(i-e);p*=s,f.y=o.height-Math.round(p)-o.area[2],l.push(f)})),c.push(l)}})),c}function et(t,e,i,n,r,o,a){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,c="center";"line"!=o.type&&"area"!=o.type||(c=o.xAxis.boundaryGap);var u=[],l=o.height-o.area[0]-o.area[2],f=o.width-o.area[1]-o.area[3];return t.forEach((function(t,a){if(null===t)u.push(null);else{var h={};h.color=t.color,h.x=n[a];var p,g,d,m=t;if("object"===typeof t&&null!==t)if(t.constructor==Array)p=[].concat(o.chartData.xAxisData.ranges),g=p.shift(),d=p.pop(),m=t[1],h.x=o.area[3]+f*(t[0]-g)/(d-g);else m=t.value;"center"==c&&(h.x+=Math.round(r/2));var v=l*(m-e)/(i-e);v*=s,h.y=o.height-Math.round(v)-o.area[2],u.push(h)}})),u}function it(t,e,i,n,r,o,a,s,c){var u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1,l=[],f=o.height-o.area[0]-o.area[2];return t.forEach((function(t,a){if(null===t)l.push(null);else{var h={};if(h.color=t.color,h.x=n[a]+Math.round(r/2),s>0){for(var p=0,g=0;g<=s;g++)p+=c[g].data[a];var d=p-t,m=f*(p-e)/(i-e),v=f*(d-e)/(i-e)}else p=t,m=f*(p-e)/(i-e),v=0;var _=v;m*=u,_*=u,h.y=o.height-Math.round(m)-o.area[2],h.y0=o.height-Math.round(_)-o.area[2],l.push(h)}})),l}function nt(t,e,i,n){var r,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;r="stack"==n?_(t,e.categories.length):v(t);var a=[];r=r.filter((function(t){return"object"===typeof t&&null!==t?t.constructor==Array?null!==t:null!==t.value:null!==t})),r.map((function(t){"object"===typeof t?t.constructor==Array?"candle"==e.type?t.map((function(t){a.push(t)})):a.push(t[1]):a.push(t.value):a.push(t)}));var s=0,c=0;if(a.length>0&&(s=Math.min.apply(this,a),c=Math.max.apply(this,a)),o>-1?("number"===typeof e.yAxis.data[o].min&&(s=Math.min(e.yAxis.data[o].min,s)),"number"===typeof e.yAxis.data[o].max&&(c=Math.max(e.yAxis.data[o].max,c))):("number"===typeof e.yAxis.min&&(s=Math.min(e.yAxis.min,s)),"number"===typeof e.yAxis.max&&(c=Math.max(e.yAxis.max,c))),s===c){var u=c||10;c+=u}for(var l=d(s,c),f=l.minRange,h=l.maxRange,p=[],g=(h-f)/e.yAxis.splitNumber,m=0;m<=e.yAxis.splitNumber;m++)p.push(f+g*m);return p.reverse()}function rt(t,e,i){var o=n({},{type:""},e.extra.column),a=e.yAxis.data.length,s=new Array(a);if(a>0){for(var c=0;c<a;c++){s[c]=[];for(var u=0;u<t.length;u++)t[u].index==c&&s[c].push(t[u])}for(var l=new Array(a),f=new Array(a),h=new Array(a),p=function(t){var n=e.yAxis.data[t];1==e.yAxis.disabled&&(n.disabled=!0),l[t]=nt(s[t],e,i,o.type,t);var a=n.fontSize||i.fontSize;h[t]={position:n.position?n.position:"left",width:0},f[t]=l[t].map((function(e){return e=r.toFixed(e,6),e=n.format?n.format(Number(e)):e,h[t].width=Math.max(h[t].width,m(e,a)+5),e}));var c=n.calibration?4*e.pixelRatio:0;h[t].width+=c+3*e.pixelRatio,!0===n.disabled&&(h[t].width=0)},g=0;g<a;g++)p(g)}else{l=new Array(1),f=new Array(1),h=new Array(1);l[0]=nt(t,e,i,o.type),h[0]={position:"left",width:0};var d=e.yAxis.fontSize||i.fontSize;f[0]=l[0].map((function(t){return t=r.toFixed(t,6),t=e.yAxis.format?e.yAxis.format(Number(t)):t,h[0].width=Math.max(h[0].width,m(t,d)+5),t})),h[0].width+=3*e.pixelRatio,!0===e.yAxis.disabled?(h[0]={position:"left",width:0},e.yAxis.data[0]={disabled:!0}):e.yAxis.data[0]={disabled:!1,position:"left",max:e.yAxis.max,min:e.yAxis.min,format:e.yAxis.format}}return{rangesFormat:f,ranges:l,yAxisWidth:h}}function ot(t,e,i,n,r){for(var o=[].concat(i.chartData.yAxisData.ranges),a=i.height-i.area[0]-i.area[2],s=i.area[0],c=[],u=0;u<o.length;u++){var l=o[u].shift(),f=o[u].pop(),h=l-(l-f)*(t-s)/a;h=i.yAxis.data[u].format?i.yAxis.data[u].format(Number(h)):h.toFixed(0),c.push(String(h))}return c}function at(t,e){for(var i,n,r=e.height-e.area[0]-e.area[2],o=0;o<t.length;o++){t[o].yAxisIndex=t[o].yAxisIndex?t[o].yAxisIndex:0;var a=[].concat(e.chartData.yAxisData.ranges[t[o].yAxisIndex]);i=a.pop(),n=a.shift();var s=r*(t[o].value-i)/(n-i);t[o].y=e.height-Math.round(s)-e.area[2]}return t}function st(t,e){!0!==e.rotateLock?(t.translate(e.height,0),t.rotate(90*Math.PI/180)):!0!==e._rotate_&&(t.translate(e.height,0),t.rotate(90*Math.PI/180),e._rotate_=!0)}function ct(t,e,i,n,r){n.beginPath(),"hollow"==r.dataPointShapeType?(n.setStrokeStyle(e),n.setFillStyle(r.background),n.setLineWidth(2*r.pixelRatio)):(n.setStrokeStyle("#ffffff"),n.setFillStyle(e),n.setLineWidth(1*r.pixelRatio)),"diamond"===i?t.forEach((function(t,e){null!==t&&(n.moveTo(t.x,t.y-4.5),n.lineTo(t.x-4.5,t.y),n.lineTo(t.x,t.y+4.5),n.lineTo(t.x+4.5,t.y),n.lineTo(t.x,t.y-4.5))})):"circle"===i?t.forEach((function(t,e){null!==t&&(n.moveTo(t.x+2.5*r.pixelRatio,t.y),n.arc(t.x,t.y,3*r.pixelRatio,0,2*Math.PI,!1))})):"rect"===i?t.forEach((function(t,e){null!==t&&(n.moveTo(t.x-3.5,t.y-3.5),n.rect(t.x-3.5,t.y-3.5,7,7))})):"triangle"===i&&t.forEach((function(t,e){null!==t&&(n.moveTo(t.x,t.y-4.5),n.lineTo(t.x-4.5,t.y+4.5),n.lineTo(t.x+4.5,t.y+4.5),n.lineTo(t.x,t.y-4.5))})),n.closePath(),n.fill(),n.stroke()}function ut(t,e,i,n){var r=t.title.fontSize||e.titleFontSize,o=t.subtitle.fontSize||e.subtitleFontSize,a=t.title.name||"",s=t.subtitle.name||"",c=t.title.color||e.titleColor,u=t.subtitle.color||e.subtitleColor,l=a?r:0,f=s?o:0,h=5;if(s){var p=m(s,o),g=n.x-p/2+(t.subtitle.offsetX||0),d=n.y+o/2+(t.subtitle.offsetY||0);a&&(d+=(l+h)/2),i.beginPath(),i.setFontSize(o),i.setFillStyle(u),i.fillText(s,g,d),i.closePath(),i.stroke()}if(a){var v=m(a,r),_=n.x-v/2+(t.title.offsetX||0),y=n.y+r/2+(t.title.offsetY||0);s&&(y-=(f+h)/2),i.beginPath(),i.setFontSize(r),i.setFillStyle(c),i.fillText(a,_,y),i.closePath(),i.stroke()}}function lt(t,e,i,n){var r=e.data;t.forEach((function(t,o){if(null!==t){n.beginPath(),n.setFontSize(e.textSize||i.fontSize),n.setFillStyle(e.textColor||"#666666");var a=r[o];"object"===typeof r[o]&&null!==r[o]&&(a=r[o].constructor==Array?r[o][1]:r[o].value);var s=e.format?e.format(a):a;n.fillText(String(s),t.x-m(s,e.textSize||i.fontSize)/2,t.y-4),n.closePath(),n.stroke()}}))}function ft(t,e,i,n,r,o){e-=t.width/2+r.gaugeLabelTextMargin;for(var a=t.startAngle-t.endAngle+1,s=a/t.splitLine.splitNumber,c=t.endNumber-t.startNumber,u=c/t.splitLine.splitNumber,l=t.startAngle,f=t.startNumber,h=0;h<t.splitLine.splitNumber+1;h++){var p={x:e*Math.cos(l*Math.PI),y:e*Math.sin(l*Math.PI)},g=t.labelFormat?t.labelFormat(f):f;p.x+=i.x-m(g)/2,p.y+=i.y;var d=p.x,v=p.y;o.beginPath(),o.setFontSize(r.fontSize),o.setFillStyle(t.labelColor||"#666666"),o.fillText(g,d,v+r.fontSize/2),o.closePath(),o.stroke(),l+=s,l>=2&&(l%=2),f+=u}}function ht(t,e,i,n,o,a){var s=n.extra.radar||{};e+=o.radarLabelTextMargin,t.forEach((function(t,c){var u={x:e*Math.cos(t),y:e*Math.sin(t)},l=h(u.x,u.y,i),f=l.x,p=l.y;r.approximatelyEqual(u.x,0)?f-=m(n.categories[c]||"")/2:u.x<0&&(f-=m(n.categories[c]||"")),a.beginPath(),a.setFontSize(o.fontSize),a.setFillStyle(s.labelColor||"#666666"),a.fillText(n.categories[c]||"",f,p+o.fontSize/2),a.closePath(),a.stroke()}))}function pt(t,e,i,n,o,a){for(var s=i.pieChartLinePadding,c=[],u=null,l=t.map((function(t){var e=t.format?t.format(+t._proportion_.toFixed(2)):r.toFixed(100*t._proportion_.toFixed(4))+"%";t._rose_proportion_&&(t._proportion_=t._rose_proportion_);var i=2*Math.PI-(t._start_+2*Math.PI*t._proportion_/2),n=t.color,o=t._radius_;return{arc:i,text:e,color:n,radius:o,textColor:t.textColor,textSize:t.textSize}})),f=0;f<l.length;f++){var g=l[f],d=Math.cos(g.arc)*(g.radius+s),v=Math.sin(g.arc)*(g.radius+s),_=Math.cos(g.arc)*g.radius,y=Math.sin(g.arc)*g.radius,S=d>=0?d+i.pieChartTextPadding:d-i.pieChartTextPadding,E=v,C=m(g.text,g.textSize||i.fontSize),I=E;u&&r.isSameXCoordinateArea(u.start,{x:S})&&(I=S>0?Math.min(E,u.start.y):d<0?Math.max(E,u.start.y):E>0?Math.max(E,u.start.y):Math.min(E,u.start.y)),S<0&&(S-=C);var b={lineStart:{x:_,y:y},lineEnd:{x:d,y:v},start:{x:S,y:I},width:C,height:i.fontSize,text:g.text,color:g.color,textColor:g.textColor,textSize:g.textSize};u=p(b,u),c.push(u)}for(var A=0;A<c.length;A++){var w=c[A],T=h(w.lineStart.x,w.lineStart.y,a),x=h(w.lineEnd.x,w.lineEnd.y,a),D=h(w.start.x,w.start.y,a);n.setLineWidth(1*e.pixelRatio),n.setFontSize(i.fontSize),n.beginPath(),n.setStrokeStyle(w.color),n.setFillStyle(w.color),n.moveTo(T.x,T.y);var M=w.start.x<0?D.x+w.width:D.x,L=w.start.x<0?D.x-5:D.x+5;n.quadraticCurveTo(x.x,x.y,M,D.y),n.moveTo(T.x,T.y),n.stroke(),n.closePath(),n.beginPath(),n.moveTo(D.x+w.width,D.y),n.arc(M,D.y,2,0,2*Math.PI),n.closePath(),n.fill(),n.beginPath(),n.setFontSize(w.textSize||i.fontSize),n.setFillStyle(w.textColor||"#666666"),n.fillText(w.text,L,D.y+3),n.closePath(),n.stroke(),n.closePath()}}function gt(t,e,i,n){var r=e.extra.tooltip||{};r.gridType=void 0==r.gridType?"solid":r.gridType,r.dashLength=void 0==r.dashLength?4:r.dashLength;var a=e.area[0],s=e.height-e.area[2];if("dash"==r.gridType&&n.setLineDash([r.dashLength,r.dashLength]),n.setStrokeStyle(r.gridColor||"#cccccc"),n.setLineWidth(1*e.pixelRatio),n.beginPath(),n.moveTo(t,a),n.lineTo(t,s),n.stroke(),n.setLineDash([]),r.xAxisLabel){var c=e.categories[e.tooltip.index];n.setFontSize(i.fontSize);var u=m(c,i.fontSize),l=t-.5*u,f=s;n.beginPath(),n.setFillStyle(o(r.labelBgColor||i.toolTipBackground,r.labelBgOpacity||i.toolTipOpacity)),n.setStrokeStyle(r.labelBgColor||i.toolTipBackground),n.setLineWidth(1*e.pixelRatio),n.rect(l-i.toolTipPadding,f,u+2*i.toolTipPadding,i.fontSize+2*i.toolTipPadding),n.closePath(),n.stroke(),n.fill(),n.beginPath(),n.setFontSize(i.fontSize),n.setFillStyle(r.labelFontColor||i.fontColor),n.fillText(String(c),l,f+i.toolTipPadding+i.fontSize),n.closePath(),n.stroke()}}function dt(t,e,i){for(var r=n({},{type:"solid",dashLength:4,data:[]},t.extra.markLine),a=t.area[3],s=t.width-t.area[1],c=at(r.data,t),u=0;u<c.length;u++){var l=n({},{lineColor:"#DE4A42",showLabel:!1,labelFontColor:"#666666",labelBgColor:"#DFE8FF",labelBgOpacity:.8,yAxisIndex:0},c[u]);if("dash"==r.type&&i.setLineDash([r.dashLength,r.dashLength]),i.setStrokeStyle(l.lineColor),i.setLineWidth(1*t.pixelRatio),i.beginPath(),i.moveTo(a,l.y),i.lineTo(s,l.y),i.stroke(),i.setLineDash([]),l.showLabel){var f=t.yAxis.format?t.yAxis.format(Number(l.value)):l.value;i.setFontSize(e.fontSize);var h=m(f,e.fontSize),p=t.padding[3]+e.yAxisTitleWidth-e.toolTipPadding,g=Math.max(t.area[3],h+2*e.toolTipPadding),d=g-p,v=p+(d-h)/2,_=l.y;i.setFillStyle(o(l.labelBgColor,l.labelBgOpacity)),i.setStrokeStyle(l.labelBgColor),i.setLineWidth(1*t.pixelRatio),i.beginPath(),i.rect(p,_-.5*e.fontSize-e.toolTipPadding,d,e.fontSize+2*e.toolTipPadding),i.closePath(),i.stroke(),i.fill(),i.beginPath(),i.setFontSize(e.fontSize),i.setFillStyle(l.labelFontColor),i.fillText(String(f),v,_+.5*e.fontSize),i.stroke()}}}function mt(t,e,i,r,a){var s=n({},{gridType:"solid",dashLength:4},t.extra.tooltip),c=t.area[3],u=t.width-t.area[1];if("dash"==s.gridType&&i.setLineDash([s.dashLength,s.dashLength]),i.setStrokeStyle(s.gridColor||"#cccccc"),i.setLineWidth(1*t.pixelRatio),i.beginPath(),i.moveTo(c,t.tooltip.offset.y),i.lineTo(u,t.tooltip.offset.y),i.stroke(),i.setLineDash([]),s.yAxisLabel)for(var l=ot(t.tooltip.offset.y,t.series,t,e,r),f=t.chartData.yAxisData.yAxisWidth,h=t.area[3],p=t.width-t.area[1],g=0;g<l.length;g++){i.setFontSize(e.fontSize);var d=m(l[g],e.fontSize),v=void 0,_=void 0,y=void 0;"left"==f[g].position?(v=h-f[g].width,_=Math.max(v,v+d+2*e.toolTipPadding)):(v=p,_=Math.max(v+f[g].width,v+d+2*e.toolTipPadding)),y=_-v;var S=v+(y-d)/2,E=t.tooltip.offset.y;i.beginPath(),i.setFillStyle(o(s.labelBgColor||e.toolTipBackground,s.labelBgOpacity||e.toolTipOpacity)),i.setStrokeStyle(s.labelBgColor||e.toolTipBackground),i.setLineWidth(1*t.pixelRatio),i.rect(v,E-.5*e.fontSize-e.toolTipPadding,y,e.fontSize+2*e.toolTipPadding),i.closePath(),i.stroke(),i.fill(),i.beginPath(),i.setFontSize(e.fontSize),i.setFillStyle(s.labelFontColor||e.fontColor),i.fillText(l[g],S,E+.5*e.fontSize),i.closePath(),i.stroke(),"left"==f[g].position?h-=f[g].width+t.yAxis.padding:p+=f[g].width+t.yAxis.padding}}function vt(t,e,i,r,a){var s=n({},{activeBgColor:"#000000",activeBgOpacity:.08},e.extra.tooltip),c=e.area[0],u=e.height-e.area[2];r.beginPath(),r.setFillStyle(o(s.activeBgColor,s.activeBgOpacity)),r.rect(t-a/2,c,a,u-c),r.closePath(),r.fill()}function _t(t,e,i,r,a,s,c){var u=n({},{showBox:!0,bgColor:"#000000",bgOpacity:.7,fontColor:"#FFFFFF"},i.extra.tooltip),l=4*i.pixelRatio,f=5*i.pixelRatio,h=8*i.pixelRatio,p=!1;"line"!=i.type&&"area"!=i.type&&"candle"!=i.type&&"mix"!=i.type||gt(i.tooltip.offset.x,i,r,a),e=n({x:0,y:0},e),e.y-=8*i.pixelRatio;var g=t.map((function(t){return m(t.text,r.fontSize)})),d=l+f+4*r.toolTipPadding+Math.max.apply(null,g),v=2*r.toolTipPadding+t.length*r.toolTipLineHeight;0!=u.showBox&&(e.x-Math.abs(i._scrollDistance_)+h+d>i.width&&(p=!0),v+e.y>i.height&&(e.y=i.height-v),a.beginPath(),a.setFillStyle(o(u.bgColor||r.toolTipBackground,u.bgOpacity||r.toolTipOpacity)),p?(a.moveTo(e.x,e.y+10*i.pixelRatio),a.lineTo(e.x-h,e.y+10*i.pixelRatio-5*i.pixelRatio),a.lineTo(e.x-h,e.y),a.lineTo(e.x-h-Math.round(d),e.y),a.lineTo(e.x-h-Math.round(d),e.y+v),a.lineTo(e.x-h,e.y+v),a.lineTo(e.x-h,e.y+10*i.pixelRatio+5*i.pixelRatio),a.lineTo(e.x,e.y+10*i.pixelRatio)):(a.moveTo(e.x,e.y+10*i.pixelRatio),a.lineTo(e.x+h,e.y+10*i.pixelRatio-5*i.pixelRatio),a.lineTo(e.x+h,e.y),a.lineTo(e.x+h+Math.round(d),e.y),a.lineTo(e.x+h+Math.round(d),e.y+v),a.lineTo(e.x+h,e.y+v),a.lineTo(e.x+h,e.y+10*i.pixelRatio+5*i.pixelRatio),a.lineTo(e.x,e.y+10*i.pixelRatio)),a.closePath(),a.fill(),t.forEach((function(t,i){if(null!==t.color){a.beginPath(),a.setFillStyle(t.color);var n=e.x+h+2*r.toolTipPadding,o=e.y+(r.toolTipLineHeight-r.fontSize)/2+r.toolTipLineHeight*i+r.toolTipPadding+1;p&&(n=e.x-d-h+2*r.toolTipPadding),a.fillRect(n,o,l,r.fontSize),a.closePath()}})),t.forEach((function(t,i){var n=e.x+h+2*r.toolTipPadding+l+f;p&&(n=e.x-d-h+2*r.toolTipPadding+ +l+f);var o=e.y+(r.toolTipLineHeight-r.fontSize)/2+r.toolTipLineHeight*i+r.toolTipPadding;a.beginPath(),a.setFontSize(r.fontSize),a.setFillStyle(u.fontColor),a.fillText(t.text,n,o+r.fontSize),a.closePath(),a.stroke()})))}function yt(t,e,i,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=e.chartData.xAxisData,s=a.xAxisPoints,c=a.eachSpacing,u=n({},{type:"group",width:c/2,meter:{border:4,fillColor:"#FFFFFF"}},e.extra.column),l=[];r.save();var f=-2,h=s.length+2;return e._scrollDistance_&&0!==e._scrollDistance_&&!0===e.enableScroll&&(r.translate(e._scrollDistance_,0),f=Math.floor(-e._scrollDistance_/c)-2,h=f+e.xAxis.itemCount+4),e.tooltip&&e.tooltip.textList&&e.tooltip.textList.length&&1===o&&vt(e.tooltip.offset.x,e,i,r,c),t.forEach((function(n,a){var p,g,d;p=[].concat(e.chartData.yAxisData.ranges[n.index]),g=p.pop(),d=p.shift();var m=n.data;switch(u.type){case"group":var v=et(m,g,d,s,c,e,i,o),_=it(m,g,d,s,c,e,i,a,t,o);l.push(_),v=J(v,c,t.length,a,i,e);for(var y=0;y<v.length;y++){var S=v[y];if(null!==S&&y>f&&y<h){r.beginPath(),r.setStrokeStyle(S.color||n.color),r.setLineWidth(1),r.setFillStyle(S.color||n.color);var E=S.x-S.width/2,C=e.height-S.y-e.area[2];r.moveTo(E-1,S.y),r.lineTo(E+S.width-2,S.y),r.lineTo(E+S.width-2,e.height-e.area[2]),r.lineTo(E,e.height-e.area[2]),r.lineTo(E,S.y),r.closePath(),r.stroke(),r.fill()}}break;case"stack":v=it(m,g,d,s,c,e,i,a,t,o);l.push(v),v=Q(v,c,t.length,a,i,e,t);for(var I=0;I<v.length;I++){var b=v[I];if(null!==b&&I>f&&I<h){r.beginPath(),r.setFillStyle(b.color||n.color);E=b.x-b.width/2+1,C=e.height-b.y-e.area[2];var A=e.height-b.y0-e.area[2];a>0&&(C-=A),r.moveTo(E,b.y),r.fillRect(E,b.y,b.width-2,C),r.closePath(),r.fill()}}break;case"meter":v=et(m,g,d,s,c,e,i,o);if(l.push(v),v=X(v,c,t.length,a,i,e,u.meter.border),0==a)for(var w=0;w<v.length;w++){var T=v[w];if(null!==T&&w>f&&w<h){r.beginPath(),r.setFillStyle(u.meter.fillColor);E=T.x-T.width/2,C=e.height-T.y-e.area[2];r.moveTo(E,T.y),r.fillRect(E,T.y,T.width,C),r.closePath(),r.fill(),u.meter.border>0&&(r.beginPath(),r.setStrokeStyle(n.color),r.setLineWidth(u.meter.border*e.pixelRatio),r.moveTo(E+.5*u.meter.border,T.y+C),r.lineTo(E+.5*u.meter.border,T.y+.5*u.meter.border),r.lineTo(E+T.width-.5*u.meter.border,T.y+.5*u.meter.border),r.lineTo(E+T.width-.5*u.meter.border,T.y+C),r.stroke())}}else for(var x=0;x<v.length;x++){var D=v[x];if(null!==D&&x>f&&x<h){r.beginPath(),r.setFillStyle(D.color||n.color);E=D.x-D.width/2,C=e.height-D.y-e.area[2];r.moveTo(E,D.y),r.fillRect(E,D.y,D.width,C),r.closePath(),r.fill()}}break}})),!1!==e.dataLabel&&1===o&&t.forEach((function(n,a){var l,f,h;l=[].concat(e.chartData.yAxisData.ranges[n.index]),f=l.pop(),h=l.shift();var p=n.data;switch(u.type){case"group":var g=et(p,f,h,s,c,e,i,o);g=J(g,c,t.length,a,i,e),lt(g,n,i,r);break;case"stack":g=it(p,f,h,s,c,e,i,a,t,o);lt(g,n,i,r);break;case"meter":g=et(p,f,h,s,c,e,i,o);lt(g,n,i,r);break}})),r.restore(),{xAxisPoints:s,calPoints:l,eachSpacing:c}}function St(t,e,i,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=n({},{color:{},average:{}},i.extra.candle);s.color=n({},{upLine:"#f04864",upFill:"#f04864",downLine:"#2fc25b",downFill:"#2fc25b"},s.color),s.average=n({},{show:!1,name:[],day:[],color:r.colors},s.average),i.extra.candle=s;var c=i.chartData.xAxisData,u=c.xAxisPoints,l=c.eachSpacing,h=[];o.save();var p=-2,g=u.length+2,d=0,m=i.width+l;return i._scrollDistance_&&0!==i._scrollDistance_&&!0===i.enableScroll&&(o.translate(i._scrollDistance_,0),p=Math.floor(-i._scrollDistance_/l)-2,g=p+i.xAxis.itemCount+4,d=-i._scrollDistance_-l+i.area[3],m=d+(i.xAxis.itemCount+4)*l),s.average.show&&e.forEach((function(t,e){var n,s,c;n=[].concat(i.chartData.yAxisData.ranges[t.index]),s=n.pop(),c=n.shift();for(var h=t.data,p=et(h,s,c,u,l,i,r,a),g=G(p),v=0;v<g.length;v++){var _=g[v];if(o.beginPath(),o.setStrokeStyle(t.color),o.setLineWidth(1),1===_.length)o.moveTo(_[0].x,_[0].y),o.arc(_[0].x,_[0].y,1,0,2*Math.PI);else{o.moveTo(_[0].x,_[0].y);for(var y=0,S=0;S<_.length;S++){var E=_[S];if(0==y&&E.x>d&&(o.moveTo(E.x,E.y),y=1),S>0&&E.x>d&&E.x<m){var C=f(_,S-1);o.bezierCurveTo(C.ctrA.x,C.ctrA.y,C.ctrB.x,C.ctrB.y,E.x,E.y)}}o.moveTo(_[0].x,_[0].y)}o.closePath(),o.stroke()}})),t.forEach((function(t,e){var n,c,f;n=[].concat(i.chartData.yAxisData.ranges[t.index]),c=n.pop(),f=n.shift();var d=t.data,m=tt(d,c,f,u,l,i,r,a);h.push(m);for(var v=G(m),_=0;_<v[0].length;_++)if(_>p&&_<g){var y=v[0][_];o.beginPath(),d[_][1]-d[_][0]>0?(o.setStrokeStyle(s.color.upLine),o.setFillStyle(s.color.upFill),o.setLineWidth(1*i.pixelRatio),o.moveTo(y[3].x,y[3].y),o.lineTo(y[1].x,y[1].y),o.lineTo(y[1].x-l/4,y[1].y),o.lineTo(y[0].x-l/4,y[0].y),o.lineTo(y[0].x,y[0].y),o.lineTo(y[2].x,y[2].y),o.lineTo(y[0].x,y[0].y),o.lineTo(y[0].x+l/4,y[0].y),o.lineTo(y[1].x+l/4,y[1].y),o.lineTo(y[1].x,y[1].y),o.moveTo(y[3].x,y[3].y)):(o.setStrokeStyle(s.color.downLine),o.setFillStyle(s.color.downFill),o.setLineWidth(1*i.pixelRatio),o.moveTo(y[3].x,y[3].y),o.lineTo(y[0].x,y[0].y),o.lineTo(y[0].x-l/4,y[0].y),o.lineTo(y[1].x-l/4,y[1].y),o.lineTo(y[1].x,y[1].y),o.lineTo(y[2].x,y[2].y),o.lineTo(y[1].x,y[1].y),o.lineTo(y[1].x+l/4,y[1].y),o.lineTo(y[0].x+l/4,y[0].y),o.lineTo(y[0].x,y[0].y),o.moveTo(y[3].x,y[3].y)),o.closePath(),o.fill(),o.stroke()}})),o.restore(),{xAxisPoints:u,calPoints:h,eachSpacing:l}}function Et(t,e,i,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=n({},{type:"straight",opacity:.2,addLine:!1,width:2,gradient:!1},e.extra.area),c=e.chartData.xAxisData,u=c.xAxisPoints,l=c.eachSpacing,h=e.height-e.area[2],p=[];r.save();var g=0,d=e.width+l;return e._scrollDistance_&&0!==e._scrollDistance_&&!0===e.enableScroll&&(r.translate(e._scrollDistance_,0),g=-e._scrollDistance_-l+e.area[3],d=g+(e.xAxis.itemCount+4)*l),t.forEach((function(t,n){var c,m,v;c=[].concat(e.chartData.yAxisData.ranges[t.index]),m=c.pop(),v=c.shift();var _=t.data,y=et(_,m,v,u,l,e,i,a);p.push(y);for(var S=G(y),E=0;E<S.length;E++){var C=S[E];if(r.beginPath(),r.setStrokeStyle(o(t.color,s.opacity)),s.gradient){var I=r.createLinearGradient(0,e.area[0],0,e.height-e.area[2]);I.addColorStop("0",o(t.color,s.opacity)),I.addColorStop("1.0",o("#FFFFFF",.1)),r.setFillStyle(I)}else r.setFillStyle(o(t.color,s.opacity));if(r.setLineWidth(s.width*e.pixelRatio),C.length>1){var b=C[0],A=C[C.length-1];r.moveTo(b.x,b.y);var w=0;if("curve"===s.type)for(var T=0;T<C.length;T++){var x=C[T];if(0==w&&x.x>g&&(r.moveTo(x.x,x.y),w=1),T>0&&x.x>g&&x.x<d){var D=f(C,T-1);r.bezierCurveTo(D.ctrA.x,D.ctrA.y,D.ctrB.x,D.ctrB.y,x.x,x.y)}}else for(var M=0;M<C.length;M++){var L=C[M];0==w&&L.x>g&&(r.moveTo(L.x,L.y),w=1),M>0&&L.x>g&&L.x<d&&r.lineTo(L.x,L.y)}r.lineTo(A.x,h),r.lineTo(b.x,h),r.lineTo(b.x,b.y)}else{var O=C[0];r.moveTo(O.x-l/2,O.y),r.lineTo(O.x+l/2,O.y),r.lineTo(O.x+l/2,h),r.lineTo(O.x-l/2,h),r.moveTo(O.x-l/2,O.y)}if(r.closePath(),r.fill(),s.addLine){if("dash"==t.lineType){var N=t.dashLength?t.dashLength:8;N*=e.pixelRatio,r.setLineDash([N,N])}if(r.beginPath(),r.setStrokeStyle(t.color),r.setLineWidth(s.width*e.pixelRatio),1===C.length)r.moveTo(C[0].x,C[0].y),r.arc(C[0].x,C[0].y,1,0,2*Math.PI);else{r.moveTo(C[0].x,C[0].y);var P=0;if("curve"===s.type)for(var R=0;R<C.length;R++){var k=C[R];if(0==P&&k.x>g&&(r.moveTo(k.x,k.y),P=1),R>0&&k.x>g&&k.x<d){var U=f(C,R-1);r.bezierCurveTo(U.ctrA.x,U.ctrA.y,U.ctrB.x,U.ctrB.y,k.x,k.y)}}else for(var F=0;F<C.length;F++){var $=C[F];0==P&&$.x>g&&(r.moveTo($.x,$.y),P=1),F>0&&$.x>g&&$.x<d&&r.lineTo($.x,$.y)}r.moveTo(C[0].x,C[0].y)}r.stroke(),r.setLineDash([])}}!1!==e.dataPointShape&&ct(y,t.color,t.pointShape,r,e)})),!1!==e.dataLabel&&1===a&&t.forEach((function(t,n){var o,s,c;o=[].concat(e.chartData.yAxisData.ranges[t.index]),s=o.pop(),c=o.shift();var f=t.data,h=et(f,s,c,u,l,e,i,a);lt(h,t,i,r)})),r.restore(),{xAxisPoints:u,calPoints:p,eachSpacing:l}}function Ct(t,e,i,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=n({},{type:"straight",width:2},e.extra.line);a.width*=e.pixelRatio;var s=e.chartData.xAxisData,c=s.xAxisPoints,u=s.eachSpacing,l=[];r.save();var h=0,p=e.width+u;return e._scrollDistance_&&0!==e._scrollDistance_&&!0===e.enableScroll&&(r.translate(e._scrollDistance_,0),h=-e._scrollDistance_-u+e.area[3],p=h+(e.xAxis.itemCount+4)*u),t.forEach((function(t,n){var s,g,d;s=[].concat(e.chartData.yAxisData.ranges[t.index]),g=s.pop(),d=s.shift();var m=t.data,v=et(m,g,d,c,u,e,i,o);l.push(v);var _=G(v);if("dash"==t.lineType){var y=t.dashLength?t.dashLength:8;y*=e.pixelRatio,r.setLineDash([y,y])}r.beginPath(),r.setStrokeStyle(t.color),r.setLineWidth(a.width),_.forEach((function(t,e){if(1===t.length)r.moveTo(t[0].x,t[0].y),r.arc(t[0].x,t[0].y,1,0,2*Math.PI);else{r.moveTo(t[0].x,t[0].y);var i=0;if("curve"===a.type)for(var n=0;n<t.length;n++){var o=t[n];if(0==i&&o.x>h&&(r.moveTo(o.x,o.y),i=1),n>0&&o.x>h&&o.x<p){var s=f(t,n-1);r.bezierCurveTo(s.ctrA.x,s.ctrA.y,s.ctrB.x,s.ctrB.y,o.x,o.y)}}else for(var c=0;c<t.length;c++){var u=t[c];0==i&&u.x>h&&(r.moveTo(u.x,u.y),i=1),c>0&&u.x>h&&u.x<p&&r.lineTo(u.x,u.y)}r.moveTo(t[0].x,t[0].y)}})),r.stroke(),r.setLineDash([]),!1!==e.dataPointShape&&ct(v,t.color,t.pointShape,r,e)})),!1!==e.dataLabel&&1===o&&t.forEach((function(t,n){var a,s,l;a=[].concat(e.chartData.yAxisData.ranges[t.index]),s=a.pop(),l=a.shift();var f=t.data,h=et(f,s,l,c,u,e,i,o);lt(h,t,i,r)})),r.restore(),{xAxisPoints:c,calPoints:l,eachSpacing:u}}function It(t,e,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=e.chartData.xAxisData,s=a.xAxisPoints,c=a.eachSpacing,u=e.height-e.area[2],l=[],h=0,p=0;t.forEach((function(t,e){"column"==t.type&&(p+=1)})),n.save();var g=-2,d=s.length+2,m=0,v=e.width+c;if(e._scrollDistance_&&0!==e._scrollDistance_&&!0===e.enableScroll&&(n.translate(e._scrollDistance_,0),g=Math.floor(-e._scrollDistance_/c)-2,d=g+e.xAxis.itemCount+4,m=-e._scrollDistance_-c+e.area[3],v=m+(e.xAxis.itemCount+4)*c),t.forEach((function(t,a){var _,y,S;_=[].concat(e.chartData.yAxisData.ranges[t.index]),y=_.pop(),S=_.shift();var E=t.data,C=et(E,y,S,s,c,e,i,r);if(l.push(C),"column"==t.type){C=J(C,c,p,h,i,e);for(var I=0;I<C.length;I++){var b=C[I];if(null!==b&&I>g&&I<d){n.beginPath(),n.setStrokeStyle(b.color||t.color),n.setLineWidth(1),n.setFillStyle(b.color||t.color);var A=b.x-b.width/2;e.height,b.y,e.area[2];n.moveTo(A,b.y),n.moveTo(A-1,b.y),n.lineTo(A+b.width-2,b.y),n.lineTo(A+b.width-2,e.height-e.area[2]),n.lineTo(A,e.height-e.area[2]),n.lineTo(A,b.y),n.closePath(),n.stroke(),n.fill(),n.closePath(),n.fill()}}h+=1}if("area"==t.type)for(var w=G(C),T=0;T<w.length;T++){var x=w[T];if(n.beginPath(),n.setStrokeStyle(t.color),n.setFillStyle(o(t.color,.2)),n.setLineWidth(2*e.pixelRatio),x.length>1){var D=x[0],M=x[x.length-1];n.moveTo(D.x,D.y);var L=0;if("curve"===t.style)for(var O=0;O<x.length;O++){var N=x[O];if(0==L&&N.x>m&&(n.moveTo(N.x,N.y),L=1),O>0&&N.x>m&&N.x<v){var P=f(x,O-1);n.bezierCurveTo(P.ctrA.x,P.ctrA.y,P.ctrB.x,P.ctrB.y,N.x,N.y)}}else for(var R=0;R<x.length;R++){var k=x[R];0==L&&k.x>m&&(n.moveTo(k.x,k.y),L=1),R>0&&k.x>m&&k.x<v&&n.lineTo(k.x,k.y)}n.lineTo(M.x,u),n.lineTo(D.x,u),n.lineTo(D.x,D.y)}else{var U=x[0];n.moveTo(U.x-c/2,U.y),n.lineTo(U.x+c/2,U.y),n.lineTo(U.x+c/2,u),n.lineTo(U.x-c/2,u),n.moveTo(U.x-c/2,U.y)}n.closePath(),n.fill()}if("line"==t.type){var F=G(C);F.forEach((function(i,r){if("dash"==t.lineType){var o=t.dashLength?t.dashLength:8;o*=e.pixelRatio,n.setLineDash([o,o])}if(n.beginPath(),n.setStrokeStyle(t.color),n.setLineWidth(2*e.pixelRatio),1===i.length)n.moveTo(i[0].x,i[0].y),n.arc(i[0].x,i[0].y,1,0,2*Math.PI);else{n.moveTo(i[0].x,i[0].y);var a=0;if("curve"==t.style)for(var s=0;s<i.length;s++){var c=i[s];if(0==a&&c.x>m&&(n.moveTo(c.x,c.y),a=1),s>0&&c.x>m&&c.x<v){var u=f(i,s-1);n.bezierCurveTo(u.ctrA.x,u.ctrA.y,u.ctrB.x,u.ctrB.y,c.x,c.y)}}else for(var l=0;l<i.length;l++){var h=i[l];0==a&&h.x>m&&(n.moveTo(h.x,h.y),a=1),l>0&&h.x>m&&h.x<v&&n.lineTo(h.x,h.y)}n.moveTo(i[0].x,i[0].y)}n.stroke(),n.setLineDash([])}))}"point"==t.type&&(t.addPoint=!0),1==t.addPoint&&"column"!==t.type&&ct(C,t.color,t.pointShape,n,e)})),!1!==e.dataLabel&&1===r){h=0;t.forEach((function(t,o){var a,u,l;a=[].concat(e.chartData.yAxisData.ranges[t.index]),u=a.pop(),l=a.shift();var f=t.data,g=et(f,u,l,s,c,e,i,r);"column"!==t.type?lt(g,t,i,n):(g=J(g,c,p,h,i,e),lt(g,t,i,n),h+=1)}))}return n.restore(),{xAxisPoints:s,calPoints:l,eachSpacing:c}}function bt(t,e,i,n,r,o){var a=t.extra.tooltip||{};a.horizentalLine&&t.tooltip&&1===n&&("line"==t.type||"area"==t.type||"column"==t.type||"candle"==t.type||"mix"==t.type)&&mt(t,e,i,r,o),i.save(),t._scrollDistance_&&0!==t._scrollDistance_&&!0===t.enableScroll&&i.translate(t._scrollDistance_,0),t.tooltip&&t.tooltip.textList&&t.tooltip.textList.length&&1===n&&_t(t.tooltip.textList,t.tooltip.offset,t,e,i,r,o),i.restore()}function At(t,e,i,n){var r=e.chartData.xAxisData,o=r.xAxisPoints,a=r.startX,s=r.endX,c=r.eachSpacing,u="center";"line"!=e.type&&"area"!=e.type||(u=e.xAxis.boundaryGap);var f=e.height-e.area[2],h=e.area[0];if(e.enableScroll&&e.xAxis.scrollShow){var p=e.height-e.area[2]+i.xAxisHeight,g=s-a,d=c*(o.length-1),v=g*g/d,_=0;e._scrollDistance_&&(_=-e._scrollDistance_*g/d),n.beginPath(),n.setLineCap("round"),n.setLineWidth(6*e.pixelRatio),n.setStrokeStyle(e.xAxis.scrollBackgroundColor||"#EFEBEF"),n.moveTo(a,p),n.lineTo(s,p),n.stroke(),n.closePath(),n.beginPath(),n.setLineCap("round"),n.setLineWidth(6*e.pixelRatio),n.setStrokeStyle(e.xAxis.scrollColor||"#A6A6A6"),n.moveTo(a+_,p),n.lineTo(a+_+v,p),n.stroke(),n.closePath(),n.setLineCap("butt")}if(n.save(),e._scrollDistance_&&0!==e._scrollDistance_&&n.translate(e._scrollDistance_,0),!0===e.xAxis.calibration&&(n.setStrokeStyle(e.xAxis.gridColor||"#cccccc"),n.setLineCap("butt"),n.setLineWidth(1*e.pixelRatio),o.forEach((function(t,i){i>0&&(n.beginPath(),n.moveTo(t-c/2,f),n.lineTo(t-c/2,f+3*e.pixelRatio),n.closePath(),n.stroke())}))),!0!==e.xAxis.disableGrid&&(n.setStrokeStyle(e.xAxis.gridColor||"#cccccc"),n.setLineCap("butt"),n.setLineWidth(1*e.pixelRatio),"dash"==e.xAxis.gridType&&n.setLineDash([e.xAxis.dashLength,e.xAxis.dashLength]),e.xAxis.gridEval=e.xAxis.gridEval||1,o.forEach((function(t,i){i%e.xAxis.gridEval==0&&(n.beginPath(),n.moveTo(t,f),n.lineTo(t,h),n.stroke())})),n.setLineDash([])),!0!==e.xAxis.disabled){var y=t.length;e.xAxis.labelCount&&(y=e.xAxis.itemCount?Math.ceil(t.length/e.xAxis.itemCount*e.xAxis.labelCount):e.xAxis.labelCount,y-=1);for(var S=Math.ceil(t.length/y),E=[],C=t.length,I=0;I<C;I++)I%S!==0?E.push(""):E.push(t[I]);E[C-1]=t[C-1];var b=e.xAxis.fontSize||i.fontSize;0===i._xAxisTextAngle_?E.forEach((function(t,r){var a=-m(String(t),b)/2;"center"==u&&(a+=c/2);var s=0;e.xAxis.scrollShow&&(s=6*e.pixelRatio),n.beginPath(),n.setFontSize(b),n.setFillStyle(e.xAxis.fontColor||"#666666"),n.fillText(String(t),o[r]+a,f+b+(i.xAxisHeight-s-b)/2),n.closePath(),n.stroke()})):E.forEach((function(t,r){n.save(),n.beginPath(),n.setFontSize(b),n.setFillStyle(e.xAxis.fontColor||"#666666");var a=m(String(t),b),s=-a;"center"==u&&(s+=c/2);var h=l(o[r]+c/2,f+b/2+5,e.height),p=h.transX,g=h.transY;n.rotate(-1*i._xAxisTextAngle_),n.translate(p,g),n.fillText(String(t),o[r]+s,f+b+5),n.closePath(),n.stroke(),n.restore()}))}n.restore(),e.xAxis.axisLine&&(n.beginPath(),n.setStrokeStyle(e.xAxis.axisLineColor),n.setLineWidth(1*e.pixelRatio),n.moveTo(a,e.height-e.area[2]),n.lineTo(s,e.height-e.area[2]),n.stroke())}function wt(t,e,i,n){if(!0!==e.yAxis.disableGrid){for(var r=e.height-e.area[0]-e.area[2],o=r/e.yAxis.splitNumber,a=e.area[3],s=e.chartData.xAxisData.xAxisPoints,c=e.chartData.xAxisData.eachSpacing,u=c*(s.length-1),l=a+u,f=[],h=0;h<e.yAxis.splitNumber+1;h++)f.push(e.height-e.area[2]-o*h);n.save(),e._scrollDistance_&&0!==e._scrollDistance_&&n.translate(e._scrollDistance_,0),"dash"==e.yAxis.gridType&&n.setLineDash([e.yAxis.dashLength,e.yAxis.dashLength]),n.setStrokeStyle(e.yAxis.gridColor),n.setLineWidth(1*e.pixelRatio),f.forEach((function(t,e){n.beginPath(),n.moveTo(a,t),n.lineTo(l,t),n.stroke()})),n.setLineDash([]),n.restore()}}function Tt(t,e,i,n){if(!0!==e.yAxis.disabled){var r=e.height-e.area[0]-e.area[2],o=r/e.yAxis.splitNumber,a=e.area[3],s=e.width-e.area[1],c=e.height-e.area[2],u=c+i.xAxisHeight;e.xAxis.scrollShow&&(u-=3*e.pixelRatio),e.xAxis.rotateLabel&&(u=e.height-e.area[2]+3),n.beginPath(),n.setFillStyle(e.background||"#ffffff"),e._scrollDistance_<0&&n.fillRect(0,0,a,u),1==e.enableScroll&&n.fillRect(s,0,e.width,u),n.closePath(),n.stroke();for(var l=[],f=0;f<=e.yAxis.splitNumber;f++)l.push(e.area[0]+o*f);for(var h=e.area[3],p=e.width-e.area[1],g=function(t){var r=e.yAxis.data[t];if(!0!==r.disabled){var o=e.chartData.yAxisData.rangesFormat[t],a=r.fontSize||i.fontSize,s=e.chartData.yAxisData.yAxisWidth[t];if(o.forEach((function(t,i){var o=l[i]?l[i]:c;n.beginPath(),n.setFontSize(a),n.setLineWidth(1*e.pixelRatio),n.setStrokeStyle(r.axisLineColor||"#cccccc"),n.setFillStyle(r.fontColor||"#666666"),"left"==s.position?(n.fillText(String(t),h-s.width,o+a/2),1==r.calibration&&(n.moveTo(h,o),n.lineTo(h-3*e.pixelRatio,o))):(n.fillText(String(t),p+4*e.pixelRatio,o+a/2),1==r.calibration&&(n.moveTo(p,o),n.lineTo(p+3*e.pixelRatio,o))),n.closePath(),n.stroke()})),!1!==r.axisLine&&(n.beginPath(),n.setStrokeStyle(r.axisLineColor||"#cccccc"),n.setLineWidth(1*e.pixelRatio),"left"==s.position?(n.moveTo(h,e.height-e.area[2]),n.lineTo(h,e.area[0])):(n.moveTo(p,e.height-e.area[2]),n.lineTo(p,e.area[0])),n.stroke()),e.yAxis.showTitle){var u=r.titleFontSize||i.fontSize,f=r.title;n.beginPath(),n.setFontSize(u),n.setFillStyle(r.titleFontColor||"#666666"),"left"==s.position?n.fillText(f,h-m(f,u)/2,e.area[0]-10*e.pixelRatio):n.fillText(f,p-m(f,u)/2,e.area[0]-10*e.pixelRatio),n.closePath(),n.stroke()}"left"==s.position?h-=s.width+e.yAxis.padding:p+=s.width+e.yAxis.padding}},d=0;d<e.yAxis.data.length;d++)g(d)}}function xt(t,e,i,n,r){if(!1!==e.legend.show){var o=r.legendData,a=o.points,s=o.area,c=e.legend.padding,u=e.legend.fontSize,l=15*e.pixelRatio,f=5*e.pixelRatio,h=e.legend.itemGap,p=Math.max(e.legend.lineHeight*e.pixelRatio,u);n.beginPath(),n.setLineWidth(e.legend.borderWidth),n.setStrokeStyle(e.legend.borderColor),n.setFillStyle(e.legend.backgroundColor),n.moveTo(s.start.x,s.start.y),n.rect(s.start.x,s.start.y,s.width,s.height),n.closePath(),n.fill(),n.stroke(),a.forEach((function(t,r){var a=0,g=0;a=o.widthArr[r],g=o.heightArr[r];var d=0,v=0;"top"==e.legend.position||"bottom"==e.legend.position?(d=s.start.x+(s.width-a)/2,v=s.start.y+c+r*p):(a=0==r?0:o.widthArr[r-1],d=s.start.x+c+a,v=s.start.y+c+(s.height-g)/2),n.setFontSize(i.fontSize);for(var _=0;_<t.length;_++){var y=t[_];switch(y.area=[0,0,0,0],y.area[0]=d,y.area[1]=v,y.area[3]=v+p,n.beginPath(),n.setLineWidth(1*e.pixelRatio),n.setStrokeStyle(y.show?y.color:e.legend.hiddenColor),n.setFillStyle(y.show?y.color:e.legend.hiddenColor),y.legendShape){case"line":n.moveTo(d,v+.5*p-2*e.pixelRatio),n.fillRect(d,v+.5*p-2*e.pixelRatio,15*e.pixelRatio,4*e.pixelRatio);break;case"triangle":n.moveTo(d+7.5*e.pixelRatio,v+.5*p-5*e.pixelRatio),n.lineTo(d+2.5*e.pixelRatio,v+.5*p+5*e.pixelRatio),n.lineTo(d+12.5*e.pixelRatio,v+.5*p+5*e.pixelRatio),n.lineTo(d+7.5*e.pixelRatio,v+.5*p-5*e.pixelRatio);break;case"diamond":n.moveTo(d+7.5*e.pixelRatio,v+.5*p-5*e.pixelRatio),n.lineTo(d+2.5*e.pixelRatio,v+.5*p),n.lineTo(d+7.5*e.pixelRatio,v+.5*p+5*e.pixelRatio),n.lineTo(d+12.5*e.pixelRatio,v+.5*p),n.lineTo(d+7.5*e.pixelRatio,v+.5*p-5*e.pixelRatio);break;case"circle":n.moveTo(d+7.5*e.pixelRatio,v+.5*p),n.arc(d+7.5*e.pixelRatio,v+.5*p,5*e.pixelRatio,0,2*Math.PI);break;case"rect":n.moveTo(d,v+.5*p-5*e.pixelRatio),n.fillRect(d,v+.5*p-5*e.pixelRatio,15*e.pixelRatio,10*e.pixelRatio);break;default:n.moveTo(d,v+.5*p-5*e.pixelRatio),n.fillRect(d,v+.5*p-5*e.pixelRatio,15*e.pixelRatio,10*e.pixelRatio)}n.closePath(),n.fill(),n.stroke(),d+=l+f;var S=.5*p+.5*u-2;n.beginPath(),n.setFontSize(u),n.setFillStyle(y.show?e.legend.fontColor:e.legend.hiddenColor),n.fillText(y.name,d,v+S),n.closePath(),n.stroke(),"top"==e.legend.position||"bottom"==e.legend.position?(d+=m(y.name,u)+h,y.area[2]=d):(y.area[2]=d+m(y.name,u)+h,d-=l+f,v+=p)}}))}}function Dt(t,e,i,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=n({},{activeOpacity:.5,activeRadius:10*e.pixelRatio,offsetAngle:0,labelWidth:15*e.pixelRatio,ringWidth:0,border:!1,borderWidth:2,borderColor:"#FFFFFF"},e.extra.pie),c={x:e.area[3]+(e.width-e.area[1]-e.area[3])/2,y:e.area[0]+(e.height-e.area[0]-e.area[2])/2};0==i.pieChartLinePadding&&(i.pieChartLinePadding=s.activeRadius);var u=Math.min((e.width-e.area[1]-e.area[3])/2-i.pieChartLinePadding-i.pieChartTextPadding-i._pieTextMaxLength_,(e.height-e.area[0]-e.area[2])/2-i.pieChartLinePadding-i.pieChartTextPadding);t=H(t,u,a);var l=s.activeRadius;if(t=t.map((function(t){return t._start_+=s.offsetAngle*Math.PI/180,t})),t.forEach((function(t,i){e.tooltip&&e.tooltip.index==i&&(r.beginPath(),r.setFillStyle(o(t.color,e.extra.pie.activeOpacity||.5)),r.moveTo(c.x,c.y),r.arc(c.x,c.y,t._radius_+l,t._start_,t._start_+2*t._proportion_*Math.PI),r.closePath(),r.fill()),r.beginPath(),r.setLineWidth(s.borderWidth*e.pixelRatio),r.lineJoin="round",r.setStrokeStyle(s.borderColor),r.setFillStyle(t.color),r.moveTo(c.x,c.y),r.arc(c.x,c.y,t._radius_,t._start_,t._start_+2*t._proportion_*Math.PI),r.closePath(),r.fill(),1==s.border&&r.stroke()})),"ring"===e.type){var f=.6*u;"number"===typeof e.extra.pie.ringWidth&&e.extra.pie.ringWidth>0&&(f=Math.max(0,u-e.extra.pie.ringWidth)),r.beginPath(),r.setFillStyle(e.background||"#ffffff"),r.moveTo(c.x,c.y),r.arc(c.x,c.y,f,0,2*Math.PI),r.closePath(),r.fill()}if(!1!==e.dataLabel&&1===a){for(var h=!1,p=0,g=t.length;p<g;p++)if(t[p].data>0){h=!0;break}h&&pt(t,e,i,r,u,c)}return 1===a&&"ring"===e.type&&ut(e,i,r,c),{center:c,radius:u,series:t}}function Mt(t,e,i,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=n({},{type:"area",activeOpacity:.5,activeRadius:10*e.pixelRatio,offsetAngle:0,labelWidth:15*e.pixelRatio,border:!1,borderWidth:2,borderColor:"#FFFFFF"},e.extra.rose);0==i.pieChartLinePadding&&(i.pieChartLinePadding=s.activeRadius);var c={x:e.area[3]+(e.width-e.area[1]-e.area[3])/2,y:e.area[0]+(e.height-e.area[0]-e.area[2])/2},u=Math.min((e.width-e.area[1]-e.area[3])/2-i.pieChartLinePadding-i.pieChartTextPadding-i._pieTextMaxLength_,(e.height-e.area[0]-e.area[2])/2-i.pieChartLinePadding-i.pieChartTextPadding),l=s.minRadius||.5*u;t=V(t,s.type,l,u,a);var f=s.activeRadius;if(t=t.map((function(t){return t._start_+=(s.offsetAngle||0)*Math.PI/180,t})),t.forEach((function(t,i){e.tooltip&&e.tooltip.index==i&&(r.beginPath(),r.setFillStyle(o(t.color,s.activeOpacity||.5)),r.moveTo(c.x,c.y),r.arc(c.x,c.y,f+t._radius_,t._start_,t._start_+2*t._rose_proportion_*Math.PI),r.closePath(),r.fill()),r.beginPath(),r.setLineWidth(s.borderWidth*e.pixelRatio),r.lineJoin="round",r.setStrokeStyle(s.borderColor),r.setFillStyle(t.color),r.moveTo(c.x,c.y),r.arc(c.x,c.y,t._radius_,t._start_,t._start_+2*t._rose_proportion_*Math.PI),r.closePath(),r.fill(),1==s.border&&r.stroke()})),!1!==e.dataLabel&&1===a){for(var h=!1,p=0,g=t.length;p<g;p++)if(t[p].data>0){h=!0;break}h&&pt(t,e,i,r,u,c)}return{center:c,radius:u,series:t}}function Lt(t,e,i,r){var o,a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,c=n({},{startAngle:.75,endAngle:.25,type:"default",width:12*e.pixelRatio,gap:2*e.pixelRatio},e.extra.arcbar);t=K(t,c,s),o=c.center?c.center:{x:e.width/2,y:e.height/2},c.radius?a=c.radius:(a=Math.min(o.x,o.y),a-=5*e.pixelRatio,a-=c.width/2);for(var u=0;u<t.length;u++){var l=t[u];r.setLineWidth(c.width),r.setStrokeStyle(c.backgroundColor||"#E9E9E9"),r.setLineCap("round"),r.beginPath(),"default"==c.type?r.arc(o.x,o.y,a-(c.width+c.gap)*u,c.startAngle*Math.PI,c.endAngle*Math.PI,!1):r.arc(o.x,o.y,a-(c.width+c.gap)*u,0,2*Math.PI,!1),r.stroke(),r.setLineWidth(c.width),r.setStrokeStyle(l.color),r.setLineCap("round"),r.beginPath(),r.arc(o.x,o.y,a-(c.width+c.gap)*u,c.startAngle*Math.PI,l._proportion_*Math.PI,!1),r.stroke()}return ut(e,i,r,o),{center:o,radius:a,series:t}}function Ot(t,e,i,r,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,c=n({},{type:"default",startAngle:.75,endAngle:.25,width:15,splitLine:{fixRadius:0,splitNumber:10,width:15,color:"#FFFFFF",childNumber:5,childWidth:5},pointer:{width:15,color:"auto"}},i.extra.gauge);void 0==c.oldAngle&&(c.oldAngle=c.startAngle),void 0==c.oldData&&(c.oldData=0),t=z(t,c.startAngle,c.endAngle);var u={x:i.width/2,y:i.height/2},l=Math.min(u.x,u.y);l-=5*i.pixelRatio,l-=c.width/2;var f=l-c.width,h=0;if("progress"==c.type){var p=l-3*c.width;a.beginPath();var g=a.createLinearGradient(u.x,u.y-p,u.x,u.y+p);g.addColorStop("0",o(e[0].color,.3)),g.addColorStop("1.0",o("#FFFFFF",.1)),a.setFillStyle(g),a.arc(u.x,u.y,p,0,2*Math.PI,!1),a.fill(),a.setLineWidth(c.width),a.setStrokeStyle(o(e[0].color,.3)),a.setLineCap("round"),a.beginPath(),a.arc(u.x,u.y,f,c.startAngle*Math.PI,c.endAngle*Math.PI,!1),a.stroke(),h=c.startAngle-c.endAngle+1;c.splitLine.splitNumber;var d=h/c.splitLine.splitNumber/c.splitLine.childNumber,m=-l-.5*c.width-c.splitLine.fixRadius,v=-l-c.width-c.splitLine.fixRadius+c.splitLine.width;a.save(),a.translate(u.x,u.y),a.rotate((c.startAngle-1)*Math.PI);for(var _=c.splitLine.splitNumber*c.splitLine.childNumber+1,y=e[0].data*s,S=0;S<_;S++)a.beginPath(),y>S/_?a.setStrokeStyle(o(e[0].color,1)):a.setStrokeStyle(o(e[0].color,.3)),a.setLineWidth(3*i.pixelRatio),a.moveTo(m,0),a.lineTo(v,0),a.stroke(),a.rotate(d*Math.PI);a.restore(),e=K(e,c,s),a.setLineWidth(c.width),a.setStrokeStyle(e[0].color),a.setLineCap("round"),a.beginPath(),a.arc(u.x,u.y,f,c.startAngle*Math.PI,e[0]._proportion_*Math.PI,!1),a.stroke();var E=l-2.5*c.width;a.save(),a.translate(u.x,u.y),a.rotate((e[0]._proportion_-1)*Math.PI),a.beginPath(),a.setLineWidth(c.width/3);var C=a.createLinearGradient(0,.6*-E,0,.6*E);C.addColorStop("0",o("#FFFFFF",0)),C.addColorStop("0.5",o(e[0].color,1)),C.addColorStop("1.0",o("#FFFFFF",0)),a.setStrokeStyle(C),a.arc(0,0,E,.85*Math.PI,1.15*Math.PI,!1),a.stroke(),a.beginPath(),a.setLineWidth(1),a.setStrokeStyle(e[0].color),a.setFillStyle(e[0].color),a.moveTo(-E-c.width/3/2,-4),a.lineTo(-E-c.width/3/2-4,0),a.lineTo(-E-c.width/3/2,4),a.lineTo(-E-c.width/3/2,-4),a.stroke(),a.fill(),a.restore()}else{a.setLineWidth(c.width),a.setLineCap("butt");for(var I=0;I<t.length;I++){var b=t[I];a.beginPath(),a.setStrokeStyle(b.color),a.arc(u.x,u.y,l,b._startAngle_*Math.PI,b._endAngle_*Math.PI,!1),a.stroke()}a.save(),h=c.startAngle-c.endAngle+1;var A=h/c.splitLine.splitNumber,w=h/c.splitLine.splitNumber/c.splitLine.childNumber,T=-l-.5*c.width-c.splitLine.fixRadius,x=-l-.5*c.width-c.splitLine.fixRadius+c.splitLine.width,D=-l-.5*c.width-c.splitLine.fixRadius+c.splitLine.childWidth;a.translate(u.x,u.y),a.rotate((c.startAngle-1)*Math.PI);for(var M=0;M<c.splitLine.splitNumber+1;M++)a.beginPath(),a.setStrokeStyle(c.splitLine.color),a.setLineWidth(2*i.pixelRatio),a.moveTo(T,0),a.lineTo(x,0),a.stroke(),a.rotate(A*Math.PI);a.restore(),a.save(),a.translate(u.x,u.y),a.rotate((c.startAngle-1)*Math.PI);for(var L=0;L<c.splitLine.splitNumber*c.splitLine.childNumber+1;L++)a.beginPath(),a.setStrokeStyle(c.splitLine.color),a.setLineWidth(1*i.pixelRatio),a.moveTo(T,0),a.lineTo(D,0),a.stroke(),a.rotate(w*Math.PI);a.restore(),e=Y(e,t,c,s);for(var O=0;O<e.length;O++){var N=e[O];a.save(),a.translate(u.x,u.y),a.rotate((N._proportion_-1)*Math.PI),a.beginPath(),a.setFillStyle(N.color),a.moveTo(c.pointer.width,0),a.lineTo(0,-c.pointer.width/2),a.lineTo(-f,0),a.lineTo(0,c.pointer.width/2),a.lineTo(c.pointer.width,0),a.closePath(),a.fill(),a.beginPath(),a.setFillStyle("#FFFFFF"),a.arc(0,0,c.pointer.width/6,0,2*Math.PI,!1),a.fill(),a.restore()}!1!==i.dataLabel&&ft(c,l,u,i,r,a)}return ut(i,r,a,u),1===s&&"gauge"===i.type&&(i.extra.gauge.oldAngle=e[0]._proportion_,i.extra.gauge.oldData=e[0].data),{center:u,radius:l,innerRadius:f,categories:t,totalAngle:h}}function Nt(t,e,i,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=n({},{gridColor:"#cccccc",labelColor:"#666666",opacity:.2,gridCount:3},e.extra.radar),c=C(e.categories.length),u={x:e.area[3]+(e.width-e.area[1]-e.area[3])/2,y:e.area[0]+(e.height-e.area[0]-e.area[2])/2},l=Math.min(u.x-(E(e.categories)+i.radarLabelTextMargin),u.y-i.radarLabelTextMargin);l-=e.padding[1],r.beginPath(),r.setLineWidth(1*e.pixelRatio),r.setStrokeStyle(s.gridColor),c.forEach((function(t){var e=h(l*Math.cos(t),l*Math.sin(t),u);r.moveTo(u.x,u.y),r.lineTo(e.x,e.y)})),r.stroke(),r.closePath();for(var f=function(t){var i={};r.beginPath(),r.setLineWidth(1*e.pixelRatio),r.setStrokeStyle(s.gridColor),c.forEach((function(e,n){var o=h(l/s.gridCount*t*Math.cos(e),l/s.gridCount*t*Math.sin(e),u);0===n?(i=o,r.moveTo(o.x,o.y)):r.lineTo(o.x,o.y)})),r.lineTo(i.x,i.y),r.stroke(),r.closePath()},p=1;p<=s.gridCount;p++)f(p);var g=q(c,u,l,t,e,a);return g.forEach((function(t,i){if(r.beginPath(),r.setFillStyle(o(t.color,s.opacity)),t.data.forEach((function(t,e){0===e?r.moveTo(t.position.x,t.position.y):r.lineTo(t.position.x,t.position.y)})),r.closePath(),r.fill(),!1!==e.dataPointShape){var n=t.data.map((function(t){return t.position}));ct(n,t.color,t.pointShape,r,e)}})),ht(c,l,u,e,i,r),{center:u,radius:l,angleList:c}}function Pt(t,e,i){i=0==i?1:i;for(var n=[],r=0;r<i;r++)n[r]=Math.random();return Math.floor(n.reduce((function(t,e){return t+e}))/i*(e-t))+t}function Rt(t,e,i,n){for(var r=!1,o=0;o<e.length;o++)if(e[o].area){if(!(t[3]<e[o].area[1]||t[0]>e[o].area[2]||t[1]>e[o].area[3]||t[2]<e[o].area[0])){r=!0;break}if(t[0]<0||t[1]<0||t[2]>i||t[3]>n){r=!0;break}r=!1}return r}function kt(t){var e,i={};i.xMin=180,i.xMax=0,i.yMin=90,i.yMax=0;for(var n=0;n<t.length;n++)for(var r=t[n].geometry.coordinates,o=0;o<r.length;o++){e=r[o],1==e.length&&(e=e[0]);for(var a=0;a<e.length;a++){var s=e[a][0],c=e[a][1],u={x:s,y:c};i.xMin=i.xMin<u.x?i.xMin:u.x,i.xMax=i.xMax>u.x?i.xMax:u.x,i.yMin=i.yMin<u.y?i.yMin:u.y,i.yMax=i.yMax>u.y?i.yMax:u.y}}return i}function Gt(t,e,i,n,r,o){return{x:(e-i.xMin)*n+r,y:(i.yMax-t)*n+o}}function Ut(t,e,i,n,r,o){return{x:(e-r)/n+i.xMin,y:i.yMax-(t-o)/n}}function Ft(t,e,i){if(e[1]==i[1])return!1;if(e[1]>t[1]&&i[1]>t[1])return!1;if(e[1]<t[1]&&i[1]<t[1])return!1;if(e[1]==t[1]&&i[1]>t[1])return!1;if(i[1]==t[1]&&e[1]>t[1])return!1;if(e[0]<t[0]&&i[1]<t[1])return!1;var n=i[0]-(i[0]-e[0])*(i[1]-t[1])/(i[1]-e[1]);return!(n<t[0])}function $t(t,e){for(var i=0,n=0;n<e.length;n++){var r=e[n][0];1==e.length&&(r=e[n][0]);for(var o=0;o<r.length-1;o++){var a=r[o],s=r[o+1];Ft(t,a,s)&&(i+=1)}}return i%2==1}function jt(t,e,i,r){var a,s,c=n({},{border:!0,borderWidth:1,borderColor:"#666666",fillOpacity:.6,activeBorderColor:"#f04864",activeFillColor:"#facc14",activeFillOpacity:1},e.extra.map),u=t,l=kt(u),f=e.width/Math.abs(l.xMax-l.xMin),h=e.height/Math.abs(l.yMax-l.yMin),p=f<h?f:h,g=e.width/2-Math.abs(l.xMax-l.xMin)/2*p,d=e.height/2-Math.abs(l.yMax-l.yMin)/2*p;r.beginPath(),r.clearRect(0,0,e.width,e.height),r.setFillStyle(e.background||"#FFFFFF"),r.rect(0,0,e.width,e.height),r.fill();for(var v=0;v<u.length;v++){r.beginPath(),r.setLineWidth(c.borderWidth*e.pixelRatio),r.setStrokeStyle(c.borderColor),r.setFillStyle(o(t[v].color,c.fillOpacity)),e.tooltip&&e.tooltip.index==v&&(r.setStrokeStyle(c.activeBorderColor),r.setFillStyle(o(c.activeFillColor,c.activeFillOpacity)));for(var _=u[v].geometry.coordinates,y=0;y<_.length;y++){a=_[y],1==a.length&&(a=a[0]);for(var S=0;S<a.length;S++)s=Gt(a[S][1],a[S][0],l,p,g,d),0===S?(r.beginPath(),r.moveTo(s.x,s.y)):r.lineTo(s.x,s.y);r.fill(),1==c.border&&r.stroke()}if(1==e.dataLabel){var E=u[v].properties.centroid;if(E){s=Gt(E[1],E[0],l,p,g,d);var C=u[v].textSize||i.fontSize,I=u[v].properties.name;r.beginPath(),r.setFontSize(C),r.setFillStyle(u[v].textColor||"#666666"),r.fillText(I,s.x-m(I,C)/2,s.y+C/2),r.closePath(),r.stroke()}}}e.chartData.mapData={bounds:l,scale:p,xoffset:g,yoffset:d},bt(e,i,r,1),r.draw()}function qt(t,e){var i=t.series.sort((function(t,e){return parseInt(e.textSize)-parseInt(t.textSize)}));switch(e){case"normal":for(var n=0;n<i.length;n++){var r=i[n].name,o=i[n].textSize,a=m(r,o),s=void 0,c=void 0,u=void 0,l=0;while(1){l++,s=Pt(-t.width/2,t.width/2,5)-a/2,c=Pt(-t.height/2,t.height/2,5)+o/2,u=[s-5+t.width/2,c-5-o+t.height/2,s+a+5+t.width/2,c+5+t.height/2];var f=Rt(u,i,t.width,t.height);if(!f)break;if(1e3==l){u=[-100,-100,-100,-100];break}}i[n].area=u}break;case"vertical":for(var h=function(){return Math.random()>.7},p=0;p<i.length;p++){var g=i[p].name,d=i[p].textSize,v=m(g,d),_=h(),y=void 0,S=void 0,E=void 0,C=void 0,I=0;while(1){I++;var b=void 0;if(_?(y=Pt(-t.width/2,t.width/2,5)-v/2,S=Pt(-t.height/2,t.height/2,5)+d/2,E=[S-5-v+t.width/2,-y-5+t.height/2,S+5+t.width/2,-y+d+5+t.height/2],C=[t.width-(t.width/2-t.height/2)-(-y+d+5+t.height/2)-5,t.height/2-t.width/2+(S-5-v+t.width/2)-5,t.width-(t.width/2-t.height/2)-(-y+d+5+t.height/2)+d,t.height/2-t.width/2+(S-5-v+t.width/2)+v+5],b=Rt(C,i,t.height,t.width)):(y=Pt(-t.width/2,t.width/2,5)-v/2,S=Pt(-t.height/2,t.height/2,5)+d/2,E=[y-5+t.width/2,S-5-d+t.height/2,y+v+5+t.width/2,S+5+t.height/2],b=Rt(E,i,t.width,t.height)),!b)break;if(1e3==I){E=[-1e3,-1e3,-1e3,-1e3];break}}_?(i[p].area=C,i[p].areav=E):i[p].area=E,i[p].rotate=_}break}return i}function Ht(t,e,i,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;n({},{type:"normal",autoColors:!0},e.extra.word);r.beginPath(),r.setFillStyle(e.background||"#FFFFFF"),r.rect(0,0,e.width,e.height),r.fill(),r.save();var a=e.chartData.wordCloudData;r.translate(e.width/2,e.height/2);for(var s=0;s<a.length;s++){r.save(),a[s].rotate&&r.rotate(90*Math.PI/180);var c=a[s].name,u=a[s].textSize,l=m(c,u);r.beginPath(),r.setStrokeStyle(a[s].color),r.setFillStyle(a[s].color),r.setFontSize(u),a[s].rotate?a[s].areav[0]>0&&(e.tooltip&&e.tooltip.index==s?r.strokeText(c,(a[s].areav[0]+5-e.width/2)*o-l*(1-o)/2,(a[s].areav[1]+5+u-e.height/2)*o):r.fillText(c,(a[s].areav[0]+5-e.width/2)*o-l*(1-o)/2,(a[s].areav[1]+5+u-e.height/2)*o)):a[s].area[0]>0&&(e.tooltip&&e.tooltip.index==s?r.strokeText(c,(a[s].area[0]+5-e.width/2)*o-l*(1-o)/2,(a[s].area[1]+5+u-e.height/2)*o):r.fillText(c,(a[s].area[0]+5-e.width/2)*o-l*(1-o)/2,(a[s].area[1]+5+u-e.height/2)*o)),r.stroke(),r.restore()}r.restore()}function Bt(t,e,i,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=n({},{activeWidth:10,activeOpacity:.3,border:!1,borderWidth:2,borderColor:"#FFFFFF",fillOpacity:1,labelAlign:"right"},e.extra.funnel),c=(e.height-e.area[0]-e.area[2])/t.length,u={x:e.area[3]+(e.width-e.area[1]-e.area[3])/2,y:e.height-e.area[2]},l=s.activeWidth,f=Math.min((e.width-e.area[1]-e.area[3])/2-l,(e.height-e.area[0]-e.area[2])/2-l);t=B(t,f,a),r.save(),r.translate(u.x,u.y);for(var h=0;h<t.length;h++)0==h?(e.tooltip&&e.tooltip.index==h&&(r.beginPath(),r.setFillStyle(o(t[h].color,s.activeOpacity)),r.moveTo(-l,0),r.lineTo(-t[h].radius-l,-c),r.lineTo(t[h].radius+l,-c),r.lineTo(l,0),r.lineTo(-l,0),r.closePath(),r.fill()),t[h].funnelArea=[u.x-t[h].radius,u.y-c,u.x+t[h].radius,u.y],r.beginPath(),r.setLineWidth(s.borderWidth*e.pixelRatio),r.setStrokeStyle(s.borderColor),r.setFillStyle(o(t[h].color,s.fillOpacity)),r.moveTo(0,0),r.lineTo(-t[h].radius,-c),r.lineTo(t[h].radius,-c),r.lineTo(0,0),r.closePath(),r.fill(),1==s.border&&r.stroke()):(e.tooltip&&e.tooltip.index==h&&(r.beginPath(),r.setFillStyle(o(t[h].color,s.activeOpacity)),r.moveTo(0,0),r.lineTo(-t[h-1].radius-l,0),r.lineTo(-t[h].radius-l,-c),r.lineTo(t[h].radius+l,-c),r.lineTo(t[h-1].radius+l,0),r.lineTo(0,0),r.closePath(),r.fill()),t[h].funnelArea=[u.x-t[h].radius,u.y-c*(h+1),u.x+t[h].radius,u.y-c*h],r.beginPath(),r.setLineWidth(s.borderWidth*e.pixelRatio),r.setStrokeStyle(s.borderColor),r.setFillStyle(o(t[h].color,s.fillOpacity)),r.moveTo(0,0),r.lineTo(-t[h-1].radius,0),r.lineTo(-t[h].radius,-c),r.lineTo(t[h].radius,-c),r.lineTo(t[h-1].radius,0),r.lineTo(0,0),r.closePath(),r.fill(),1==s.border&&r.stroke()),r.translate(0,-c);return r.restore(),!1!==e.dataLabel&&1===a&&Vt(t,e,r,c,s.labelAlign,l,u),{center:u,radius:f,series:t}}function Vt(t,e,i,n,o,a,s){for(var c=0;c<t.length;c++){var u=t[c],l=void 0,f=void 0,h=void 0,p=void 0,g=u.format?u.format(+u._proportion_.toFixed(2)):r.toFixed(100*u._proportion_)+"%";"right"==o?(l=0==c?(u.funnelArea[2]+s.x)/2:(u.funnelArea[2]+t[c-1].funnelArea[2])/2,f=l+2*a,h=u.funnelArea[1]+n/2,p=u.textSize||e.fontSize,i.setLineWidth(1*e.pixelRatio),i.setStrokeStyle(u.color),i.setFillStyle(u.color),i.beginPath(),i.moveTo(l,h),i.lineTo(f,h),i.stroke(),i.closePath(),i.beginPath(),i.moveTo(f,h),i.arc(f,h,2,0,2*Math.PI),i.closePath(),i.fill(),i.beginPath(),i.setFontSize(p),i.setFillStyle(u.textColor||"#666666"),i.fillText(g,f+5,h+p/2-2),i.closePath(),i.stroke(),i.closePath()):(l=0==c?(u.funnelArea[0]+s.x)/2:(u.funnelArea[0]+t[c-1].funnelArea[0])/2,f=l-2*a,h=u.funnelArea[1]+n/2,p=u.textSize||e.fontSize,i.setLineWidth(1*e.pixelRatio),i.setStrokeStyle(u.color),i.setFillStyle(u.color),i.beginPath(),i.moveTo(l,h),i.lineTo(f,h),i.stroke(),i.closePath(),i.beginPath(),i.moveTo(f,h),i.arc(f,h,2,0,2*Math.PI),i.closePath(),i.fill(),i.beginPath(),i.setFontSize(p),i.setFillStyle(u.textColor||"#666666"),i.fillText(g,f-5-m(g),h+p/2-2),i.closePath(),i.stroke(),i.closePath())}}function Kt(t,e){e.draw()}var zt={easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},linear:function(t){return t}};function Yt(t){this.isStop=!1,t.duration="undefined"===typeof t.duration?1e3:t.duration,t.timing=t.timing||"linear";var e=17;function i(){return"undefined"!==typeof setTimeout?function(t,e){setTimeout((function(){var e=+new Date;t(e)}),e)}:"undefined"!==typeof requestAnimationFrame?requestAnimationFrame:function(t){t(null)}}var n=i(),r=null,o=function(i){if(null===i||!0===this.isStop)return t.onProcess&&t.onProcess(1),void(t.onAnimationFinish&&t.onAnimationFinish());if(null===r&&(r=i),i-r<t.duration){var a=(i-r)/t.duration,s=zt[t.timing];a=s(a),t.onProcess&&t.onProcess(a),n(o,e)}else t.onProcess&&t.onProcess(1),t.onAnimationFinish&&t.onAnimationFinish()};o=o.bind(this),n(o,e)}function Wt(t,e,i,r){var o=this,a=e.series,c=e.categories;a=g(a,e,i);var u=e.animation?e.duration:0;o.animationInstance&&o.animationInstance.stop();var l=null;if("candle"==t){var f=n({},e.extra.candle.average);f.show?(l=s(f.day,f.name,f.color,a[0].data),l=g(l,e,i),e.seriesMA=l):l=e.seriesMA?e.seriesMA=g(e.seriesMA,e,i):a}else l=a;e._series_=a=w(a),e.area=new Array(4);for(var h=0;h<4;h++)e.area[h]=e.padding[h];var p=U(l,e,i,e.chartData),d=p.area.wholeHeight,m=p.area.wholeWidth;switch(e.legend.position){case"top":e.area[0]+=d;break;case"bottom":e.area[2]+=d;break;case"left":e.area[3]+=m;break;case"right":e.area[1]+=m;break}var v={},_=0;if("line"===e.type||"column"===e.type||"area"===e.type||"mix"===e.type||"candle"===e.type){if(v=rt(a,e,i),_=v.yAxisWidth,e.yAxis.showTitle){for(var y=0,S=0;S<e.yAxis.data.length;S++)y=Math.max(y,e.yAxis.data[S].titleFontSize?e.yAxis.data[S].titleFontSize:i.fontSize);e.area[0]+=(y+6)*e.pixelRatio}for(var E=0,C=0,I=0;I<_.length;I++)"left"==_[I].position?(e.area[3]+=C>0?_[I].width+e.yAxis.padding:_[I].width,C+=1):(e.area[1]+=E>0?_[I].width+e.yAxis.padding:_[I].width,E+=1)}else i.yAxisWidth=_;if(e.chartData.yAxisData=v,e.categories&&e.categories.length){e.chartData.xAxisData=Z(e.categories,e,i);var b=F(e.categories,e,i,e.chartData.xAxisData.eachSpacing),A=b.xAxisHeight,T=b.angle;i.xAxisHeight=A,i._xAxisTextAngle_=T,e.area[2]+=A,e.chartData.categoriesData=b}else if("line"===e.type||"area"===e.type||"points"===e.type){e.chartData.xAxisData=j(a,e,i),c=e.chartData.xAxisData.rangesFormat;var x=F(c,e,i,e.chartData.xAxisData.eachSpacing),D=x.xAxisHeight,M=x.angle;i.xAxisHeight=D,i._xAxisTextAngle_=M,e.area[2]+=D,e.chartData.categoriesData=x}else e.chartData.xAxisData={xAxisPoints:[]};if(e.enableScroll&&"right"==e.xAxis.scrollAlign&&void 0===e._scrollDistance_){var L=0,O=e.chartData.xAxisData.xAxisPoints,N=e.chartData.xAxisData.startX,P=e.chartData.xAxisData.endX,R=e.chartData.xAxisData.eachSpacing,k=R*(O.length-1),G=P-N;L=G-k,o.scrollOption={currentOffset:L,startTouchX:L,distance:0,lastMoveTime:0},e._scrollDistance_=L}switch("pie"!==t&&"ring"!==t&&"rose"!==t||(i._pieTextMaxLength_=!1===e.dataLabel?0:W(l)),t){case"word":var $=n({},{type:"normal",autoColors:!0},e.extra.word);1!=e.updateData&&void 0!=e.updateData||(e.chartData.wordCloudData=qt(e,$.type)),this.animationInstance=new Yt({timing:"easeInOut",duration:u,onProcess:function(t){r.clearRect(0,0,e.width,e.height),e.rotate&&st(r,e),Ht(a,e,i,r,t),Kt(e,r)},onAnimationFinish:function(){o.event.trigger("renderComplete")}});break;case"map":r.clearRect(0,0,e.width,e.height),jt(a,e,i,r);break;case"funnel":this.animationInstance=new Yt({timing:"easeInOut",duration:u,onProcess:function(t){r.clearRect(0,0,e.width,e.height),e.rotate&&st(r,e),e.chartData.funnelData=Bt(a,e,i,r,t),xt(e.series,e,i,r,e.chartData),bt(e,i,r,t),Kt(e,r)},onAnimationFinish:function(){o.event.trigger("renderComplete")}});break;case"line":this.animationInstance=new Yt({timing:"easeIn",duration:u,onProcess:function(t){r.clearRect(0,0,e.width,e.height),e.rotate&&st(r,e),wt(c,e,i,r),At(c,e,i,r);var n=Ct(a,e,i,r,t),o=n.xAxisPoints,s=n.calPoints,u=n.eachSpacing;e.chartData.xAxisPoints=o,e.chartData.calPoints=s,e.chartData.eachSpacing=u,Tt(a,e,i,r),!1!==e.enableMarkLine&&1===t&&dt(e,i,r),xt(e.series,e,i,r,e.chartData),bt(e,i,r,t,u,o),Kt(e,r)},onAnimationFinish:function(){o.event.trigger("renderComplete")}});break;case"mix":this.animationInstance=new Yt({timing:"easeIn",duration:u,onProcess:function(t){r.clearRect(0,0,e.width,e.height),e.rotate&&st(r,e),wt(c,e,i,r),At(c,e,i,r);var n=It(a,e,i,r,t),o=n.xAxisPoints,s=n.calPoints,u=n.eachSpacing;e.chartData.xAxisPoints=o,e.chartData.calPoints=s,e.chartData.eachSpacing=u,Tt(a,e,i,r),!1!==e.enableMarkLine&&1===t&&dt(e,i,r),xt(e.series,e,i,r,e.chartData),bt(e,i,r,t,u,o),Kt(e,r)},onAnimationFinish:function(){o.event.trigger("renderComplete")}});break;case"column":this.animationInstance=new Yt({timing:"easeIn",duration:u,onProcess:function(t){r.clearRect(0,0,e.width,e.height),e.rotate&&st(r,e),wt(c,e,i,r),At(c,e,i,r);var n=yt(a,e,i,r,t),o=n.xAxisPoints,s=n.calPoints,u=n.eachSpacing;e.chartData.xAxisPoints=o,e.chartData.calPoints=s,e.chartData.eachSpacing=u,Tt(a,e,i,r),!1!==e.enableMarkLine&&1===t&&dt(e,i,r),xt(e.series,e,i,r,e.chartData),bt(e,i,r,t,u,o),Kt(e,r)},onAnimationFinish:function(){o.event.trigger("renderComplete")}});break;case"area":this.animationInstance=new Yt({timing:"easeIn",duration:u,onProcess:function(t){r.clearRect(0,0,e.width,e.height),e.rotate&&st(r,e),wt(c,e,i,r),At(c,e,i,r);var n=Et(a,e,i,r,t),o=n.xAxisPoints,s=n.calPoints,u=n.eachSpacing;e.chartData.xAxisPoints=o,e.chartData.calPoints=s,e.chartData.eachSpacing=u,Tt(a,e,i,r),!1!==e.enableMarkLine&&1===t&&dt(e,i,r),xt(e.series,e,i,r,e.chartData),bt(e,i,r,t,u,o),Kt(e,r)},onAnimationFinish:function(){o.event.trigger("renderComplete")}});break;case"ring":case"pie":this.animationInstance=new Yt({timing:"easeInOut",duration:u,onProcess:function(t){r.clearRect(0,0,e.width,e.height),e.rotate&&st(r,e),e.chartData.pieData=Dt(a,e,i,r,t),xt(e.series,e,i,r,e.chartData),bt(e,i,r,t),Kt(e,r)},onAnimationFinish:function(){o.event.trigger("renderComplete")}});break;case"rose":this.animationInstance=new Yt({timing:"easeInOut",duration:u,onProcess:function(t){r.clearRect(0,0,e.width,e.height),e.rotate&&st(r,e),e.chartData.pieData=Mt(a,e,i,r,t),xt(e.series,e,i,r,e.chartData),bt(e,i,r,t),Kt(e,r)},onAnimationFinish:function(){o.event.trigger("renderComplete")}});break;case"radar":this.animationInstance=new Yt({timing:"easeInOut",duration:u,onProcess:function(t){r.clearRect(0,0,e.width,e.height),e.rotate&&st(r,e),e.chartData.radarData=Nt(a,e,i,r,t),xt(e.series,e,i,r,e.chartData),bt(e,i,r,t),Kt(e,r)},onAnimationFinish:function(){o.event.trigger("renderComplete")}});break;case"arcbar":this.animationInstance=new Yt({timing:"easeInOut",duration:u,onProcess:function(t){r.clearRect(0,0,e.width,e.height),e.rotate&&st(r,e),e.chartData.arcbarData=Lt(a,e,i,r,t),Kt(e,r)},onAnimationFinish:function(){o.event.trigger("renderComplete")}});break;case"gauge":this.animationInstance=new Yt({timing:"easeInOut",duration:u,onProcess:function(t){r.clearRect(0,0,e.width,e.height),e.rotate&&st(r,e),e.chartData.gaugeData=Ot(c,a,e,i,r,t),Kt(e,r)},onAnimationFinish:function(){o.event.trigger("renderComplete")}});break;case"candle":this.animationInstance=new Yt({timing:"easeIn",duration:u,onProcess:function(t){r.clearRect(0,0,e.width,e.height),e.rotate&&st(r,e),wt(c,e,i,r),At(c,e,i,r);var n=St(a,l,e,i,r,t),o=n.xAxisPoints,s=n.calPoints,u=n.eachSpacing;e.chartData.xAxisPoints=o,e.chartData.calPoints=s,e.chartData.eachSpacing=u,Tt(a,e,i,r),!1!==e.enableMarkLine&&1===t&&dt(e,i,r),xt(l||e.series,e,i,r,e.chartData),bt(e,i,r,t,u,o),Kt(e,r)},onAnimationFinish:function(){o.event.trigger("renderComplete")}});break}}function Jt(){this.events={}}Yt.prototype.stop=function(){this.isStop=!0},Jt.prototype.addEventListener=function(t,e){this.events[t]=this.events[t]||[],this.events[t].push(e)},Jt.prototype.trigger=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var r=i[0],o=i.slice(1);this.events[r]&&this.events[r].forEach((function(t){try{t.apply(null,o)}catch(i){e("error",i," at components\\u-charts\\u-charts.js:5091")}}))};var Xt=function(t){t.pixelRatio=t.pixelRatio?t.pixelRatio:1,t.fontSize=t.fontSize?t.fontSize*t.pixelRatio:13*t.pixelRatio,t.title=n({},t.title),t.subtitle=n({},t.subtitle),t.duration=t.duration?t.duration:1e3,t.yAxis=n({},{data:[],showTitle:!1,disabled:!1,disableGrid:!1,splitNumber:5,gridType:"solid",dashLength:4*t.pixelRatio,gridColor:"#cccccc",padding:10,fontColor:"#666666"},t.yAxis),t.yAxis.dashLength*=t.pixelRatio,t.yAxis.padding*=t.pixelRatio,t.xAxis=n({},{rotateLabel:!1,type:"calibration",gridType:"solid",dashLength:4,scrollAlign:"left",boundaryGap:"center",axisLine:!0,axisLineColor:"#cccccc"},t.xAxis),t.xAxis.dashLength*=t.pixelRatio,t.legend=n({},{show:!0,position:"bottom",float:"center",backgroundColor:"rgba(0,0,0,0)",borderColor:"rgba(0,0,0,0)",borderWidth:0,padding:5,margin:5,itemGap:10,fontSize:t.fontSize,lineHeight:t.fontSize,fontColor:"#333333",format:{},hiddenColor:"#CECECE"},t.legend),t.legend.borderWidth=t.legend.borderWidth*t.pixelRatio,t.legend.itemGap=t.legend.itemGap*t.pixelRatio,t.legend.padding=t.legend.padding*t.pixelRatio,t.legend.margin=t.legend.margin*t.pixelRatio,t.extra=n({},t.extra),t.rotate=!!t.rotate,t.animation=!!t.animation,t.rotate=!!t.rotate;var e=JSON.parse(JSON.stringify(i));if(e.colors=t.colors?t.colors:e.colors,e.yAxisTitleWidth=!0!==t.yAxis.disabled&&t.yAxis.title?e.yAxisTitleWidth:0,"pie"!=t.type&&"ring"!=t.type||(e.pieChartLinePadding=!1===t.dataLabel?0:t.extra.pie.labelWidth*t.pixelRatio||e.pieChartLinePadding*t.pixelRatio),"rose"==t.type&&(e.pieChartLinePadding=!1===t.dataLabel?0:t.extra.rose.labelWidth*t.pixelRatio||e.pieChartLinePadding*t.pixelRatio),e.pieChartTextPadding=!1===t.dataLabel?0:e.pieChartTextPadding*t.pixelRatio,e.yAxisSplit=t.yAxis.splitNumber?t.yAxis.splitNumber:i.yAxisSplit,e.rotate=t.rotate,t.rotate){var r=t.width,o=t.height;t.width=o,t.height=r}t.padding=t.padding?t.padding:e.padding;for(var a=0;a<4;a++)t.padding[a]*=t.pixelRatio;e.yAxisWidth=i.yAxisWidth*t.pixelRatio,e.xAxisHeight=i.xAxisHeight*t.pixelRatio,t.enableScroll&&t.xAxis.scrollShow&&(e.xAxisHeight+=6*t.pixelRatio),e.xAxisLineHeight=i.xAxisLineHeight*t.pixelRatio,e.fontSize=t.fontSize,e.titleFontSize=i.titleFontSize*t.pixelRatio,e.subtitleFontSize=i.subtitleFontSize*t.pixelRatio,e.toolTipPadding=i.toolTipPadding*t.pixelRatio,e.toolTipLineHeight=i.toolTipLineHeight*t.pixelRatio,e.columePadding=i.columePadding*t.pixelRatio,t.$this=t.$this?t.$this:this,this.context=uni.createCanvasContext(t.canvasId,t.$this),t.chartData={},this.event=new Jt,this.scrollOption={currentOffset:0,startTouchX:0,distance:0,lastMoveTime:0},this.opts=t,this.config=e,Wt.call(this,t.type,t,e,this.context)};Xt.prototype.updateData=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opts=n({},this.opts,t),this.opts.updateData=!0;var e=t.scrollPosition||"current";switch(e){case"current":this.opts._scrollDistance_=this.scrollOption.currentOffset;break;case"left":this.opts._scrollDistance_=0,this.scrollOption={currentOffset:0,startTouchX:0,distance:0,lastMoveTime:0};break;case"right":var i=rt(this.opts.series,this.opts,this.config),r=i.yAxisWidth;this.config.yAxisWidth=r;var o=0,a=Z(this.opts.categories,this.opts,this.config),s=a.xAxisPoints,c=a.startX,u=a.endX,l=a.eachSpacing,f=l*(s.length-1),h=u-c;o=h-f,this.scrollOption={currentOffset:o,startTouchX:o,distance:0,lastMoveTime:0},this.opts._scrollDistance_=o;break}Wt.call(this,this.opts.type,this.opts,this.config,this.context)},Xt.prototype.zoom=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.opts.xAxis.itemCount;if(!0===this.opts.enableScroll){var i=Math.round(Math.abs(this.scrollOption.currentOffset)/this.opts.chartData.eachSpacing)+Math.round(this.opts.xAxis.itemCount/2);this.opts.animation=!1,this.opts.xAxis.itemCount=t.itemCount;var n=rt(this.opts.series,this.opts,this.config),r=n.yAxisWidth;this.config.yAxisWidth=r;var o=0,a=Z(this.opts.categories,this.opts,this.config),s=a.xAxisPoints,c=a.startX,u=a.endX,l=a.eachSpacing,f=l*i,h=u-c,p=h-l*(s.length-1);o=h/2-f,o>0&&(o=0),o<p&&(o=p),this.scrollOption={currentOffset:o,startTouchX:o,distance:0,lastMoveTime:0},this.opts._scrollDistance_=o,Wt.call(this,this.opts.type,this.opts,this.config,this.context)}else e("log","请启用滚动条后使用！"," at components\\u-charts\\u-charts.js:5265")},Xt.prototype.stopAnimation=function(){this.animationInstance&&this.animationInstance.stop()},Xt.prototype.addEventListener=function(t,e){this.event.addEventListener(t,e)},Xt.prototype.getCurrentDataIndex=function(t){var e=null;if(e=t.changedTouches?t.changedTouches[0]:t.mp.changedTouches[0],e){var i=y(e,this.opts,t);return"pie"===this.opts.type||"ring"===this.opts.type||"rose"===this.opts.type?R({x:i.x,y:i.y},this.opts.chartData.pieData):"radar"===this.opts.type?L({x:i.x,y:i.y},this.opts.chartData.radarData,this.opts.categories.length):"funnel"===this.opts.type?O({x:i.x,y:i.y},this.opts.chartData.funnelData):"map"===this.opts.type?P({x:i.x,y:i.y},this.opts):"word"===this.opts.type?N({x:i.x,y:i.y},this.opts.chartData.wordCloudData):T({x:i.x,y:i.y},this.opts.chartData.calPoints,this.opts,this.config,Math.abs(this.scrollOption.currentOffset))}return-1},Xt.prototype.getLegendDataIndex=function(t){var e=null;if(e=t.changedTouches?t.changedTouches[0]:t.mp.changedTouches[0],e){var i=y(e,this.opts,t);return x({x:i.x,y:i.y},this.opts.chartData.legendData)}return-1},Xt.prototype.touchLegend=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null;if(i=t.changedTouches?t.changedTouches[0]:t.mp.changedTouches[0],i){y(i,this.opts,t);var n=this.getLegendDataIndex(t);n>=0&&(this.opts.series[n].show=!this.opts.series[n].show,this.opts.animation=!!e.animation,this.opts._scrollDistance_=this.scrollOption.currentOffset,Wt.call(this,this.opts.type,this.opts,this.config,this.context))}},Xt.prototype.showToolTip=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null;r=t.changedTouches?t.changedTouches[0]:t.mp.changedTouches[0],r||e("log","touchError"," at components\\u-charts\\u-charts.js:5402");var o=y(r,this.opts,t),a=this.scrollOption.currentOffset,s=n({},this.opts,{_scrollDistance_:a,animation:!1});if("line"===this.opts.type||"area"===this.opts.type||"column"===this.opts.type){var c=this.getCurrentDataIndex(t);if(c>-1){var u=S(this.opts.series,c);if(0!==u.length){var l=I(u,this.opts.chartData.calPoints,c,this.opts.categories,i),f=l.textList,h=l.offset;h.y=o.y,s.tooltip={textList:f,offset:h,option:i,index:c}}}Wt.call(this,s.type,s,this.config,this.context)}if("mix"===this.opts.type){c=this.getCurrentDataIndex(t);if(c>-1){a=this.scrollOption.currentOffset,s=n({},this.opts,{_scrollDistance_:a,animation:!1}),u=S(this.opts.series,c);if(0!==u.length){var p=b(u,this.opts.chartData.calPoints,c,this.opts.categories,i);f=p.textList,h=p.offset;h.y=o.y,s.tooltip={textList:f,offset:h,option:i,index:c}}}Wt.call(this,s.type,s,this.config,this.context)}if("candle"===this.opts.type){c=this.getCurrentDataIndex(t);if(c>-1){a=this.scrollOption.currentOffset,s=n({},this.opts,{_scrollDistance_:a,animation:!1}),u=S(this.opts.series,c);if(0!==u.length){l=A(this.opts.series[0].data,u,this.opts.chartData.calPoints,c,this.opts.categories,this.opts.extra.candle,i),f=l.textList,h=l.offset;h.y=o.y,s.tooltip={textList:f,offset:h,option:i,index:c}}}Wt.call(this,s.type,s,this.config,this.context)}if("pie"===this.opts.type||"ring"===this.opts.type||"rose"===this.opts.type||"funnel"===this.opts.type){c=this.getCurrentDataIndex(t);if(c>-1){a=this.scrollOption.currentOffset,s=n({},this.opts,{_scrollDistance_:a,animation:!1}),u=this.opts._series_[c],f=[{text:i.format?i.format(u):u.name+": "+u.data,color:u.color}],h={x:o.x,y:o.y};s.tooltip={textList:f,offset:h,option:i,index:c}}Wt.call(this,s.type,s,this.config,this.context)}if("map"===this.opts.type||"word"===this.opts.type){c=this.getCurrentDataIndex(t);if(c>-1){a=this.scrollOption.currentOffset,s=n({},this.opts,{_scrollDistance_:a,animation:!1}),u=this.opts._series_[c],f=[{text:i.format?i.format(u):u.properties.name,color:u.color}],h={x:o.x,y:o.y};s.tooltip={textList:f,offset:h,option:i,index:c}}s.updateData=!1,Wt.call(this,s.type,s,this.config,this.context)}if("radar"===this.opts.type){c=this.getCurrentDataIndex(t);if(c>-1){a=this.scrollOption.currentOffset,s=n({},this.opts,{_scrollDistance_:a,animation:!1}),u=S(this.opts.series,c);if(0!==u.length){f=u.map((function(t){return{text:i.format?i.format(t):t.name+": "+t.data,color:t.color}})),h={x:o.x,y:o.y};s.tooltip={textList:f,offset:h,option:i,index:c}}}Wt.call(this,s.type,s,this.config,this.context)}},Xt.prototype.translate=function(t){this.scrollOption={currentOffset:t,startTouchX:t,distance:0,lastMoveTime:0};var e=n({},this.opts,{_scrollDistance_:t,animation:!1});Wt.call(this,this.opts.type,e,this.config,this.context)},Xt.prototype.scrollStart=function(t){var e=null;e=t.changedTouches?t.changedTouches[0]:t.mp.changedTouches[0];var i=y(e,this.opts,t);e&&!0===this.opts.enableScroll&&(this.scrollOption.startTouchX=i.x)},Xt.prototype.scroll=function(t){0===this.scrollOption.lastMoveTime&&(this.scrollOption.lastMoveTime=Date.now());var e=this.opts.extra.touchMoveLimit||20,i=Date.now(),r=i-this.scrollOption.lastMoveTime;if(!(r<Math.floor(1e3/e))){this.scrollOption.lastMoveTime=i;var o=null;if(o=t.changedTouches?t.changedTouches[0]:t.mp.changedTouches[0],o&&!0===this.opts.enableScroll){var a,s=y(o,this.opts,t);a=s.x-this.scrollOption.startTouchX;var u=this.scrollOption.currentOffset,l=c(this,u+a,this.opts.chartData,this.config,this.opts);this.scrollOption.distance=a=l-u;var f=n({},this.opts,{_scrollDistance_:u+a,animation:!1});return Wt.call(this,f.type,f,this.config,this.context),u+a}}},Xt.prototype.scrollEnd=function(t){if(!0===this.opts.enableScroll){var e=this.scrollOption,i=e.currentOffset,n=e.distance;this.scrollOption.currentOffset=i+n,this.scrollOption.distance=0}},"object"===typeof t.exports&&(t.exports=Xt)}).call(this,i("0de9")["default"])},"45a4":function(t,e,i){"use strict";i.r(e);var n=i("0f36"),r=i("d5a9");for(var o in r)"default"!==o&&function(t){i.d(e,t,(function(){return r[t]}))}(o);var a,s=i("f0c5"),c=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);e["default"]=c.exports},4617:function(t,e,i){"use strict";var n,r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",[n("cu-custom",{attrs:{bgColor:"bg-red",isBack:!0,_i:1}},[n("template",{slot:"content"})],2),n("view",{staticClass:t._$s(3,"sc","conversition-box"),attrs:{_i:3}},[t._$s(4,"i",t.userAddConversationList.length>0)?n("view",{staticClass:t._$s(4,"sc","list-box"),attrs:{_i:4}},t._l(t._$s(5,"f",{forItems:t.userAddConversationList}),(function(e,r,o,a){return n("view",{key:t._$s(5,"f",{forIndex:o,key:r}),staticClass:t._$s("5-"+a,"sc","item-box"),attrs:{_i:"5-"+a},on:{click:function(i){return t.toRoom(e)}}},[t._$s("6-"+a,"i",e.user)?n("view",{staticClass:t._$s("6-"+a,"sc","item-img"),attrs:{_i:"6-"+a}},[n("image",{attrs:{src:t._$s("7-"+a,"a-src",e.user.img),_i:"7-"+a}})]):n("view",{staticClass:t._$s("8-"+a,"sc","item-img"),attrs:{_i:"8-"+a}},[n("image",{attrs:{src:t._$s("9-"+a,"a-src","/"+i("18bb")),_i:"9-"+a}})]),n("view",[n("view",{staticClass:t._$s("11-"+a,"sc","item-text"),attrs:{_i:"11-"+a}},[t._$s("12-"+a,"i",e.user)?n("view",{staticClass:t._$s("12-"+a,"sc","item-user"),attrs:{_i:"12-"+a}},[t._v(t._$s("12-"+a,"t0-0",t._s(e.user.user)))]):n("view",{staticClass:t._$s("13-"+a,"sc","item-user"),attrs:{_i:"13-"+a}},[t._v(t._$s("13-"+a,"t0-0",t._s("客户"+e.conversation.userProfile.userID)))]),t._$s("14-"+a,"i",e.conversation.time)?n("view",{staticClass:t._$s("14-"+a,"sc","time"),attrs:{_i:"14-"+a}},[t._v(t._$s("14-"+a,"t0-0",t._s(t.timeFliter(e.conversation.time))))]):t._e(),t._$s("15-"+a,"i",e.conversation.lastMessage.lastTime)?n("view",{staticClass:t._$s("15-"+a,"sc","time"),attrs:{_i:"15-"+a}},[t._v(t._$s("15-"+a,"t0-0",t._s(t.timeFliter(e.conversation.lastMessage.lastTime))))]):t._e()]),n("view",{staticClass:t._$s("16-"+a,"sc","item-msg-bottom"),attrs:{_i:"16-"+a}},[n("view",{staticClass:t._$s("17-"+a,"sc","item-text-info"),attrs:{_i:"17-"+a}},[n("rich-text",{attrs:{nodes:t._$s("18-"+a,"a-nodes",t.nodesFliter(e.conversation.lastMessage.messageForShow)),_i:"18-"+a}})]),n("view",{staticClass:t._$s("19-"+a,"sc","item-msg"),attrs:{_i:"19-"+a}},[t._$s("20-"+a,"i",e.conversation.unreadCount)?n("view",{staticClass:t._$s("20-"+a,"sc","item-msg-icon"),attrs:{_i:"20-"+a}},[t._v(t._$s("20-"+a,"t0-0",t._s(e.conversation.unreadCount)))]):t._e()])])])])})),0):n("view",{staticClass:t._$s(21,"sc","list-box"),attrs:{_i:21}},[n("span",{staticClass:t._$s(22,"sc","msg-box"),attrs:{_i:22}})])])],1)},o=[];i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},4795:function(t,e,i){t.exports=i("bbdd")},"485e":function(t,e){t.exports="static/img/title-txt-02.png"},"48f4":function(t,e){},"4c9e":function(t,e,i){"use strict";i.r(e);var n=i("5dfe"),r=i("af52");for(var o in r)"default"!==o&&function(t){i.d(e,t,(function(){return r[t]}))}(o);var a,s=i("f0c5"),c=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);e["default"]=c.exports},"4d93":function(t,e){t.exports="static/img/icon-phone.png"},"4e44":function(t,e,i){"use strict";i.r(e);var n=i("e891"),r=i("cad3");for(var o in r)"default"!==o&&function(t){i.d(e,t,(function(){return r[t]}))}(o);var a,s=i("f0c5"),c=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);e["default"]=c.exports},"4f6f":function(t,e,i){"use strict";i.r(e);var n=i("ddc7"),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=r.a},"52a5":function(t,e){t.exports="static/img/mark-new.png"},"52d8":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(i("a000"));function r(t){return t&&t.__esModule?t:{default:t}}var o={components:{MescrollUni:n.default},data:function(){return{listData:[],downOption:{use:!0,auto:!0},upOption:{use:!0,auto:!0,textNoMore:"~ 我是有底线的 ~",page:{num:0,size:10},noMoreSize:0,empty:{use:!0,tip:"~ 暂无数据 ~",fixed:!0,top:"35%",zIndex:99}},catogery:[],bgImgs:[],fontColor:[]}},onLoad:function(){},onShow:function(){},methods:{viewDetail:function(t){uni.navigateTo({url:"./newDetail?id="+t})},downCallback:function(t){this.listData=[],this.mescroll.resetUpScroll()},upCallback:function(t){var e=this;uni.showLoading({title:"加载中"}),1==t.num&&(this.listData=[]),this.getListDataFromNet(t.num,t.size,(function(i){t.endSuccess(i.length),e.listData=e.listData.concat(i)}),(function(){t.endErr()}))},getListDataFromNet:function(t,e,i,n){var r=this;this.$http.get("/StockSkyEyes/App/GetArticles",{params:{offset:0,limit:10}}).then((function(t){uni.hideLoading();var e=[];t.data&&200===t.data.status&&(r.upOption.noMoreSize=t.data.page.totalRows,e=t.data.result),i&&i(e)})).catch((function(t){uni.hideLoading(),n&&n(),uni.showToast({icon:"none",title:t,duration:2e3})}))},mescrollInit:function(t){this.mescroll=t},getData:function(){uni.showLoading({title:"加载中"}),uni.hideLoading()}}};e.default=o},5563:function(t,e,i){"use strict";i.r(e);var n=i("e429"),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=r.a},"568e":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={emojiList:[[{url:"100.gif",alt:"[微笑]"},{url:"101.gif",alt:"[伤心]"},{url:"102.gif",alt:"[美女]"},{url:"103.gif",alt:"[发呆]"},{url:"104.gif",alt:"[墨镜]"},{url:"105.gif",alt:"[哭]"},{url:"106.gif",alt:"[羞]"},{url:"107.gif",alt:"[哑]"},{url:"108.gif",alt:"[睡]"},{url:"109.gif",alt:"[哭]"},{url:"110.gif",alt:"[囧]"},{url:"111.gif",alt:"[怒]"},{url:"112.gif",alt:"[调皮]"},{url:"113.gif",alt:"[笑]"},{url:"114.gif",alt:"[惊讶]"},{url:"115.gif",alt:"[难过]"},{url:"116.gif",alt:"[酷]"},{url:"117.gif",alt:"[汗]"},{url:"118.gif",alt:"[抓狂]"},{url:"119.gif",alt:"[吐]"},{url:"120.gif",alt:"[笑]"},{url:"121.gif",alt:"[快乐]"},{url:"122.gif",alt:"[奇]"},{url:"123.gif",alt:"[傲]"}],[{url:"124.gif",alt:"[饿]"},{url:"125.gif",alt:"[累]"},{url:"126.gif",alt:"[吓]"},{url:"127.gif",alt:"[汗]"},{url:"128.gif",alt:"[高兴]"},{url:"129.gif",alt:"[闲]"},{url:"130.gif",alt:"[努力]"},{url:"131.gif",alt:"[骂]"},{url:"132.gif",alt:"[疑问]"},{url:"133.gif",alt:"[秘密]"},{url:"134.gif",alt:"[乱]"},{url:"135.gif",alt:"[疯]"},{url:"136.gif",alt:"[哀]"},{url:"137.gif",alt:"[鬼]"},{url:"138.gif",alt:"[打击]"},{url:"139.gif",alt:"[bye]"},{url:"140.gif",alt:"[汗]"},{url:"141.gif",alt:"[抠]"},{url:"142.gif",alt:"[鼓掌]"},{url:"143.gif",alt:"[糟糕]"},{url:"144.gif",alt:"[恶搞]"},{url:"145.gif",alt:"[什么]"},{url:"146.gif",alt:"[什么]"},{url:"147.gif",alt:"[累]"}],[{url:"148.gif",alt:"[看]"},{url:"149.gif",alt:"[难过]"},{url:"150.gif",alt:"[难过]"},{url:"151.gif",alt:"[坏]"},{url:"152.gif",alt:"[亲]"},{url:"153.gif",alt:"[吓]"},{url:"154.gif",alt:"[可怜]"},{url:"155.gif",alt:"[刀]"},{url:"156.gif",alt:"[水果]"},{url:"157.gif",alt:"[酒]"},{url:"158.gif",alt:"[篮球]"},{url:"159.gif",alt:"[乒乓]"},{url:"160.gif",alt:"[咖啡]"},{url:"161.gif",alt:"[美食]"},{url:"162.gif",alt:"[动物]"},{url:"163.gif",alt:"[鲜花]"},{url:"164.gif",alt:"[枯]"},{url:"165.gif",alt:"[唇]"},{url:"166.gif",alt:"[爱]"},{url:"167.gif",alt:"[分手]"},{url:"168.gif",alt:"[生日]"},{url:"169.gif",alt:"[电]"},{url:"170.gif",alt:"[炸弹]"},{url:"171.gif",alt:"[刀子]"}],[{url:"172.gif",alt:"[足球]"},{url:"173.gif",alt:"[瓢虫]"},{url:"174.gif",alt:"[翔]"},{url:"175.gif",alt:"[月亮]"},{url:"176.gif",alt:"[太阳]"},{url:"177.gif",alt:"[礼物]"},{url:"178.gif",alt:"[抱抱]"},{url:"179.gif",alt:"[拇指]"},{url:"180.gif",alt:"[贬低]"},{url:"181.gif",alt:"[握手]"},{url:"182.gif",alt:"[剪刀手]"},{url:"183.gif",alt:"[抱拳]"},{url:"184.gif",alt:"[勾引]"},{url:"185.gif",alt:"[拳头]"},{url:"186.gif",alt:"[小拇指]"},{url:"187.gif",alt:"[拇指八]"},{url:"188.gif",alt:"[食指]"},{url:"189.gif",alt:"[ok]"},{url:"190.gif",alt:"[情侣]"},{url:"191.gif",alt:"[爱心]"},{url:"192.gif",alt:"[蹦哒]"},{url:"193.gif",alt:"[颤抖]"},{url:"194.gif",alt:"[怄气]"},{url:"195.gif",alt:"[跳舞]"}],[{url:"196.gif",alt:"[发呆]"},{url:"197.gif",alt:"[背着]"},{url:"198.gif",alt:"[伸手]"},{url:"199.gif",alt:"[耍帅]"},{url:"200.png",alt:"[微笑]"},{url:"201.png",alt:"[生病]"},{url:"202.png",alt:"[哭泣]"},{url:"203.png",alt:"[吐舌]"},{url:"204.png",alt:"[迷糊]"},{url:"205.png",alt:"[瞪眼]"},{url:"206.png",alt:"[恐怖]"},{url:"207.png",alt:"[忧愁]"},{url:"208.png",alt:"[眨眉]"},{url:"209.png",alt:"[闭眼]"},{url:"210.png",alt:"[鄙视]"},{url:"211.png",alt:"[阴暗]"},{url:"212.png",alt:"[小鬼]"},{url:"213.png",alt:"[礼物]"},{url:"214.png",alt:"[拜佛]"},{url:"215.png",alt:"[力量]"},{url:"216.png",alt:"[金钱]"},{url:"217.png",alt:"[蛋糕]"},{url:"218.png",alt:"[彩带]"},{url:"219.png",alt:"[礼物]"}]],dateTimeFliter:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"-",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:":",a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=t.getFullYear(),c=t.getMonth()+1,u=t.getDate(),l=t.getHours(),f=t.getMinutes(),h=t.getSeconds(),p="",g="";return i&&(c<10&&(c="0"+c),u<10&&(u="0"+u)),p=s+r+c+r+u,a&&(l>12?(l-=12,n&&(l=l<10?"下午 0"+l:"下午 "+l)):n&&(l=l<10?"上午 0"+l:"上午 "+l)),n&&(f<10&&(f="0"+f),h<10&&(h="0"+h)),g=l+o+f+o+h,0==e?p+" "+g:1==e?p:2==e?g:"传参有误"}},r=n;e.default=r},"5d9f":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(i("8bbf")),r=o(i("2f62"));o(i("f815"));function o(t){return t&&t.__esModule?t:{default:t}}function a(t){return l(t)||u(t)||c(t)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){if(t){if("string"===typeof t)return f(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?f(t,e):void 0}}function u(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function l(t){if(Array.isArray(t))return f(t)}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}n.default.use(r.default);var h=new r.default.Store({state:{isLogin:!1,isSDKReady:!1,conversationActive:{},toUserId:"",conversationList:[],currentMessageList:[],grounpChat:{},groupMessageList:[],groupID:"",groupsationList:[]},mutations:{toggleIsLogin:function(t,e){t.isLogin="undefined"===typeof e?!t.isLogin:e},toggleIsSDKReady:function(t,e){t.isSDKReady="undefined"===typeof e?!t.isSDKReady:e},reset:function(t){t.isLogin=!1,t.isSDKReady=!1},createConversationActive:function(t,e){t.conversationActive.conversationID="C2C"+e,t.toUserId=e,t.currentMessageList=[]},createGrounpChat:function(t,e){t.grounpChat.conversationID="GROUP"+e,t.groupID=e,t.groupMessageList=[]},updateConversationActive:function(t,e){t.conversationActive=Object.assign({},e.conversation),e.user&&e.user.userId?t.toUserId=e.user.userId:e.conversation.userProfile.userID&&(t.toUserId=e.conversation.userProfile.userID),t.currentMessageList=[]},updateGrounpsationActive:function(t,e){t.grounpChat=Object.assign({},e.conversation),t.groupMessageList=[]},updateConversationList:function(t,e){t.conversationList=e},updategetGroupList:function(t,e){t.groupsationList=e},pushCurrentMessageList:function(t,e){if(Array.isArray(e)){var i=e.filter((function(e){return e.conversationID===t.conversationActive.conversationID}));t.currentMessageList=[].concat(a(t.currentMessageList),a(i))}else e.conversationID===t.conversationActive.conversationID&&(t.currentMessageList=[].concat(a(t.currentMessageList),[e]))},pushGroupMessageList:function(e,i){if(t("log","data",i," at store\\index.js:91"),Array.isArray(i)){var n=i.filter((function(t){return t.conversationID===e.grounpChat.conversationID}));e.groupMessageList=[].concat(a(e.groupMessageList),a(n))}else i.conversationID===e.grounpChat.conversationID&&(e.groupMessageList=[].concat(a(e.groupMessageList),[i]))},unshiftCurrentMessageList:function(e,i){t("log",i," at store\\index.js:107"),i&&(e.currentMessageList=[].concat(a(i),a(e.currentMessageList)))},unshiftGroupMessageList:function(e,i){t("log",i," at store\\index.js:114"),i&&(e.groupMessageList=[].concat(a(i),a(e.groupMessageList)))}},actions:{}}),p=h;e.default=p}).call(this,i("0de9")["default"])},"5df7":function(t,e,i){"use strict";var n,r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:t._$s(0,"sc","mescroll-uni-warp"),attrs:{_i:0}},[i("scroll-view",{staticClass:t._$s(1,"sc","mescroll-uni"),class:t._$s(1,"c",{"mescroll-uni-fixed":t.fixed}),style:t._$s(1,"s",{"padding-top":t.padTop,"padding-bottom":t.padBottom,top:t.fixedTop,bottom:t.fixedBottom}),attrs:{id:t._$s(1,"a-id",t.viewId),"scroll-top":t._$s(1,"a-scroll-top",t.scrollTop),"scroll-with-animation":t._$s(1,"a-scroll-with-animation",t.scrollAnim),"scroll-y":t._$s(1,"a-scroll-y",t.scrollAble),throttle:t._$s(1,"a-throttle",null==t.mescroll.optUp.onScroll),_i:1},on:{scroll:t.scroll,touchstart:t.touchstartEvent,touchmove:t.touchmoveEvent,touchend:t.touchendEvent,touchcancel:t.touchendEvent}},[i("view",{style:t._$s(2,"s",{transform:t.translateY,transition:t.transition}),attrs:{_i:2}},[t._$s(3,"i",t.mescroll.optDown.use)?i("view",{staticClass:t._$s(3,"sc","mescroll-downwarp"),attrs:{_i:3}},[i("view",{staticClass:t._$s(4,"sc","downwarp-content"),attrs:{_i:4}},[i("view",{staticClass:t._$s(5,"sc","downwarp-progress"),class:t._$s(5,"c",{"mescroll-rotate":t.isDownLoading}),style:t._$s(5,"s",{transform:t.downRotate}),attrs:{_i:5}}),i("view",{staticClass:t._$s(6,"sc","downwarp-tip"),attrs:{_i:6}},[t._v(t._$s(6,"t0-0",t._s(t.downText)))])])]):t._e(),t._t("default",null,{_i:7}),t._$s(8,"i",t.isShowEmpty)?i("view",{staticClass:t._$s(8,"sc","mescroll-empty"),class:t._$s(8,"c",{"empty-fixed":t.optEmpty.fixed}),style:t._$s(8,"s",{"z-index":t.optEmpty.zIndex,top:t.optEmpty.top}),attrs:{_i:8}},[t._$s(9,"i",t.optEmpty.icon)?i("image",{staticClass:t._$s(9,"sc","empty-icon"),attrs:{src:t._$s(9,"a-src",t.optEmpty.icon),_i:9}}):t._e(),t._$s(10,"i",t.optEmpty.tip)?i("view",{staticClass:t._$s(10,"sc","empty-tip"),attrs:{_i:10}},[t._v(t._$s(10,"t0-0",t._s(t.optEmpty.tip)))]):t._e(),t._$s(11,"i",t.optEmpty.btnText)?i("view",{staticClass:t._$s(11,"sc","empty-btn"),attrs:{_i:11},on:{click:t.emptyClick}},[t._v(t._$s(11,"t0-0",t._s(t.optEmpty.btnText)))]):t._e()]):t._e(),t._$s(12,"i",t.mescroll.optUp.use)?i("view",{staticClass:t._$s(12,"sc","mescroll-upwarp"),attrs:{_i:12}},[t._$s(13,"i",t.isUpLoading)?[i("view",{staticClass:t._$s(14,"sc","upwarp-progress mescroll-rotate"),attrs:{_i:14}}),i("view",{staticClass:t._$s(15,"sc","upwarp-tip"),attrs:{_i:15}},[t._v(t._$s(15,"t0-0",t._s(t.mescroll.optUp.textLoading)))])]:t._e(),t._$s(16,"i",!t.isDownLoading&&t.isUpNoMore)?i("view",{staticClass:t._$s(16,"sc","upwarp-nodata"),attrs:{_i:16}},[t._v(t._$s(16,"t0-0",t._s(t.mescroll.optUp.textNoMore)))]):t._e()],2):t._e()],2)]),t._$s(17,"i",t.mescroll.optUp.toTop.src)?i("image",{staticClass:t._$s(17,"sc","mescroll-totop"),class:t._$s(17,"c",{"mescroll-fade-in":t.isShowToTop}),attrs:{src:t._$s(17,"a-src",t.mescroll.optUp.toTop.src),_i:17},on:{click:t.toTopClick}}):t._e()])},o=[];i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},"5dfe":function(t,e,i){"use strict";var n,r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",[n("view",{attrs:{_i:1},on:{touchmove:function(e){return e.stopPropagation(),e.preventDefault(),t.discard(e)}}},[n("view",{staticClass:t._$s(2,"sc","status_bar bg-white"),attrs:{_i:2}}),n("view",{staticClass:t._$s(3,"sc","bg-white"),style:t._$s(3,"s",t.isScroll?"position: fixed":""),attrs:{_i:3}},[n("view",{staticClass:t._$s(4,"sc","bg-white"),attrs:{_i:4}},[t._$s(5,"i",1==t.currentIndex)?n("view",{staticClass:t._$s(5,"sc","flex justify-center align-center"),attrs:{_i:5}},[n("view",{staticClass:t._$s(6,"sc","openBack"),attrs:{_i:6},on:{click:t.openBack}},[n("image",{attrs:{src:t._$s(7,"a-src","/"+i("b0ae")),_i:7}})]),n("view",{staticClass:t._$s(8,"sc","text-center"),class:t._$s(8,"c",1==t.currentIndex?"text-white chatBgColor":"bg-white"),attrs:{_i:8}},[n("text"),t._$s(10,"i",1==t.currentIndex)?n("view",[n("text",{staticClass:t._$s(11,"sc","block"),class:t._$s(11,"c",1==t.currentIndex?"text-white chatBgColor":"bg-white"),attrs:{_i:11}})]):t._e()]),n("view",{staticClass:t._$s(12,"sc","text-center"),class:t._$s(12,"c",2==t.currentIndex?"text-white chatBgColorVip":"chatVipText"),attrs:{_i:12},on:{click:t.toApplyVip}},[n("text"),t._$s(14,"i",2==t.currentIndex)?n("view",[n("text",{staticClass:t._$s(15,"sc","block bg-red"),class:t._$s(15,"c",2==t.currentIndex?"text-white chatBgColorVip":"bg-white"),attrs:{_i:15}})]):t._e()])]):t._e(),t._$s(16,"i",2==t.currentIndex)?n("view",{staticClass:t._$s(16,"sc","flex align-center"),attrs:{_i:16}},[n("view",{staticClass:t._$s(17,"sc","openBack"),attrs:{_i:17},on:{click:t.openBack}},[n("image",{attrs:{src:t._$s(18,"a-src","/"+i("b0ae")),_i:18}})]),n("view",{staticClass:t._$s(19,"sc","setCenter"),attrs:{_i:19}})]):t._e(),t._$s(20,"i","VIP"==t.Level&&!t.isAnchor)?n("view",{staticClass:t._$s(20,"sc","foot flex"),attrs:{_i:20}},[n("view",{staticClass:t._$s(21,"sc","liveBtn flex"),attrs:{_i:21}},[n("image",{attrs:{src:t._$s(22,"a-src","/"+i("9506")),_i:22}}),n("view")]),n("view",{staticClass:t._$s(24,"sc","flex liveBtn"),attrs:{_i:24},on:{click:t.openLiveBtn}},[n("image",{attrs:{src:t._$s(25,"a-src","/"+i("0831")),_i:25}})])]):t._e()])]),n("view",{staticClass:t._$s(26,"sc","content"),attrs:{_i:26},on:{touchstart:t.hideDrawer}},[n("view",[n("view",[t._$s(29,"i",1==t.currentIndex)?n("image",{attrs:{src:t._$s(29,"a-src","/"+i("1101")),_i:29}}):t._e(),t._$s(30,"i",2==t.currentIndex)?n("image",{attrs:{src:t._$s(30,"a-src","/"+i("331e")),_i:30}}):t._e(),t._$s(31,"i",2==t.currentIndex)?n("view",[t._v(t._$s(31,"t0-0",t._s(t.memberNum)))]):t._e(),t._$s(32,"i",1==t.currentIndex)?n("view",[t._v(t._$s(32,"t0-0",t._s(t.memberNum)))]):t._e()])]),n("scroll-view",{staticClass:t._$s(33,"sc","msg-list"),style:t._$s(33,"s",{top:t.msgTop,height:t.mesHeight}),attrs:{"scroll-with-animation":t._$s(33,"a-scroll-with-animation",t.scrollAnimation),"scroll-top":t._$s(33,"a-scroll-top",t.scrollTop),"scroll-into-view":t._$s(33,"a-scroll-into-view",t.scrollToView),_i:33},on:{scrolltoupper:t.loadHistory,scroll:t.scrollClick}},[n("view",{directives:[{name:"show",rawName:"v-show",value:t._$s(34,"v-show",t.isHistoryLoading),expression:"_$s(34,'v-show',isHistoryLoading)"}],staticClass:t._$s(34,"sc","loading"),attrs:{_i:34}},[n("view",{staticClass:t._$s(35,"sc","spinner"),attrs:{_i:35}},[n("view",{staticClass:t._$s(36,"sc","rect1"),attrs:{_i:36}}),n("view",{staticClass:t._$s(37,"sc","rect2"),attrs:{_i:37}}),n("view",{staticClass:t._$s(38,"sc","rect3"),attrs:{_i:38}}),n("view",{staticClass:t._$s(39,"sc","rect4"),attrs:{_i:39}}),n("view",{staticClass:t._$s(40,"sc","rect5"),attrs:{_i:40}})])]),t._l(t._$s(41,"f",{forItems:t.msgList}),(function(e,r,o,a){return n("view",{key:t._$s(41,"f",{forIndex:o,key:r}),staticClass:t._$s("41-"+a,"sc","row"),attrs:{id:t._$s("41-"+a,"a-id",e.id),_i:"41-"+a}},[[t._$s("43-"+a,"i","out"==e.flow)?n("view",{staticClass:t._$s("43-"+a,"sc","my"),attrs:{_i:"43-"+a}},[n("view",{staticClass:t._$s("44-"+a,"sc","left"),attrs:{_i:"44-"+a}},[t._$s("45-"+a,"i","TIMTextElem"==e.type)?n("view",{staticClass:t._$s("45-"+a,"sc","bubble"),attrs:{_i:"45-"+a}},[n("rich-text",{attrs:{nodes:t._$s("46-"+a,"a-nodes",t.nodesFliter(e.payload.text)),_i:"46-"+a}})]):t._e()]),n("view",{staticClass:t._$s("47-"+a,"sc","right"),attrs:{_i:"47-"+a}},[n("image",{attrs:{src:t._$s("48-"+a,"a-src","/"+i("18bb")),_i:"48-"+a}})])]):n("view",{staticClass:t._$s("49-"+a,"sc","other"),attrs:{_i:"49-"+a}},[n("view",{staticClass:t._$s("50-"+a,"sc","left"),attrs:{_i:"50-"+a}},[n("image",{attrs:{src:t._$s("51-"+a,"a-src","/"+i("18bb")),_i:"51-"+a}})]),n("view",{staticClass:t._$s("52-"+a,"sc","right"),attrs:{_i:"52-"+a}},[n("view",{staticClass:t._$s("53-"+a,"sc","username"),attrs:{_i:"53-"+a}},[n("view",{staticClass:t._$s("54-"+a,"sc","name"),attrs:{_i:"54-"+a}},[t._v(t._$s("54-"+a,"t0-0",t._s("用户"+e.from)))]),n("view",{staticClass:t._$s("55-"+a,"sc","time"),attrs:{_i:"55-"+a}},[t._v(t._$s("55-"+a,"t0-0",t._s(t.timeFliter(e.time))))])]),t._$s("56-"+a,"i","TIMTextElem"==e.type)?n("view",{staticClass:t._$s("56-"+a,"sc","bubble"),attrs:{_i:"56-"+a}},[n("rich-text",{attrs:{nodes:t._$s("57-"+a,"a-nodes",t.nodesFliter(e.payload.text)),_i:"57-"+a}})]):t._e()])])]],2)}))],2)]),n("view",{staticClass:t._$s(58,"sc","popup-layer-s"),class:t._$s(58,"c",t.popupLayerClass),attrs:{_i:58},on:{touchmove:function(e){return e.stopPropagation(),e.preventDefault(),t.discard(e)}}},[n("swiper",{staticClass:t._$s(59,"sc","emoji-swiper"),class:t._$s(59,"c",{hidden:t.hideEmoji}),attrs:{_i:59}},t._l(t._$s(60,"f",{forItems:t.emojiList}),(function(e,i,r,o){return n("swiper-item",{key:t._$s(60,"f",{forIndex:r,key:i})},t._l(t._$s("61-"+o,"f",{forItems:e}),(function(e,i,r,a){return n("view",{key:t._$s("61-"+o,"f",{forIndex:r,key:i}),attrs:{_i:"61-"+o+"-"+a},on:{click:function(i){return t.addEmoji(e)}}},[n("image",{attrs:{src:t._$s("62-"+o+"-"+a,"a-src","/static/img/emoji/"+e.url),_i:"62-"+o+"-"+a}})])})),0)})),0),n("view",{staticClass:t._$s(63,"sc","more-layer"),class:t._$s(63,"c",{hidden:t.hideMore}),attrs:{_i:63}},[n("view",{staticClass:t._$s(64,"sc","list"),attrs:{_i:64}},[n("view",{staticClass:t._$s(65,"sc","box"),attrs:{_i:65},on:{click:t.chooseImage}},[n("view",{staticClass:t._$s(66,"sc","icon tupian2"),attrs:{_i:66}})]),n("view",{staticClass:t._$s(67,"sc","box"),attrs:{_i:67},on:{click:t.camera}},[n("view",{staticClass:t._$s(68,"sc","icon paizhao"),attrs:{_i:68}})]),n("view",{staticClass:t._$s(69,"sc","box"),attrs:{_i:69},on:{click:t.handRedEnvelopes}},[n("view",{staticClass:t._$s(70,"sc","icon hongbao"),attrs:{_i:70}})])])])]),n("view",{staticClass:t._$s(71,"sc","input-box-s"),class:t._$s(71,"c",t.popupLayerClass),attrs:{_i:71},on:{touchmove:function(e){return e.stopPropagation(),e.preventDefault(),t.discard(e)}}},[n("view",{staticClass:t._$s(72,"sc","textbox"),attrs:{_i:72}},[n("view",{staticClass:t._$s(73,"sc","voice-mode"),class:t._$s(73,"c",[t.isVoice?"":"hidden",t.recording?"recording":""]),attrs:{_i:73},on:{touchstart:t.voiceBegin,touchmove:function(e){return e.stopPropagation(),e.preventDefault(),t.voiceIng(e)},touchend:t.voiceEnd,touchcancel:t.voiceCancel}},[t._v(t._$s(73,"t0-0",t._s(t.voiceTis)))]),n("view",{staticClass:t._$s(74,"sc","text-mode"),class:t._$s(74,"c",t.isVoice?"hidden":""),attrs:{_i:74}},[n("view",{staticClass:t._$s(75,"sc","box "),attrs:{_i:75}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textMsg,expression:"textMsg"}],attrs:{_i:76},domProps:{value:t._$s(76,"v-model",t.textMsg)},on:{blur:t.textareaBlur,focus:t.textareaFocus,input:function(e){e.target.composing||(t.textMsg=e.target.value)}}})]),n("view",{staticClass:t._$s(77,"sc","em"),attrs:{_i:77},on:{click:t.chooseEmoji}},[n("image",{attrs:{src:t._$s(78,"a-src","/"+i("aae1")),_i:78}})])])]),n("view",{staticClass:t._$s(79,"sc","send"),class:t._$s(79,"c",t.isVoice?"hidden":""),attrs:{_i:79},on:{click:t.sendText}},[n("image",{attrs:{src:t._$s(80,"a-src","/"+i("67cc")),_i:80}})]),t._$s(81,"i",t.isAnchor)?n("view",{staticClass:t._$s(81,"sc","send"),class:t._$s(81,"c",t.isVoice?"hidden":""),attrs:{_i:81},on:{click:t.openPushBtn}},[n("image",{attrs:{src:t._$s(82,"a-src","/"+i("a866")),_i:82}})]):t._e()]),n("view",{staticClass:t._$s(83,"sc","record"),class:t._$s(83,"c",t.recording?"":"hidden"),attrs:{_i:83}},[n("view",{staticClass:t._$s(84,"sc","ing"),class:t._$s(84,"c",t.willStop?"hidden":""),attrs:{_i:84}},[n("view",{staticClass:t._$s(85,"sc","icon luyin2"),attrs:{_i:85}})]),n("view",{staticClass:t._$s(86,"sc","cancel"),class:t._$s(86,"c",t.willStop?"":"hidden"),attrs:{_i:86}},[n("view",{staticClass:t._$s(87,"sc","icon chehui"),attrs:{_i:87}})]),n("view",{staticClass:t._$s(88,"sc","tis"),class:t._$s(88,"c",t.willStop?"change":""),attrs:{_i:88}},[t._v(t._$s(88,"t0-0",t._s(t.recordTis)))])]),n("view",{staticClass:t._$s(89,"sc","windows"),class:t._$s(89,"c",t.windowsState),attrs:{_i:89}},[n("view",{staticClass:t._$s(90,"sc","mask"),attrs:{_i:90},on:{touchmove:function(e){return e.stopPropagation(),e.preventDefault(),t.discard(e)},click:t.closeRedEnvelope}}),n("view",{staticClass:t._$s(91,"sc","layer"),attrs:{_i:91},on:{touchmove:function(e){return e.stopPropagation(),e.preventDefault(),t.discard(e)}}},[n("view",{staticClass:t._$s(92,"sc","open-redenvelope"),attrs:{_i:92}},[n("view",{staticClass:t._$s(93,"sc","top"),attrs:{_i:93}},[n("view",{staticClass:t._$s(94,"sc","close-btn"),attrs:{_i:94}},[n("view",{staticClass:t._$s(95,"sc","icon close"),attrs:{_i:95},on:{click:t.closeRedEnvelope}})]),n("image",{attrs:{_i:96}})]),n("view",{staticClass:t._$s(97,"sc","from"),attrs:{_i:97}},[t._v(t._$s(97,"t0-0",t._s(t.redenvelopeData.from)))]),n("view",{staticClass:t._$s(98,"sc","blessing"),attrs:{_i:98}},[t._v(t._$s(98,"t0-0",t._s(t.redenvelopeData.blessing)))]),n("view",{staticClass:t._$s(99,"sc","money"),attrs:{_i:99}},[t._v(t._$s(99,"t0-0",t._s(t.redenvelopeData.money)))]),n("view",{staticClass:t._$s(100,"sc","showDetails"),attrs:{_i:100},on:{click:function(e){return t.toDetails(t.redenvelopeData.rid)}}},[n("view",{staticClass:t._$s(101,"sc","icon to"),attrs:{_i:101}})])])])])])])},o=[];i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},"63e0":function(t,e,i){"use strict";var n={"mescroll-uni":i("a000").default},r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",[n("view",[n("view",{staticClass:t._$s(2,"sc","status_bar"),attrs:{_i:2}}),n("view",{staticClass:t._$s(3,"sc","header-title"),attrs:{_i:3}},[n("view",[t._v(t._$s(4,"t0-0",t._s(t.customer.name)))]),n("image",{attrs:{src:t._$s(5,"a-src","/"+i("fd7b")),_i:5},on:{click:t.tomyInfor}})]),n("view",{staticClass:t._$s(6,"sc","flex justify-center align-center text-white bg-red"),attrs:{_i:6}},[n("image",{attrs:{src:t._$s(7,"a-src","/"+i("bd44")),_i:7}})])]),n("movable-area",[n("view",[n("view",[t._$s(11,"i","Normal"==t.userInfo.level)?n("view",{staticClass:t._$s(11,"sc","text-center"),attrs:{_i:11}},[n("image",{attrs:{src:t._$s(12,"a-src","/"+i("d86e")),_i:12},on:{click:t.toApplyVip}})]):t._e(),n("view",{staticClass:t._$s(13,"sc","flex justify-center"),attrs:{_i:13}},[n("view",{staticClass:t._$s(14,"sc","qiun-charts"),attrs:{_i:14}},[n("canvas",{staticClass:t._$s(15,"sc","charts"),attrs:{id:"canvasLineA",_i:15},on:{touchstart:t.touchLineA,touchmove:t.moveLineA,touchend:t.touchEndLineA}})])])]),n("view",[n("image",{attrs:{src:t._$s(17,"a-src","/"+i("a27e")),_i:17}}),n("text",{staticClass:t._$s(18,"sc","block"),attrs:{_i:18}})]),n("view",{staticClass:t._$s(19,"sc","bg-white fristShadow"),attrs:{_i:19}},[n("view",{staticClass:t._$s(20,"sc","flex"),attrs:{_i:20}},[n("view",[n("view"),n("view",[n("text",{staticClass:t._$s(24,"sc","block"),attrs:{_i:24}})])]),n("view",{staticClass:t._$s(25,"sc","flex shadow-lg"),attrs:{_i:25},on:{click:function(e){return t.viewDetails(-1)}}},[n("view",[n("text",{staticClass:t._$s(27,"sc","block text-black"),attrs:{_i:27}},[t._v(t._$s(27,"t0-0",t._s(t.latestData.stockCode?t.latestData.stockCode:""))+t._$s(27,"t0-1",t._s(t.latestData.stockName?t.latestData.stockName:"")))]),n("text",{staticClass:t._$s(28,"sc","block"),attrs:{_i:28}},[t._v(t._$s(28,"t0-0",t._s(t.latestData.buyTime?t.latestData.buyTime.slice(0,10):"")))])]),n("view",[n("image",{attrs:{src:t._$s(30,"a-src","/"+i("52a5")),_i:30}})])]),n("view",{staticClass:t._$s(31,"sc","flex justify-center align-center"),attrs:{_i:31},on:{click:function(e){return t.toStockDetail(-1,t.latestData.id)}}},[n("text",{staticClass:t._$s(32,"sc","cuIcon-right"),attrs:{_i:32}})])])]),n("view",[n("view",{staticClass:t._$s(34,"sc","text-center"),attrs:{_i:34}},[n("text")])]),n("mescroll-uni",{attrs:{fixed:!0,top:"980",down:t.downOption,up:t.upOption,_i:36},on:{down:t.downCallback,up:t.upCallback,init:t.mescrollInit}},t._l(t._$s(37,"f",{forItems:t.listData}),(function(e,i,r,o){return n("view",{key:t._$s(37,"f",{forIndex:r,key:i}),staticClass:t._$s("37-"+o,"sc","flex"),class:t._$s("37-"+o,"c",i===t.currentIndex?"boxShadow":""),attrs:{_i:"37-"+o}},[n("view",[n("view",{class:t._$s("39-"+o,"c",i===t.currentIndex?"bg-red":"bg-white"),attrs:{_i:"39-"+o}}),n("view",[n("text",{staticClass:t._$s("41-"+o,"sc","block"),class:t._$s("41-"+o,"c",i===t.currentIndex?"bg-red":"bg-white"),attrs:{_i:"41-"+o}})])]),n("view",{staticClass:t._$s("42-"+o,"sc","flex"),attrs:{_i:"42-"+o},on:{click:function(n){return t.viewDetail(i,e)}}},[n("view",[n("text",{staticClass:t._$s("44-"+o,"sc","block"),attrs:{_i:"44-"+o}},[t._v(t._$s("44-"+o,"t0-0",t._s(e.stockCode?e.stockCode:""))+t._$s("44-"+o,"t0-1",t._s(e.stockName?e.stockName:"")))]),n("text",{staticClass:t._$s("45-"+o,"sc","block"),attrs:{_i:"45-"+o}},[t._v(t._$s("45-"+o,"t0-0",t._s(e.buyTime?e.buyTime.slice(0,10):""))+t._$s("45-"+o,"t0-1",t._s(e.sellTime?e.sellTime.slice(0,10):"")))])]),n("view",{staticClass:t._$s("46-"+o,"sc","flex justify-center align-center"),attrs:{_i:"46-"+o}},[n("text",[t._v(t._$s("47-"+o,"t0-0",t._s(e.profitAndLoss?e.profitAndLoss>0?"+"+e.profitAndLoss+"%":e.profitAndLoss+"%":"")))])])]),n("view",{staticClass:t._$s("48-"+o,"sc","flex justify-center align-center"),attrs:{_i:"48-"+o},on:{click:function(n){return t.toStockDetail(i,e.id)}}},[n("text",{staticClass:t._$s("49-"+o,"sc","cuIcon-right"),attrs:{_i:"49-"+o}})])])})),0)],1),n("movable-view",{attrs:{x:t._$s(50,"a-x",t.x),y:t._$s(50,"a-y",t.y),_i:50},on:{change:t.onChange}},[n("view",{attrs:{_i:51},on:{click:t.toFunds}},[n("view",{staticClass:t._$s(52,"sc","flex"),attrs:{_i:52}},[n("image",{attrs:{src:t._$s(53,"a-src","/"+i("2bb1")),_i:53}})])])])])])},o=[];i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},6431:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(i("70be"));function r(t){return t&&t.__esModule?t:{default:t}}var o=60,a={data:function(){return{count:"",switchC:!1,loginData:{phoneNumber:"",Captcha:""},showTimer:!0}},onLoad:function(t){var e=uni.getStorageSync("accountInfo");e&&uni.switchTab({url:"/pages/tabbar/home/index"})},methods:{SwitchC:function(t){this.switchC=t.detail.value},getCode:function(){var e=this;this.loginData.phoneNumber?/^((1[3,5,8][0-9])|(14[5,7])|(17[0,6,7,8])|(19[7]))\d{8}$/.test(this.loginData.phoneNumber)?(this.$http.post("/StockSkyEyes/App/Captcha?phoneNumber="+this.loginData.phoneNumber).then((function(i){t("log",i," at pages\\tabbar\\mycenter\\login.vue:85"),i.data&&200===i.data.status?e.loginData.Captcha=i.data.result.captcha:n.default.showErrorDialog(i.data.errMsg)})).catch((function(e){t("log",e," at pages\\tabbar\\mycenter\\login.vue:93"),n.default.showErrorDialog(e)})),null==this.timer&&(this.count=o,this.showTimer=!1,this.timer=setInterval((function(){e.count>0&&e.count<=o?e.count--:(e.showTimer=!0,clearInterval(e.timer),e.timer=null)}),1e3))):uni.showToast({icon:"none",title:"手机号格式不正确",duration:2e3}):uni.showToast({icon:"none",title:"请输入手机号码",duration:2e3})},onLogin:function(){this.loginData.phoneNumber?/^((1[3,5,8][0-9])|(14[5,7])|(17[0,6,7,8])|(19[7]))\d{8}$/.test(this.loginData.phoneNumber)?this.loginData.Captcha?this.$http.post("/StockSkyEyes/App/Token",this.loginData).then((function(e){if(t("log",e," at pages\\tabbar\\mycenter\\login.vue:140"),e.data&&200===e.data.status){var i={};i=e.data.result,uni.setStorageSync("accountInfo",i),uni.switchTab({url:"/pages/tabbar/home/index"})}else n.default.showErrorDialog(e.data.errMsg)})).catch((function(e){t("log",e," at pages\\tabbar\\mycenter\\login.vue:153"),n.default.showErrorDialog(e)})):uni.showToast({icon:"none",title:"请输入验证码",duration:2e3}):uni.showToast({icon:"none",title:"手机号格式不正确",duration:2e3}):uni.showToast({icon:"none",title:"请输入手机号",duration:2e3})},onRegUser:function(t){uni.navigateTo({url:"./regStepOne?isForgot="+t})}}};e.default=a}).call(this,i("0de9")["default"])},"673e":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{headImg:"../../../static/img/default-avatar.png",userInfo:{},Level:"",customer:{},isKF:!1}},onLoad:function(){},onShow:function(){this.customer=uni.getStorageSync("customer");var t=uni.getStorageSync("userInfo");this.isKF=uni.getStorageSync("userInfo").isKF,this.userInfo=t,t.headImageUrl?this.headImg=t.headImageUrl:this.headImg="../../../static/img/default-avatar.png",this.Level=uni.getStorageSync("Level")},methods:{viewPersonageInfo:function(){uni.navigateTo({url:"./personalInfo"})},toLiveList:function(){uni.navigateTo({url:"../chat/liveshow/liveList"})},openBack:function(){uni.navigateBack()},toConsult:function(){if("VIP"==this.Level)if(uni.getStorageSync("userInfo").isKF)uni.navigateTo({url:"./service"});else{var t=uni.getStorageSync("customer").kfId;this.$store.commit("createConversationActive",t),uni.navigateTo({url:"../chat/customerService"})}},toliveshow:function(){uni.navigateTo({url:"./about"})}}};e.default=n},6757:function(t,e){t.exports="static/img/icon-PW.png"},"67cc":function(t,e){t.exports="static/img/mycenter/icon-send.png"},"69a7":function(t,e,i){"use strict";var n,r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:t._$s(0,"sc","content"),attrs:{_i:0}},[n("view",{staticClass:t._$s(1,"sc","text-center text-white"),attrs:{_i:1}},[n("view",[n("image",{attrs:{src:t._$s(3,"a-src","/"+i("e7fe")),_i:3}})])]),n("view",[n("view",{staticClass:t._$s(5,"sc","cu-form-group login-input"),attrs:{_i:5}},[n("view",{staticClass:t._$s(6,"sc","title"),attrs:{_i:6}},[n("image",{attrs:{src:t._$s(7,"a-src","/"+i("4d93")),_i:7}})]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.loginData.phoneNumber,expression:"loginData.phoneNumber"}],attrs:{_i:8},domProps:{value:t._$s(8,"v-model",t.loginData.phoneNumber)},on:{input:function(e){e.target.composing||t.$set(t.loginData,"phoneNumber",e.target.value)}}})]),n("view",{staticClass:t._$s(9,"sc","cu-form-group login-input"),attrs:{_i:9}},[n("view",{staticClass:t._$s(10,"sc","title"),attrs:{_i:10}},[n("image",{attrs:{src:t._$s(11,"a-src","/"+i("6757")),_i:11}})]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.loginData.Captcha,expression:"loginData.Captcha"}],attrs:{_i:12},domProps:{value:t._$s(12,"v-model",t.loginData.Captcha)},on:{input:function(e){e.target.composing||t.$set(t.loginData,"Captcha",e.target.value)}}}),n("view",{staticClass:t._$s(13,"sc","flex justify-between"),attrs:{_i:13}},[n("view"),n("text",{directives:[{name:"show",rawName:"v-show",value:t._$s(15,"v-show",t.showTimer),expression:"_$s(15,'v-show',showTimer)"}],attrs:{_i:15},on:{click:t.getCode}}),n("view",{directives:[{name:"show",rawName:"v-show",value:t._$s(16,"v-show",!t.showTimer),expression:"_$s(16,'v-show',!showTimer)"}],staticClass:t._$s(16,"sc","text-gray"),attrs:{_i:16}},[t._v(t._$s(16,"t0-0",t._s("还剩"+t.count+"秒")))])])]),n("view",[n("button",{staticClass:t._$s(18,"sc","cu-btn block margin-tb-sm line-blue lg"),attrs:{_i:18},on:{click:function(e){return t.onLogin()}}})])])])},o=[];i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},"69c1":function(t,e,i){"use strict";i.r(e);var n=i("95f0"),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=r.a},"70be":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n="http://stock.bandins.cn/apis",r=function(t){uni.showModal({title:"系统提示",content:t,showCancel:!1,confirmText:"我知道了",success:function(t){}})},o={apiHost:n,showErrorDialog:r};e.default=o},"70e2":function(t,e,i){"use strict";i.r(e);var n=i("673e"),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=r.a},"79b0":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(i("e146")),r=o(i("1fb9"));function o(t){return t&&t.__esModule?t:{default:t}}var a={data:function(){return{mescroll:null,viewId:"id_"+Math.random().toString(36).substr(2),downHight:0,downRotate:0,downText:"",isDownReset:!1,isDownLoading:!1,isUpLoading:!1,isUpNoMore:!1,isShowEmpty:!1,isShowToTop:!1,scrollAble:!0,scrollTop:0,scrollAnim:!1,windowTop:0,windowBottom:0}},props:{down:Object,up:Object,top:[String,Number],bottom:[String,Number],fixed:{type:Boolean,default:function(){return!0}}},computed:{numTop:function(){return uni.upx2px(Number(this.top||0))},fixedTop:function(){return this.fixed?this.numTop+this.windowTop+"px":0},padTop:function(){return this.fixed?0:this.numTop+"px"},numBottom:function(){return uni.upx2px(Number(this.bottom||0))},fixedBottom:function(){return this.fixed?this.numBottom+this.windowBottom+"px":0},padBottom:function(){return this.fixed?0:this.numBottom+"px"},optEmpty:function(){return this.mescroll.optUp.empty},transition:function(){return this.isDownReset?"transform 300ms":""},translateY:function(){return this.downHight>0?"translateY("+this.downHight+"px)":""}},methods:{scroll:function(t){var e=this;this.mescroll.scroll(t.detail,(function(){e.$emit("scroll",e.mescroll)}))},touchstartEvent:function(t){this.mescroll.touchstartEvent(t)},touchmoveEvent:function(t){this.mescroll.touchmoveEvent(t)},touchendEvent:function(t){this.mescroll.touchendEvent(t)},emptyClick:function(){this.$emit("emptyclick",this.mescroll)},toTopClick:function(){this.isShowToTop=!1,this.mescroll.scrollTo(0,this.mescroll.optUp.toTop.duration),this.$emit("topclick",this.mescroll)},setClientHeight:function(){var t=this;0!==this.mescroll.getClientHeight(!0)||this.isExec||(this.isExec=!0,this.$nextTick((function(){var e=uni.createSelectorQuery().in(t).select("#"+t.viewId);e.boundingClientRect((function(e){t.isExec=!1,e?t.mescroll.setClientHeight(e.height):3!=t.clientNum&&(t.clientNum=null==t.clientNum?1:t.clientNum+1,setTimeout((function(){t.setClientHeight()}),100*t.clientNum))})).exec()})))}},created:function(){var t=this,e={down:{inOffset:function(e){t.scrollAble=!1,t.isDownReset=!1,t.isDownLoading=!1,t.downText=e.optDown.textInOffset},outOffset:function(e){t.scrollAble=!1,t.isDownReset=!1,t.isDownLoading=!1,t.downText=e.optDown.textOutOffset},onMoving:function(e,i,n){t.downHight=n,t.downRotate="rotate("+360*i+"deg)"},showLoading:function(e,i){t.scrollAble=!0,t.isDownReset=!0,t.isDownLoading=!0,t.downHight=i,t.downText=e.optDown.textLoading},endDownScroll:function(e){t.scrollAble=!0,t.isDownReset=!0,t.isDownLoading=!1,t.downHight=0},callback:function(e){t.$emit("down",e)}},up:{showLoading:function(){t.isUpLoading=!0,t.isUpNoMore=!1},showNoMore:function(){t.isUpLoading=!1,t.isUpNoMore=!0},hideUpScroll:function(){t.isUpLoading=!1,t.isUpNoMore=!1},empty:{onShow:function(e){t.isShowEmpty=e}},toTop:{onShow:function(e){t.isShowToTop=e}},callback:function(e){t.$emit("up",e),t.setClientHeight()}}};n.default.extend(e,r.default);var i=JSON.parse(JSON.stringify({down:t.down,up:t.up}));n.default.extend(i,e),t.mescroll=new n.default(i),t.mescroll.viewId=t.viewId,t.$emit("init",t.mescroll),uni.getSystemInfo({success:function(e){e.windowTop&&(t.windowTop=e.windowTop),e.windowBottom&&(t.windowBottom=e.windowBottom),t.mescroll.setBodyHeight(e.windowHeight)}}),t.mescroll.resetScrollTo((function(e,i){var n=t.mescroll.getScrollTop();0===i?(t.scrollAnim=!1,t.scrollTop=n,t.$nextTick((function(){t.scrollTop=e}))):(t.scrollAnim=!0,t.mescroll.getStep(n,e,(function(e){t.scrollTop=e}),i))}))},mounted:function(){this.setClientHeight()}};e.default=a},"7ed0":function(t,e,i){"use strict";i.r(e);var n=i("79b0"),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=r.a},8084:function(t,e,i){"use strict";i("8abb"),i("921b");var n=f(i("8bbf")),r=f(i("298f")),o=f(i("203d")),a=f(i("f815")),s=f(i("568e")),c=f(i("9131")),u=f(i("5d9f")),l=i("9a5e");function f(t){return t&&t.__esModule?t:{default:t}}function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function p(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach((function(e){g(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function g(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}n.default.prototype.tim=a.default.tim,n.default.prototype.$TIM=c.default,n.default.prototype.$store=u.default,n.default.prototype.$commen=s.default,n.default.component("cu-custom",o.default),n.default.prototype.$http=l.http,n.default.prototype.$versionCode="100",n.default.prototype.$versionName="1.1.1",n.default.config.productionTip=!1,r.default.mpType="app";var d=new n.default(p({},r.default));d.$mount()},8189:function(t){t.exports={_from:"@dcloudio/uni-stat@next",_id:"@dcloudio/uni-stat@2.0.0-26920200424005",_inBundle:!1,_integrity:"sha512-FT8Z/C5xSmIxooqhV1v69jTkxATPz+FsRQIFOrbdlWekjGkrE73jfrdNMWm7gL5u41ALPJTVArxN1Re9by1bjQ==",_location:"/@dcloudio/uni-stat",_phantomChildren:{},_requested:{type:"tag",registry:!0,raw:"@dcloudio/uni-stat@next",name:"@dcloudio/uni-stat",escapedName:"@dcloudio%2funi-stat",scope:"@dcloudio",rawSpec:"next",saveSpec:null,fetchSpec:"next"},_requiredBy:["#USER","/","/@dcloudio/vue-cli-plugin-uni"],_resolved:"https://registry.npmjs.org/@dcloudio/uni-stat/-/uni-stat-2.0.0-26920200424005.tgz",_shasum:"47f4375095eda3089cf4678b4b96fc656a7ab623",_spec:"@dcloudio/uni-stat@next",_where:"/Users/guoshengqiang/Documents/dcloud-plugins/release/uniapp-cli",author:"",bugs:{url:"https://github.com/dcloudio/uni-app/issues"},bundleDependencies:!1,deprecated:!1,description:"",devDependencies:{"@babel/core":"^7.5.5","@babel/preset-env":"^7.5.5",eslint:"^6.1.0",rollup:"^1.19.3","rollup-plugin-babel":"^4.3.3","rollup-plugin-clear":"^2.0.7","rollup-plugin-commonjs":"^10.0.2","rollup-plugin-copy":"^3.1.0","rollup-plugin-eslint":"^7.0.0","rollup-plugin-json":"^4.0.0","rollup-plugin-node-resolve":"^5.2.0","rollup-plugin-replace":"^2.2.0","rollup-plugin-uglify":"^6.0.2"},files:["dist","package.json","LICENSE"],gitHead:"94494d54ed23e2dcf9ab8e3245b48b770b4e98a9",homepage:"https://github.com/dcloudio/uni-app#readme",license:"Apache-2.0",main:"dist/index.js",name:"@dcloudio/uni-stat",repository:{type:"git",url:"git+https://github.com/dcloudio/uni-app.git",directory:"packages/uni-stat"},scripts:{build:"NODE_ENV=production rollup -c rollup.config.js",dev:"NODE_ENV=development rollup -w -c rollup.config.js"},version:"2.0.0-26920200424005"}},"835c":function(t,e,i){"use strict";i.r(e);var n=i("a6c8"),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=r.a},"89c1":function(t,e,i){"use strict";i.r(e);var n=i("48f4"),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=r.a},"8abb":function(t,e,i){"undefined"===typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(t){var e=this.constructor;return this.then((function(i){return e.resolve(t()).then((function(){return i}))}),(function(i){return e.resolve(t()).then((function(){throw i}))}))}),uni.restoreGlobal&&uni.restoreGlobal(weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),__definePage("pages/tabbar/home/index",(function(){return Vue.extend(i("349d").default)})),__definePage("pages/tabbar/mycenter/login",(function(){return Vue.extend(i("ca43").default)})),__definePage("pages/tabbar/chat/newIndex",(function(){return Vue.extend(i("4c9e").default)})),__definePage("pages/tabbar/chat/index",(function(){return Vue.extend(i("8ee9").default)})),__definePage("pages/tabbar/news/index",(function(){return Vue.extend(i("d13a").default)})),__definePage("pages/tabbar/mycenter/index",(function(){return Vue.extend(i("f75b").default)})),__definePage("pages/tabbar/mycenter/about",(function(){return Vue.extend(i("8faf").default)})),__definePage("pages/tabbar/news/newDetail",(function(){return Vue.extend(i("0481").default)})),__definePage("pages/tabbar/mycenter/personalInfo",(function(){return Vue.extend(i("3864").default)})),__definePage("pages/tabbar/mycenter/service",(function(){return Vue.extend(i("1468").default)})),__definePage("pages/tabbar/home/funds",(function(){return Vue.extend(i("0713").default)})),__definePage("pages/tabbar/home/stockDetail",(function(){return Vue.extend(i("4e44").default)})),__definePage("pages/tabbar/home/applyVip",(function(){return Vue.extend(i("2ed1").default)})),__definePage("pages/tabbar/chat/liveshow/liveList",(function(){return Vue.extend(i("ad2e").default)})),__definePage("pages/tabbar/chat/conversationList",(function(){return Vue.extend(i("2fa8").default)})),__definePage("pages/tabbar/chat/customerService",(function(){return Vue.extend(i("b145").default)})),__definePage("pages/tabbar/chat/customerRoom",(function(){return Vue.extend(i("45a4").default)}))},"8bbf":function(t,e){t.exports=Vue},"8cb0":function(t,e,i){"use strict";var n,r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",{staticClass:t._$s(0,"sc","content-s"),attrs:{_i:0}},[n("cu-custom",{attrs:{bgColor:"bg-black",isBack:!0,_i:1}},[n("template",{slot:"content"},[n("text")])],2),t._$s(4,"i",!t.isApply)?n("view",[n("view",[n("view",[n("view",[n("view",[n("text",{staticClass:t._$s(9,"sc","block"),attrs:{_i:9}}),n("text",{staticClass:t._$s(10,"sc","block"),attrs:{_i:10}}),n("text",{staticClass:t._$s(11,"sc","block"),attrs:{_i:11}})])]),n("view",[n("text",{staticClass:t._$s(13,"sc","block"),attrs:{_i:13}}),n("text",{staticClass:t._$s(14,"sc","block"),attrs:{_i:14}}),n("text",{staticClass:t._$s(15,"sc","block"),attrs:{_i:15}}),n("text",{staticClass:t._$s(16,"sc","block"),attrs:{_i:16}})])]),n("view",{staticClass:t._$s(17,"sc","flex justify-center"),attrs:{_i:17}},[n("text",{staticClass:t._$s(18,"sc","block"),attrs:{_i:18}})]),n("view",[n("view",{staticClass:t._$s(20,"sc","from"),attrs:{_i:20}},[n("view",{staticClass:t._$s(21,"sc","cu-form-group input-vip"),attrs:{_i:21}},[n("view",{staticClass:t._$s(22,"sc","title"),attrs:{_i:22}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.vipForm.Realname,expression:"vipForm.Realname"}],attrs:{_i:23},domProps:{value:t._$s(23,"v-model",t.vipForm.Realname)},on:{input:function(e){e.target.composing||t.$set(t.vipForm,"Realname",e.target.value)}}})]),n("view",{staticClass:t._$s(24,"sc","cu-form-group input-vip"),attrs:{_i:24}},[n("view",{staticClass:t._$s(25,"sc","title"),attrs:{_i:25}}),n("picker",{attrs:{value:t._$s(26,"a-value",t.indexnum),range:t._$s(26,"a-range",t.certificateTypeValue),_i:26},on:{change:t.changeCertificateType}},[n("view",{staticClass:t._$s(27,"sc","picker bookfont-size text-white"),attrs:{_i:27}},[t._v(t._$s(27,"t0-0",t._s(t.certificateTypeValue[t.indexnum]?t.certificateTypeValue[t.indexnum]:t.certificateTypeValue[0])))])])]),n("view",{staticClass:t._$s(28,"sc","cu-form-group input-vip"),attrs:{_i:28}},[n("view",{staticClass:t._$s(29,"sc","title"),attrs:{_i:29}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.vipForm.IdentifyNo,expression:"vipForm.IdentifyNo"}],attrs:{_i:30},domProps:{value:t._$s(30,"v-model",t.vipForm.IdentifyNo)},on:{blur:t.getStandard,input:function(e){e.target.composing||t.$set(t.vipForm,"IdentifyNo",e.target.value)}}})]),n("view",{staticClass:t._$s(31,"sc","cu-form-group input-vip"),attrs:{_i:31}},[n("view",{staticClass:t._$s(32,"sc","title"),attrs:{_i:32}}),n("picker",{attrs:{value:t._$s(33,"a-value",t.date),_i:33},on:{change:t.DateChange}},[n("view",{staticClass:t._$s(34,"sc","picker bookfont-size"),class:t._$s(34,"c",t.date?" text-white":"fontColor-text"),attrs:{_i:34}},[t._v(t._$s(34,"t0-0",t._s(t.date?t.date:"请选择出生日期")))])])]),n("view",{staticClass:t._$s(35,"sc","cu-form-group input-vip"),attrs:{_i:35}},[n("view",{staticClass:t._$s(36,"sc","title"),attrs:{_i:36}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.vipForm.StockAge,expression:"vipForm.StockAge"}],attrs:{_i:37},domProps:{value:t._$s(37,"v-model",t.vipForm.StockAge)},on:{input:function(e){e.target.composing||t.$set(t.vipForm,"StockAge",e.target.value)}}}),n("view",{staticClass:t._$s(38,"sc","fontColor-text"),attrs:{_i:38}})]),n("view",{staticClass:t._$s(39,"sc","cu-form-group input-vip"),attrs:{_i:39}},[n("view",{staticClass:t._$s(40,"sc","title"),attrs:{_i:40}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.vipForm.AmountFunds,expression:"vipForm.AmountFunds"}],attrs:{_i:41},domProps:{value:t._$s(41,"v-model",t.vipForm.AmountFunds)},on:{input:function(e){e.target.composing||t.$set(t.vipForm,"AmountFunds",e.target.value)}}}),n("view",{staticClass:t._$s(42,"sc","fontColor-text"),attrs:{_i:42}})]),n("view",{staticClass:t._$s(43,"sc","cu-form-group input-vip"),attrs:{_i:43}},[n("view",{staticClass:t._$s(44,"sc","title"),attrs:{_i:44}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.vipForm.SecuritiesCompany,expression:"vipForm.SecuritiesCompany"}],attrs:{_i:45},domProps:{value:t._$s(45,"v-model",t.vipForm.SecuritiesCompany)},on:{input:function(e){e.target.composing||t.$set(t.vipForm,"SecuritiesCompany",e.target.value)}}})]),n("view",{staticClass:t._$s(46,"sc","cu-form-group input-vip"),attrs:{_i:46}},[n("view",{staticClass:t._$s(47,"sc","title"),attrs:{_i:47}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.vipForm.StockAccount,expression:"vipForm.StockAccount"}],attrs:{_i:48},domProps:{value:t._$s(48,"v-model",t.vipForm.StockAccount)},on:{input:function(e){e.target.composing||t.$set(t.vipForm,"StockAccount",e.target.value)}}})])])]),n("view",[n("view",[n("view",[n("text")])]),n("view",{staticClass:t._$s(53,"sc","cu-form-group"),attrs:{_i:53}},[n("view",{staticClass:t._$s(54,"sc","grid col-4 grid-square flex-sub flex justify-center"),attrs:{_i:54}},[t._l(t._$s(55,"f",{forItems:t.imgList}),(function(e,i,r,o){return n("view",{key:t._$s(55,"f",{forIndex:r,key:i}),staticClass:t._$s("55-"+o,"sc","bg-img"),attrs:{"data-url":t._$s("55-"+o,"a-data-url",t.imgList[i]),_i:"55-"+o},on:{click:t.ViewImage}},[n("image",{attrs:{src:t._$s("56-"+o,"a-src",t.imgList[i]),_i:"56-"+o}}),n("view",{staticClass:t._$s("57-"+o,"sc","cu-tag bg-red "),attrs:{"data-index":t._$s("57-"+o,"a-data-index",i),_i:"57-"+o},on:{click:function(e){return e.stopPropagation(),t.DelImg(e)}}},[n("text",{staticClass:t._$s("58-"+o,"sc","cuIcon-close"),attrs:{_i:"58-"+o}})])])})),t._$s(59,"i",!t.screenshotImg)?n("view",{staticClass:t._$s(59,"sc","solids"),attrs:{_i:59},on:{click:t.chooseImage}},[n("text",{staticClass:t._$s(60,"sc","cuIcon-cameraadd"),attrs:{_i:60}})]):t._e(),t._$s(61,"i",t.screenshotImg)?n("view",[n("image",{attrs:{src:t._$s(62,"a-src",t.screenshotImg),_i:62}})]):t._e()],2)]),n("view",{staticClass:t._$s(63,"sc","text-center"),attrs:{_i:63}},[t._$s(64,"i",!t.screenshotImg)?n("text"):t._e()])]),n("view",{style:t._$s(65,"s",{height:t.screenHeight+"px"}),attrs:{_i:65}})]),n("view",[n("button",{staticClass:t._$s(67,"sc","cu-btn lg text-black"),attrs:{_i:67},on:{click:t.submitApplyVIP}})])]):t._e(),t._$s(68,"i",t.isApply)?n("view",[n("view",{staticClass:t._$s(69,"sc","flex justify-center"),attrs:{_i:69}},[n("image",{attrs:{src:t._$s(70,"a-src","/"+i("cc24")),_i:70}})]),n("view",{staticClass:t._$s(71,"sc","text-center"),attrs:{_i:71}},[n("text",[t._v(t._$s(72,"t0-0",t._s(t.applyInfo.createdTime)))])]),n("view",{staticClass:t._$s(73,"sc","text-center"),attrs:{_i:73}},[n("view"),n("view"),n("view")])]):t._e()],1)},o=[];i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},"8ec9":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;r(i("f86b"));var n=i("2f62");function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){s(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var c={data:function(){return{currentIndex:1,isScroll:!1,textMsg:"",isHistoryLoading:!0,scrollAnimation:!1,scrollTop:0,scrollToView:"",msgList:[],msgImgList:[],myuid:0,RECORDER:uni.getRecorderManager(),isVoice:!1,voiceTis:"按住 说话",recordTis:"手指上滑 取消发送",recording:!1,willStop:!1,initPoint:{identifier:0,Y:0},recordTimer:null,recordLength:0,customer:{},AUDIO:uni.createInnerAudioContext(),playMsgid:null,VoiceTimer:null,popupLayerClass:"",hideMore:!0,hideEmoji:!0,emojiList:[[{url:"100.gif",alt:"[微笑]"},{url:"101.gif",alt:"[伤心]"},{url:"102.gif",alt:"[美女]"},{url:"103.gif",alt:"[发呆]"},{url:"104.gif",alt:"[墨镜]"},{url:"105.gif",alt:"[哭]"},{url:"106.gif",alt:"[羞]"},{url:"107.gif",alt:"[哑]"},{url:"108.gif",alt:"[睡]"},{url:"109.gif",alt:"[哭]"},{url:"110.gif",alt:"[囧]"},{url:"111.gif",alt:"[怒]"},{url:"112.gif",alt:"[调皮]"},{url:"113.gif",alt:"[笑]"},{url:"114.gif",alt:"[惊讶]"},{url:"115.gif",alt:"[难过]"},{url:"116.gif",alt:"[酷]"},{url:"117.gif",alt:"[汗]"},{url:"118.gif",alt:"[抓狂]"},{url:"119.gif",alt:"[吐]"},{url:"120.gif",alt:"[笑]"},{url:"121.gif",alt:"[快乐]"},{url:"122.gif",alt:"[奇]"},{url:"123.gif",alt:"[傲]"}],[{url:"124.gif",alt:"[饿]"},{url:"125.gif",alt:"[累]"},{url:"126.gif",alt:"[吓]"},{url:"127.gif",alt:"[汗]"},{url:"128.gif",alt:"[高兴]"},{url:"129.gif",alt:"[闲]"},{url:"130.gif",alt:"[努力]"},{url:"131.gif",alt:"[骂]"},{url:"132.gif",alt:"[疑问]"},{url:"133.gif",alt:"[秘密]"},{url:"134.gif",alt:"[乱]"},{url:"135.gif",alt:"[疯]"},{url:"136.gif",alt:"[哀]"},{url:"137.gif",alt:"[鬼]"},{url:"138.gif",alt:"[打击]"},{url:"139.gif",alt:"[bye]"},{url:"140.gif",alt:"[汗]"},{url:"141.gif",alt:"[抠]"},{url:"142.gif",alt:"[鼓掌]"},{url:"143.gif",alt:"[糟糕]"},{url:"144.gif",alt:"[恶搞]"},{url:"145.gif",alt:"[什么]"},{url:"146.gif",alt:"[什么]"},{url:"147.gif",alt:"[累]"}],[{url:"148.gif",alt:"[看]"},{url:"149.gif",alt:"[难过]"},{url:"150.gif",alt:"[难过]"},{url:"151.gif",alt:"[坏]"},{url:"152.gif",alt:"[亲]"},{url:"153.gif",alt:"[吓]"},{url:"154.gif",alt:"[可怜]"},{url:"155.gif",alt:"[刀]"},{url:"156.gif",alt:"[水果]"},{url:"157.gif",alt:"[酒]"},{url:"158.gif",alt:"[篮球]"},{url:"159.gif",alt:"[乒乓]"},{url:"160.gif",alt:"[咖啡]"},{url:"161.gif",alt:"[美食]"},{url:"162.gif",alt:"[动物]"},{url:"163.gif",alt:"[鲜花]"},{url:"164.gif",alt:"[枯]"},{url:"165.gif",alt:"[唇]"},{url:"166.gif",alt:"[爱]"},{url:"167.gif",alt:"[分手]"},{url:"168.gif",alt:"[生日]"},{url:"169.gif",alt:"[电]"},{url:"170.gif",alt:"[炸弹]"},{url:"171.gif",alt:"[刀子]"}],[{url:"172.gif",alt:"[足球]"},{url:"173.gif",alt:"[瓢虫]"},{url:"174.gif",alt:"[翔]"},{url:"175.gif",alt:"[月亮]"},{url:"176.gif",alt:"[太阳]"},{url:"177.gif",alt:"[礼物]"},{url:"178.gif",alt:"[抱抱]"},{url:"179.gif",alt:"[拇指]"},{url:"180.gif",alt:"[贬低]"},{url:"181.gif",alt:"[握手]"},{url:"182.gif",alt:"[剪刀手]"},{url:"183.gif",alt:"[抱拳]"},{url:"184.gif",alt:"[勾引]"},{url:"185.gif",alt:"[拳头]"},{url:"186.gif",alt:"[小拇指]"},{url:"187.gif",alt:"[拇指八]"},{url:"188.gif",alt:"[食指]"},{url:"189.gif",alt:"[ok]"},{url:"190.gif",alt:"[情侣]"},{url:"191.gif",alt:"[爱心]"},{url:"192.gif",alt:"[蹦哒]"},{url:"193.gif",alt:"[颤抖]"},{url:"194.gif",alt:"[怄气]"},{url:"195.gif",alt:"[跳舞]"}],[{url:"196.gif",alt:"[发呆]"},{url:"197.gif",alt:"[背着]"},{url:"198.gif",alt:"[伸手]"},{url:"199.gif",alt:"[耍帅]"},{url:"200.png",alt:"[微笑]"},{url:"201.png",alt:"[生病]"},{url:"202.png",alt:"[哭泣]"},{url:"203.png",alt:"[吐舌]"},{url:"204.png",alt:"[迷糊]"},{url:"205.png",alt:"[瞪眼]"},{url:"206.png",alt:"[恐怖]"},{url:"207.png",alt:"[忧愁]"},{url:"208.png",alt:"[眨眉]"},{url:"209.png",alt:"[闭眼]"},{url:"210.png",alt:"[鄙视]"},{url:"211.png",alt:"[阴暗]"},{url:"212.png",alt:"[小鬼]"},{url:"213.png",alt:"[礼物]"},{url:"214.png",alt:"[拜佛]"},{url:"215.png",alt:"[力量]"},{url:"216.png",alt:"[金钱]"},{url:"217.png",alt:"[蛋糕]"},{url:"218.png",alt:"[彩带]"},{url:"219.png",alt:"[礼物]"}]],onlineEmoji:{"100.gif":"AbNQgA.gif","101.gif":"AbN3ut.gif","102.gif":"AbNM3d.gif","103.gif":"AbN8DP.gif","104.gif":"AbNljI.gif","105.gif":"AbNtUS.gif","106.gif":"AbNGHf.gif","107.gif":"AbNYE8.gif","108.gif":"AbNaCQ.gif","109.gif":"AbNN4g.gif","110.gif":"AbN0vn.gif","111.gif":"AbNd3j.gif","112.gif":"AbNsbV.gif","113.gif":"AbNwgs.gif","114.gif":"AbNrD0.gif","115.gif":"AbNDuq.gif","116.gif":"AbNg5F.gif","117.gif":"AbN6ET.gif","118.gif":"AbNcUU.gif","119.gif":"AbNRC4.gif","120.gif":"AbNhvR.gif","121.gif":"AbNf29.gif","122.gif":"AbNW8J.gif","123.gif":"AbNob6.gif","124.gif":"AbN5K1.gif","125.gif":"AbNHUO.gif","126.gif":"AbNIDx.gif","127.gif":"AbN7VK.gif","128.gif":"AbNb5D.gif","129.gif":"AbNX2d.gif","130.gif":"AbNLPe.gif","131.gif":"AbNjxA.gif","132.gif":"AbNO8H.gif","133.gif":"AbNxKI.gif","134.gif":"AbNzrt.gif","135.gif":"AbU9Vf.gif","136.gif":"AbUSqP.gif","137.gif":"AbUCa8.gif","138.gif":"AbUkGQ.gif","139.gif":"AbUFPg.gif","140.gif":"AbUPIS.gif","141.gif":"AbUZMn.gif","142.gif":"AbUExs.gif","143.gif":"AbUA2j.gif","144.gif":"AbUMIU.gif","145.gif":"AbUerq.gif","146.gif":"AbUKaT.gif","147.gif":"AbUmq0.gif","148.gif":"AbUuZV.gif","149.gif":"AbUliF.gif","150.gif":"AbU1G4.gif","151.gif":"AbU8z9.gif","152.gif":"AbU3RJ.gif","153.gif":"AbUYs1.gif","154.gif":"AbUJMR.gif","155.gif":"AbUadK.gif","156.gif":"AbUtqx.gif","157.gif":"AbUUZ6.gif","158.gif":"AbUBJe.gif","159.gif":"AbUdIO.gif","160.gif":"AbU0iD.gif","161.gif":"AbUrzd.gif","162.gif":"AbUDRH.gif","163.gif":"AbUyQA.gif","164.gif":"AbUWo8.gif","165.gif":"AbU6sI.gif","166.gif":"AbU2eP.gif","167.gif":"AbUcLt.gif","168.gif":"AbU4Jg.gif","169.gif":"AbURdf.gif","170.gif":"AbUhFS.gif","171.gif":"AbU5WQ.gif","172.gif":"AbULwV.gif","173.gif":"AbUIzj.gif","174.gif":"AbUTQs.gif","175.gif":"AbU7yn.gif","176.gif":"AbUqe0.gif","177.gif":"AbUHLq.gif","178.gif":"AbUOoT.gif","179.gif":"AbUvYF.gif","180.gif":"AbUjFU.gif","181.gif":"AbaSSJ.gif","182.gif":"AbUxW4.gif","183.gif":"AbaCO1.gif","184.gif":"Abapl9.gif","185.gif":"Aba9yR.gif","186.gif":"AbaFw6.gif","187.gif":"Abaiex.gif","188.gif":"AbakTK.gif","189.gif":"AbaZfe.png","190.gif":"AbaEFO.gif","191.gif":"AbaVYD.gif","192.gif":"AbamSH.gif","193.gif":"AbaKOI.gif","194.gif":"Abanld.gif","195.gif":"Abau6A.gif","196.gif":"AbaQmt.gif","197.gif":"Abal0P.gif","198.gif":"AbatpQ.gif","199.gif":"Aba1Tf.gif","200.png":"Aba8k8.png","201.png":"AbaGtS.png","202.png":"AbaJfg.png","203.png":"AbaNlj.png","204.png":"Abawmq.png","205.png":"AbaU6s.png","206.png":"AbaaXn.png","207.png":"Aba000.png","208.png":"AbarkT.png","209.png":"AbastU.png","210.png":"AbaB7V.png","211.png":"Abafn1.png","212.png":"Abacp4.png","213.png":"AbayhF.png","214.png":"Abag1J.png","215.png":"Aba2c9.png","216.png":"AbaRXR.png","217.png":"Aba476.png","218.png":"Abah0x.png","219.png":"Abdg58.png"},windowsState:"",redenvelopeData:{rid:null,from:null,face:null,blessing:null,money:null},toUserId:""}},onPageScroll:function(t){t.scrollTop>0?this.isScroll=!0:this.isScroll=!1},onLoad:function(t){var e=this;this.getMsgList(),this.AUDIO.onEnded((function(t){e.playMsgid=null})),this.RECORDER.onStart((function(t){e.recordBegin(t)})),this.RECORDER.onStop((function(t){e.recordEnd(t)}))},computed:a({},(0,n.mapState)({currentMessageList:function(t){return t.currentMessageList}})),watch:{currentMessageList:function(t,e){this.msgList=t,this.screenMsg(t,e)}},onShow:function(){this.toUserId=uni.getStorageSync("customer").kfId,this.scrollTop=9999999,this.customer=uni.getStorageSync("customer")},destroyed:function(){var e=this.$store.state.conversationActive.conversationID,i=this.tim.setMessageRead({conversationID:e});i.then((function(t){})).catch((function(e){t("warn","setMessageRead error:",e," at pages\\tabbar\\chat\\customerService.vue:280")}))},methods:{scrollClick:function(t){},nodesFliter:function(t){var e='<div style="align-items: center;word-wrap:break-word;">'+t+"</div>";return e},timeFliter:function(t){var e=new Date(1e3*t),i=this.$commen.dateTimeFliter(e);return i},screenMsg:function(t,e){var i=this;t.forEach((function(t){var e=(new Date).getTime(),i="G"+e;t.id&&t.id.indexOf("G")>-1||(t.id=i)})),t[0].ID&&e[0].ID?(t[0].ID!=e[0].ID&&(t.length,this.count),this.$nextTick((function(){i.scrollToView=t[t.length-1].id}))):this.$nextTick((function(){i.scrollToView=t[t.length-1].id}))},loadHistory:function(t){var e=this;this.isHistoryLoading=!0;var i=this.$store.state.conversationActive.conversationID,n=this.tim.getMessageList({conversationID:i,nextReqMessageID:this.nextReqMessageID,count:this.count});n.then((function(t){e.$store.commit("unshiftCurrentMessageList",t.data.messageList),e.nextReqMessageID=t.data.nextReqMessageID,e.isCompleted=t.data.isCompleted;var i=t.data.messageList;i.forEach((function(t){var e=(new Date).getTime(),i="G"+e+Math.ceil(100*Math.random());t.id&&t.id.indexOf("G")>-1||(t.id=i)}))})),this.$nextTick((function(){messageList_sB.length>0&&(this.scrollToView=messageList_sB[messageList_sB.length-1].id)})),this.isHistoryLoading=!1},getMsgList:function(){var t=this,e=this.$store.state.conversationActive.conversationID,i=this.tim.getMessageList({conversationID:e,count:this.count});i.then((function(e){t.$store.commit("pushCurrentMessageList",e.data.messageList),t.isCompleted=e.data.isCompleted;var i=e.data.messageList;t.nextReqMessageID=e.data.nextReqMessageID,i.forEach((function(t){var e=(new Date).getTime(),i="G"+e+Math.ceil(100*Math.random());t.id&&t.id.indexOf("G")>-1||(t.id=i)})),t.$nextTick((function(){i.length>0&&(this.scrollToView=i[i.length-1].id)}))})),this.$nextTick((function(){this.scrollTop=99999999,this.$nextTick((function(){this.scrollAnimation=!0}))}))},showMore:function(){this.isVoice=!1,this.hideEmoji=!0,this.hideMore?(this.hideMore=!1,this.openDrawer()):this.hideDrawer()},openDrawer:function(){this.popupLayerClass="showLayer"},hideDrawer:function(){var t=this;this.popupLayerClass="",setTimeout((function(){t.hideMore=!0,t.hideEmoji=!0}),150)},chooseImage:function(){this.getImage("album")},camera:function(){this.getImage("camera")},handRedEnvelopes:function(){uni.navigateTo({url:"HM-hand/HM-hand"}),this.hideDrawer()},getImage:function(e){var i=this;this.hideDrawer(),uni.chooseImage({sourceType:[e],sizeType:["original","compressed"],success:function(e){for(var n=function(n){uni.getImageInfo({src:e.tempFilePaths[n],success:function(r){t("log",r.width," at pages\\tabbar\\chat\\customerService.vue:441"),t("log",r.height," at pages\\tabbar\\chat\\customerService.vue:442");var o={url:e.tempFilePaths[n],w:r.width,h:r.height};i.sendMsg(o,"img")}})},r=0;r<e.tempFilePaths.length;r++)n(r)}})},chooseEmoji:function(){this.hideMore=!0,this.hideEmoji?(this.hideEmoji=!1,this.openDrawer()):this.hideDrawer()},addEmoji:function(t){this.textMsg+=t.alt},textareaFocus:function(){"showLayer"==this.popupLayerClass&&0==this.hideMore&&this.hideDrawer()},sendText:function(){if(this.hideDrawer(),this.textMsg){var t=this.replaceEmoji(this.textMsg),e={text:t};this.sendMsg(e,"text"),this.textMsg=""}},replaceEmoji:function(e){var i=this,n=e.replace(/\[([^(\]|\[)]*)\]/g,(function(e,n){t("log","item: "+e," at pages\\tabbar\\chat\\customerService.vue:486");for(var r=0;r<i.emojiList.length;r++)for(var o=i.emojiList[r],a=0;a<o.length;a++){var s=o[a];if(s.alt==e){var c="https://s2.ax1x.com/2019/04/12/",u='<img src="'+c+i.onlineEmoji[s.url]+'">';return t("log","imgstr: "+u," at pages\\tabbar\\chat\\customerService.vue:496"),u}}}));return'<div style="display: flex;align-items: center;word-wrap:break-word;">'+n+"</div>"},sendMsg:function(t,e){var i=this,n=this.tim.createTextMessage({to:this.toUserId,conversationType:"C2C",payload:{text:t.text}});this.$store.commit("pushCurrentMessageList",n);var r=this.tim.sendMessage(n);r.then((function(t){i.$nextTick((function(){i.scrollToView=t.data.message.id}))}))},addTextMsg:function(t){this.msgList.push(t)},addVoiceMsg:function(t){this.msgList.push(t)},addImgMsg:function(t){t.msg.content=this.setPicSize(t.msg.content),this.msgImgList.push(t.msg.content.url),this.msgList.push(t)},addRedEnvelopeMsg:function(t){this.msgList.push(t)},addSystemTextMsg:function(t){this.msgList.push(t)},addSystemRedEnvelopeMsg:function(t){this.msgList.push(t)},openRedEnvelope:function(e,i){var n=this,r=e.content.rid;uni.showLoading({title:"加载中..."}),t("log","index: "+i," at pages\\tabbar\\chat\\customerService.vue:556"),setTimeout((function(){0==r?n.redenvelopeData={rid:0,from:"大黑哥",face:"/static/img/im/face/face.jpg",blessing:"恭喜发财，大吉大利",money:"已领完"}:(n.redenvelopeData={rid:1,from:"售后客服008",face:"/static/img/im/face/face_2.jpg",blessing:"恭喜发财",money:"0.01"},e.content.isReceived||(n.sendSystemMsg({text:"你领取了"+(e.userinfo.uid==n.myuid?"自己":e.userinfo.username)+"的红包"},"redEnvelope"),t("log","this.msgList[index]: "+JSON.stringify(n.msgList[i])," at pages\\tabbar\\chat\\customerService.vue:579"),n.msgList[i].msg.content.isReceived=!0)),uni.hideLoading(),n.windowsState="show"}),200)},closeRedEnvelope:function(){var t=this;this.windowsState="hide",setTimeout((function(){t.windowsState=""}),200)},sendSystemMsg:function(t,e){var i=this.msgList[this.msgList.length-1].msg.id;i++;var n={type:"system",msg:{id:i,type:e,content:t}};this.screenMsg(n)},toDetails:function(t){uni.navigateTo({url:"HM-details/HM-details?rid="+t})},showPic:function(t){uni.previewImage({indicator:"none",current:t.content.url,urls:this.msgImgList})},playVoice:function(t){this.playMsgid=t.id,this.AUDIO.src=t.content.url,this.$nextTick((function(){this.AUDIO.play()}))},voiceBegin:function(t){t.touches.length>1||(this.initPoint.Y=t.touches[0].clientY,this.initPoint.identifier=t.touches[0].identifier,this.RECORDER.start({format:"mp3"}))},recordBegin:function(t){var e=this;this.recording=!0,this.voiceTis="松开 结束",this.recordLength=0,this.recordTimer=setInterval((function(){e.recordLength++}),1e3)},voiceCancel:function(){this.recording=!1,this.voiceTis="按住 说话",this.recordTis="手指上滑 取消发送",this.willStop=!0,this.RECORDER.stop()},voiceIng:function(t){if(this.recording){var e=t.touches[0];this.initPoint.Y-e.clientY>=uni.upx2px(100)?(this.willStop=!0,this.recordTis="松开手指 取消发送"):(this.willStop=!1,this.recordTis="手指上滑 取消发送")}},voiceEnd:function(t){this.recording&&(this.recording=!1,this.voiceTis="按住 说话",this.recordTis="手指上滑 取消发送",this.RECORDER.stop())},recordEnd:function(e){if(clearInterval(this.recordTimer),this.willStop)t("log","取消发送录音"," at pages\\tabbar\\chat\\customerService.vue:691");else{t("log","e: "+JSON.stringify(e)," at pages\\tabbar\\chat\\customerService.vue:679");var i={length:0,url:e.tempFilePath},n=parseInt(this.recordLength/60),r=this.recordLength%60;n=n<10?"0"+n:n,r=r<10?"0"+r:r,i.length=n+":"+r,this.sendMsg(i,"voice")}this.willStop=!1},switchVoice:function(){this.hideDrawer(),this.isVoice=!this.isVoice},discard:function(){}}};e.default=c}).call(this,i("0de9")["default"])},"8ee9":function(t,e,i){"use strict";i.r(e);var n=i("96bf"),r=i("835c");for(var o in r)"default"!==o&&function(t){i.d(e,t,(function(){return r[t]}))}(o);var a,s=i("f0c5"),c=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);e["default"]=c.exports},"8faf":function(t,e,i){"use strict";i.r(e);var n=i("0079"),r=i("89c1");for(var o in r)"default"!==o&&function(t){i.d(e,t,(function(){return r[t]}))}(o);var a,s=i("f0c5"),c=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);e["default"]=c.exports},9131:function(t,e,i){(function(e,i,n,r){!function(e,i){t.exports=i()}(0,(function(){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{};function o(t,e){return t(e={exports:{}},e.exports),e.exports}var a,s,c,u="object",l=function(t){return t&&t.Math==Math&&t},f=l(typeof globalThis==u&&globalThis)||l(typeof window==u&&window)||l(typeof self==u&&self)||l(typeof t==u&&t)||Function("return this")(),h=function(t){try{return!!t()}catch(o){return 1}},p=!h((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),g={}.propertyIsEnumerable,d=Object.getOwnPropertyDescriptor,m={f:d&&!g.call({1:2},1)?function(t){var e=d(this,t);return!!e&&e.enumerable}:g},v=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},_={}.toString,y=function(t){return _.call(t).slice(8,-1)},S="".split,E=h((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==y(t)?S.call(t,""):Object(t)}:Object,C=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},I=function(t){return E(C(t))},b=function(t){return"object"==typeof t?null!==t:"function"==typeof t},A=function(t,e){if(!b(t))return t;var i,n;if(e&&"function"==typeof(i=t.toString)&&!b(n=i.call(t)))return n;if("function"==typeof(i=t.valueOf)&&!b(n=i.call(t)))return n;if(!e&&"function"==typeof(i=t.toString)&&!b(n=i.call(t)))return n;throw TypeError("Can't convert object to primitive value")},w={}.hasOwnProperty,T=function(t,e){return w.call(t,e)},x=f.document,D=b(x)&&b(x.createElement),M=function(t){return D?x.createElement(t):{}},L=!p&&!h((function(){return 7!=Object.defineProperty(M("div"),"a",{get:function(){return 7}}).a})),O=Object.getOwnPropertyDescriptor,N={f:p?O:function(t,e){if(t=I(t),e=A(e,1),L)try{return O(t,e)}catch(a){}if(T(t,e))return v(!m.f.call(t,e),t[e])}},P=function(t){if(!b(t))throw TypeError(String(t)+" is not an object");return t},R=Object.defineProperty,k={f:p?R:function(t,e,i){if(P(t),e=A(e,1),P(i),L)try{return R(t,e,i)}catch(s){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},G=p?function(t,e,i){return k.f(t,e,v(1,i))}:function(t,e,i){return t[e]=i,t},U=function(t,e){try{G(f,t,e)}catch(a){f[t]=e}return e},F=o((function(t){var e=f["__core-js_shared__"]||U("__core-js_shared__",{});(t.exports=function(t,i){return e[t]||(e[t]=void 0!==i?i:{})})("versions",[]).push({version:"3.2.1",mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})})),$=F("native-function-to-string",Function.toString),j=f.WeakMap,q="function"==typeof j&&/native code/.test($.call(j)),H=0,B=Math.random(),V=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++H+B).toString(36)},K=F("keys"),z=function(t){return K[t]||(K[t]=V(t))},Y={},W=f.WeakMap;if(q){var J=new W,X=J.get,Q=J.has,Z=J.set;a=function(t,e){return Z.call(J,t,e),e},s=function(t){return X.call(J,t)||{}},c=function(t){return Q.call(J,t)}}else{var tt=z("state");Y[tt]=1,a=function(t,e){return G(t,tt,e),e},s=function(t){return T(t,tt)?t[tt]:{}},c=function(t){return T(t,tt)}}var et={set:a,get:s,has:c,enforce:function(t){return c(t)?s(t):a(t,{})},getterFor:function(t){return function(e){var i;if(!b(e)||(i=s(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return i}}},it=o((function(t){var e=et.get,i=et.enforce,n=String($).split("toString");F("inspectSource",(function(t){return $.call(t)})),(t.exports=function(t,e,r,o){var a=o?!!o.unsafe:0,s=o?!!o.enumerable:0,c=o?!!o.noTargetGet:0;"function"==typeof r&&("string"!=typeof e||T(r,"name")||G(r,"name",e),i(r).source=n.join("string"==typeof e?e:"")),t!==f?(a?!c&&t[e]&&(s=1):delete t[e],s?t[e]=r:G(t,e,r)):s?t[e]=r:U(e,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||$.call(this)}))})),nt=f,rt=function(t){return"function"==typeof t?t:void 0},ot=function(t,e){return arguments.length<2?rt(nt[t])||rt(f[t]):nt[t]&&nt[t][e]||f[t]&&f[t][e]},at=Math.ceil,st=Math.floor,ct=function(t){return isNaN(t=+t)?0:(t>0?st:at)(t)},ut=Math.min,lt=function(t){return t>0?ut(ct(t),9007199254740991):0},ft=Math.max,ht=Math.min,pt=function(t,e){var i=ct(t);return i<0?ft(i+e,0):ht(i,e)},gt=function(t){return function(e,i,n){var r,o=I(e),a=lt(o.length),s=pt(n,a);if(t&&i!=i){for(;a>s;)if((r=o[s++])!=r)return 1}else for(;a>s;s++)if((t||s in o)&&o[s]===i)return t||s||0;return!t&&-1}},dt={includes:gt(1),indexOf:gt(0)},mt=dt.indexOf,vt=function(t,e){var i,n=I(t),r=0,o=[];for(i in n)!T(Y,i)&&T(n,i)&&o.push(i);for(;e.length>r;)T(n,i=e[r++])&&(~mt(o,i)||o.push(i));return o},_t=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],yt=_t.concat("length","prototype"),St={f:Object.getOwnPropertyNames||function(t){return vt(t,yt)}},Et={f:Object.getOwnPropertySymbols},Ct=ot("Reflect","ownKeys")||function(t){var e=St.f(P(t)),i=Et.f;return i?e.concat(i(t)):e},It=function(t,e){for(var i=Ct(e),n=k.f,r=N.f,o=0;o<i.length;o++){var a=i[o];T(t,a)||n(t,a,r(e,a))}},bt=/#|\.prototype\./,At=function(t,e){var i=Tt[wt(t)];return i==Dt?1:i==xt?0:"function"==typeof e?h(e):!!e},wt=At.normalize=function(t){return String(t).replace(bt,".").toLowerCase()},Tt=At.data={},xt=At.NATIVE="N",Dt=At.POLYFILL="P",Mt=At,Lt=N.f,Ot=function(t,e){var i,n,r,o,a,s=t.target,c=t.global,u=t.stat;if(i=c?f:u?f[s]||U(s,{}):(f[s]||{}).prototype)for(n in e){if(o=e[n],r=t.noTargetGet?(a=Lt(i,n))&&a.value:i[n],!Mt(c?n:s+(u?".":"#")+n,t.forced)&&void 0!==r){if(typeof o==typeof r)continue;It(o,r)}(t.sham||r&&r.sham)&&G(o,"sham",1),it(i,n,o,t)}},Nt=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Pt=function(t,e,i){if(Nt(t),void 0===e)return t;switch(i){case 0:return function(){return t.call(e)};case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}},Rt=function(t){return Object(C(t))},kt=Array.isArray||function(t){return"Array"==y(t)},Gt=!!Object.getOwnPropertySymbols&&!h((function(){return!String(Symbol())})),Ut=f.Symbol,Ft=F("wks"),$t=function(t){return Ft[t]||(Ft[t]=Gt&&Ut[t]||(Gt?Ut:V)("Symbol."+t))},jt=$t("species"),qt=function(t,e){var i;return kt(t)&&("function"!=typeof(i=t.constructor)||i!==Array&&!kt(i.prototype)?b(i)&&null===(i=i[jt])&&(i=void 0):i=void 0),new(void 0===i?Array:i)(0===e?0:e)},Ht=[].push,Bt=function(t){var e=1==t,i=2==t,n=3==t,r=4==t,o=6==t,a=5==t||o;return function(s,c,u,l){for(var f,h,p=Rt(s),g=E(p),d=Pt(c,u,3),m=lt(g.length),v=0,_=l||qt,y=e?_(s,m):i?_(s,0):void 0;m>v;v++)if((a||v in g)&&(h=d(f=g[v],v,p),t))if(e)y[v]=h;else if(h)switch(t){case 3:return 1;case 5:return f;case 6:return v;case 2:Ht.call(y,f)}else if(r)return 0;return o?-1:n||r?r:y}},Vt={forEach:Bt(0),map:Bt(1),filter:Bt(2),some:Bt(3),every:Bt(4),find:Bt(5),findIndex:Bt(6)},Kt=function(t,e){var i=[][t];return!i||!h((function(){i.call(null,e||function(){throw 1},1)}))},zt=Vt.forEach,Yt=Kt("forEach")?function(t){return zt(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach;Ot({target:"Array",proto:1,forced:[].forEach!=Yt},{forEach:Yt});var Wt=function(t,e,i,n){try{return n?e(P(i)[0],i[1]):e(i)}catch(u){var r=t.return;throw void 0!==r&&P(r.call(t)),u}},Jt={},Xt=$t("iterator"),Qt=Array.prototype,Zt=function(t){return void 0!==t&&(Jt.Array===t||Qt[Xt]===t)},te=function(t,e,i){var n=A(e);n in t?k.f(t,n,v(0,i)):t[n]=i},ee=$t("toStringTag"),ie="Arguments"==y(function(){return arguments}()),ne=function(t){var e,i,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(i){}}(e=Object(t),ee))?i:ie?y(e):"Object"==(n=y(e))&&"function"==typeof e.callee?"Arguments":n},re=$t("iterator"),oe=function(t){if(null!=t)return t[re]||t["@@iterator"]||Jt[ne(t)]},ae=function(t){var e,i,n,r,o=Rt(t),a="function"==typeof this?this:Array,s=arguments.length,c=s>1?arguments[1]:void 0,u=void 0!==c,l=0,f=oe(o);if(u&&(c=Pt(c,s>2?arguments[2]:void 0,2)),null==f||a==Array&&Zt(f))for(i=new a(e=lt(o.length));e>l;l++)te(i,l,u?c(o[l],l):o[l]);else for(r=f.call(o),i=new a;!(n=r.next()).done;l++)te(i,l,u?Wt(r,c,[n.value,l],1):n.value);return i.length=l,i},se=$t("iterator"),ce=0;try{var ue=0,le={next:function(){return{done:!!ue++}},return:function(){ce=1}};le[se]=function(){return this},Array.from(le,(function(){throw 2}))}catch(Bg){}var fe=function(t,e){if(!e&&!ce)return 0;var i=0;try{var n={};n[se]=function(){return{next:function(){return{done:i=1}}}},t(n)}catch(Bg){}return i},he=!fe((function(t){Array.from(t)}));Ot({target:"Array",stat:1,forced:he},{from:ae});var pe=Object.keys||function(t){return vt(t,_t)},ge=p?Object.defineProperties:function(t,e){P(t);for(var i,n=pe(e),r=n.length,o=0;r>o;)k.f(t,i=n[o++],e[i]);return t},de=ot("document","documentElement"),me=z("IE_PROTO"),ve=function(){},_e=function(){var t,e=M("iframe"),i=_t.length;for(e.style.display="none",de.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),_e=t.F;i--;)delete _e.prototype[_t[i]];return _e()},ye=Object.create||function(t,e){var i;return null!==t?(ve.prototype=P(t),i=new ve,ve.prototype=null,i[me]=t):i=_e(),void 0===e?i:ge(i,e)};Y[me]=1,Ot({target:"Object",stat:1,sham:!p},{create:ye});var Se=h((function(){pe(1)}));Ot({target:"Object",stat:1,forced:Se},{keys:function(t){return pe(Rt(t))}});var Ee,Ce,Ie,be=function(t){return function(e,i){var n,r,o=String(C(e)),a=ct(i),s=o.length;return a<0||a>=s?t?"":void 0:(n=o.charCodeAt(a))<55296||n>56319||a+1===s||(r=o.charCodeAt(a+1))<56320||r>57343?t?o.charAt(a):n:t?o.slice(a,a+2):r-56320+(n-55296<<10)+65536}},Ae={codeAt:be(0),charAt:be(1)},we=!h((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Te=z("IE_PROTO"),xe=Object.prototype,De=we?Object.getPrototypeOf:function(t){return t=Rt(t),T(t,Te)?t[Te]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?xe:null},Me=$t("iterator"),Le=0;[].keys&&("next"in(Ie=[].keys())?(Ce=De(De(Ie)))!==Object.prototype&&(Ee=Ce):Le=1),null==Ee&&(Ee={}),T(Ee,Me)||G(Ee,Me,(function(){return this}));var Oe={IteratorPrototype:Ee,BUGGY_SAFARI_ITERATORS:Le},Ne=k.f,Pe=$t("toStringTag"),Re=function(t,e,i){t&&!T(t=i?t:t.prototype,Pe)&&Ne(t,Pe,{configurable:1,value:e})},ke=Oe.IteratorPrototype,Ge=function(){return this},Ue=function(t,e,i){var n=e+" Iterator";return t.prototype=ye(ke,{next:v(1,i)}),Re(t,n,0),Jt[n]=Ge,t},Fe=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=0,i={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(i,[]),e=i instanceof Array}catch(Bg){}return function(i,n){return P(i),function(t){if(!b(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(n),e?t.call(i,n):i.__proto__=n,i}}():void 0),$e=Oe.IteratorPrototype,je=Oe.BUGGY_SAFARI_ITERATORS,qe=$t("iterator"),He=function(){return this},Be=function(t,e,i,n,r,o,a){Ue(i,e,n);var s,c,u,l=function(t){if(t===r&&d)return d;if(!je&&t in p)return p[t];switch(t){case"keys":case"values":case"entries":return function(){return new i(this,t)}}return function(){return new i(this)}},f=e+" Iterator",h=0,p=t.prototype,g=p[qe]||p["@@iterator"]||r&&p[r],d=!je&&g||l(r),m="Array"==e&&p.entries||g;if(m&&(s=De(m.call(new t)),$e!==Object.prototype&&s.next&&(De(s)!==$e&&(Fe?Fe(s,$e):"function"!=typeof s[qe]&&G(s,qe,He)),Re(s,f,1))),"values"==r&&g&&"values"!==g.name&&(h=1,d=function(){return g.call(this)}),p[qe]!==d&&G(p,qe,d),Jt[e]=d,r)if(c={values:l("values"),keys:o?d:l("keys"),entries:l("entries")},a)for(u in c)!je&&!h&&u in p||it(p,u,c[u]);else Ot({target:e,proto:1,forced:je||h},c);return c},Ve=Ae.charAt,Ke=et.set,ze=et.getterFor("String Iterator");Be(String,"String",(function(t){Ke(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=ze(this),i=e.string,n=e.index;return n>=i.length?{value:void 0,done:1}:(t=Ve(i,n),e.index+=t.length,{value:t,done:0})}));var Ye={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var We in Ye){var Je=f[We],Xe=Je&&Je.prototype;if(Xe&&Xe.forEach!==Yt)try{G(Xe,"forEach",Yt)}catch(Bg){Xe.forEach=Yt}}var Qe={SDK_READY:"sdkStateReady",SDK_NOT_READY:"sdkStateNotReady",SDK_DESTROY:"sdkDestroy",MESSAGE_SENDING:"onMessageSending",MESSAGE_SEND_SUCCESS:"onMessageSendSuccess",MESSAGE_SEND_FAIL:"onMessageSendFail",MESSAGE_RECEIVED:"onMessageReceived",APPLY_ADD_FRIEND_SUCCESS:"addFriendApplySendSuccess",APPLY_ADD_FRIEND_FAIL:"addFriendApplySendFail",GET_PENDENCY_SUCCESS:"getPendencySuccess",GET_PENDENCY_FAIL:"getPendencyFail",DELETE_PENDENCY_SUCCESS:"deletePendencySuccess",DELETE_PENDENCY_FAIL:"deletePendencyFail",REPLY_PENDENCY_SUCCESS:"replyPendencySuccess",REPLY_PENDENCY_FAIL:"replyPendencyFail",CONVERSATION_LIST_UPDATED:"onConversationListUpdated",GROUP_LIST_UPDATED:"onGroupListUpdated",GROUP_SYSTEM_NOTICE_RECEIVED:"receiveGroupSystemNotice",LOGIN_CHANGE:"loginStatusChange",LOGOUT_SUCCESS:"logoutSuccess",PROFILE_GET_SUCCESS:"getProfileSuccess",PROFILE_GET_FAIL:"getProfileFail",PROFILE_UPDATED:"onProfileUpdated",PROFILE_UPDATE_MY_PROFILE_FAIL:"updateMyProfileFail",FRIENDLIST_GET_SUCCESS:"getFriendListSuccess",FRIENDLIST_GET_FAIL:"getFriendsFail",FRIEND_DELETE_SUCCESS:"deleteFriendSuccess",FRIEND_DELETE_FAIL:"deleteFriendFail",BLACKLIST_ADD_SUCCESS:"addBlacklistSuccess",BLACKLIST_ADD_FAIL:"addBlacklistFail",BLACKLIST_GET_SUCCESS:"getBlacklistSuccess",BLACKLIST_GET_FAIL:"getBlacklistFail",BLACKLIST_UPDATED:"blacklistUpdated",BLACKLIST_DELETE_FAIL:"deleteBlacklistFail",KICKED_OUT:"kickedOut",ERROR:"error"},Ze={MSG_TEXT:"TIMTextElem",MSG_IMAGE:"TIMImageElem",MSG_SOUND:"TIMSoundElem",MSG_AUDIO:"TIMSoundElem",MSG_FILE:"TIMFileElem",MSG_FACE:"TIMFaceElem",MSG_VIDEO:"TIMVideoFileElem",MSG_GEO:"TIMLocationElem",MSG_GRP_TIP:"TIMGroupTipElem",MSG_GRP_SYS_NOTICE:"TIMGroupSystemNoticeElem",MSG_CUSTOM:"TIMCustomElem",CONV_C2C:"C2C",CONV_GROUP:"GROUP",CONV_SYSTEM:"@TIM#SYSTEM",GRP_PRIVATE:"Private",GRP_PUBLIC:"Public",GRP_CHATROOM:"ChatRoom",GRP_AVCHATROOM:"AVChatRoom",GRP_MBR_ROLE_OWNER:"Owner",GRP_MBR_ROLE_ADMIN:"Admin",GRP_MBR_ROLE_MEMBER:"Member",GRP_TIP_MBR_JOIN:1,GRP_TIP_MBR_QUIT:2,GRP_TIP_MBR_KICKED_OUT:3,GRP_TIP_MBR_SET_ADMIN:4,GRP_TIP_MBR_CANCELED_ADMIN:5,GRP_TIP_GRP_PROFILE_UPDATED:6,GRP_TIP_MBR_PROFILE_UPDATED:7,MSG_REMIND_ACPT_AND_NOTE:"AcceptAndNotify",MSG_REMIND_ACPT_NOT_NOTE:"AcceptNotNotify",MSG_REMIND_DISCARD:"Discard",GENDER_UNKNOWN:"Gender_Type_Unknown",GENDER_FEMALE:"Gender_Type_Female",GENDER_MALE:"Gender_Type_Male",KICKED_OUT_MULT_ACCOUNT:"mutipleAccount",KICKED_OUT_MULT_DEVICE:"mutipleDevice",ALLOW_TYPE_ALLOW_ANY:"AllowType_Type_AllowAny",ALLOW_TYPE_NEED_CONFIRM:"AllowType_Type_NeedConfirm",ALLOW_TYPE_DENY_ANY:"AllowType_Type_DenyAny",FORBID_TYPE_NONE:"AdminForbid_Type_None",FORBID_TYPE_SEND_OUT:"AdminForbid_Type_SendOut",JOIN_OPTIONS_FREE_ACCESS:"FreeAccess",JOIN_OPTIONS_NEED_PERMISSION:"NeedPermission",JOIN_OPTIONS_DISABLE_APPLY:"DisableApply",JOIN_STATUS_SUCCESS:"JoinedSuccess",JOIN_STATUS_ALREADY_IN_GROUP:"AlreadyInGroup",JOIN_STATUS_WAIT_APPROVAL:"WaitAdminApproval",GRP_PROFILE_OWNER_ID:"ownerID",GRP_PROFILE_CREATE_TIME:"createTime",GRP_PROFILE_LAST_INFO_TIME:"lastInfoTime",GRP_PROFILE_MEMBER_NUM:"memberNum",GRP_PROFILE_MAX_MEMBER_NUM:"maxMemberNum",GRP_PROFILE_JOIN_OPTION:"joinOption",GRP_PROFILE_INTRODUCTION:"introduction",GRP_PROFILE_NOTIFICATION:"notification"},ti=$t("species"),ei=function(t){return!h((function(){var e=[];return(e.constructor={})[ti]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},ii=Vt.map;Ot({target:"Array",proto:1,forced:!ei("map")},{map:function(t){return ii(this,t,arguments.length>1?arguments[1]:void 0)}});var ni=[].slice,ri={},oi=function(t,e,i){if(!(e in ri)){for(var n=[],r=0;r<e;r++)n[r]="a["+r+"]";ri[e]=Function("C,a","return new C("+n.join(",")+")")}return ri[e](t,i)},ai=Function.bind||function(t){var e=Nt(this),i=ni.call(arguments,1),n=function n(){var r=i.concat(ni.call(arguments));return this instanceof n?oi(e,r.length,r):e.apply(t,r)};return b(e.prototype)&&(n.prototype=e.prototype),n};function si(t){return(si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ci(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ui(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||0,n.configurable=1,"value"in n&&(n.writable=1),Object.defineProperty(t,n.key,n)}}function li(t,e,i){return e&&ui(t.prototype,e),i&&ui(t,i),t}function fi(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:1,configurable:1,writable:1}):t[e]=i,t}function hi(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function pi(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?hi(i,1).forEach((function(e){fi(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):hi(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function gi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:1,configurable:1}}),e&&mi(t,e)}function di(t){return(di=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mi(t,e){return(mi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vi(t,e,i){return(vi=function(){if("undefined"==typeof Reflect||!Reflect.construct)return 0;if(Reflect.construct.sham)return 0;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),1}catch(t){return 0}}()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&mi(r,i.prototype),r}).apply(null,arguments)}function _i(t){var e="function"==typeof Map?new Map:void 0;return(_i=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return vi(t,arguments,di(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:0,writable:1,configurable:1}}),mi(n,t)})(t)}function yi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Si(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?yi(t):e}function Ei(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=[],n=1,r=0,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=1);}catch(h){r=1,o=h}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ci(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}Ot({target:"Function",proto:1},{bind:ai});var Ii=function(){function t(){ci(this,t),this.cache=[],this.options=null}return li(t,[{key:"use",value:function(t){if("function"!=typeof t)throw"middleware must be a function";return this.cache.push(t),this}},{key:"next",value:function(t){if(this.middlewares&&this.middlewares.length>0)return this.middlewares.shift().call(this,this.options,this.next.bind(this))}},{key:"run",value:function(t){return this.middlewares=this.cache.map((function(t){return t})),this.options=t,this.next()}}]),t}(),bi=$t("isConcatSpreadable"),Ai=!h((function(){var t=[];return t[bi]=0,t.concat()[0]!==t})),wi=ei("concat"),Ti=function(t){if(!b(t))return 0;var e=t[bi];return void 0!==e?!!e:kt(t)};Ot({target:"Array",proto:1,forced:!Ai||!wi},{concat:function(t){var e,i,n,r,o,a=Rt(this),s=qt(a,0),c=0;for(e=-1,n=arguments.length;e<n;e++)if(o=-1===e?a:arguments[e],Ti(o)){if(c+(r=lt(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(i=0;i<r;i++,c++)i in o&&te(s,c,o[i])}else{if(c>=9007199254740991)throw TypeError("Maximum allowed index exceeded");te(s,c++,o)}return s.length=c,s}});var xi=k.f,Di=Function.prototype,Mi=Di.toString,Li=/^\s*function ([^ (]*)/;!p||"name"in Di||xi(Di,"name",{configurable:1,get:function(){try{return Mi.call(this).match(Li)[1]}catch(Bg){return""}}});var Oi=o((function(e,i){var n,r,o,a,s,c,u,l,f,h,p,g,d,m,v,_,y,S,E,C;e.exports=(n="function"==typeof Promise,r="object"==typeof self?self:t,o="undefined"!=typeof Symbol,a="undefined"!=typeof Map,s="undefined"!=typeof Set,c="undefined"!=typeof WeakMap,u="undefined"!=typeof WeakSet,l="undefined"!=typeof DataView,f=o&&void 0!==Symbol.iterator,h=o&&void 0!==Symbol.toStringTag,p=s&&"function"==typeof Set.prototype.entries,g=a&&"function"==typeof Map.prototype.entries,d=p&&Object.getPrototypeOf((new Set).entries()),m=g&&Object.getPrototypeOf((new Map).entries()),v=f&&"function"==typeof Array.prototype[Symbol.iterator],_=v&&Object.getPrototypeOf([][Symbol.iterator]()),y=f&&"function"==typeof String.prototype[Symbol.iterator],S=y&&Object.getPrototypeOf(""[Symbol.iterator]()),E=8,C=-1,function(t){var e=typeof t;if("object"!==e)return e;if(null===t)return"null";if(t===r)return"global";if(Array.isArray(t)&&(0==h||!(Symbol.toStringTag in t)))return"Array";if("object"==typeof window&&null!==window){if("object"==typeof window.location&&t===window.location)return"Location";if("object"==typeof window.document&&t===window.document)return"Document";if("object"==typeof window.navigator){if("object"==typeof window.navigator.mimeTypes&&t===window.navigator.mimeTypes)return"MimeTypeArray";if("object"==typeof window.navigator.plugins&&t===window.navigator.plugins)return"PluginArray"}if(("function"==typeof window.HTMLElement||"object"==typeof window.HTMLElement)&&t instanceof window.HTMLElement){if("BLOCKQUOTE"===t.tagName)return"HTMLQuoteElement";if("TD"===t.tagName)return"HTMLTableDataCellElement";if("TH"===t.tagName)return"HTMLTableHeaderCellElement"}}var i=h&&t[Symbol.toStringTag];if("string"==typeof i)return i;var o=Object.getPrototypeOf(t);return o===RegExp.prototype?"RegExp":o===Date.prototype?"Date":n&&o===Promise.prototype?"Promise":s&&o===Set.prototype?"Set":a&&o===Map.prototype?"Map":u&&o===WeakSet.prototype?"WeakSet":c&&o===WeakMap.prototype?"WeakMap":l&&o===DataView.prototype?"DataView":a&&o===m?"Map Iterator":s&&o===d?"Set Iterator":v&&o===_?"Array Iterator":y&&o===S?"String Iterator":null===o?"Object":Object.prototype.toString.call(t).slice(E,C)})}));Ot({target:"Array",stat:1},{isArray:kt});var Ni=St.f,Pi={}.toString,Ri="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ki={f:function(t){return Ri&&"[object Window]"==Pi.call(t)?function(t){try{return Ni(t)}catch(Bg){return Ri.slice()}}(t):Ni(I(t))}},Gi={f:$t},Ui=k.f,Fi=function(t){var e=nt.Symbol||(nt.Symbol={});T(e,t)||Ui(e,t,{value:Gi.f(t)})},$i=Vt.forEach,ji=z("hidden"),qi=$t("toPrimitive"),Hi=et.set,Bi=et.getterFor("Symbol"),Vi=Object.prototype,Ki=f.Symbol,zi=f.JSON,Yi=zi&&zi.stringify,Wi=N.f,Ji=k.f,Xi=ki.f,Qi=m.f,Zi=F("symbols"),tn=F("op-symbols"),en=F("string-to-symbol-registry"),nn=F("symbol-to-string-registry"),rn=F("wks"),on=f.QObject,an=!on||!on.prototype||!on.prototype.findChild,sn=p&&h((function(){return 7!=ye(Ji({},"a",{get:function(){return Ji(this,"a",{value:7}).a}})).a}))?function(t,e,i){var n=Wi(Vi,e);n&&delete Vi[e],Ji(t,e,i),n&&t!==Vi&&Ji(Vi,e,n)}:Ji,cn=function(t,e){var i=Zi[t]=ye(Ki.prototype);return Hi(i,{type:"Symbol",tag:t,description:e}),p||(i.description=e),i},un=Gt&&"symbol"==typeof Ki.iterator?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof Ki},ln=function t(e,i,n){e===Vi&&t(tn,i,n),P(e);var r=A(i,1);return P(n),T(Zi,r)?(n.enumerable?(T(e,ji)&&e[ji][r]&&(e[ji][r]=0),n=ye(n,{enumerable:v(0,0)})):(T(e,ji)||Ji(e,ji,v(1,{})),e[ji][r]=1),sn(e,r,n)):Ji(e,r,n)},fn=function(t,e){P(t);var i=I(e),n=pe(i).concat(dn(i));return $i(n,(function(e){p&&!hn.call(i,e)||ln(t,e,i[e])})),t},hn=function(t){var e=A(t,1),i=Qi.call(this,e);return this===Vi&&T(Zi,e)&&!T(tn,e)?0:i||!T(this,e)||!T(Zi,e)||T(this,ji)&&this[ji][e]?i:1},pn=function(t,e){var i=I(t),n=A(e,1);if(i!==Vi||!T(Zi,n)||T(tn,n)){var r=Wi(i,n);return!r||!T(Zi,n)||T(i,ji)&&i[ji][n]||(r.enumerable=1),r}},gn=function(t){var e=Xi(I(t)),i=[];return $i(e,(function(t){T(Zi,t)||T(Y,t)||i.push(t)})),i},dn=function(t){var e=t===Vi,i=Xi(e?tn:I(t)),n=[];return $i(i,(function(t){!T(Zi,t)||e&&!T(Vi,t)||n.push(Zi[t])})),n};Gt||(it((Ki=function(){if(this instanceof Ki)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=V(t),i=function t(i){this===Vi&&t.call(tn,i),T(this,ji)&&T(this[ji],e)&&(this[ji][e]=0),sn(this,e,v(1,i))};return p&&an&&sn(Vi,e,{configurable:1,set:i}),cn(e,t)}).prototype,"toString",(function(){return Bi(this).tag})),m.f=hn,k.f=ln,N.f=pn,St.f=ki.f=gn,Et.f=dn,p&&(Ji(Ki.prototype,"description",{configurable:1,get:function(){return Bi(this).description}}),it(Vi,"propertyIsEnumerable",hn,{unsafe:1})),Gi.f=function(t){return cn($t(t),t)}),Ot({global:1,wrap:1,forced:!Gt,sham:!Gt},{Symbol:Ki}),$i(pe(rn),(function(t){Fi(t)})),Ot({target:"Symbol",stat:1,forced:!Gt},{for:function(t){var e=String(t);if(T(en,e))return en[e];var i=Ki(e);return en[e]=i,nn[i]=e,i},keyFor:function(t){if(!un(t))throw TypeError(t+" is not a symbol");if(T(nn,t))return nn[t]},useSetter:function(){an=1},useSimple:function(){an=0}}),Ot({target:"Object",stat:1,forced:!Gt,sham:!p},{create:function(t,e){return void 0===e?ye(t):fn(ye(t),e)},defineProperty:ln,defineProperties:fn,getOwnPropertyDescriptor:pn}),Ot({target:"Object",stat:1,forced:!Gt},{getOwnPropertyNames:gn,getOwnPropertySymbols:dn}),Ot({target:"Object",stat:1,forced:h((function(){Et.f(1)}))},{getOwnPropertySymbols:function(t){return Et.f(Rt(t))}}),zi&&Ot({target:"JSON",stat:1,forced:!Gt||h((function(){var t=Ki();return"[null]"!=Yi([t])||"{}"!=Yi({a:t})||"{}"!=Yi(Object(t))}))},{stringify:function(t){for(var e,i,n=[t],r=1;arguments.length>r;)n.push(arguments[r++]);if(i=e=n[1],(b(e)||void 0!==t)&&!un(t))return kt(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!un(e))return e}),n[1]=e,Yi.apply(zi,n)}}),Ki.prototype[qi]||G(Ki.prototype,qi,Ki.prototype.valueOf),Re(Ki,"Symbol"),Y[ji]=1;var mn=k.f,vn=f.Symbol;if(p&&"function"==typeof vn&&(!("description"in vn.prototype)||void 0!==vn().description)){var _n={},yn=function t(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),i=this instanceof t?new vn(e):void 0===e?vn():vn(e);return""===e&&(_n[i]=1),i};It(yn,vn);var Sn=yn.prototype=vn.prototype;Sn.constructor=yn;var En=Sn.toString,Cn="Symbol(test)"==String(vn("test")),In=/^Symbol\((.*)\)[^)]+$/;mn(Sn,"description",{configurable:1,get:function(){var t=b(this)?this.valueOf():this,e=En.call(t);if(T(_n,t))return"";var i=Cn?e.slice(7,-1):e.replace(In,"$1");return""===i?void 0:i}}),Ot({global:1,forced:1},{Symbol:yn})}Fi("iterator");var bn=$t("unscopables"),An=Array.prototype;null==An[bn]&&G(An,bn,ye(null));var wn=function(t){An[bn][t]=1},Tn=dt.includes;Ot({target:"Array",proto:1},{includes:function(t){return Tn(this,t,arguments.length>1?arguments[1]:void 0)}}),wn("includes");var xn=dt.indexOf,Dn=[].indexOf,Mn=!!Dn&&1/[1].indexOf(1,-0)<0,Ln=Kt("indexOf");Ot({target:"Array",proto:1,forced:Mn||Ln},{indexOf:function(t){return Mn?Dn.apply(this,arguments)||0:xn(this,t,arguments.length>1?arguments[1]:void 0)}});var On=et.set,Nn=et.getterFor("Array Iterator"),Pn=Be(Array,"Array",(function(t,e){On(this,{type:"Array Iterator",target:I(t),index:0,kind:e})}),(function(){var t=Nn(this),e=t.target,i=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:1}):"keys"==i?{value:n,done:0}:"values"==i?{value:e[n],done:0}:{value:[n,e[n]],done:0}}),"values");Jt.Arguments=Jt.Array,wn("keys"),wn("values"),wn("entries");var Rn=[].join,kn=E!=Object,Gn=Kt("join",",");Ot({target:"Array",proto:1,forced:kn||Gn},{join:function(t){return Rn.call(I(this),void 0===t?",":t)}});var Un=$t("species"),Fn=[].slice,$n=Math.max;Ot({target:"Array",proto:1,forced:!ei("slice")},{slice:function(t,e){var i,n,r,o=I(this),a=lt(o.length),s=pt(t,a),c=pt(void 0===e?a:e,a);if(kt(o)&&("function"!=typeof(i=o.constructor)||i!==Array&&!kt(i.prototype)?b(i)&&null===(i=i[Un])&&(i=void 0):i=void 0,i===Array||void 0===i))return Fn.call(o,s,c);for(n=new(void 0===i?Array:i)($n(c-s,0)),r=0;s<c;s++,r++)s in o&&te(n,r,o[s]);return n.length=r,n}}),Ot({target:"Date",stat:1},{now:function(){return(new Date).getTime()}});var jn=Date.prototype,qn=jn.toString,Hn=jn.getTime;new Date(NaN)+""!="Invalid Date"&&it(jn,"toString",(function(){var t=Hn.call(this);return t==t?qn.call(this):"Invalid Date"}));var Bn=function(t,e,i){var n,r;return Fe&&"function"==typeof(n=e.constructor)&&n!==i&&b(r=n.prototype)&&r!==i.prototype&&Fe(t,r),t},Vn="\t\n\v\f\r                　\u2028\u2029\ufeff",Kn="["+Vn+"]",zn=RegExp("^"+Kn+Kn+"*"),Yn=RegExp(Kn+Kn+"*$"),Wn=function(t){return function(e){var i=String(C(e));return 1&t&&(i=i.replace(zn,"")),2&t&&(i=i.replace(Yn,"")),i}},Jn={start:Wn(1),end:Wn(2),trim:Wn(3)},Xn=St.f,Qn=N.f,Zn=k.f,tr=Jn.trim,er=f.Number,ir=er.prototype,nr="Number"==y(ye(ir)),rr=function(t){var e,i,n,r,o,a,s,c,u=A(t,0);if("string"==typeof u&&u.length>2)if(43===(e=(u=tr(u)).charCodeAt(0))||45===e){if(88===(i=u.charCodeAt(2))||120===i)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+u}for(a=(o=u.slice(2)).length,s=0;s<a;s++)if((c=o.charCodeAt(s))<48||c>r)return NaN;return parseInt(o,n)}return+u};if(Mt("Number",!er(" 0o1")||!er("0b1")||er("+0x1"))){for(var or,ar=function t(e){var i=arguments.length<1?0:e,n=this;return n instanceof t&&(nr?h((function(){ir.valueOf.call(n)})):"Number"!=y(n))?Bn(new er(rr(i)),n,t):rr(i)},sr=p?Xn(er):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),cr=0;sr.length>cr;cr++)T(er,or=sr[cr])&&!T(ar,or)&&Zn(ar,or,Qn(er,or));ar.prototype=ir,ir.constructor=ar,it(f,"Number",ar)}var ur=ki.f,lr=h((function(){return!Object.getOwnPropertyNames(1)}));Ot({target:"Object",stat:1,forced:lr},{getOwnPropertyNames:ur});var fr={};fr[$t("toStringTag")]="z";var hr="[object z]"!==String(fr)?function(){return"[object "+ne(this)+"]"}:fr.toString,pr=Object.prototype;hr!==pr.toString&&it(pr,"toString",hr,{unsafe:1});var gr=Jn.trim,dr=f.parseInt,mr=/^[+-]?0[Xx]/,vr=8!==dr(Vn+"08")||22!==dr(Vn+"0x16")?function(t,e){var i=gr(String(t));return dr(i,e>>>0||(mr.test(i)?16:10))}:dr;Ot({global:1,forced:parseInt!=vr},{parseInt:vr});var _r,yr,Sr,Er=f.Promise,Cr=function(t,e,i){for(var n in e)it(t,n,e[n],i);return t},Ir=$t("species"),br=function(t){var e=ot(t),i=k.f;p&&e&&!e[Ir]&&i(e,Ir,{configurable:1,get:function(){return this}})},Ar=function(t,e,i){if(!(t instanceof e))throw TypeError("Incorrect "+(i?i+" ":"")+"invocation");return t},wr=o((function(t){var e=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,i,n,r,o){var a,s,c,u,l,f,h=Pt(i,n,r?2:1);if(o)a=t;else{if("function"!=typeof(s=oe(t)))throw TypeError("Target is not iterable");if(Zt(s)){for(c=0,u=lt(t.length);u>c;c++)if((l=r?h(P(f=t[c])[0],f[1]):h(t[c]))&&l instanceof e)return l;return new e(0)}a=s.call(t)}for(;!(f=a.next()).done;)if((l=Wt(a,h,f.value,r))&&l instanceof e)return l;return new e(0)}).stop=function(t){return new e(1,t)}})),Tr=$t("species"),xr=function(t,e){var i,n=P(t).constructor;return void 0===n||null==(i=P(n)[Tr])?e:Nt(i)},Dr=f.location,Mr=f.setImmediate,Lr=f.clearImmediate,Or=f.process,Nr=f.MessageChannel,Pr=f.Dispatch,Rr=0,kr={},Gr=function(t){if(kr.hasOwnProperty(t)){var e=kr[t];delete kr[t],e()}},Ur=function(t){return function(){Gr(t)}},Fr=function(t){Gr(t.data)},$r=function(t){f.postMessage(t+"",Dr.protocol+"//"+Dr.host)};Mr&&Lr||(Mr=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return kr[++Rr]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},_r(Rr),Rr},Lr=function(t){delete kr[t]},"process"==y(Or)?_r=function(t){Or.nextTick(Ur(t))}:Pr&&Pr.now?_r=function(t){Pr.now(Ur(t))}:Nr?(Sr=(yr=new Nr).port2,yr.port1.onmessage=Fr,_r=Pt(Sr.postMessage,Sr,1)):!f.addEventListener||"function"!=typeof postMessage||f.importScripts||h($r)?_r="onreadystatechange"in M("script")?function(t){de.appendChild(M("script")).onreadystatechange=function(){de.removeChild(this),Gr(t)}}:function(t){setTimeout(Ur(t),0)}:(_r=$r,f.addEventListener("message",Fr,0)));var jr,qr,Hr,Br,Vr,Kr,zr,Yr,Wr={set:Mr,clear:Lr},Jr=ot("navigator","userAgent")||"",Xr=N.f,Qr=Wr.set,Zr=f.MutationObserver||f.WebKitMutationObserver,to=f.process,eo=f.Promise,io="process"==y(to),no=Xr(f,"queueMicrotask"),ro=no&&no.value;ro||(jr=function(){var t,e;for(io&&(t=to.domain)&&t.exit();qr;){e=qr.fn,qr=qr.next;try{e()}catch(Bg){throw qr?Br():Hr=void 0,Bg}}Hr=void 0,t&&t.enter()},io?Br=function(){to.nextTick(jr)}:Zr&&!/(iphone|ipod|ipad).*applewebkit/i.test(Jr)?(Vr=1,Kr=document.createTextNode(""),new Zr(jr).observe(Kr,{characterData:1}),Br=function(){Kr.data=Vr=!Vr}):eo&&eo.resolve?(zr=eo.resolve(void 0),Yr=zr.then,Br=function(){Yr.call(zr,jr)}):Br=function(){Qr.call(f,jr)});var oo,ao,so,co,uo=ro||function(t){var e={fn:t,next:void 0};Hr&&(Hr.next=e),qr||(qr=e,Br()),Hr=e},lo=function(t){var e,i;this.promise=new t((function(t,n){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=n})),this.resolve=Nt(e),this.reject=Nt(i)},fo={f:function(t){return new lo(t)}},ho=function(t,e){if(P(t),b(e)&&e.constructor===t)return e;var i=fo.f(t);return(0,i.resolve)(e),i.promise},po=function(t){try{return{error:0,value:t()}}catch(Bg){return{error:1,value:Bg}}},go=Wr.set,mo=$t("species"),vo="Promise",_o=et.get,yo=et.set,So=et.getterFor(vo),Eo=Er,Co=f.TypeError,Io=f.document,bo=f.process,Ao=f.fetch,wo=bo&&bo.versions,To=wo&&wo.v8||"",xo=fo.f,Do=xo,Mo="process"==y(bo),Lo=!!(Io&&Io.createEvent&&f.dispatchEvent),Oo=Mt(vo,(function(){var t=Eo.resolve(1),e=function(){},i=(t.constructor={})[mo]=function(t){t(e,e)};return!((Mo||"function"==typeof PromiseRejectionEvent)&&t.then(e)instanceof i&&0!==To.indexOf("6.6")&&-1===Jr.indexOf("Chrome/66"))})),No=Oo||!fe((function(t){Eo.all(t).catch((function(){}))})),Po=function(t){var e;return b(t)&&"function"==typeof(e=t.then)?e:0},Ro=function(t,e,i){if(!e.notified){e.notified=1;var n=e.reactions;uo((function(){for(var r=e.value,o=1==e.state,a=0;n.length>a;){var s,c,u,l=n[a++],f=o?l.ok:l.fail,h=l.resolve,p=l.reject,g=l.domain;try{f?(o||(2===e.rejection&&Fo(t,e),e.rejection=1),1==f?s=r:(g&&g.enter(),s=f(r),g&&(g.exit(),u=1)),s===l.promise?p(Co("Promise-chain cycle")):(c=Po(s))?c.call(s,h,p):h(s)):p(r)}catch(Bg){g&&!u&&g.exit(),p(Bg)}}e.reactions=[],e.notified=0,i&&!e.rejection&&Go(t,e)}))}},ko=function(t,e,i){var n,r;Lo?((n=Io.createEvent("Event")).promise=e,n.reason=i,n.initEvent(t,0,1),f.dispatchEvent(n)):n={promise:e,reason:i},(r=f["on"+t])?r(n):"unhandledrejection"===t&&function(t,e){var i=f.console;i&&i.error&&(1===arguments.length?i.error(t):i.error(t,e))}("Unhandled promise rejection",i)},Go=function(t,e){go.call(f,(function(){var i,n=e.value;if(Uo(e)&&(i=po((function(){Mo?bo.emit("unhandledRejection",n,t):ko("unhandledrejection",t,n)})),e.rejection=Mo||Uo(e)?2:1,i.error))throw i.value}))},Uo=function(t){return 1!==t.rejection&&!t.parent},Fo=function(t,e){go.call(f,(function(){Mo?bo.emit("rejectionHandled",t):ko("rejectionhandled",t,e.value)}))},$o=function(t,e,i,n){return function(r){t(e,i,r,n)}},jo=function(t,e,i,n){e.done||(e.done=1,n&&(e=n),e.value=i,e.state=2,Ro(t,e,1))},qo=function t(e,i,n,r){if(!i.done){i.done=1,r&&(i=r);try{if(e===n)throw Co("Promise can't be resolved itself");var o=Po(n);o?uo((function(){var r={done:0};try{o.call(n,$o(t,e,r,i),$o(jo,e,r,i))}catch(Bg){jo(e,r,Bg,i)}})):(i.value=n,i.state=1,Ro(e,i,0))}catch(Bg){jo(e,{done:0},Bg,i)}}};Oo&&(Eo=function(t){Ar(this,Eo,vo),Nt(t),oo.call(this);var e=_o(this);try{t($o(qo,this,e),$o(jo,this,e))}catch(Bg){jo(this,e,Bg)}},(oo=function(t){yo(this,{type:vo,done:0,notified:0,parent:0,reactions:[],rejection:0,state:0,value:void 0})}).prototype=Cr(Eo.prototype,{then:function(t,e){var i=So(this),n=xo(xr(this,Eo));return n.ok="function"==typeof t?t:1,n.fail="function"==typeof e&&e,n.domain=Mo?bo.domain:void 0,i.parent=1,i.reactions.push(n),0!=i.state&&Ro(this,i,0),n.promise},catch:function(t){return this.then(void 0,t)}}),ao=function(){var t=new oo,e=_o(t);this.promise=t,this.resolve=$o(qo,t,e),this.reject=$o(jo,t,e)},fo.f=xo=function(t){return t===Eo||t===so?new ao(t):Do(t)},"function"==typeof Er&&(co=Er.prototype.then,it(Er.prototype,"then",(function(t,e){var i=this;return new Eo((function(t,e){co.call(i,t,e)})).then(t,e)})),"function"==typeof Ao&&Ot({global:1,enumerable:1,forced:1},{fetch:function(t){return ho(Eo,Ao.apply(f,arguments))}}))),Ot({global:1,wrap:1,forced:Oo},{Promise:Eo}),Re(Eo,vo,0),br(vo),so=nt.Promise,Ot({target:vo,stat:1,forced:Oo},{reject:function(t){var e=xo(this);return e.reject.call(void 0,t),e.promise}}),Ot({target:vo,stat:1,forced:Oo},{resolve:function(t){return ho(this,t)}}),Ot({target:vo,stat:1,forced:No},{all:function(t){var e=this,i=xo(e),n=i.resolve,r=i.reject,o=po((function(){var i=Nt(e.resolve),o=[],a=0,s=1;wr(t,(function(t){var c=a++,u=0;o.push(void 0),s++,i.call(e,t).then((function(t){u||(u=1,o[c]=t,--s||n(o))}),r)})),--s||n(o)}));return o.error&&r(o.value),i.promise},race:function(t){var e=this,i=xo(e),n=i.reject,r=po((function(){var r=Nt(e.resolve);wr(t,(function(t){r.call(e,t).then(i.resolve,n)}))}));return r.error&&n(r.value),i.promise}});var Ho,Bo,Vo=function(){var t=P(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},Ko=RegExp.prototype.exec,zo=String.prototype.replace,Yo=Ko,Wo=(Ho=/a/,Bo=/b*/g,Ko.call(Ho,"a"),Ko.call(Bo,"a"),0!==Ho.lastIndex||0!==Bo.lastIndex),Jo=void 0!==/()??/.exec("")[1];(Wo||Jo)&&(Yo=function(t){var e,i,n,r,o=this;return Jo&&(i=new RegExp("^"+o.source+"$(?!\\s)",Vo.call(o))),Wo&&(e=o.lastIndex),n=Ko.call(o,t),Wo&&n&&(o.lastIndex=o.global?n.index+n[0].length:e),Jo&&n&&n.length>1&&zo.call(n[0],i,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(n[r]=void 0)})),n});var Xo=Yo;Ot({target:"RegExp",proto:1,forced:/./.exec!==Xo},{exec:Xo});var Qo=RegExp.prototype,Zo=Qo.toString,ta=h((function(){return"/a/b"!=Zo.call({source:"a",flags:"b"})})),ea="toString"!=Zo.name;(ta||ea)&&it(RegExp.prototype,"toString",(function(){var t=P(this),e=String(t.source),i=t.flags;return"/"+e+"/"+String(void 0===i&&t instanceof RegExp&&!("flags"in Qo)?Vo.call(t):i)}),{unsafe:1});var ia=$t("match"),na=function(t){var e;return b(t)&&(void 0!==(e=t[ia])?!!e:"RegExp"==y(t))},ra=function(t){if(na(t))throw TypeError("The method doesn't accept regular expressions");return t},oa=$t("match");Ot({target:"String",proto:1,forced:!function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[oa]=0,"/./"[t](e)}catch(s){}}return 0}("includes")},{includes:function(t){return!!~String(C(this)).indexOf(ra(t),arguments.length>1?arguments[1]:void 0)}});var aa=$t("species"),sa=!h((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),ca=!h((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2!==i.length||"a"!==i[0]||"b"!==i[1]})),ua=function(t,e,i,n){var r=$t(t),o=!h((function(){var e={};return e[r]=function(){return 7},7!=""[t](e)})),a=o&&!h((function(){var e=0,i=/a/;return i.exec=function(){return e=1,null},"split"===t&&(i.constructor={},i.constructor[aa]=function(){return i}),i[r](""),!e}));if(!o||!a||"replace"===t&&!sa||"split"===t&&!ca){var s=/./[r],c=i(r,""[t],(function(t,e,i,n,r){return e.exec===Xo?o&&!r?{done:1,value:s.call(e,i,n)}:{done:1,value:t.call(i,e,n)}:{done:0}})),u=c[0],l=c[1];it(String.prototype,t,u),it(RegExp.prototype,r,2==e?function(t,e){return l.call(t,this,e)}:function(t){return l.call(t,this)}),n&&G(RegExp.prototype[r],"sham",1)}},la=Ae.charAt,fa=function(t,e,i){return e+(i?la(t,e).length:1)},ha=function(t,e){var i=t.exec;if("function"==typeof i){var n=i.call(t,e);if("object"!=typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==y(t))throw TypeError("RegExp#exec called on incompatible receiver");return Xo.call(t,e)};ua("match",1,(function(t,e,i){return[function(e){var i=C(this),n=null==e?void 0:e[t];return void 0!==n?n.call(e,i):new RegExp(e)[t](String(i))},function(t){var n=i(e,t,this);if(n.done)return n.value;var r=P(t),o=String(this);if(!r.global)return ha(r,o);var a=r.unicode;r.lastIndex=0;for(var s,c=[],u=0;null!==(s=ha(r,o));){var l=String(s[0]);c[u]=l,""===l&&(r.lastIndex=fa(o,lt(r.lastIndex),a)),u++}return 0===u?null:c}]}));var pa=Math.max,ga=Math.min,da=Math.floor,ma=/\$([$&'`]|\d\d?|<[^>]*>)/g,va=/\$([$&'`]|\d\d?)/g;ua("replace",2,(function(t,e,i){return[function(i,n){var r=C(this),o=null==i?void 0:i[t];return void 0!==o?o.call(i,r,n):e.call(String(r),i,n)},function(t,r){var o=i(e,t,this,r);if(o.done)return o.value;var a=P(t),s=String(this),c="function"==typeof r;c||(r=String(r));var u=a.global;if(u){var l=a.unicode;a.lastIndex=0}for(var f=[];;){var h=ha(a,s);if(null===h)break;if(f.push(h),!u)break;""===String(h[0])&&(a.lastIndex=fa(s,lt(a.lastIndex),l))}for(var p,g="",d=0,m=0;m<f.length;m++){h=f[m];for(var v=String(h[0]),_=pa(ga(ct(h.index),s.length),0),y=[],S=1;S<h.length;S++)y.push(void 0===(p=h[S])?p:String(p));var E=h.groups;if(c){var C=[v].concat(y,_,s);void 0!==E&&C.push(E);var I=String(r.apply(void 0,C))}else I=n(v,s,_,y,E,r);_>=d&&(g+=s.slice(d,_)+I,d=_+v.length)}return g+s.slice(d)}];function n(t,i,n,r,o,a){var s=n+t.length,c=r.length,u=va;return void 0!==o&&(o=Rt(o),u=ma),e.call(a,u,(function(e,a){var u;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return i.slice(0,n);case"'":return i.slice(s);case"<":u=o[a.slice(1,-1)];break;default:var l=+a;if(0===l)return e;if(l>c){var f=da(l/10);return 0===f?e:f<=c?void 0===r[f-1]?a.charAt(1):r[f-1]+a.charAt(1):e}u=r[l-1]}return void 0===u?"":u}))}}));var _a=$t("iterator"),ya=$t("toStringTag"),Sa=Pn.values;for(var Ea in Ye){var Ca=f[Ea],Ia=Ca&&Ca.prototype;if(Ia){if(Ia[_a]!==Sa)try{G(Ia,_a,Sa)}catch(Bg){Ia[_a]=Sa}if(Ia[ya]||G(Ia,ya,Ea),Ye[Ea])for(var ba in Pn)if(Ia[ba]!==Pn[ba])try{G(Ia,ba,Pn[ba])}catch(Bg){Ia[ba]=Pn[ba]}}}var Aa=Jn.trim,wa=f.parseFloat,Ta=1/wa(Vn+"-0")!=-1/0?function(t){var e=Aa(String(t)),i=wa(e);return 0===i&&"-"==e.charAt(0)?-0:i}:wa;Ot({global:1,forced:parseFloat!=Ta},{parseFloat:Ta});var xa,Da="undefined"!=typeof window,Ma="undefined"!=typeof i&&"function"==typeof i.getSystemInfoSync&&"function"==typeof i.canIUse,La=Da&&window.navigator&&window.navigator.userAgent||"",Oa=/AppleWebKit\/([\d.]+)/i.exec(La),Na=(Oa&&parseFloat(Oa.pop()),/iPad/i.test(La),/iPhone/i.test(La),/iPod/i.test(La),(xa=La.match(/OS (\d+)_/i))&&xa[1]&&xa[1],/Android/i.test(La)),Pa=(function(){var t=La.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;var e=t[1]&&parseFloat(t[1]),i=t[2]&&parseFloat(t[2]);e&&i&&parseFloat(t[1]+"."+t[2])}(),Na&&/webkit/i.test(La),/Firefox/i.test(La),/Edge/i.test(La)),Ra=(!Pa&&/Chrome/i.test(La),function(){var t=La.match(/Chrome\/(\d+)/);t&&t[1]&&parseFloat(t[1])}(),/MSIE/.test(La)),ka=(/MSIE\s8\.0/.test(La),function(){var t=/MSIE\s(\d+)\.\d/.exec(La),e=t&&parseFloat(t[1]);return!e&&/Trident\/7.0/i.test(La)&&/rv:11.0/.test(La)&&(e=11),e}()),Ga=(/Safari/i.test(La),/TBS\/\d+/i.test(La)),Ua=(function(){var t=La.match(/TBS\/(\d+)/i);t&&t[1]&&t[1]}(),!Ga&&/MQQBrowser\/\d+/i.test(La),!Ga&&/ QQBrowser\/\d+/i.test(La),/(micromessenger|webbrowser)/i.test(La),/Windows/i.test(La),/MAC OS X/i.test(La),/MicroMessenger/i.test(La),Math.max),Fa=Math.min;Ot({target:"Array",proto:1,forced:!ei("splice")},{splice:function(t,e){var i,n,r,o,a,s,c=Rt(this),u=lt(c.length),l=pt(t,u),f=arguments.length;if(0===f?i=n=0:1===f?(i=0,n=u-l):(i=f-2,n=Fa(Ua(ct(e),0),u-l)),u+i-n>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(r=qt(c,n),o=0;o<n;o++)(a=l+o)in c&&te(r,o,c[a]);if(r.length=n,i<n){for(o=l;o<u-n;o++)s=o+i,(a=o+n)in c?c[s]=c[a]:delete c[s];for(o=u;o>u-n+i;o--)delete c[o-1]}else if(i>n)for(o=u-n;o>l;o--)s=o+i-1,(a=o+n-1)in c?c[s]=c[a]:delete c[s];for(o=0;o<i;o++)c[o+l]=arguments[o+2];return c.length=u-n+i,r}});var $a=!h((function(){return Object.isExtensible(Object.preventExtensions({}))})),ja=o((function(t){var e=k.f,i=V("meta"),n=0,r=Object.isExtensible||function(){return 1},o=function(t){e(t,i,{value:{objectID:"O"+ ++n,weakData:{}}})},a=t.exports={REQUIRED:0,fastKey:function(t,e){if(!b(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!T(t,i)){if(!r(t))return"F";if(!e)return"E";o(t)}return t[i].objectID},getWeakData:function(t,e){if(!T(t,i)){if(!r(t))return 1;if(!e)return 0;o(t)}return t[i].weakData},onFreeze:function(t){return $a&&a.REQUIRED&&r(t)&&!T(t,i)&&o(t),t}};Y[i]=1})),qa=(ja.REQUIRED,ja.fastKey,ja.getWeakData,ja.onFreeze,k.f),Ha=ja.fastKey,Ba=et.set,Va=et.getterFor,Ka=(function(t,e,i,n,r){var o=f[t],a=o&&o.prototype,s=o,c=n?"set":"add",u={},l=function(t){var e=a[t];it(a,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return r&&!b(t)?0:e.call(this,0===t?0:t)}:"get"==t?function(t){return r&&!b(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return r&&!b(t)?0:e.call(this,0===t?0:t)}:function(t,i){return e.call(this,0===t?0:t,i),this})};if(Mt(t,"function"!=typeof o||!(r||a.forEach&&!h((function(){(new o).entries().next()})))))s=i.getConstructor(e,t,n,c),ja.REQUIRED=1;else if(Mt(t,1)){var p=new s,g=p[c](r?{}:-0,1)!=p,d=h((function(){p.has(1)})),m=fe((function(t){new o(t)})),v=!r&&h((function(){for(var t=new o,e=5;e--;)t[c](e,e);return!t.has(-0)}));m||((s=e((function(e,i){Ar(e,s,t);var r=Bn(new o,e,s);return null!=i&&wr(i,r[c],r,n),r}))).prototype=a,a.constructor=s),(d||v)&&(l("delete"),l("has"),n&&l("get")),(v||g)&&l(c),r&&a.clear&&delete a.clear}u[t]=s,Ot({global:1,forced:s!=o},u),Re(s,t),r||i.setStrong(s,t,n)}("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(t,e,i,n){var r=t((function(t,o){Ar(t,r,e),Ba(t,{type:e,index:ye(null),first:void 0,last:void 0,size:0}),p||(t.size=0),null!=o&&wr(o,t[n],t,i)})),o=Va(e),a=function(t,e,i){var n,r,a=o(t),c=s(t,e);return c?c.value=i:(a.last=c={index:r=Ha(e,1),key:e,value:i,previous:n=a.last,next:void 0,removed:0},a.first||(a.first=c),n&&(n.next=c),p?a.size++:t.size++,"F"!==r&&(a.index[r]=c)),t},s=function(t,e){var i,n=o(t),r=Ha(e);if("F"!==r)return n.index[r];for(i=n.first;i;i=i.next)if(i.key==e)return i};return Cr(r.prototype,{clear:function(){for(var t=o(this),e=t.index,i=t.first;i;)i.removed=1,i.previous&&(i.previous=i.previous.next=void 0),delete e[i.index],i=i.next;t.first=t.last=void 0,p?t.size=0:this.size=0},delete:function(t){var e=o(this),i=s(this,t);if(i){var n=i.next,r=i.previous;delete e.index[i.index],i.removed=1,r&&(r.next=n),n&&(n.previous=r),e.first==i&&(e.first=n),e.last==i&&(e.last=r),p?e.size--:this.size--}return!!i},forEach:function(t){for(var e,i=o(this),n=Pt(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:i.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!s(this,t)}}),Cr(r.prototype,i?{get:function(t){var e=s(this,t);return e&&e.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),p&&qa(r.prototype,"size",{get:function(){return o(this).size}}),r},setStrong:function(t,e,i){var n=e+" Iterator",r=Va(e),o=Va(n);Be(t,e,(function(t,e){Ba(this,{type:n,target:t,state:r(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,i=t.last;i&&i.removed;)i=i.previous;return t.target&&(t.last=i=i?i.next:t.state.first)?"keys"==e?{value:i.key,done:0}:"values"==e?{value:i.value,done:0}:{value:[i.key,i.value],done:0}:(t.target=void 0,{value:void 0,done:1})}),i?"entries":"values",!i,1),br(e)}},1),[].push),za=Math.min,Ya=!h((function(){return!RegExp(4294967295,"y")}));ua("split",2,(function(t,e,i){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,i){var n=String(C(this)),r=void 0===i?4294967295:i>>>0;if(0===r)return[];if(void 0===t)return[n];if(!na(t))return e.call(n,t,r);for(var o,a,s,c=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,f=new RegExp(t.source,u+"g");(o=Xo.call(f,n))&&!((a=f.lastIndex)>l&&(c.push(n.slice(l,o.index)),o.length>1&&o.index<n.length&&Ka.apply(c,o.slice(1)),s=o[0].length,l=a,c.length>=r));)f.lastIndex===o.index&&f.lastIndex++;return l===n.length?!s&&f.test("")||c.push(""):c.push(n.slice(l)),c.length>r?c.slice(0,r):c}:"0".split(void 0,0).length?function(t,i){return void 0===t&&0===i?[]:e.call(this,t,i)}:e,[function(e,i){var r=C(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,r,i):n.call(String(r),e,i)},function(t,r){var o=i(n,t,this,r,n!==e);if(o.done)return o.value;var a=P(t),s=String(this),c=xr(a,RegExp),u=a.unicode,l=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(Ya?"y":"g"),f=new c(Ya?a:"^(?:"+a.source+")",l),h=void 0===r?4294967295:r>>>0;if(0===h)return[];if(0===s.length)return null===ha(f,s)?[s]:[];for(var p=0,g=0,d=[];g<s.length;){f.lastIndex=Ya?g:0;var m,v=ha(f,Ya?s:s.slice(g));if(null===v||(m=za(lt(f.lastIndex+(Ya?0:g)),s.length))===p)g=fa(s,g,u);else{if(d.push(s.slice(p,g)),d.length===h)return d;for(var _=1;_<=v.length-1;_++)if(d.push(v[_]),d.length===h)return d;g=p=m}}return d.push(s.slice(p)),d}]}),!Ya);var Wa,Ja,Xa="undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};Wa="undefined"!=typeof console?console:void 0!==Xa&&Xa.console?Xa.console:"undefined"!=typeof window&&window.console?window.console:{};for(var Qa=function(){},Za=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],ts=Za.length;ts--;)Ja=Za[ts],console[Ja]||(Wa[Ja]=Qa);Wa.methods=Za;var es=Wa,is=-1,ns=function(){if(Ma){var t=i.getSystemInfoSync().SDKVersion;if(void 0===t||void 0===i.getLogManager)return 0;if(function(t,e){t=t.split("."),e=e.split(".");for(var i=Math.max(t.length,e.length);t.length<i;)t.push("0");for(;e.length<i;)e.push("0");for(var n=0;n<i;n++){var r=parseInt(t[n]),o=parseInt(e[n]);if(r>o)return 1;if(r<o)return-1}return 0}(t,"2.1.0")>=0)return i.getLogManager().log("I can use wx log. SDKVersion="+t),1}return 0}(),rs=new Map;function os(){var t=new Date;return"TIM "+t.toLocaleTimeString("en-US",{hour12:0})+"."+function(t){var e;switch(t.toString().length){case 1:e="00"+t;break;case 2:e="0"+t;break;default:e=t}return e}(t.getMilliseconds())+":"}var as={_data:[],_length:0,_visible:0,arguments2String:function(t){var e;if(1===t.length)e=os()+t[0];else{e=os();for(var i=0,n=t.length;i<n;i++)ms(t[i])?vs(t[i])?e+=Is(t[i]):e+=JSON.stringify(t[i]):e+=t[i],e+=" "}return e},debug:function(){if(is<=-1){var t=this.arguments2String(arguments);as.record(t,"debug"),es.debug(t),ns&&i.getLogManager().debug(t)}},log:function(){if(is<=0){var t=this.arguments2String(arguments);as.record(t,"log"),es.log(t),ns&&i.getLogManager().log(t)}},info:function(){if(is<=1){var t=this.arguments2String(arguments);as.record(t,"info"),es.info(t),ns&&i.getLogManager().info(t)}},warn:function(){if(is<=2){var t=this.arguments2String(arguments);as.record(t,"warn"),es.warn(t),ns&&i.getLogManager().warn(t)}},error:function(){if(is<=3){var t=this.arguments2String(arguments);as.record(t,"error"),es.error(t),ns&&i.getLogManager().warn(t)}},time:function(t){rs.set(t,Es.now())},timeEnd:function(t){if(rs.has(t)){var e=Es.now()-rs.get(t);return rs.delete(t),e}return es.warn("未找到对应label: ".concat(t,", 请在调用 logger.timeEnd 前，调用 logger.time")),0},setLevel:function(t){t<4&&es.log(os()+"set level from "+is+" to "+t),is=t},record:function(t,e){ns||(1100===as._length&&(as._data.splice(0,100),as._length=1e3),as._length++,as._data.push("".concat(t," [").concat(e,"] \n")))},getLog:function(){return as._data}},ss=function(t){return"map"===_s(t)},cs=function(t){return"set"===_s(t)},us=function(t){return"file"===_s(t)},ls=function(t){return null!==t&&("number"==typeof t&&!isNaN(t-0)||"object"===si(t)&&t.constructor===Number)},fs=function(t){return"string"==typeof t},hs=function(t){return null!==t&&"object"===si(t)},ps=function(t){return hs(t)&&t.__proto__===Object.prototype},gs=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"array"===_s(t)},ds=function(t){return void 0===t},ms=function(t){return gs(t)||hs(t)},vs=function(t){return t instanceof Error},_s=function(t){return Object.prototype.toString.call(t).match(/^\[object (.*)\]$/)[1].toLowerCase()},ys=function(t){if("string"!=typeof t)return 0;var e=t[0];return/[^a-zA-Z0-9]/.test(e)?0:1},Ss=0;Date.now||(Date.now=function(){return(new Date).getTime()});var Es={now:function(){0===Ss&&(Ss=Date.now()-1);var t=Date.now()-Ss;return t>4294967295?(Ss+=4294967295,Date.now()-Ss):t},utc:function(){return Math.round(Date.now()/1e3)}},Cs=function t(e,i,n,r){if(!ms(e)||!ms(i))return 0;for(var o,a=0,s=Object.keys(i),c=0,u=s.length;c<u;c++)if(o=s[c],!(ds(i[o])||n&&n.includes(o)))if(ms(e[o])&&ms(i[o]))a+=t(e[o],i[o],n,r);else{if(r&&r.includes(i[o]))continue;e[o]!==i[o]&&(e[o]=i[o],a+=1)}return a},Is=function(t){return JSON.stringify(t,["message","code"])},bs=function(t){if(0===t.length)return 0;for(var e=0,i=0,n="undefined"!=typeof document&&void 0!==document.characterSet?document.characterSet:"UTF-8";void 0!==t[e];)i+=t[e++].charCodeAt[e]<=255?1:0==n?3:2;return i},As=function(t){var e=t||99999999;return Math.round(Math.random()*e)},ws="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",Ts=ws.length,xs=function(t,e){for(var i in t)if(t[i]===e)return 1;return 0},Ds={},Ms=function(t){return t===Ze.GRP_PUBLIC},Ls=function(t){return t===Ze.GRP_AVCHATROOM};function Os(t,e){var i={};return Object.keys(t).forEach((function(n){i[n]=e(t[n],n)})),i}var Ns=Object.prototype.hasOwnProperty;function Ps(t){if(null==t)return 1;if("boolean"==typeof t)return 0;if("number"==typeof t)return 0===t;if("string"==typeof t)return 0===t.length;if("function"==typeof t)return 0===t.length;if(Array.isArray(t))return 0===t.length;if(t instanceof Error)return""===t.message;if(ps(t)){for(var e in t)if(Ns.call(t,e))return 0;return 1}return ss(t)||cs(t)||us(t)?0===t.size:0}function Rs(t,e,i){if(void 0===e)return 1;var n=1;if("object"===Oi(e).toLowerCase())Object.keys(e).forEach((function(r){var o=1===t.length?t[0][r]:void 0;n=ks(o,e[r],i,r)?n:0}));else if("array"===Oi(e).toLowerCase())for(var r=0;r<e.length;r++)n=ks(t[r],e[r],i,e[r].name)?n:0;if(n)return n;throw new Error("Params validate failed.")}function ks(t,e,i,n){if(void 0===e)return 1;var r=1;return e.required&&Ps(t)&&(es.error("TIM [".concat(i,'] Missing required params: "').concat(n,'".')),r=0),Ps(t)||Oi(t).toLowerCase()===e.type.toLowerCase()||(es.error("TIM [".concat(i,'] Invalid params: type check failed for "').concat(n,'".Expected ').concat(e.type,".")),r=0),e.validator&&!e.validator(t)&&(es.error("TIM [".concat(i,"] Invalid params: custom validator check failed for params.")),r=0),r}var Gs={login:{userID:{type:"String",required:1},userSig:{type:"String",required:1}},addToBlacklist:{userIDList:{type:"Array",required:1}},mutilParam:[{name:"paramName",type:"Number",required:1},{name:"paramName",type:"String",required:1}],on:[{name:"eventName",type:"String",required:1},{name:"listener",type:"Function",required:0}],sendMessage:[{name:"message",type:"Object",required:1}],getMessageList:{conversationID:{type:"String",required:1},nextReqMessageID:{type:"String"},count:{type:"Number",validator:function(t){return ds(t)||/^[1-9][0-9]*$/.test(t)?1:(n("warn","getMessageList 接口的 count 参数必须为正整数"," at node_modules\\tim-js-sdk\\tim-js.js:1"),0)}}},getConversationProfile:[{name:"conversationID",type:"String",required:1,validator:function(t){return t?fs(e=t)&&e.slice(0,3)===Ze.CONV_C2C||function(t){return fs(t)&&t.slice(0,5)===Ze.CONV_GROUP}(t)||function(t){return fs(t)&&t===Ze.CONV_SYSTEM}(t)?1:(n("warn","非法的会话 ID:".concat(t,"。会话 ID 组成方式：\n      C2C + userID（单聊）\n      GROUP + groupID（群聊）\n      @TIM#SYSTEM（系统通知会话）")," at node_modules\\tim-js-sdk\\tim-js.js:1"),0):0;var e}}],deleteConversation:[{name:"conversationID",type:"String",required:1}],getGroupList:{groupProfileFilter:{type:"Array"}},getGroupProfile:{groupID:{type:"String",required:1},groupCustomFieldFilter:{type:"Array"},memberCustomFieldFilter:{type:"Array"}},getGroupProfileAdvance:{groupIDList:{type:"Array",required:1}},createGroup:{name:{type:"String",required:1}},joinGroup:{groupID:{type:"String",required:1},type:{type:"String"},applyMessage:{type:"String"}},quitGroup:[{name:"groupID",type:"String",required:1}],handleApplication:{message:{type:"Object",required:1},handleAction:{type:"String",required:1},handleMessage:{type:"String"}},changeGroupOwner:{groupID:{type:"String",required:1},newOwnerID:{type:"String",required:1}},updateGroupProfile:{groupID:{type:"String",required:1}},dismissGroup:[{name:"groupID",type:"String",required:1}],searchGroupByID:[{name:"groupID",type:"String",required:1}],getGroupMemberList:{groupID:{type:"String",required:1},offset:{type:"Number"},count:{type:"Number"}},addGroupMemeber:{groupID:{type:"String",required:1},userIDList:{type:"Array",required:1}},setGroupMemberRole:{groupID:{type:"String",required:1},userID:{type:"String",required:1},role:{type:"String",required:1}},setGroupMemberMuteTime:{groupID:{type:"String",required:1},userID:{type:"String"},muteTime:{type:"Number",validator:function(t){return t>=0}}},setGroupMemberNameCard:{groupID:{type:"String",required:1},userID:{type:"String"},nameCard:{type:"String",required:1,validator:function(t){return 1==/^\s+$/.test(t)?0:1}}},setMessageRemindType:{groupID:{type:"String",required:1},messageRemindType:{type:"String",required:1}},setGroupMemberCustomField:{groupID:{type:"String",required:1},userID:{type:"String"},memberCustomField:{type:"Array",required:1}},deleteGroupMember:{groupID:{type:"String",required:1}},createTextMessage:{to:{type:"String",required:1},conversationType:{type:"String",required:1},payload:{type:"Object",required:1}},createCustomMessage:{to:{type:"String",required:1},conversationType:{type:"String",required:1},payload:{type:"Object",required:1}},createImageMessage:{to:{type:"String",required:1},conversationType:{type:"String",required:1},payload:{type:"Object",required:1}},createAudioMessage:{to:{type:"String",required:1},conversationType:{type:"String",required:1},payload:{type:"Object",required:1}},createFileMessage:{to:{type:"String",required:1},conversationType:{type:"String",required:1},payload:{type:"Object",required:1}}},Us={login:"login",logout:"logout",on:"on",once:"once",off:"off",setLogLevel:"setLogLevel",downloadLog:"downloadLog",registerPlugin:"registerPlugin",destroy:"destroy",createTextMessage:"createTextMessage",createFileMessage:"createFileMessage",createAudioMessage:"createAudioMessage",createImageMessage:"createImageMessage",createCustomMessage:"createCustomMessage",sendMessage:"sendMessage",resendMessage:"resendMessage",getMessageList:"getMessageList",setMessageRead:"setMessageRead",getConversationList:"getConversationList",getConversationProfile:"getConversationProfile",deleteConversation:"deleteConversation",getGroupList:"getGroupList",getGroupProfile:"getGroupProfile",createGroup:"createGroup",joinGroup:"joinGroup",updateGroupProfile:"updateGroupProfile",quitGroup:"quitGroup",dismissGroup:"dismissGroup",changeGroupOwner:"changeGroupOwner",searchGroupByID:"searchGroupByID",setMessageRemindType:"setMessageRemindType",handleGroupApplication:"handleGroupApplication",getGroupMemberList:"getGroupMemberList",addGroupMember:"addGroupMember",deleteGroupMember:"deleteGroupMember",setGroupMemberNameCard:"setGroupMemberNameCard",setGroupMemberMuteTime:"setGroupMemberMuteTime",setGroupMemberRole:"setGroupMemberRole",setGroupMemberCustomField:"setGroupMemberCustomField",getMyProfile:"getMyProfile",getUserProfile:"getUserProfile",updateMyProfile:"updateMyProfile",getBlacklist:"getBlacklist",addToBlacklist:"addToBlacklist",removeFromBlacklist:"removeFromBlacklist",getFriendList:"getFriendList"},Fs=$t("iterator"),$s=!h((function(){var t=new URL("b?e=1","http://a"),e=t.searchParams;return t.pathname="c%20d",!e.sort||"http://a/c%20d?e=1"!==t.href||"1"!==e.get("e")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[Fs]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash})),js=Object.assign,qs=!js||h((function(){var t={},e={},i=Symbol();return t[i]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=js({},t)[i]||"abcdefghijklmnopqrst"!=pe(js({},e)).join("")}))?function(t,e){for(var i=Rt(t),n=arguments.length,r=1,o=Et.f,a=m.f;n>r;)for(var s,c=E(arguments[r++]),u=o?pe(c).concat(o(c)):pe(c),l=u.length,f=0;l>f;)s=u[f++],p&&!a.call(c,s)||(i[s]=c[s]);return i}:js,Hs=/[^\0-\u007E]/,Bs=/[.\u3002\uFF0E\uFF61]/g,Vs="Overflow: input needs wider integers to process",Ks=Math.floor,zs=String.fromCharCode,Ys=function(t){return t+22+75*(t<26)},Ws=function(t,e,i){var n=0;for(t=i?Ks(t/700):t>>1,t+=Ks(t/e);t>455;n+=36)t=Ks(t/35);return Ks(n+36*t/(t+38))},Js=function(t){var e,i,n=[],r=(t=function(t){for(var e=[],i=0,n=t.length;i<n;){var r=t.charCodeAt(i++);if(r>=55296&&r<=56319&&i<n){var o=t.charCodeAt(i++);56320==(64512&o)?e.push(((1023&r)<<10)+(1023&o)+65536):(e.push(r),i--)}else e.push(r)}return e}(t)).length,o=128,a=0,s=72;for(e=0;e<t.length;e++)(i=t[e])<128&&n.push(zs(i));var c=n.length,u=c;for(c&&n.push("-");u<r;){var l=2147483647;for(e=0;e<t.length;e++)(i=t[e])>=o&&i<l&&(l=i);var f=u+1;if(l-o>Ks((2147483647-a)/f))throw RangeError(Vs);for(a+=(l-o)*f,o=l,e=0;e<t.length;e++){if((i=t[e])<o&&++a>2147483647)throw RangeError(Vs);if(i==o){for(var h=a,p=36;;p+=36){var g=p<=s?1:p>=s+26?26:p-s;if(h<g)break;var d=h-g,m=36-g;n.push(zs(Ys(g+d%m))),h=Ks(d/m)}n.push(zs(Ys(h))),s=Ws(a,f,u==c),a=0,++u}}++a,++o}return n.join("")},Xs=function(t){var e=oe(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return P(e.call(t))},Qs=$t("iterator"),Zs=et.set,tc=et.getterFor("URLSearchParams"),ec=et.getterFor("URLSearchParamsIterator"),ic=/\+/g,nc=Array(4),rc=function(t){return nc[t-1]||(nc[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},oc=function(t){try{return decodeURIComponent(t)}catch(Bg){return t}},ac=function(t){var e=t.replace(ic," "),i=4;try{return decodeURIComponent(e)}catch(Bg){for(;i;)e=e.replace(rc(i--),oc);return e}},sc=/[!'()~]|%20/g,cc={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},uc=function(t){return cc[t]},lc=function(t){return encodeURIComponent(t).replace(sc,uc)},fc=function(t,e){if(e)for(var i,n,r=e.split("&"),o=0;o<r.length;)(i=r[o++]).length&&(n=i.split("="),t.push({key:ac(n.shift()),value:ac(n.join("="))}))},hc=function(t){this.entries.length=0,fc(this.entries,t)},pc=function(t,e){if(t<e)throw TypeError("Not enough arguments")},gc=Ue((function(t,e){Zs(this,{type:"URLSearchParamsIterator",iterator:Xs(tc(t).entries),kind:e})}),"Iterator",(function(){var t=ec(this),e=t.kind,i=t.iterator.next(),n=i.value;return i.done||(i.value="keys"===e?n.key:"values"===e?n.value:[n.key,n.value]),i})),dc=function t(){Ar(this,t,"URLSearchParams");var e,i,n,r,o,a,s,c=arguments.length>0?arguments[0]:void 0,u=this,l=[];if(Zs(u,{type:"URLSearchParams",entries:l,updateURL:function(){},updateSearchParams:hc}),void 0!==c)if(b(c))if("function"==typeof(e=oe(c)))for(i=e.call(c);!(n=i.next()).done;){if((o=(r=Xs(P(n.value))).next()).done||(a=r.next()).done||!r.next().done)throw TypeError("Expected sequence with length 2");l.push({key:o.value+"",value:a.value+""})}else for(s in c)T(c,s)&&l.push({key:s,value:c[s]+""});else fc(l,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},mc=dc.prototype;Cr(mc,{append:function(t,e){pc(arguments.length,2);var i=tc(this);i.entries.push({key:t+"",value:e+""}),i.updateURL()},delete:function(t){pc(arguments.length,1);for(var e=tc(this),i=e.entries,n=t+"",r=0;r<i.length;)i[r].key===n?i.splice(r,1):r++;e.updateURL()},get:function(t){pc(arguments.length,1);for(var e=tc(this).entries,i=t+"",n=0;n<e.length;n++)if(e[n].key===i)return e[n].value;return null},getAll:function(t){pc(arguments.length,1);for(var e=tc(this).entries,i=t+"",n=[],r=0;r<e.length;r++)e[r].key===i&&n.push(e[r].value);return n},has:function(t){pc(arguments.length,1);for(var e=tc(this).entries,i=t+"",n=0;n<e.length;)if(e[n++].key===i)return 1;return 0},set:function(t,e){pc(arguments.length,1);for(var i,n=tc(this),r=n.entries,o=0,a=t+"",s=e+"",c=0;c<r.length;c++)(i=r[c]).key===a&&(o?r.splice(c--,1):(o=1,i.value=s));o||r.push({key:a,value:s}),n.updateURL()},sort:function(){var t,e,i,n=tc(this),r=n.entries,o=r.slice();for(r.length=0,i=0;i<o.length;i++){for(t=o[i],e=0;e<i;e++)if(r[e].key>t.key){r.splice(e,0,t);break}e===i&&r.push(t)}n.updateURL()},forEach:function(t){for(var e,i=tc(this).entries,n=Pt(t,arguments.length>1?arguments[1]:void 0,3),r=0;r<i.length;)n((e=i[r++]).value,e.key,this)},keys:function(){return new gc(this,"keys")},values:function(){return new gc(this,"values")},entries:function(){return new gc(this,"entries")}},{enumerable:1}),it(mc,Qs,mc.entries),it(mc,"toString",(function(){for(var t,e=tc(this).entries,i=[],n=0;n<e.length;)t=e[n++],i.push(lc(t.key)+"="+lc(t.value));return i.join("&")}),{enumerable:1}),Re(dc,"URLSearchParams"),Ot({global:1,forced:!$s},{URLSearchParams:dc});var vc,_c={URLSearchParams:dc,getState:tc},yc=Ae.codeAt,Sc=f.URL,Ec=_c.URLSearchParams,Cc=_c.getState,Ic=et.set,bc=et.getterFor("URL"),Ac=Math.floor,wc=Math.pow,Tc=/[A-Za-z]/,xc=/[\d+\-.A-Za-z]/,Dc=/\d/,Mc=/^(0x|0X)/,Lc=/^[0-7]+$/,Oc=/^\d+$/,Nc=/^[\dA-Fa-f]+$/,Pc=/[\u0000\u0009\u000A\u000D #%\/:?@[\\]]/,Rc=/[\u0000\u0009\u000A\u000D #\/:?@[\\]]/,kc=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,Gc=/[\u0009\u000A\u000D]/g,Uc=function(t,e){var i,n,r;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return"Invalid host";if(!(i=$c(e.slice(1,-1))))return"Invalid host";t.host=i}else if(Yc(t)){if(e=function(t){var e,i,n=[],r=t.toLowerCase().replace(Bs,".").split(".");for(e=0;e<r.length;e++)i=r[e],n.push(Hs.test(i)?"xn--"+Js(i):i);return n.join(".")}(e),Pc.test(e))return"Invalid host";if(null===(i=Fc(e)))return"Invalid host";t.host=i}else{if(Rc.test(e))return"Invalid host";for(i="",n=ae(e),r=0;r<n.length;r++)i+=Kc(n[r],qc);t.host=i}},Fc=function(t){var e,i,n,r,o,a,s,c=t.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),(e=c.length)>4)return t;for(i=[],n=0;n<e;n++){if(""==(r=c[n]))return t;if(o=10,r.length>1&&"0"==r.charAt(0)&&(o=Mc.test(r)?16:8,r=r.slice(8==o?1:2)),""===r)a=0;else{if(!(10==o?Oc:8==o?Lc:Nc).test(r))return t;a=parseInt(r,o)}i.push(a)}for(n=0;n<e;n++)if(a=i[n],n==e-1){if(a>=wc(256,5-e))return null}else if(a>255)return null;for(s=i.pop(),n=0;n<i.length;n++)s+=i[n]*wc(256,3-n);return s},$c=function(t){var e,i,n,r,o,a,s,c=[0,0,0,0,0,0,0,0],u=0,l=null,f=0,h=function(){return t.charAt(f)};if(":"==h()){if(":"!=t.charAt(1))return;f+=2,l=++u}for(;h();){if(8==u)return;if(":"!=h()){for(e=i=0;i<4&&Nc.test(h());)e=16*e+parseInt(h(),16),f++,i++;if("."==h()){if(0==i)return;if(f-=i,u>6)return;for(n=0;h();){if(r=null,n>0){if(!("."==h()&&n<4))return;f++}if(!Dc.test(h()))return;for(;Dc.test(h());){if(o=parseInt(h(),10),null===r)r=o;else{if(0==r)return;r=10*r+o}if(r>255)return;f++}c[u]=256*c[u]+r,2!=++n&&4!=n||u++}if(4!=n)return;break}if(":"==h()){if(f++,!h())return}else if(h())return;c[u++]=e}else{if(null!==l)return;f++,l=++u}}if(null!==l)for(a=u-l,u=7;0!=u&&a>0;)s=c[u],c[u--]=c[l+a-1],c[l+--a]=s;else if(8!=u)return;return c},jc=function(t){var e,i,n,r;if("number"==typeof t){for(e=[],i=0;i<4;i++)e.unshift(t%256),t=Ac(t/256);return e.join(".")}if("object"==typeof t){for(e="",n=function(t){for(var e=null,i=1,n=null,r=0,o=0;o<8;o++)0!==t[o]?(r>i&&(e=n,i=r),n=null,r=0):(null===n&&(n=o),++r);return r>i&&(e=n,i=r),e}(t),i=0;i<8;i++)r&&0===t[i]||(r&&(r=0),n===i?(e+=i?":":"::",r=1):(e+=t[i].toString(16),i<7&&(e+=":")));return"["+e+"]"}return t},qc={},Hc=qs({},qc,{" ":1,'"':1,"<":1,">":1,"`":1}),Bc=qs({},Hc,{"#":1,"?":1,"{":1,"}":1}),Vc=qs({},Bc,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Kc=function(t,e){var i=yc(t,0);return i>32&&i<127&&!T(e,t)?t:encodeURIComponent(t)},zc={ftp:21,file:null,gopher:70,http:80,https:443,ws:80,wss:443},Yc=function(t){return T(zc,t.scheme)},Wc=function(t){return""!=t.username||""!=t.password},Jc=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},Xc=function(t,e){var i;return 2==t.length&&Tc.test(t.charAt(0))&&(":"==(i=t.charAt(1))||!e&&"|"==i)},Qc=function(t){var e;return t.length>1&&Xc(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},Zc=function(t){var e=t.path,i=e.length;!i||"file"==t.scheme&&1==i&&Xc(e[0],1)||e.pop()},tu=function(t){return"."===t||"%2e"===t.toLowerCase()},eu={},iu={},nu={},ru={},ou={},au={},su={},cu={},uu={},lu={},fu={},hu={},pu={},gu={},du={},mu={},vu={},_u={},yu={},Su={},Eu={},Cu=function(t,e,i,n){var r,o,a,s,c,u=i||eu,l=0,f="",h=0,p=0,g=0;for(i||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=0,e=e.replace(kc,"")),e=e.replace(Gc,""),r=ae(e);l<=r.length;){switch(o=r[l],u){case eu:if(!o||!Tc.test(o)){if(i)return"Invalid scheme";u=nu;continue}f+=o.toLowerCase(),u=iu;break;case iu:if(o&&(xc.test(o)||"+"==o||"-"==o||"."==o))f+=o.toLowerCase();else{if(":"!=o){if(i)return"Invalid scheme";f="",u=nu,l=0;continue}if(i&&(Yc(t)!=T(zc,f)||"file"==f&&(Wc(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=f,i)return void(Yc(t)&&zc[t.scheme]==t.port&&(t.port=null));f="","file"==t.scheme?u=gu:Yc(t)&&n&&n.scheme==t.scheme?u=ru:Yc(t)?u=cu:"/"==r[l+1]?(u=ou,l++):(t.cannotBeABaseURL=1,t.path.push(""),u=yu)}break;case nu:if(!n||n.cannotBeABaseURL&&"#"!=o)return"Invalid scheme";if(n.cannotBeABaseURL&&"#"==o){t.scheme=n.scheme,t.path=n.path.slice(),t.query=n.query,t.fragment="",t.cannotBeABaseURL=1,u=Eu;break}u="file"==n.scheme?gu:au;continue;case ru:if("/"!=o||"/"!=r[l+1]){u=au;continue}u=uu,l++;break;case ou:if("/"==o){u=lu;break}u=_u;continue;case au:if(t.scheme=n.scheme,o==vc)t.username=n.username,t.password=n.password,t.host=n.host,t.port=n.port,t.path=n.path.slice(),t.query=n.query;else if("/"==o||"\\"==o&&Yc(t))u=su;else if("?"==o)t.username=n.username,t.password=n.password,t.host=n.host,t.port=n.port,t.path=n.path.slice(),t.query="",u=Su;else{if("#"!=o){t.username=n.username,t.password=n.password,t.host=n.host,t.port=n.port,t.path=n.path.slice(),t.path.pop(),u=_u;continue}t.username=n.username,t.password=n.password,t.host=n.host,t.port=n.port,t.path=n.path.slice(),t.query=n.query,t.fragment="",u=Eu}break;case su:if(!Yc(t)||"/"!=o&&"\\"!=o){if("/"!=o){t.username=n.username,t.password=n.password,t.host=n.host,t.port=n.port,u=_u;continue}u=lu}else u=uu;break;case cu:if(u=uu,"/"!=o||"/"!=f.charAt(l+1))continue;l++;break;case uu:if("/"!=o&&"\\"!=o){u=lu;continue}break;case lu:if("@"==o){h&&(f="%40"+f),h=1,a=ae(f);for(var d=0;d<a.length;d++){var m=a[d];if(":"!=m||g){var v=Kc(m,Vc);g?t.password+=v:t.username+=v}else g=1}f=""}else if(o==vc||"/"==o||"?"==o||"#"==o||"\\"==o&&Yc(t)){if(h&&""==f)return"Invalid authority";l-=ae(f).length+1,f="",u=fu}else f+=o;break;case fu:case hu:if(i&&"file"==t.scheme){u=mu;continue}if(":"!=o||p){if(o==vc||"/"==o||"?"==o||"#"==o||"\\"==o&&Yc(t)){if(Yc(t)&&""==f)return"Invalid host";if(i&&""==f&&(Wc(t)||null!==t.port))return;if(s=Uc(t,f))return s;if(f="",u=vu,i)return;continue}"["==o?p=1:"]"==o&&(p=0),f+=o}else{if(""==f)return"Invalid host";if(s=Uc(t,f))return s;if(f="",u=pu,i==hu)return}break;case pu:if(!Dc.test(o)){if(o==vc||"/"==o||"?"==o||"#"==o||"\\"==o&&Yc(t)||i){if(""!=f){var _=parseInt(f,10);if(_>65535)return"Invalid port";t.port=Yc(t)&&_===zc[t.scheme]?null:_,f=""}if(i)return;u=vu;continue}return"Invalid port"}f+=o;break;case gu:if(t.scheme="file","/"==o||"\\"==o)u=du;else{if(!n||"file"!=n.scheme){u=_u;continue}if(o==vc)t.host=n.host,t.path=n.path.slice(),t.query=n.query;else if("?"==o)t.host=n.host,t.path=n.path.slice(),t.query="",u=Su;else{if("#"!=o){Qc(r.slice(l).join(""))||(t.host=n.host,t.path=n.path.slice(),Zc(t)),u=_u;continue}t.host=n.host,t.path=n.path.slice(),t.query=n.query,t.fragment="",u=Eu}}break;case du:if("/"==o||"\\"==o){u=mu;break}n&&"file"==n.scheme&&!Qc(r.slice(l).join(""))&&(Xc(n.path[0],1)?t.path.push(n.path[0]):t.host=n.host),u=_u;continue;case mu:if(o==vc||"/"==o||"\\"==o||"?"==o||"#"==o){if(!i&&Xc(f))u=_u;else if(""==f){if(t.host="",i)return;u=vu}else{if(s=Uc(t,f))return s;if("localhost"==t.host&&(t.host=""),i)return;f="",u=vu}continue}f+=o;break;case vu:if(Yc(t)){if(u=_u,"/"!=o&&"\\"!=o)continue}else if(i||"?"!=o)if(i||"#"!=o){if(o!=vc&&(u=_u,"/"!=o))continue}else t.fragment="",u=Eu;else t.query="",u=Su;break;case _u:if(o==vc||"/"==o||"\\"==o&&Yc(t)||!i&&("?"==o||"#"==o)){if(".."===(c=(c=f).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?(Zc(t),"/"==o||"\\"==o&&Yc(t)||t.path.push("")):tu(f)?"/"==o||"\\"==o&&Yc(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&Xc(f)&&(t.host&&(t.host=""),f=f.charAt(0)+":"),t.path.push(f)),f="","file"==t.scheme&&(o==vc||"?"==o||"#"==o))for(;t.path.length>1&&""===t.path[0];)t.path.shift();"?"==o?(t.query="",u=Su):"#"==o&&(t.fragment="",u=Eu)}else f+=Kc(o,Bc);break;case yu:"?"==o?(t.query="",u=Su):"#"==o?(t.fragment="",u=Eu):o!=vc&&(t.path[0]+=Kc(o,qc));break;case Su:i||"#"!=o?o!=vc&&("'"==o&&Yc(t)?t.query+="%27":t.query+="#"==o?"%23":Kc(o,qc)):(t.fragment="",u=Eu);break;case Eu:o!=vc&&(t.fragment+=Kc(o,Hc))}l++}},Iu=function t(e){var i,n,r=Ar(this,t,"URL"),o=arguments.length>1?arguments[1]:void 0,a=String(e),s=Ic(r,{type:"URL"});if(void 0!==o)if(o instanceof t)i=bc(o);else if(n=Cu(i={},String(o)))throw TypeError(n);if(n=Cu(s,a,null,i))throw TypeError(n);var c=s.searchParams=new Ec,u=Cc(c);u.updateSearchParams(s.query),u.updateURL=function(){s.query=String(c)||null},p||(r.href=Au.call(r),r.origin=wu.call(r),r.protocol=Tu.call(r),r.username=xu.call(r),r.password=Du.call(r),r.host=Mu.call(r),r.hostname=Lu.call(r),r.port=Ou.call(r),r.pathname=Nu.call(r),r.search=Pu.call(r),r.searchParams=Ru.call(r),r.hash=ku.call(r))},bu=Iu.prototype,Au=function(){var t=bc(this),e=t.scheme,i=t.username,n=t.password,r=t.host,o=t.port,a=t.path,s=t.query,c=t.fragment,u=e+":";return null!==r?(u+="//",Wc(t)&&(u+=i+(n?":"+n:"")+"@"),u+=jc(r),null!==o&&(u+=":"+o)):"file"==e&&(u+="//"),u+=t.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(u+="?"+s),null!==c&&(u+="#"+c),u},wu=function(){var t=bc(this),e=t.scheme,i=t.port;if("blob"==e)try{return new URL(e.path[0]).origin}catch(Bg){return"null"}return"file"!=e&&Yc(t)?e+"://"+jc(t.host)+(null!==i?":"+i:""):"null"},Tu=function(){return bc(this).scheme+":"},xu=function(){return bc(this).username},Du=function(){return bc(this).password},Mu=function(){var t=bc(this),e=t.host,i=t.port;return null===e?"":null===i?jc(e):jc(e)+":"+i},Lu=function(){var t=bc(this).host;return null===t?"":jc(t)},Ou=function(){var t=bc(this).port;return null===t?"":String(t)},Nu=function(){var t=bc(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},Pu=function(){var t=bc(this).query;return t?"?"+t:""},Ru=function(){return bc(this).searchParams},ku=function(){var t=bc(this).fragment;return t?"#"+t:""},Gu=function(t,e){return{get:t,set:e,configurable:1,enumerable:1}};if(p&&ge(bu,{href:Gu(Au,(function(t){var e=bc(this),i=String(t),n=Cu(e,i);if(n)throw TypeError(n);Cc(e.searchParams).updateSearchParams(e.query)})),origin:Gu(wu),protocol:Gu(Tu,(function(t){var e=bc(this);Cu(e,String(t)+":",eu)})),username:Gu(xu,(function(t){var e=bc(this),i=ae(String(t));if(!Jc(e)){e.username="";for(var n=0;n<i.length;n++)e.username+=Kc(i[n],Vc)}})),password:Gu(Du,(function(t){var e=bc(this),i=ae(String(t));if(!Jc(e)){e.password="";for(var n=0;n<i.length;n++)e.password+=Kc(i[n],Vc)}})),host:Gu(Mu,(function(t){var e=bc(this);e.cannotBeABaseURL||Cu(e,String(t),fu)})),hostname:Gu(Lu,(function(t){var e=bc(this);e.cannotBeABaseURL||Cu(e,String(t),hu)})),port:Gu(Ou,(function(t){var e=bc(this);Jc(e)||(""==(t=String(t))?e.port=null:Cu(e,t,pu))})),pathname:Gu(Nu,(function(t){var e=bc(this);e.cannotBeABaseURL||(e.path=[],Cu(e,t+"",vu))})),search:Gu(Pu,(function(t){var e=bc(this);""==(t=String(t))?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",Cu(e,t,Su)),Cc(e.searchParams).updateSearchParams(e.query)})),searchParams:Gu(Ru),hash:Gu(ku,(function(t){var e=bc(this);""!=(t=String(t))?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",Cu(e,t,Eu)):e.fragment=null}))}),it(bu,"toJSON",(function(){return Au.call(this)}),{enumerable:1}),it(bu,"toString",(function(){return Au.call(this)}),{enumerable:1}),Sc){var Uu=Sc.createObjectURL,Fu=Sc.revokeObjectURL;Uu&&it(Iu,"createObjectURL",(function(t){return Uu.apply(Sc,arguments)})),Fu&&it(Iu,"revokeObjectURL",(function(t){return Fu.apply(Sc,arguments)}))}Re(Iu,"URL"),Ot({global:1,forced:!$s,sham:!p},{URL:Iu});var $u={NO_SDKAPPID:2e3,NO_ACCOUNT_TYPE:2001,NO_IDENTIFIER:2002,NO_USERSIG:2003,NO_SDK_INSTANCE:2004,REQ_GET_ACCESS_LAYER_FAILED:2020,REQ_LOGIN_FAILED:2021,NO_TINYID:2022,NO_A2KEY:2023,MESSAGE_SEND_FAIL:2100,MESSAGE_UNKNOW_ROMA_LIST_END_FLAG_FIELD:2101,MESSAGE_ELEMENT_METHOD_UNDEFINED:2102,MESSAGE_LIST_CONSTRUCTOR_NEED_OPTIONS:2103,MESSAGE_PARAMETER_MISSING_TO_ACCOUNT:2104,MESSAGE_SEND_NEED_MESSAGE_INSTANCE:2105,MESSAGE_SEND_INVALID_CONVERSATION_TYPE:2106,MESSAGE_RESEND_FILE_UNSUPPORTED:2107,MESSAGE_FILE_IS_EMPTY:2108,MESSAGE_IMAGE_UPLOAD_FAIL:2250,MESSAGE_IMAGE_SELECT_FILE_FIRST:2251,MESSAGE_IMAGE_TYPES_LIMIT:2252,MESSAGE_IMAGE_SIZE_LIMIT:2253,MESSAGE_AUDIO_UPLOAD_FAIL:2300,MESSAGE_AUDIO_SIZE_LIMIT:2301,MESSAGE_FILE_SELECT_FILE_FIRST:2401,MESSAGE_FILE_SIZE_LIMIT:2402,MESSAGE_FILE_URL_IS_EMPTY:2403,MESSAGE_FILE_WECHAT_MINIAPP_NOT_SUPPORT:2404,CONVERSATION_NOT_FOUND:2500,USER_OR_GROUP_NOT_FOUND:2501,CONVERSATION_UN_RECORDED_TYPE:2502,ILLEGAL_GROUP_TYPE:2600,CANNOT_JOIN_PRIVATE:2601,CANNOT_CHANGE_OWNER_IN_AVCHATROOM:2620,CANNOT_CHANGE_OWNER_TO_SELF:2621,CANNOT_DISMISS_PRIVATE:2622,JOIN_GROUP_FAIL:2660,CANNOT_ADD_MEMBER_IN_AVCHATROOM:2661,CANNOT_KICK_MEMBER_IN_AVCHATROOM:2680,NOT_OWNER:2681,CANNOT_SET_MEMBER_ROLE_IN_PRIVATE_AND_AVCHATROOM:2682,INVALID_MEMBER_ROLE:2683,CANNOT_SET_SELF_MEMBER_ROLE:2684,DEL_FRIEND_INVALID_PARAM:2700,GET_PROFILE_INVALID_PARAM:2720,UPDATE_PROFILE_INVALID_PARAM:2721,ADD_BLACKLIST_INVALID_PARAM:2740,DEL_BLACKLIST_INVALID_PARAM:2741,CANNOT_ADD_SELF_TO_BLACKLIST:2742,NETWORK_ERROR:2800,NETWORK_TIMEOUT:2801,NETWORK_BASE_OPTIONS_NO_URL:2802,NETWORK_UNDEFINED_SERVER_NAME:2803,NETWORK_PACKAGE_UNDEFINED:2804,SOCKET_NOT_SUPPORTED:2850,CONVERTOR_IRREGULAR_PARAMS:2900,NOTICE_RUNLOOP_UNEXPECTED_CONDITION:2901,NOTICE_RUNLOOP_OFFSET_LOST:2902,UNCAUGHT_ERROR:2903,SDK_IS_NOT_READY:2999,SSO_LOG_MODEL_INIT_ERROR:3e3,LONG_POLL_KICK_OUT:91101},ju={NO_SDKAPPID:"无 SDKAppID",NO_ACCOUNT_TYPE:"无 accountType",NO_IDENTIFIER:"无 userID",NO_USERSIG:"无 usersig",NO_SDK_INSTANCE:"无 SDK 实例",REQ_GET_ACCESS_LAYER_FAILED:"获取沙箱请求失败",REQ_LOGIN_FAILED:"登录请求失败",NO_TINYID:"无tinyid",NO_A2KEY:"无a2key",MESSAGE_SEND_FAIL:"消息发送失败",MESSAGE_UNKNOW_ROMA_LIST_END_FLAG_FIELD:"未知的漫游消息结束字段",MESSAGE_ELEMENT_METHOD_UNDEFINED:"消息元素未创建，因为方法未定义",MESSAGE_LIST_CONSTRUCTOR_NEED_OPTIONS:"MessageController.constructor() 需要参数 options",MESSAGE_PARAMETER_MISSING_TO_ACCOUNT:"需要 toAccount 参数",MESSAGE_SEND_NEED_MESSAGE_INSTANCE:"需要 Message 的实例",MESSAGE_SEND_INVALID_CONVERSATION_TYPE:'Message.conversationType 只能为 "C2C"或"GROUP" ',MESSAGE_RESEND_FILE_UNSUPPORTED:"文件类消息不能使用 SDK.resendMessage() 函数重发",MESSAGE_FILE_IS_EMPTY:"无法发送空文件",MESSAGE_IMAGE_UPLOAD_FAIL:"图片上传失败",MESSAGE_IMAGE_SELECT_FILE_FIRST:"请先选择一个图片",MESSAGE_IMAGE_TYPES_LIMIT:"图片类型受限",MESSAGE_IMAGE_SIZE_LIMIT:"图片大小受限",MESSAGE_AUDIO_UPLOAD_FAIL:"语音上传失败",MESSAGE_AUDIO_SIZE_LIMIT:"语音大小受限",MESSAGE_FILE_SELECT_FILE_FIRST:"请先选择一个文件",MESSAGE_FILE_SIZE_LIMIT:"文件大小受限 ",MESSAGE_FILE_URL_IS_EMPTY:"缺少必要的参数文件 URL",MESSAGE_FILE_WECHAT_MINIAPP_NOT_SUPPORT:"微信小程序暂时不支持文件选择功能",CONVERSATION_NOT_FOUND:"没有找到相应的会话，请检查传入参数",USER_OR_GROUP_NOT_FOUND:"没有找到相应的用户或群组，请检查传入参数",CONVERSATION_UN_RECORDED_TYPE:"未记录的会话类型",ILLEGAL_GROUP_TYPE:"非法的群类型，请检查传入参数",CANNOT_JOIN_PRIVATE:"不能加入 Private 类型的群组",CANNOT_CHANGE_OWNER_IN_AVCHATROOM:"AVChatRoom 类型的群组不能转让群主",CANNOT_CHANGE_OWNER_TO_SELF:"不能把群主转让给自己",CANNOT_DISMISS_PRIVATE:"不能解散 Private 类型的群组",JOIN_GROUP_FAIL:"加群失败，请检查传入参数或重试",CANNOT_ADD_MEMBER_IN_AVCHATROOM:"AVChatRoom 类型的群不支持邀请群成员",CANNOT_KICK_MEMBER_IN_AVCHATROOM:"不能在 AVChatRoom 类型的群组踢人",NOT_OWNER:"你不是群主，只有群主才有权限操作",CANNOT_SET_MEMBER_ROLE_IN_PRIVATE_AND_AVCHATROOM:"不能在 Private / AVChatRoom 类型的群中设置群成员身份",INVALID_MEMBER_ROLE:"不合法的群成员身份，请检查传入参数",CANNOT_SET_SELF_MEMBER_ROLE:"不能设置自己的群成员身份，请检查传入参数",DEL_FRIEND_INVALID_PARAM:"传入 deleteFriend 接口的参数无效",GET_PROFILE_INVALID_PARAM:"传入 getUserProfile 接口的参数无效",UPDATE_PROFILE_INVALID_PARAM:"传入 updateMyProfile 接口的参数无效",ADD_BLACKLIST_INVALID_PARAM:"传入 addToBlacklist 接口的参数无效",DEL_BLACKLIST_INVALID_PARAM:"传入 removeFromBlacklist 接口的参数无效",CANNOT_ADD_SELF_TO_BLACKLIST:"不能拉黑自己",NETWORK_ERROR:"网络错误",NETWORK_TIMEOUT:"请求超时",NETWORK_BASE_OPTIONS_NO_URL:"网络层初始化错误，缺少 URL 参数",NETWORK_UNDEFINED_SERVER_NAME:"打包错误，未定义的 serverName",NETWORK_PACKAGE_UNDEFINED:"未定义的 packageConfig",SOCKET_NOT_SUPPORTED:"当前浏览器不支持 WebSocket",CONVERTOR_IRREGULAR_PARAMS:"不规范的参数名称",NOTICE_RUNLOOP_UNEXPECTED_CONDITION:"意料外的通知条件",NOTICE_RUNLOOP_OFFSET_LOST:"_syncOffset 丢失",UNCAUGHT_ERROR:"未经明确定义的错误",SDK_IS_NOT_READY:"接口调用时机不合理，等待 SDK 处于 ready 状态后再调用（监听 TIM.EVENT.SDK_READY 事件）",LONG_POLL_KICK_OUT:"检测到多个 web 实例登录，消息通道下线",SSO_LOG_MODEL_INIT_ERROR:"SSOLogData 数据模型初始化错误"},qu=function(t){function e(t){var i;return ci(this,e),(i=Si(this,di(e).call(this))).code=t.code,i.message=t.message,i.data=t.data||{},i}return gi(e,_i(Error)),e}(),Hu="1.7.3",Bu="537048168",Vu="10",Ku="protobuf",zu="json",Yu={HOST:{TYPE:3,ACCESS_LAYER_TYPES:{SANDBOX:1,TEST:2,PRODUCTION:3},CURRENT:{COMMON:"https://webim.tim.qq.com",PIC:"https://pic.tim.qq.com",COS:"https://yun.tim.qq.com"},PRODUCTION:{COMMON:"https://webim.tim.qq.com",PIC:"https://pic.tim.qq.com",COS:"https://yun.tim.qq.com"},SANDBOX:{COMMON:"https://events.tim.qq.com",PIC:"https://pic.tim.qq.com",COS:"https://yun.tim.qq.com"},TEST:{COMMON:"https://test.tim.qq.com",PIC:"https://pic.tim.qq.com",COS:"https://yun.tim.qq.com"},setCurrent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;switch(t){case this.ACCESS_LAYER_TYPES.SANDBOX:this.CURRENT=this.SANDBOX,this.TYPE=this.ACCESS_LAYER_TYPES.SANDBOX;break;case this.ACCESS_LAYER_TYPES.TEST:this.CURRENT=this.TEST,this.TYPE=this.ACCESS_LAYER_TYPES.TEST;break;default:this.CURRENT=this.PRODUCTION,this.TYPE=this.ACCESS_LAYER_TYPES.PRODUCTION}}},NAME:{OPEN_IM:"openim",GROUP:"group_open_http_svc",FRIEND:"sns",PROFILE:"profile",RECENT_CONTACT:"recentcontact",PIC:"openpic",BIG_GROUP_NO_AUTH:"group_open_http_noauth_svc",BIG_GROUP_LONG_POLLING_NO_AUTH:"group_open_long_polling_http_noauth_svc",IM_OPEN_STAT:"imopenstat",WEB_IM:"webim",IM_COS_SIGN:"im_cos_sign_svr"},CMD:{ACCESS_LAYER:"accesslayer",LOGIN:"login",LOGOUT_LONG_POLL:"longpollinglogout",LOGOUT_ALL:"logout",PORTRAIT_GET:"portrait_get",PORTRAIT_SET:"portrait_set",GET_LONG_POLL_ID:"getlongpollingid",LONG_POLL:"longpolling",AVCHATROOM_LONG_POLL:"get_msg",FRIEND_ADD:"friend_add",FRIEND_GET_ALL:"friend_get_all",FRIEND_DELETE:"friend_delete",RESPONSE_PENDENCY:"friend_response",GET_PENDENCY:"pendency_get",DELETE_PENDENCY:"pendency_delete",GET_BLACKLIST:"black_list_get",ADD_BLACKLIST:"black_list_add",DELETE_BLACKLIST:"black_list_delete",CREATE_GROUP:"create_group",GET_JOINED_GROUPS:"get_joined_group_list",SEND_MESSAGE:"sendmsg",SEND_GROUP_MESSAGE:"send_group_msg",GET_GROUP_INFO:"get_group_info",GET_GROUP_MEMBER_INFO:"get_group_member_info",QUIT_GROUP:"quit_group",CHANGE_GROUP_OWNER:"change_group_owner",DESTROY_GROUP:"destroy_group",ADD_GROUP_MEMBER:"add_group_member",DELETE_GROUP_MEMBER:"delete_group_member",SEARCH_GROUP_BY_ID:"get_group_public_info",APPLY_JOIN_GROUP:"apply_join_group",HANDLE_APPLY_JOIN_GROUP:"handle_apply_join_group",MODIFY_GROUP_INFO:"modify_group_base_info",MODIFY_GROUP_MEMBER_INFO:"modify_group_member_info",DELETE_GROUP_SYSTEM_MESSAGE:"deletemsg",GET_CONVERSATION_LIST:"get",DELETE_CONVERSATION:"delete",GET_MESSAGES:"getmsg",GET_C2C_ROAM_MESSAGES:"getroammsg",GET_GROUP_ROAM_MESSAGES:"group_msg_get",SET_C2C_MESSAGE_READ:"msgreaded",SET_GROUP_MESSAGE_READ:"msg_read_report",FILE_READ_AND_WRITE_AUTHKEY:"authkey",FILE_UPLOAD:"pic_up",COS_SIGN:"cos",TIM_WEB_REPORT:"tim_web_report"},CHANNEL:{SOCKET:1,XHR:2,AUTO:0},NAME_VERSION:{openim:"v4",group_open_http_svc:"v4",sns:"v4",profile:"v4",recentcontact:"v4",openpic:"v4",group_open_http_noauth_svc:"v1",group_open_long_polling_http_noauth_svc:"v1",imopenstat:"v4",im_cos_sign_svr:"v4",webim:"v3"}};Yu.HOST.setCurrent(Yu.HOST.ACCESS_LAYER_TYPES.PRODUCTION);var Wu={request:{toAccount:"To_Account",fromAccount:"From_Account",to:"To_Account",from:"From_Account",groupID:"GroupId",avatar:"FaceUrl"},response:{GroupId:"groupID",Member_Account:"userID",MsgList:"messageList",SyncFlag:"syncFlag",To_Account:"to",From_Account:"from",MsgSeq:"sequence",MsgRandom:"random",MsgTimeStamp:"time",MsgContent:"content",MsgBody:"elements",MsgType:"type",MsgShow:"messageShow",NextMsgSeq:"nextMessageSeq",FaceUrl:"avatar",ProfileDataMod:"profileModify",Profile_Account:"userID",ValueBytes:"value",ValueNum:"value",NoticeSeq:"noticeSequence",NotifySeq:"notifySequence",Operator_Account:"operatorID",OpType:"operationType",ReportType:"operationType",UserId:"userID",User_Account:"userID",List_Account:"userIDList",MsgOperatorMemberExtraInfo:"operatorInfo",MsgMemberExtraInfo:"memberInfoList",ImageUrl:"avatar",NickName:"nick",MsgGroupNewInfo:"newGroupProfile",Owner_Account:"ownerID",GroupName:"name",GroupFaceUrl:"avatar",GroupIntroduction:"introduction",GroupNotification:"notification",GroupApplyJoinOption:"joinOption",MsgKey:"messageKey",GroupInfo:"groupProfile",Desc:"description",Ext:"extension"},ignoreKeyWord:["C2C","ID","USP"]},Ju={CONTEXT_UPDATED:"_contextWasUpdated",CONTEXT_RESET:"_contextWasReset",CONTEXT_A2KEY_AND_TINYID_UPDATED:"_a2KeyAndTinyIDUpdated",RUNNING_STATE_CHANGE:"_runningStateChange",SYNC_MESSAGE_C2C_START:"_noticeSynchronizationStart",SYNC_MESSAGE_C2C_PROCESSING:"_noticeIsSynchronizing",SYNC_MESSAGE_C2C_FINISHED:"_noticeIsSynchronized",SYNC_MESSAGE_GROUP_SYSTEM_NOTICE_FINISHED:"_groupSystemNoticeSyncFinished",MESSAGE_SENDING:"_sendingMessage",MESSAGE_C2C_SEND_SUCCESS:"_sendC2CMessageSuccess",MESSAGE_C2C_SEND_FAIL:"_sendC2CMessageFail",MESSAGE_SYNC_PROCESSING:"_syncMessageProcessing",MESSAGE_SYNC_FINISHED:"_syncMessageFinished",MESSAGE_C2C_INSTANT_RECEIVED:"_receiveInstantMessage",MESSAGE_C2C_RECEIVE_ROAMING_SUCCESS:"_receiveC2CRoamingMessageSuccess",MESSAGE_C2C_RECEIVE_ROAMING_FAIL:"_receiveC2CRoamingMessageFail",MESSAGE_GROUP_SEND_SUCCESS:"_sendGroupMessageSuccess",MESSAGE_GROUP_SEND_FAIL:"_sendGroupMessageFail",MESSAGE_GROUP_RECEIVE_ROAMING_SUCCESS:"_receiveGroupRoamingMessageSuccess",MESSAGE_GROUP_RECEIVE_ROAMING_FAIL:"_receiveGroupRoamingMessageFail",MESSAGE_GROUP_INSTANT_RECEIVED:"_receiveGroupInstantMessage",MESSAGE_GROUP_SYSTEM_NOTICE_RECEIVED:"_receveGroupSystemNotice",NOTICE_LONGPOLL_GETID_SUCCESS:"_getLongPollIDSuccess",NOTICE_LONGPOLL_GETID_FAIL:"_getLongPollIDFail",NOTICE_LONGPOLL_START:"_longPollStart",NOTICE_LONGPOLL_IN_POLLING:"_longPollInPolling",NOTICE_LONGPOLL_REQUEST_ARRIVED:"_longPollInArrived",NOTICE_LONGPOLL_REQUEST_NOT_ARRIVED:"_longPollInNotArrived",NOTICE_LONGPOLL_JITTER:"_longPollJitter",NOTICE_LONGPOLL_SOON_RECONNECT:"_longPollSoonReconnect",NOTICE_LONGPOLL_LONG_RECONNECT:"_longPollLongReconnect",NOTICE_LONGPOLL_DISCONNECT:"_longpollChannelDisconnect",NOTICE_LONGPOLL_STOPPED:"_longPollStopped",NOTICE_LONGPOLL_KICKED_OUT:"_longPollKickedOut",NOTICE_LONGPOLL_MUTIPLE_DEVICE_KICKED_OUT:"_longPollMitipuleDeviceKickedOut",NOTICE_LONGPOLL_NEW_C2C_NOTICE:"_longPollGetNewC2CNotice",NOTICE_LONGPOLL_NEW_C2C_MESSAGES:"_longPollGetNewC2CMessages",NOTICE_LONGPOLL_NEW_GROUP_MESSAGES:"_longPollGetNewGroupMessages",NOTICE_LONGPOLL_NEW_GROUP_TIPS:"_longPollGetNewGroupTips",NOTICE_LONGPOLL_NEW_GROUP_NOTICE:"_longPollGetNewGroupNotice",NOTICE_LONGPOLL_NEW_FRIEND_MESSAGES:"_longPollGetNewFriendMessages",NOTICE_LONGPOLL_SEQUENCE_UPDATE:"_longPollNoticeSequenceUpdate",NOTICE_LONGPOLL_PROFILE_MODIFIED:"_longPollProfileModified",NOTICE_LONGPOLL_RECEIVE_SYSTEM_ORDERS:"_longPollNoticeReceiveSystemOrders",NOTICE_LONGPOLL_RESTART:"_longpollRestart",APPLY_ADD_FRIEND_SUCCESS:"_addFriendApplySendSucess",APPLY_ADD_FRIEND_FAIL:"_addFriendApplySendFail",APPLY_GET_PENDENCY_SUCCESS:"_applyGetPendenciesSucess",APPLY_GET_PENDENCY_FAIL:"_applyGetPendenciesFail",APPLY_DELETE_SUCCESS:"_applyDeletedSucess",APPLY_DELETE_FAIL:"_applyDeletedFail",GROUP_CREATE_SUCCESS:"_createGroupSuccess",GROUP_CREATE_FAIL:"_createGroupFail",GROUP_LIST_UPDATED:"_onGroupListUpdated",SIGN_LOGIN_CHANGE:"_loginStatusChange",SIGN_LOGIN:"_login",SIGN_LOGIN_SUCCESS:"_loginSuccess",SIGN_LOGIN_FAIL:"_loginFail",SIGN_LOGININFO_UPDATED:"_signLoginInfoUpdated",SIGN_LOGOUT_EXECUTING:"_signLogoutExcuting",SIGN_LOGOUT_SUCCESS:"_logoutSuccess",SIGN_GET_ACCESS_LAYER_CHANGE:"_getAccessLayerStatusChange",SIGN_GET_ACCESS_LAYER_SUCCESS:"_getAccessLayerSuccess",SIGN_GET_ACCESS_LAYER_FAIL:"_getAccessLayerFail",ERROR_DETECTED:"_errorHasBeenDetected",CONVERSATION_LIST_UPDATED:"_onConversationListUpdated",CONVERSATION_LIST_PROFILE_UPDATED:"_onConversationListProfileUpdated",CONVERSATION_DELETED:"_conversationDeleted",PROFILE_UPDATED:"onProfileUpdated",FRIEND_GET_SUCCESS:"_getFriendsSuccess",FRIEND_GET_FAIL:"_getFriendsFail",FRIEND_DELETE_SUCCESS:"_deleteFriendSuccess",FRIEND_DELETE_FAIL:"_deleteFriendFail",BLACKLIST_ADD_SUCCESS:"_addBlacklistSuccess",BLACKLIST_ADD_FAIL:"_addBlacklistFail",BLACKLIST_GET_SUCCESS:"_getBlacklistSuccess",BLACKLIST_GET_FAIL:"_getBlacklistFail",AVCHATROOM_OPTIONS_UPDATED:"_AVChatRoomOptionsUpdated",AVCHATROOM_JOIN_SUCCESS:"joinAVChatRoomSuccess",SDK_MEMORY_STATUS_UPDATE:"_sdkMemoryStatusUpdate",SDK_READY:"_sdkStateReady",SDK_SSO_LOGGER:"_sdkSSOLogger"},Xu=Vt.filter;Ot({target:"Array",proto:1,forced:!ei("filter")},{filter:function(t){return Xu(this,t,arguments.length>1?arguments[1]:void 0)}}),Ot({target:"Object",stat:1,forced:Object.assign!==qs},{assign:qs});var Qu=Jn.trim;function Zu(t,e){if("string"!=typeof t&&!Array.isArray(t))throw new TypeError("Expected the input to be `string | string[]`");var i;return e=Object.assign({pascalCase:0},e),0===(t=Array.isArray(t)?t.map((function(t){return t.trim()})).filter((function(t){return t.length})).join("-"):t.trim()).length?"":1===t.length?e.pascalCase?t.toUpperCase():t.toLowerCase():(t!==t.toLowerCase()&&(t=tl(t)),t=t.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(function(t,e){return e.toUpperCase()})).replace(/\d+(\w|$)/g,(function(t){return t.toUpperCase()})),i=t,e.pascalCase?i.charAt(0).toUpperCase()+i.slice(1):i)}Ot({target:"String",proto:1,forced:function(t){return h((function(){return!!Vn[t]()||"​᠎"!="​᠎"[t]()||Vn[t].name!==t}))}("trim")},{trim:function(){return Qu(this)}});var tl=function(t){for(var e=0,i=0,n=0,r=0;r<t.length;r++){var o=t[r];e&&/[a-zA-Z]/.test(o)&&o.toUpperCase()===o?(t=t.slice(0,r)+"-"+t.slice(r),e=0,n=i,i=1,r++):i&&n&&/[a-zA-Z]/.test(o)&&o.toLowerCase()===o?(t=t.slice(0,r-1)+"-"+t.slice(r-1),n=i,i=0,e=1):(e=o.toLowerCase()===o&&o.toUpperCase()!==o,n=i,i=o.toUpperCase()===o&&o.toLowerCase()!==o)}return t};function el(t,e,i){var n=[],r=0,o=function t(e,i){if(++r>10)return r--,e;if(gs(e)){var o=e.map((function(e){return hs(e)?t(e,i):e}));return r--,o}if(hs(e)){var a=(s=e,c=function(t,e){if(!ys(e))return 0;if((a=e)!==Zu(a)){for(var r=1,o=0;o<Wu.ignoreKeyWord.length;o++)if(e.includes(Wu.ignoreKeyWord[o])){r=0;break}r&&n.push(e)}var a;return ds(i[e])?function(t){return t[0].toUpperCase()+Zu(t).slice(1)}(e):i[e]},u=Object.create(null),Object.keys(s).forEach((function(t){var e=c(s[t],t);e&&(u[e]=s[t])})),u);return a=Os(a,(function(e,n){return gs(e)||hs(e)?t(e,i):e})),r--,a}var s,c,u}(t,e=pi({},Wu.request,{},e));return n.length>0&&i.innerEmitter.emit(Ju.ERROR_DETECTED,{code:$u.CONVERTOR_IRREGULAR_PARAMS,message:$u.CONVERTOR_IRREGULAR_PARAMS}),o}function il(t,e){if(e=pi({},Wu.response,{},e),gs(t))return t.map((function(t){return hs(t)?il(t,e):t}));if(hs(t)){var i=(n=t,r=function(t,i){return ds(e[i])?Zu(i):e[i]},o={},Object.keys(n).forEach((function(t){o[r(n[t],t)]=n[t]})),o);return Os(i,(function(t){return gs(t)||hs(t)?il(t,e):t}))}var n,r,o}var nl=function(){function t(e,i){var n=this;if(ci(this,t),void 0===i)throw new qu({code:$u.NO_SDK_INSTANCE,message:ju.NO_SDK_INSTANCE});this.tim=i,this.method=e.method||"POST",this._initializeServerMap(),this._initializeURL(e),this._initializeRequestData(e),this.callback=function(t){return il(t=e.decode(t),n._getResponseMap(e))}}return li(t,[{key:"_initializeServerMap",value:function(){this._serverMap=Object.create(null);var t="";for(var e in Yu.NAME)if(Object.prototype.hasOwnProperty.call(Yu.NAME,e))switch(t=Yu.NAME[e]){case Yu.NAME.PIC:this._serverMap[t]=Yu.HOST.CURRENT.PIC;break;case Yu.NAME.IM_COS_SIGN:this._serverMap[t]=Yu.HOST.CURRENT.COS;break;default:this._serverMap[t]=Yu.HOST.CURRENT.COMMON}}},{key:"_getHost",value:function(t){if(void 0!==this._serverMap[t])return this._serverMap[t];throw new qu({code:$u.NETWORK_UNDEFINED_SERVER_NAME,message:ju.NETWORK_UNDEFINED_SERVER_NAME})}},{key:"_initializeURL",value:function(t){var e=t.serverName,i=t.cmd,n=this._getHost(e),r="".concat(n,"/").concat(Yu.NAME_VERSION[e],"/").concat(e,"/").concat(i);r+="?".concat(this._getQueryString(t.queryString)),this.url=r}},{key:"getUrl",value:function(){return this.url.replace(/&reqtime=(\d+)/,"&reqtime=".concat(Math.ceil(+new Date/1e3)))}},{key:"_initializeRequestData",value:function(t){var e,i=t.requestData;e=this._requestDataCleaner(i),this.requestData=t.encode(e)}},{key:"_requestDataCleaner",value:function(t){var e=Array.isArray(t)?[]:Object.create(null);for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&ys(i)&&null!==t[i]&&("object"!==si(t[i])?e[i]=t[i]:e[i]=this._requestDataCleaner.bind(this)(t[i]));return e}},{key:"_getQueryString",value:function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&("function"!=typeof t[i]?e.push("".concat(i,"=").concat(t[i])):e.push("".concat(i,"=").concat(t[i]())));return e.join("&")}},{key:"_getResponseMap",value:function(t){if(t.keyMaps&&t.keyMaps.response&&Object.keys(t.keyMaps.response).length>0)return t.keyMaps.response}}]),t}(),rl=[].slice,ol=/MSIE .\./.test(Jr),al=function(t){return function(e,i){var n=arguments.length>2,r=n?rl.call(arguments,2):void 0;return t(n?function(){("function"==typeof e?e:Function(e)).apply(this,r)}:e,i)}};function sl(t){this.mixin(t)}Ot({global:1,bind:1,forced:ol},{setTimeout:al(f.setTimeout),setInterval:al(f.setInterval)}),sl.mixin=function(t){var e=t.prototype||t;e._isReady=0,e.ready=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t)return this._isReady?void(e?t.call(this):setTimeout(t,1)):(this._readyQueue=this._readyQueue||[],void this._readyQueue.push(t))},e.triggerReady=function(){var t=this;this._isReady=1,setTimeout((function(){var e=t._readyQueue;t._readyQueue=[],e&&e.length>0&&e.forEach((function(t){t.call(this)}),t)}),1)},e.resetReady=function(){this._isReady=0,this._readyQueue=[]},e.isReady=function(){return this._isReady}};var cl=function(){function t(e){if(ci(this,t),0==!!e)throw new qu({code:$u.NO_SDK_INSTANCE,message:ju.NO_SDK_INSTANCE});sl.mixin(this),this.tim=e,this.innerEmitter=e.innerEmitter,this.connectionController=e.connectionController,this.packageConfig=e.packageConfig,this.packageConfig.update(e)}return li(t,[{key:"createPackage",value:function(t){var e=this.packageConfig.get(t);return e?new nl(e,this.tim):0}},{key:"reset",value:function(){as.warn(["method: IMController.reset() method must be implemented"].join())}},{key:"destroy",value:function(){as.warn("destory")}}]),t}();Ot({target:"Object",stat:1,forced:!p,sham:!p},{defineProperty:k.f});var ul=function(){function t(e,i){ci(this,t),this.data=e,this.tim=i,this.defaultData={},Object.assign(this.defaultData,e),this.initGetterAndSetter()}return li(t,[{key:"initGetterAndSetter",value:function(){var t=this,e=this.tim,i=function(i,n){Object.defineProperty(t,i,{enumerable:1,configurable:1,get:function(){return t.data[i]},set:function(n){t.data[i]=n,t.onChange.bind(t)(e.context,i,n)}})};for(var n in t.data)Object.prototype.hasOwnProperty.call(t.data,n)&&i(n,t.data[n])}},{key:"onChange",value:function(t,e,i){this.tim.innerEmitter.emit(Ju.CONTEXT_UPDATED,{data:{context:t,key:e,value:i}})}},{key:"reset",value:function(){var t=this.tim;for(var e in this.data)Object.prototype.hasOwnProperty.call(this.data,e)&&(this.data[e]=this.defaultData.hasOwnProperty(e)?this.defaultData[e]:null);this.tim.innerEmitter.emit(Ju.CONTEXT_RESET,{data:t.context})}}]),t}(),ll={SUCCESS:"JoinedSuccess",WAIT_APPROVAL:"WaitAdminApproval"},fl={COMMON:{SUCCESS:"OK",FAIL:"FAIL"},REQUEST:{SUCCESS:0},ACCESS_LAYER:{PRODUCTION:0,TEST:1},LOGIN:{IS_LOGIN:1,IS_NOT_LOGIN:0},SYNC_MESSAGE:{SYNCHRONIZATION_START:0,SYNCHRONIZING:1,SYNCHRONIZED:2},MESSAGE_STATUS:{UNSEND:"unSend",SUCCESS:"success",FAIL:"fail"},GET_HISTORY_MESSAGE_STATUS:{C2C_IS_FINISHED:1,C2C_IS_NOT_FINISHED:0,GROUP_IS_FINISHED:1,GROUP_IS_NOT_FINISHED:0},ACCOUNT_STATUS:{SIGN_IN:1,SIGN_OUT:0},CHANNEL_STATUS:{ONLINE:1,OFFLINE:0},JOIN_GROUP_STATUS:ll,UPLOAD:{FINISHED:1,UPLOADING:0}},hl=function(t){function e(t){var i;return ci(this,e),(i=Si(this,di(e).call(this,t)))._initContext(),i._initListener(),i}return gi(e,cl),li(e,[{key:"reset",value:function(){this.tim.context.reset()}},{key:"_IAmReady",value:function(){this.triggerReady()}},{key:"_initListener",value:function(){this.tim.innerEmitter.on(Ju.SIGN_LOGIN_SUCCESS,this._updateA2KeyAndTinyID,this)}},{key:"_updateA2KeyAndTinyID",value:function(t){var e=t.data,i=e.a2Key,n=e.tinyID;this.set("a2Key",i),this.set("tinyID",n),this.tim.innerEmitter.emit(Ju.CONTEXT_A2KEY_AND_TINYID_UPDATED,{data:{context:this.tim.context}}),this._IAmReady()}},{key:"get",value:function(t){return this.tim.context[t]}},{key:"set",value:function(t,e){this.tim.context[t]=e}},{key:"_initContext",value:function(){var t=this.tim.loginInfo;this.tim.context=new ul({login:fl.LOGIN.IS_NOT_LOGIN,SDKAppID:t.SDKAppID,appIDAt3rd:null,accountType:t.accountType,identifier:t.identifier,tinyID:null,identifierNick:t.identifierNick,userSig:t.userSig,a2Key:null,contentType:"json",apn:1},this.tim),this.tim.innerEmitter.on(Ju.CONTEXT_UPDATED,this._onContextMemberChange.bind(this))}},{key:"_onContextMemberChange",value:function(t){var e=t.data,i=e.key,n=e.value;switch(i){case"tinyID":n.length<=0?this.tim.context.login=fl.LOGIN.IS_NOT_LOGIN:this.tim.context.login=null!==this.tim.context.a2Key?fl.LOGIN.IS_LOGIN:fl.LOGIN.IS_NOT_LOGIN;break;case"a2Key":n.length<=0?this.tim.context.login=fl.LOGIN.IS_NOT_LOGIN:this.tim.context.login=null!==this.tim.context.tinyID?fl.LOGIN.IS_LOGIN:fl.LOGIN.IS_NOT_LOGIN}}}]),e}(),pl={JSON:{TYPE:{C2C:{NOTICE:1,COMMON:9,EVENT:10},GROUP:{COMMON:3,TIP:4,SYSTEM:5,TIP2:6},FRIEND:{NOTICE:7},PROFILE:{NOTICE:8}},SUBTYPE:{C2C:{COMMON:0,READED:92,KICKEDOUT:96},GROUP:{COMMON:0,LOVEMESSAGE:1,TIP:2,REDPACKET:3}},OPTIONS:{GROUP:{JOIN:1,QUIT:2,KICK:3,SET_ADMIN:4,CANCEL_ADMIN:5,MODIFY_GROUP_INFO:6,MODIFY_MEMBER_INFO:7}}},PROTOBUF:{},IMAGE_TYPES:{ORIGIN:1,LARGE:2,SMALL:3},IMAGE_FORMAT:{JPG:1,JPEG:1,GIF:2,PNG:3,BMP:4,UNKNOWN:255}},gl=1,dl=2,ml=3,vl=4,_l=5,yl=7,Sl=8,El=9,Cl=10,Il=15,bl=255,Al=2,wl=0,Tl=1,xl={NICK:"Tag_Profile_IM_Nick",GENDER:"Tag_Profile_IM_Gender",BIRTHDAY:"Tag_Profile_IM_BirthDay",LOCATION:"Tag_Profile_IM_Location",SELFSIGNATURE:"Tag_Profile_IM_SelfSignature",ALLOWTYPE:"Tag_Profile_IM_AllowType",LANGUAGE:"Tag_Profile_IM_Language",AVATAR:"Tag_Profile_IM_Image",MESSAGESETTINGS:"Tag_Profile_IM_MsgSettings",ADMINFORBIDTYPE:"Tag_Profile_IM_AdminForbidType",LEVEL:"Tag_Profile_IM_Level",ROLE:"Tag_Profile_IM_Role"},Dl={UNKNOWN:"Gender_Type_Unknown",FEMALE:"Gender_Type_Female",MALE:"Gender_Type_Male"},Ml={NONE:"AdminForbid_Type_None",SEND_OUT:"AdminForbid_Type_SendOut"},Ll={NEED_CONFIRM:"AllowType_Type_NeedConfirm",ALLOW_ANY:"AllowType_Type_AllowAny",DENY_ANY:"AllowType_Type_DenyAny"},Ol=function t(e){ci(this,t),this.code=0,this.data=e||{}},Nl=null,Pl=function(t){Nl=t},Rl=function(t){return t instanceof Ol?(as.warn("IMPromise.resolve 此函数会自动用options创建IMResponse实例，调用侧不需创建，建议修改！"),Promise.resolve(t)):Promise.resolve(new Ol(t))},kl=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t instanceof qu)return e&&null!==Nl&&Nl.emit(Qe.ERROR,t),Promise.reject(t);if(t instanceof Error){as.warn("IMPromise.reject options not instanceof IMError! details:",t);var i=new qu({code:$u.UNCAUGHT_ERROR,message:t.message});return e&&null!==Nl&&Nl.emit(Qe.ERROR,i),Promise.reject(i)}if(ds(t)||ds(t.code)||ds(t.message))as.error("IMPromise.reject 必须指定code(错误码)和message(错误信息)!!!");else{if(ls(t.code)&&fs(t.message)){var n=new qu(t);return e&&null!==Nl&&Nl.emit(Qe.ERROR,n),Promise.reject(n)}as.error("IMPromise.reject code(错误码)必须为数字，message(错误信息)必须为字符串!!!")}},Gl="sdkReady",Ul="login",Fl="initConversationList",$l="initGroupList",jl="upload",ql=function(t){function e(t){var i;return ci(this,e),(i=Si(this,di(e).call(this,t))).devLoginTips='new TIM({\n      SDKAppID: "必填",\n      accountType: "必填",\n      identifier: "必填",\n      userSig: "必填",\n      identifierNick: "可选"\n    })\n    ',i._initializeListener(),i}return gi(e,cl),li(e,[{key:"login",value:function(t){if(1==this._isLogin()&&this._isLoginCurrentUser(t.identifier))return this.tim.innerEmitter.emit(Ju.NOTICE_LONGPOLL_RESTART),Rl(new Ol("重启消息通道"));if(this._isLogin()){var e="您已经登录账号".concat(t.identifier,"！如需切换账号登录，请先调用 logout 接口登出，再调用 login 接口登录。");return as.warn(e),Rl(new Ol(e))}as.log("SignController.login userID=",t.identifier),as.time(Ul);var i=this._checkLoginInfo(t);return Ps(i)?(this.tim.context.identifier=t.identifier,this.tim.context.userSig=t.userSig,this.tim.context.SDKAppID=t.SDKAppID,this.tim.context.accountType=t.accountType,this.tim.context.identifier&&this.tim.context.userSig?(this.tim.innerEmitter.emit(Ju.SIGN_LOGIN),this._accessLayer()):void 0):kl(i)}},{key:"_isLogin",value:function(){return!!this.tim.context.a2Key}},{key:"_isLoginCurrentUser",value:function(t){return this.tim.context.identifier===t}},{key:"_initializeListener",value:function(){this.innerEmitter.on(Ju.NOTICE_LONGPOLL_KICKED_OUT,this._onKickedOut,this),this.innerEmitter.on(Ju.NOTICE_LONGPOLL_MUTIPLE_DEVICE_KICKED_OUT,this._onMultipleDeviceKickedOut,this)}},{key:"_accessLayer",value:function(){var t=this;as.log("SignController._accessLayer.");var e=this.createPackage({name:"accessLayer",action:"query"});return this.tim.connectionController.request(e).then((function(e){return as.log("SignController._accessLayer ok. webImAccessLayer=",e.data.webImAccessLayer),1===e.data.webImAccessLayer&&Yu.HOST.setCurrent(e.data.webImAccessLayer),t._login()})).catch((function(t){return as.error("SignController._accessLayer error:",t),kl(t)}))}},{key:"_login",value:function(){var t=this,e=this.createPackage({name:"login",action:"query"});return this.connectionController.request(e).then((function(e){if(0==!!e.data.tinyID)throw new qu({code:$u.NO_TINYID,message:ju.NO_TINYID});if(0==!!e.data.a2Key)throw new qu({code:$u.NO_A2KEY,message:ju.NO_A2KEY});return as.log("SignController.login ok. userID=".concat(t.tim.loginInfo.identifier," loginCost=").concat(as.timeEnd(Ul),"ms")),t.tim.innerEmitter.emit(Ju.SIGN_LOGIN_SUCCESS,{data:{a2Key:e.data.a2Key,tinyID:e.data.tinyID}}),t.tim.outerEmitter.emit(Qe.LOGIN_SUCCESS),Rl(e.data)})).catch((function(t){return as.error("SignController.login error:",t),kl(t)}))}},{key:"logout",value:function(){return as.info("SignController.logout"),this.tim.innerEmitter.emit(Ju.SIGN_LOGOUT_EXECUTING),Promise.all(this._logout(Tl),this._logout(wl)).then(this._emitLogoutSuccess.bind(this)).catch(this._emitLogoutSuccess.bind(this))}},{key:"_logout",value:function(t){var e=this.tim.notificationController,i=t===wl?"logout":"longPollLogout",n=t===wl?{name:i,action:"query"}:{name:i,action:"query",param:{longPollID:e.getLongPollID()}},r=this.createPackage(n);return this.connectionController.request(r).catch((function(t){return as.error("SignController._logout error:",t),kl(t)}))}},{key:"_checkLoginInfo",value:function(t){var e=0,i="";return null===t.SDKAppID?(e=$u.NO_SDKAPPID,i=ju.NO_SDKAPPID):null===t.accountType?(e=$u.NO_ACCOUNT_TYPE,i=ju.NO_ACCOUNT_TYPE):null===t.identifier?(e=$u.NO_IDENTIFIER,i=ju.NO_IDENTIFIER):null===t.userSig&&(e=$u.NO_USERSIG,i=ju.NO_USERSIG),Ps(e)||Ps(i)?{}:{code:e,message:i}}},{key:"_emitLogoutSuccess",value:function(){return this.tim.innerEmitter.emit(Ju.SIGN_LOGOUT_SUCCESS),Rl({})}},{key:"_onKickedOut",value:function(){var t=this;this.tim.logout().then((function(){as.warn("SignController._onKickedOut kicked out.       userID=".concat(t.tim.loginInfo.identifier)),t.tim.outerEmitter.emit(Qe.KICKED_OUT,{type:Ze.KICKED_OUT_MULT_ACCOUNT})}))}},{key:"_onMultipleDeviceKickedOut",value:function(){var t=this;this.tim.logout().then((function(){as.warn("SignController._onKickedOut kicked out.       userID=".concat(t.tim.loginInfo.identifier)),t.tim.outerEmitter.emit(Qe.KICKED_OUT,{type:Ze.KICKED_OUT_MULT_DEVICE})}))}},{key:"reset",value:function(){}}]),e}(),Hl=function(t,e){return function(){for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];return t.apply(e,i)}},Bl=Object.prototype.toString;function Vl(t){return"[object Array]"===Bl.call(t)}function Kl(t){return null!==t&&"object"==typeof t}function zl(t){return"[object Function]"===Bl.call(t)}function Yl(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),Vl(t))for(var i=0,n=t.length;i<n;i++)e.call(null,t[i],i,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}var Wl={isArray:Vl,isArrayBuffer:function(t){return"[object ArrayBuffer]"===Bl.call(t)},isBuffer:function(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:Kl,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===Bl.call(t)},isFile:function(t){return"[object File]"===Bl.call(t)},isBlob:function(t){return"[object Blob]"===Bl.call(t)},isFunction:zl,isStream:function(t){return Kl(t)&&zl(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return"undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product?"undefined"!=typeof window&&"undefined"!=typeof document:0},forEach:Yl,merge:function t(){var e={};function i(i,n){"object"==typeof e[n]&&"object"==typeof i?e[n]=t(e[n],i):e[n]=i}for(var n=0,r=arguments.length;n<r;n++)Yl(arguments[n],i);return e},deepMerge:function t(){var e={};function i(i,n){"object"==typeof e[n]&&"object"==typeof i?e[n]=t(e[n],i):e[n]="object"==typeof i?t({},i):i}for(var n=0,r=arguments.length;n<r;n++)Yl(arguments[n],i);return e},extend:function(t,e,i){return Yl(e,(function(e,n){t[n]=i&&"function"==typeof e?Hl(e,i):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}};function Jl(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Xl=function(t,e,i){if(!e)return t;var n;if(i)n=i(e);else if(Wl.isURLSearchParams(e))n=e.toString();else{var r=[];Wl.forEach(e,(function(t,e){null!=t&&(Wl.isArray(t)?e+="[]":t=[t],Wl.forEach(t,(function(t){Wl.isDate(t)?t=t.toISOString():Wl.isObject(t)&&(t=JSON.stringify(t)),r.push(Jl(e)+"="+Jl(t))})))})),n=r.join("&")}if(n){var o=t.indexOf("#");-1!==o&&(t=t.slice(0,o)),t+=(-1===t.indexOf("?")?"?":"&")+n}return t};function Ql(){this.handlers=[]}Ql.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},Ql.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},Ql.prototype.forEach=function(t){Wl.forEach(this.handlers,(function(e){null!==e&&t(e)}))};var Zl=Ql,tf=function(t,e,i){return Wl.forEach(i,(function(i){t=i(t,e)})),t},ef=function(t){return!(!t||!t.__CANCEL__)};function nf(){throw new Error("setTimeout has not been defined")}function rf(){throw new Error("clearTimeout has not been defined")}var of=nf,af=rf;function sf(t){if(of===setTimeout)return setTimeout(t,0);if((of===nf||!of)&&setTimeout)return of=setTimeout,setTimeout(t,0);try{return of(t,0)}catch(o){try{return of.call(null,t,0)}catch(o){return of.call(this,t,0)}}}"function"==typeof Xa.setTimeout&&(of=setTimeout),"function"==typeof Xa.clearTimeout&&(af=clearTimeout);var cf,uf=[],lf=0,ff=-1;function hf(){lf&&cf&&(lf=0,cf.length?uf=cf.concat(uf):ff=-1,uf.length&&pf())}function pf(){if(!lf){var t=sf(hf);lf=1;for(var e=uf.length;e;){for(cf=uf,uf=[];++ff<e;)cf&&cf[ff].run();ff=-1,e=uf.length}cf=null,lf=0,function(t){if(af===clearTimeout)return clearTimeout(t);if((af===rf||!af)&&clearTimeout)return af=clearTimeout,clearTimeout(t);try{af(t)}catch(e){try{return af.call(null,t)}catch(e){return af.call(this,t)}}}(t)}}function gf(t,e){this.fun=t,this.array=e}function df(){}gf.prototype.run=function(){this.fun.apply(null,this.array)};var mf=df,vf=df,_f=df,yf=df,Sf=df,Ef=df,Cf=df,If=Xa.performance||{},bf=If.now||If.mozNow||If.msNow||If.oNow||If.webkitNow||function(){return(new Date).getTime()},Af=new Date,wf={nextTick:function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];uf.push(new gf(t,e)),1!==uf.length||lf||sf(pf)},title:"browser",browser:1,env:{},argv:[],version:"",versions:{},on:mf,addListener:vf,once:_f,off:yf,removeListener:Sf,removeAllListeners:Ef,emit:Cf,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*bf.call(If),i=Math.floor(e),n=Math.floor(e%1*1e9);return t&&(i-=t[0],(n-=t[1])<0&&(i--,n+=1e9)),[i,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Af)/1e3}},Tf=function(t,e){Wl.forEach(t,(function(i,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=i,delete t[n])}))},xf=function(t,e,i,n,r){return function(t,e,i,n,r){return t.config=e,i&&(t.code=i),t.request=n,t.response=r,t.isAxiosError=1,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}(new Error(t),e,i,n,r)},Df=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Mf=Wl.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function n(t){var n=t;return e&&(i.setAttribute("href",n),n=i.href),i.setAttribute("href",n),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return t=n(window.location.href),function(e){var i=Wl.isString(e)?n(e):e;return i.protocol===t.protocol&&i.host===t.host}}():function(){return 1},Lf=Wl.isStandardBrowserEnv()?{write:function(t,e,i,n,r,o){var a=[];a.push(t+"="+encodeURIComponent(e)),Wl.isNumber(i)&&a.push("expires="+new Date(i).toGMTString()),Wl.isString(n)&&a.push("path="+n),Wl.isString(r)&&a.push("domain="+r),1==o&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},Of=function(t){return new Promise((function(e,i){var n=t.data,r=t.headers;Wl.isFormData(n)&&delete r["Content-Type"];var o=new XMLHttpRequest;if(t.auth){var a=t.auth.username||"",s=t.auth.password||"";r.Authorization="Basic "+btoa(a+":"+s)}if(o.open(t.method.toUpperCase(),Xl(t.url,t.params,t.paramsSerializer),1),o.timeout=t.timeout,o.onreadystatechange=function(){if(o&&4===o.readyState&&(0!==o.status||o.responseURL&&0===o.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in o?function(t){var e,i,n,r={};return t?(Wl.forEach(t.split("\n"),(function(t){if(n=t.indexOf(":"),e=Wl.trim(t.substr(0,n)).toLowerCase(),i=Wl.trim(t.substr(n+1)),e){if(r[e]&&Df.indexOf(e)>=0)return;r[e]="set-cookie"===e?(r[e]?r[e]:[]).concat([i]):r[e]?r[e]+", "+i:i}})),r):r}(o.getAllResponseHeaders()):null,r={data:t.responseType&&"text"!==t.responseType?o.response:o.responseText,status:o.status,statusText:o.statusText,headers:n,config:t,request:o};!function(t,e,i){var n=i.config.validateStatus;!n||n(i.status)?t(i):e(xf("Request failed with status code "+i.status,i.config,null,i.request,i))}(e,i,r),o=null}},o.onabort=function(){o&&(i(xf("Request aborted",t,"ECONNABORTED",o)),o=null)},o.onerror=function(){i(xf("Network Error",t,null,o)),o=null},o.ontimeout=function(){i(xf("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",o)),o=null},Wl.isStandardBrowserEnv()){var c=Lf,u=(t.withCredentials||Mf(t.url))&&t.xsrfCookieName?c.read(t.xsrfCookieName):void 0;u&&(r[t.xsrfHeaderName]=u)}if("setRequestHeader"in o&&Wl.forEach(r,(function(t,e){void 0===n&&"content-type"===e.toLowerCase()?delete r[e]:o.setRequestHeader(e,t)})),t.withCredentials&&(o.withCredentials=1),t.responseType)try{o.responseType=t.responseType}catch(g){if("json"!==t.responseType)throw g}"function"==typeof t.onDownloadProgress&&o.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&o.upload&&o.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){o&&(o.abort(),i(t),o=null)})),void 0===n&&(n=null),o.send(n)}))},Nf={"Content-Type":"application/x-www-form-urlencoded"};function Pf(t,e){!Wl.isUndefined(t)&&Wl.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var Rf,kf={adapter:(void 0!==wf&&"[object process]"===Object.prototype.toString.call(wf)?Rf=Of:"undefined"!=typeof XMLHttpRequest&&(Rf=Of),Rf),transformRequest:[function(t,e){return Tf(e,"Accept"),Tf(e,"Content-Type"),Wl.isFormData(t)||Wl.isArrayBuffer(t)||Wl.isBuffer(t)||Wl.isStream(t)||Wl.isFile(t)||Wl.isBlob(t)?t:Wl.isArrayBufferView(t)?t.buffer:Wl.isURLSearchParams(t)?(Pf(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Wl.isObject(t)?(Pf(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(o){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Wl.forEach(["delete","get","head"],(function(t){kf.headers[t]={}})),Wl.forEach(["post","put","patch"],(function(t){kf.headers[t]=Wl.merge(Nf)}));var Gf=kf;function Uf(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var Ff=function(t){var e,i,n;return Uf(t),t.baseURL&&(n=t.url,!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(n))&&(t.url=(e=t.baseURL,(i=t.url)?e.replace(/\/+$/,"")+"/"+i.replace(/^\/+/,""):e)),t.headers=t.headers||{},t.data=tf(t.data,t.headers,t.transformRequest),t.headers=Wl.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),Wl.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||Gf.adapter)(t).then((function(e){return Uf(t),e.data=tf(e.data,e.headers,t.transformResponse),e}),(function(e){return ef(e)||(Uf(t),e&&e.response&&(e.response.data=tf(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))},$f=function(t,e){e=e||{};var i={};return Wl.forEach(["url","method","params","data"],(function(t){void 0!==e[t]&&(i[t]=e[t])})),Wl.forEach(["headers","auth","proxy"],(function(n){Wl.isObject(e[n])?i[n]=Wl.deepMerge(t[n],e[n]):void 0!==e[n]?i[n]=e[n]:Wl.isObject(t[n])?i[n]=Wl.deepMerge(t[n]):void 0!==t[n]&&(i[n]=t[n])})),Wl.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],(function(n){void 0!==e[n]?i[n]=e[n]:void 0!==t[n]&&(i[n]=t[n])})),i};function jf(t){this.defaults=t,this.interceptors={request:new Zl,response:new Zl}}jf.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=$f(this.defaults,t)).method=t.method?t.method.toLowerCase():"get";var e=[Ff,void 0],i=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)i=i.then(e.shift(),e.shift());return i},jf.prototype.getUri=function(t){return t=$f(this.defaults,t),Xl(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},Wl.forEach(["delete","get","head","options"],(function(t){jf.prototype[t]=function(e,i){return this.request(Wl.merge(i||{},{method:t,url:e}))}})),Wl.forEach(["post","put","patch"],(function(t){jf.prototype[t]=function(e,i,n){return this.request(Wl.merge(n||{},{method:t,url:e,data:i}))}}));var qf=jf;function Hf(t){this.message=t}Hf.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Hf.prototype.__CANCEL__=1;var Bf=Hf;function Vf(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var i=this;t((function(t){i.reason||(i.reason=new Bf(t),e(i.reason))}))}Vf.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Vf.source=function(){var t;return{token:new Vf((function(e){t=e})),cancel:t}};var Kf=Vf;function zf(t){var e=new qf(t),i=Hl(qf.prototype.request,e);return Wl.extend(i,qf.prototype,e),Wl.extend(i,e),i}var Yf=zf(Gf);Yf.Axios=qf,Yf.create=function(t){return zf($f(Yf.defaults,t))},Yf.Cancel=Bf,Yf.CancelToken=Kf,Yf.isCancel=ef,Yf.all=function(t){return Promise.all(t)},Yf.spread=function(t){return function(e){return t.apply(null,e)}};var Wf=Yf,Jf=Yf;Wf.default=Jf;var Xf=Wf,Qf=Xf.create({timeout:6e3,headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}});Qf.interceptors.response.use((function(t){var e=t.data,i=e.error_code,n=e.ErrorCode;return ls(i)&&(n=i),n!==fl.REQUEST.SUCCESS&&(t.data.ErrorCode=Number(n)),t}),(function(t){return"Network Error"===t.message&&(1==Qf.defaults.withCredentials&&as.warn("Network Error, try to close `IMAxios.defaults.withCredentials` to false. (IMAxios.js)"),Qf.defaults.withCredentials=0),Promise.reject(t)}));var Zf=function(){function t(){ci(this,t)}return li(t,[{key:"request",value:function(t){n("warn","请注意： ConnectionBase.request() 方法必须被派生类重写:"," at node_modules\\tim-js-sdk\\tim-js.js:1"),n("log","参数如下：\n    * @param {String} options.url string 是 开发者服务器接口地址\n    * @param {*} options.data - string/object/ArrayBuffer 否 请求的参数\n    * @param {Object} options.header - Object 否 设置请求的 header，\n    * @param {String} options.method - string GET 否 HTTP 请求方法\n    * @param {String} options.dataType - string json 否 返回的数据格式\n    * @param {String} options.responseType - string text 否 响应的数据类型\n    * @param {Boolean} isRetry - string text false 是否为重试的请求\n   "," at node_modules\\tim-js-sdk\\tim-js.js:1")}},{key:"_checkOptions",value:function(t){if(0==!!t.url)throw new qu({code:$u.NETWORK_BASE_OPTIONS_NO_URL,message:ju.NETWORK_BASE_OPTIONS_NO_URL})}},{key:"_initOptions",value:function(t){t.method=["POST","GET","PUT","DELETE","OPTION"].indexOf(t.method)>=0?t.method:"POST",t.dataType=t.dataType||"json",t.responseType=t.responseType||"json"}}]),t}(),th=function(t){function e(){var t;return ci(this,e),(t=Si(this,di(e).call(this))).retry=1,t}return gi(e,Zf),li(e,[{key:"request",value:function(t){return this._checkOptions(t),this._initOptions(t),this._requestWithRetry({url:t.url,data:t.data,method:t.method})}},{key:"_requestWithRetry",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Qf(t).catch((function(n){return e.retry&&i<e.retry?e._requestWithRetry(t,++i):kl(n)}))}}]),e}(),eh=[],ih=[],nh="undefined"!=typeof Uint8Array?Uint8Array:Array,rh=0;function oh(){rh=1;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,i=t.length;e<i;++e)eh[e]=t[e],ih[t.charCodeAt(e)]=e;ih["-".charCodeAt(0)]=62,ih["_".charCodeAt(0)]=63}function ah(t,e,i){for(var n,r,o=[],a=e;a<i;a+=3)n=(t[a]<<16)+(t[a+1]<<8)+t[a+2],o.push(eh[(r=n)>>18&63]+eh[r>>12&63]+eh[r>>6&63]+eh[63&r]);return o.join("")}function sh(t){var e;rh||oh();for(var i=t.length,n=i%3,r="",o=[],a=0,s=i-n;a<s;a+=16383)o.push(ah(t,a,a+16383>s?s:a+16383));return 1===n?(e=t[i-1],r+=eh[e>>2],r+=eh[e<<4&63],r+="=="):2===n&&(e=(t[i-2]<<8)+t[i-1],r+=eh[e>>10],r+=eh[e>>4&63],r+=eh[e<<2&63],r+="="),o.push(r),o.join("")}function ch(t,e,i,n,r){var o,a,s=8*r-n-1,c=(1<<s)-1,u=c>>1,l=-7,f=i?r-1:0,h=i?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=n;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=u}return(p?-1:1)*a*Math.pow(2,o-n)}function uh(t,e,i,n,r,o){var a,s,c,u=8*o-r-1,l=(1<<u)-1,f=l>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,g=n?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||1/0===e?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),(e+=a+f>=1?h/c:h*Math.pow(2,1-f))*c>=2&&(a++,c/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*c-1)*Math.pow(2,r),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,r),a=0));r>=8;t[i+p]=255&s,p+=g,s/=256,r-=8);for(a=a<<r|s,u+=r;u>0;t[i+p]=255&a,p+=g,a/=256,u-=8);t[i+p-g]|=128*d}var lh={}.toString,fh=Array.isArray||function(t){return"[object Array]"==lh.call(t)};function hh(){return gh.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function ph(t,e){if(hh()<e)throw new RangeError("Invalid typed array length");return gh.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=gh.prototype:(null===t&&(t=new gh(e)),t.length=e),t}function gh(t,e,i){if(!(gh.TYPED_ARRAY_SUPPORT||this instanceof gh))return new gh(t,e,i);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return vh(this,t)}return dh(this,t,e,i)}function dh(t,e,i,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,i,n){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===i&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,i):new Uint8Array(e,i,n),gh.TYPED_ARRAY_SUPPORT?(t=e).__proto__=gh.prototype:t=_h(t,e),t}(t,e,i,n):"string"==typeof e?function(t,e,i){if("string"==typeof i&&""!==i||(i="utf8"),!gh.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|Eh(e,i),r=(t=ph(t,n)).write(e,i);return r!==n&&(t=t.slice(0,r)),t}(t,e,i):function(t,e){if(Sh(e)){var i=0|yh(e.length);return 0===(t=ph(t,i)).length?t:(e.copy(t,0,0,i),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?ph(t,0):_h(t,e);if("Buffer"===e.type&&fh(e.data))return _h(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function mh(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function vh(t,e){if(mh(e),t=ph(t,e<0?0:0|yh(e)),!gh.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function _h(t,e){var i=e.length<0?0:0|yh(e.length);t=ph(t,i);for(var n=0;n<i;n+=1)t[n]=255&e[n];return t}function yh(t){if(t>=hh())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+hh().toString(16)+" bytes");return 0|t}function Sh(t){return!(null==t||!t._isBuffer)}function Eh(t,e){if(Sh(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var n=0;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return Yh(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return Wh(t).length;default:if(n)return Yh(t).length;e=(""+e).toLowerCase(),n=1}}function Ch(t,e,i){var n=0;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return Gh(this,e,i);case"utf8":case"utf-8":return Nh(this,e,i);case"ascii":return Rh(this,e,i);case"latin1":case"binary":return kh(this,e,i);case"base64":return Oh(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Uh(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=1}}function Ih(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function bh(t,e,i,n,r){if(0===t.length)return-1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=r?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(r)return-1;i=t.length-1}else if(i<0){if(!r)return-1;i=0}if("string"==typeof e&&(e=gh.from(e,n)),Sh(e))return 0===e.length?-1:Ah(t,e,i,n,r);if("number"==typeof e)return e&=255,gh.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):Ah(t,[e],i,n,r);throw new TypeError("val must be string, number or Buffer")}function Ah(t,e,i,n,r){var o,a=1,s=t.length,c=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,c/=2,i/=2}function u(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(r){var l=-1;for(o=i;o<s;o++)if(u(t,o)===u(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(i+c>s&&(i=s-c),o=i;o>=0;o--){for(var f=1,h=0;h<c;h++)if(u(t,o+h)!==u(e,h)){f=0;break}if(f)return o}return-1}function wh(t,e,i,n){i=Number(i)||0;var r=t.length-i;n?(n=Number(n))>r&&(n=r):n=r;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[i+a]=s}return a}function Th(t,e,i,n){return Jh(Yh(e,t.length-i),t,i,n)}function xh(t,e,i,n){return Jh(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,n)}function Dh(t,e,i,n){return xh(t,e,i,n)}function Mh(t,e,i,n){return Jh(Wh(e),t,i,n)}function Lh(t,e,i,n){return Jh(function(t,e){for(var i,n,r,o=[],a=0;a<t.length&&!((e-=2)<0);++a)i=t.charCodeAt(a),n=i>>8,r=i%256,o.push(r),o.push(n);return o}(e,t.length-i),t,i,n)}function Oh(t,e,i){return 0===e&&i===t.length?sh(t):sh(t.slice(e,i))}function Nh(t,e,i){i=Math.min(t.length,i);for(var n=[],r=e;r<i;){var o,a,s,c,u=t[r],l=null,f=u>239?4:u>223?3:u>191?2:1;if(r+f<=i)switch(f){case 1:u<128&&(l=u);break;case 2:128==(192&(o=t[r+1]))&&(c=(31&u)<<6|63&o)>127&&(l=c);break;case 3:o=t[r+1],a=t[r+2],128==(192&o)&&128==(192&a)&&(c=(15&u)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:o=t[r+1],a=t[r+2],s=t[r+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),r+=f}return function(t){var e=t.length;if(e<=Ph)return String.fromCharCode.apply(String,t);for(var i="",n=0;n<e;)i+=String.fromCharCode.apply(String,t.slice(n,n+=Ph));return i}(n)}gh.TYPED_ARRAY_SUPPORT=void 0!==Xa.TYPED_ARRAY_SUPPORT?Xa.TYPED_ARRAY_SUPPORT:1,gh.poolSize=8192,gh._augment=function(t){return t.__proto__=gh.prototype,t},gh.from=function(t,e,i){return dh(null,t,e,i)},gh.TYPED_ARRAY_SUPPORT&&(gh.prototype.__proto__=Uint8Array.prototype,gh.__proto__=Uint8Array),gh.alloc=function(t,e,i){return function(t,e,i,n){return mh(e),e<=0?ph(t,e):void 0!==i?"string"==typeof n?ph(t,e).fill(i,n):ph(t,e).fill(i):ph(t,e)}(null,t,e,i)},gh.allocUnsafe=function(t){return vh(null,t)},gh.allocUnsafeSlow=function(t){return vh(null,t)},gh.isBuffer=function(t){return null!=t&&(!!t._isBuffer||Xh(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&Xh(t.slice(0,0))}(t))},gh.compare=function(t,e){if(!Sh(t)||!Sh(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,n=e.length,r=0,o=Math.min(i,n);r<o;++r)if(t[r]!==e[r]){i=t[r],n=e[r];break}return i<n?-1:n<i?1:0},gh.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 1;default:return 0}},gh.concat=function(t,e){if(!fh(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return gh.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var n=gh.allocUnsafe(e),r=0;for(i=0;i<t.length;++i){var o=t[i];if(!Sh(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,r),r+=o.length}return n},gh.byteLength=Eh,gh.prototype._isBuffer=1,gh.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)Ih(this,e,e+1);return this},gh.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)Ih(this,e,e+3),Ih(this,e+1,e+2);return this},gh.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)Ih(this,e,e+7),Ih(this,e+1,e+6),Ih(this,e+2,e+5),Ih(this,e+3,e+4);return this},gh.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Nh(this,0,t):Ch.apply(this,arguments)},gh.prototype.equals=function(t){if(!Sh(t))throw new TypeError("Argument must be a Buffer");return this===t?1:0===gh.compare(this,t)},gh.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},gh.prototype.compare=function(t,e,i,n,r){if(!Sh(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),e<0||i>t.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&e>=i)return 0;if(n>=r)return-1;if(e>=i)return 1;if(this===t)return 0;for(var o=(r>>>=0)-(n>>>=0),a=(i>>>=0)-(e>>>=0),s=Math.min(o,a),c=this.slice(n,r),u=t.slice(e,i),l=0;l<s;++l)if(c[l]!==u[l]){o=c[l],a=u[l];break}return o<a?-1:a<o?1:0},gh.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},gh.prototype.indexOf=function(t,e,i){return bh(this,t,e,i,1)},gh.prototype.lastIndexOf=function(t,e,i){return bh(this,t,e,i,0)},gh.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-e;if((void 0===i||i>r)&&(i=r),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=0;;)switch(n){case"hex":return wh(this,t,e,i);case"utf8":case"utf-8":return Th(this,t,e,i);case"ascii":return xh(this,t,e,i);case"latin1":case"binary":return Dh(this,t,e,i);case"base64":return Mh(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Lh(this,t,e,i);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=1}},gh.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Ph=4096;function Rh(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(127&t[r]);return n}function kh(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(t[r]);return n}function Gh(t,e,i){var n=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>n)&&(i=n);for(var r="",o=e;o<i;++o)r+=zh(t[o]);return r}function Uh(t,e,i){for(var n=t.slice(e,i),r="",o=0;o<n.length;o+=2)r+=String.fromCharCode(n[o]+256*n[o+1]);return r}function Fh(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function $h(t,e,i,n,r,o){if(!Sh(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(i+n>t.length)throw new RangeError("Index out of range")}function jh(t,e,i,n){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-i,2);r<o;++r)t[i+r]=(e&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function qh(t,e,i,n){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-i,4);r<o;++r)t[i+r]=e>>>8*(n?r:3-r)&255}function Hh(t,e,i,n,r,o){if(i+n>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function Bh(t,e,i,n,r){return r||Hh(t,0,i,4),uh(t,e,i,n,23,4),i+4}function Vh(t,e,i,n,r){return r||Hh(t,0,i,8),uh(t,e,i,n,52,8),i+8}gh.prototype.slice=function(t,e){var i,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),gh.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=gh.prototype;else{var r=e-t;i=new gh(r,void 0);for(var o=0;o<r;++o)i[o]=this[o+t]}return i},gh.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||Fh(t,e,this.length);for(var n=this[t],r=1,o=0;++o<e&&(r*=256);)n+=this[t+o]*r;return n},gh.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||Fh(t,e,this.length);for(var n=this[t+--e],r=1;e>0&&(r*=256);)n+=this[t+--e]*r;return n},gh.prototype.readUInt8=function(t,e){return e||Fh(t,1,this.length),this[t]},gh.prototype.readUInt16LE=function(t,e){return e||Fh(t,2,this.length),this[t]|this[t+1]<<8},gh.prototype.readUInt16BE=function(t,e){return e||Fh(t,2,this.length),this[t]<<8|this[t+1]},gh.prototype.readUInt32LE=function(t,e){return e||Fh(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},gh.prototype.readUInt32BE=function(t,e){return e||Fh(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},gh.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||Fh(t,e,this.length);for(var n=this[t],r=1,o=0;++o<e&&(r*=256);)n+=this[t+o]*r;return n>=(r*=128)&&(n-=Math.pow(2,8*e)),n},gh.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||Fh(t,e,this.length);for(var n=e,r=1,o=this[t+--n];n>0&&(r*=256);)o+=this[t+--n]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},gh.prototype.readInt8=function(t,e){return e||Fh(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},gh.prototype.readInt16LE=function(t,e){e||Fh(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},gh.prototype.readInt16BE=function(t,e){e||Fh(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},gh.prototype.readInt32LE=function(t,e){return e||Fh(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},gh.prototype.readInt32BE=function(t,e){return e||Fh(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},gh.prototype.readFloatLE=function(t,e){return e||Fh(t,4,this.length),ch(this,t,1,23,4)},gh.prototype.readFloatBE=function(t,e){return e||Fh(t,4,this.length),ch(this,t,0,23,4)},gh.prototype.readDoubleLE=function(t,e){return e||Fh(t,8,this.length),ch(this,t,1,52,8)},gh.prototype.readDoubleBE=function(t,e){return e||Fh(t,8,this.length),ch(this,t,0,52,8)},gh.prototype.writeUIntLE=function(t,e,i,n){t=+t,e|=0,i|=0,n||$h(this,t,e,i,Math.pow(2,8*i)-1,0);var r=1,o=0;for(this[e]=255&t;++o<i&&(r*=256);)this[e+o]=t/r&255;return e+i},gh.prototype.writeUIntBE=function(t,e,i,n){t=+t,e|=0,i|=0,n||$h(this,t,e,i,Math.pow(2,8*i)-1,0);var r=i-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+i},gh.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||$h(this,t,e,1,255,0),gh.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},gh.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||$h(this,t,e,2,65535,0),gh.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):jh(this,t,e,1),e+2},gh.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||$h(this,t,e,2,65535,0),gh.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):jh(this,t,e,0),e+2},gh.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||$h(this,t,e,4,4294967295,0),gh.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):qh(this,t,e,1),e+4},gh.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||$h(this,t,e,4,4294967295,0),gh.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):qh(this,t,e,0),e+4},gh.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*i-1);$h(this,t,e,i,r-1,-r)}var o=0,a=1,s=0;for(this[e]=255&t;++o<i&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+i},gh.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*i-1);$h(this,t,e,i,r-1,-r)}var o=i-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+i},gh.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||$h(this,t,e,1,127,-128),gh.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},gh.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||$h(this,t,e,2,32767,-32768),gh.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):jh(this,t,e,1),e+2},gh.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||$h(this,t,e,2,32767,-32768),gh.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):jh(this,t,e,0),e+2},gh.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||$h(this,t,e,4,2147483647,-2147483648),gh.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):qh(this,t,e,1),e+4},gh.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||$h(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),gh.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):qh(this,t,e,0),e+4},gh.prototype.writeFloatLE=function(t,e,i){return Bh(this,t,e,1,i)},gh.prototype.writeFloatBE=function(t,e,i){return Bh(this,t,e,0,i)},gh.prototype.writeDoubleLE=function(t,e,i){return Vh(this,t,e,1,i)},gh.prototype.writeDoubleBE=function(t,e,i){return Vh(this,t,e,0,i)},gh.prototype.copy=function(t,e,i,n){if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var r,o=n-i;if(this===t&&i<e&&e<n)for(r=o-1;r>=0;--r)t[r+e]=this[r+i];else if(o<1e3||!gh.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+o),e);return o},gh.prototype.fill=function(t,e,i,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!gh.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var o;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(o=e;o<i;++o)this[o]=t;else{var a=Sh(t)?t:Yh(new gh(t,n).toString()),s=a.length;for(o=0;o<i-e;++o)this[o+e]=a[o%s]}return this};var Kh=/[^+\/0-9A-Za-z-_]/g;function zh(t){return t<16?"0"+t.toString(16):t.toString(16)}function Yh(t,e){var i;e=e||1/0;for(var n=t.length,r=null,o=[],a=0;a<n;++a){if((i=t.charCodeAt(a))>55295&&i<57344){if(!r){if(i>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}r=i;continue}if(i<56320){(e-=3)>-1&&o.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,i<128){if((e-=1)<0)break;o.push(i)}else if(i<2048){if((e-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function Wh(t){return function(t){var e,i,n,r,o,a;rh||oh();var s=t.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===t[s-2]?2:"="===t[s-1]?1:0,a=new nh(3*s/4-o),n=o>0?s-4:s;var c=0;for(e=0,i=0;e<n;e+=4,i+=3)r=ih[t.charCodeAt(e)]<<18|ih[t.charCodeAt(e+1)]<<12|ih[t.charCodeAt(e+2)]<<6|ih[t.charCodeAt(e+3)],a[c++]=r>>16&255,a[c++]=r>>8&255,a[c++]=255&r;return 2===o?(r=ih[t.charCodeAt(e)]<<2|ih[t.charCodeAt(e+1)]>>4,a[c++]=255&r):1===o&&(r=ih[t.charCodeAt(e)]<<10|ih[t.charCodeAt(e+1)]<<4|ih[t.charCodeAt(e+2)]>>2,a[c++]=r>>8&255,a[c++]=255&r),a}(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(Kh,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Jh(t,e,i,n){for(var r=0;r<n&&!(r+i>=e.length||r>=t.length);++r)e[r+i]=t[r];return r}function Xh(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var Qh=function(t){function e(){var t;return ci(this,e),(t=Si(this,di(e).call(this)))._request=t.promisify(i.request),t}return gi(e,Zf),li(e,[{key:"request",value:function(t){return this._checkOptions(t),this._initOptions(t),t=pi({},t,{responseType:"text"}),this._request(t).then(this._handleResolve).catch(this._handleReject)}},{key:"_handleResolve",value:function(t){var e=t.data,i=e.error_code,n=e.ErrorCode;return"number"==typeof i&&(n=i),n!==fl.REQUEST.SUCCESS&&(t.data.ErrorCode=Number("".concat(n))),t}},{key:"_handleReject",value:function(t){if(fs(t.errMsg)){if(t.errMsg.includes("abort"))return Rl({});if(t.errMsg.includes("timeout"))return kl(new qu({code:$u.NETWORK_TIMEOUT,message:t.errMsg}));if(t.errMsg.includes("fail"))return kl(new qu({code:$u.NETWORK_ERROR,message:t.errMsg}))}return kl(new qu(pi({code:$u.UNCAUGHT_ERROR,message:t.message},t)))}},{key:"promisify",value:function(t){return function(e){return new Promise((function(i,n){var r=t(Object.assign({},e,{success:i,fail:n}));e.updateAbort&&e.updateAbort((function(){return r.abort()}))}))}}}]),e}(),Zh=function(){function t(){ci(this,t),this.request=0,this.success=0,this.fail=0,this.reportRate=10,this.requestTimeCost=[]}return li(t,[{key:"report",value:function(){if(1!==this.request){if(this.request%this.reportRate!=0)return null;var t=this.avgRequestTime(),e="runLoop reports: success=".concat(this.success,",fail=").concat(this.fail,",total=").concat(this.request,",avg=").concat(t,",cur=").concat(this.requestTimeCost[this.requestTimeCost.length-1],",max=").concat(Math.max.apply(null,this.requestTimeCost),",min=").concat(Math.min.apply(null,this.requestTimeCost));as.log(e)}}},{key:"setRequestTime",value:function(t,e){var i=Math.abs(e-t);100===this.requestTimeCost.length&&this.requestTimeCost.shift(),this.requestTimeCost.push(i)}},{key:"avgRequestTime",value:function(){for(var t,e=this.requestTimeCost.length,i=0,n=0;n<e;n++)i+=this.requestTimeCost[n];return t=i/e,Math.round(100*t)/100}}]),t}(),tp=Xf.CancelToken,ep=function(){function t(e){ci(this,t),this._initializeOptions(e),this._initializeMembers(),this.status=new Zh}return li(t,[{key:"destructor",value:function(){clearTimeout(this._seedID);var t=this._index();for(var e in this)Object.prototype.hasOwnProperty.call(this,e)&&(this[e]=null);return t}},{key:"setIndex",value:function(t){this._index=t}},{key:"getIndex",value:function(){return this._index}},{key:"isRunning",value:function(){return!this._stoped}},{key:"_initializeOptions",value:function(t){this.options=t}},{key:"_initializeMembers",value:function(){this._index=-1,this._seedID=0,this._requestStatus=0,this._stoped=0,this._intervalTime=0,this._intervalIncreaseStep=1e3,this._intervalDecreaseStep=1e3,this._intervalTimeMax=5e3,this._protectTimeout=3e3,this._getNoticeSeq=this.options.getNoticeSeq,this._retryCount=0,this._responseTime=Date.now(),this._responseTimeThreshold=2e3,this.requestor=Qf,this.abort=null}},{key:"start",value:function(){0===this._seedID?(this._stoped=0,this._send()):as.log('XHRRunLoop.start(), XHRRunLoop is running now, if you want to restart runLoop , please run "stop()" first.')}},{key:"_reset",value:function(){as.log("XHRRunLoop._reset(), reset long poll _intervalTime",this._intervalTime),this.stop(),this.start()}},{key:"_intervalTimeIncrease",value:function(){this._intervalTime!==this._responseTimeThreshold&&(this._intervalTime<this._responseTimeThreshold&&(this._intervalTime+=this._intervalIncreaseStep),this._intervalTime>this._responseTimeThreshold&&(this._intervalTime=this._responseTimeThreshold))}},{key:"_intervalTimeDecrease",value:function(){0!==this._intervalTime&&(this._intervalTime>0&&(this._intervalTime-=this._intervalDecreaseStep),this._intervalTime<0&&(this._intervalTime=0))}},{key:"_intervalTimeAdjustment",value:function(){var t=Date.now();100*Math.floor((t-this._responseTime)/100)<=this._responseTimeThreshold?this._intervalTimeIncrease():this._intervalTimeDecrease(),this._responseTime=t}},{key:"_intervalTimeAdjustmentBaseOnResponseData",value:function(t){t.ErrorCode===fl.REQUEST.SUCCESS?this._intervalTimeDecrease():this._intervalTimeIncrease()}},{key:"_send",value:function(){var t=this;if(1!=this._requestStatus){this._requestStatus=1,this.status.request++,"function"==typeof this.options.before&&this.options.before(this.options.pack.requestData);var e=Date.now(),i=0;this.requestor.request({url:this.options.pack.getUrl(),data:this.options.pack.requestData,method:this.options.pack.method,cancelToken:new tp((function(e){t.abort=e}))}).then((function(n){if(t._intervalTimeAdjustmentBaseOnResponseData.bind(t)(n.data),t._retryCount>0&&(t._retryCount=0),t.status.success++,"function"==typeof t.options.success)try{t.options.success({pack:t.options.pack,error:0,data:t.options.pack.callback(n.data)})}catch(c){as.warn("XHRRunLoop._send(), error:",c)}t._requestStatus=0,0==t._stoped&&(t._seedID=setTimeout(t._send.bind(t),t._intervalTime)),i=Date.now(),t.status.setRequestTime(e,i),t.status.report()})).catch((function(n){if(t.status.fail++,t._retryCount++,t._intervalTimeAdjustment.bind(t)(),0==t._stoped&&(t._seedID=setTimeout(t._send.bind(t),t._intervalTime)),t._requestStatus=0,"function"==typeof t.options.fail&&void 0!==n.request)try{t.options.fail({pack:t.options.pack,error:n,data:0})}catch(c){as.warn("XHRRunLoop._send(), fail callback error:"),as.error(c)}i=Date.now(),t.status.setRequestTime(e,i),t.status.report()}))}}},{key:"stop",value:function(){this._clearAllTimeOut(),this._stoped=1}},{key:"_clearAllTimeOut",value:function(){clearTimeout(this._seedID),this._seedID=0}}]),t}(),ip=function(){function t(e){ci(this,t),this._initializeOptions(e),this._initializeMembers(),this.status=new Zh}return li(t,[{key:"destructor",value:function(){clearTimeout(this._seedID);var t=this._index();for(var e in this)Object.prototype.hasOwnProperty.call(this,e)&&(this[e]=null);return t}},{key:"setIndex",value:function(t){this._index=t}},{key:"isRunning",value:function(){return!this._stoped}},{key:"getIndex",value:function(){return this._index}},{key:"_initializeOptions",value:function(t){this.options=t}},{key:"_initializeMembers",value:function(){this._index=-1,this._seedID=0,this._requestStatus=0,this._stoped=0,this._intervalTime=0,this._intervalIncreaseStep=1e3,this._intervalDecreaseStep=1e3,this._intervalTimeMax=5e3,this._protectTimeout=3e3,this._getNoticeSeq=this.options.getNoticeSeq,this._retryCount=0,this._responseTime=Date.now(),this._responseTimeThreshold=2e3,this.requestor=new Qh,this.abort=null}},{key:"start",value:function(){0===this._seedID?(this._stoped=0,this._send()):as.log('WXRunLoop.start(): WXRunLoop is running now, if you want to restart runLoop , please run "stop()" first.')}},{key:"_reset",value:function(){as.log("WXRunLoop.reset(), long poll _intervalMaxRate",this._intervalMaxRate),this.stop(),this.start()}},{key:"_intervalTimeIncrease",value:function(){this._intervalTime!==this._responseTimeThreshold&&(this._intervalTime<this._responseTimeThreshold&&(this._intervalTime+=this._intervalIncreaseStep),this._intervalTime>this._responseTimeThreshold&&(this._intervalTime=this._responseTimeThreshold))}},{key:"_intervalTimeDecrease",value:function(){0!==this._intervalTime&&(this._intervalTime>0&&(this._intervalTime-=this._intervalDecreaseStep),this._intervalTime<0&&(this._intervalTime=0))}},{key:"_intervalTimeAdjustment",value:function(){var t=Date.now();100*Math.floor((t-this._responseTime)/100)<=this._responseTimeThreshold?this._intervalTimeIncrease():this._intervalTimeDecrease(),this._responseTime=t}},{key:"_intervalTimeAdjustmentBaseOnResponseData",value:function(t){t.ErrorCode===fl.REQUEST.SUCCESS?this._intervalTimeDecrease():this._intervalTimeIncrease()}},{key:"_send",value:function(){var t=this;if(1!=this._requestStatus){var e=this;this._requestStatus=1,this.status.request++,"function"==typeof this.options.before&&this.options.before(e.options.pack.requestData);var i=Date.now(),n=0;this.requestor.request({url:e.options.pack.getUrl(),data:e.options.pack.requestData,method:e.options.pack.method,updateAbort:function(e){t.abort=e}}).then((function(r){if(e._intervalTimeAdjustmentBaseOnResponseData.bind(t)(r.data),e._retryCount>0&&(e._retryCount=0),t.status.success++,"function"==typeof e.options.success)try{t.options.success({pack:t.options.pack,error:0,data:t.options.pack.callback(r.data)})}catch(u){as.warn("WXRunLoop._send(), error:",u)}e._requestStatus=0,0==e._stoped&&(e._seedID=setTimeout(e._send.bind(e),e._intervalTime)),n=Date.now(),t.status.setRequestTime(i,n),t.status.report()})).catch((function(r){if(t.status.fail++,e._retryCount++,e._intervalTimeAdjustment.bind(t)(),0==e._stoped&&(e._seedID=setTimeout(e._send.bind(e),e._intervalTime)),e._requestStatus=0,"function"==typeof e.options.fail)try{t.options.fail({pack:t.options.pack,error:r,data:0})}catch(u){as.warn("WXRunLoop._send(), fail callback error:"),as.error(u)}n=Date.now(),t.status.setRequestTime(i,n),t.status.report()}))}}},{key:"stop",value:function(){this._clearAllTimeOut(),this._stoped=1}},{key:"_clearAllTimeOut",value:function(){clearTimeout(this._seedID),this._seedID=0}}]),t}(),np=function(t){function e(t){var i;return ci(this,e),(i=Si(this,di(e).call(this,t))).context=t.context,i.httpConnection=i._getHttpconnection(),i.keepAliveConnections=[],i}return gi(e,cl),li(e,[{key:"initializeListener",value:function(){this.tim.innerEmitter.on(Ju.SIGN_LOGOUT_EXECUTING,this._stopAllRunLoop,this)}},{key:"request",value:function(t){var e={url:t.url,data:t.requestData,method:t.method,callback:t.callback};return this.httpConnection.request(e).then((function(e){return e.data=t.callback(e.data),e.data.errorCode!==fl.REQUEST.SUCCESS?kl(new qu({code:e.data.errorCode,message:e.data.errorInfo})):e}))}},{key:"createRunLoop",value:function(t){var e=this.createKeepAliveConnection(t);return e.setIndex(this.keepAliveConnections.push(e)-1),e}},{key:"stopRunLoop",value:function(t){t.stop()}},{key:"_stopAllRunLoop",value:function(){for(var t=this.keepAliveConnections.length,e=0;e<t;e++)this.keepAliveConnections[e].stop()}},{key:"destroyRunLoop",value:function(t){t.stop();var e=t.destructor();this.keepAliveConnections.slice(e,1)}},{key:"startRunLoopExclusive",value:function(t){for(var e=t.getIndex(),i=0;i<this.keepAliveConnections.length;i++)i!==e&&this.keepAliveConnections[i].stop();t.start()}},{key:"_getHttpconnection",value:function(){return Ma?new Qh:new th}},{key:"createKeepAliveConnection",value:function(t){return Ma?new ip(t):this.tim.options.runLoopNetType===Al?new ep(t):(this.tim.options.runLoopNetType,"function"==typeof window.WebSocket&&window.WebSocket.prototype.send,new ep(t))}},{key:"clearAll",value:function(){this.conn.cancelAll()}},{key:"reset",value:function(){this.keepAliveConnections=[]}}]),e}();void 0===console.table&&(console.table=console.log);var rp=function(t,e){t.code?as.warn("Oops! code: ".concat(t.code),"message: ".concat(t.message),"stack: ".concat(t.stack)):as.warn("Oops! message: ".concat(t.message),"stack: ".concat(t.stack))},op={f9999998:function(t){rp(t)},f9999999:function(t){rp(t)},f:function(t){rp(t),"未定义的错误:".concat(t.code," , ").concat(t.message)},f20000:function(t){rp(t)},f20001:function(t){rp(t)},f20002:function(t){rp(t)},f30000:function(t){rp(t)},f40004:function(t){rp(t)},f40005:function(t){rp(t)},f40006:function(t){rp(t)},f40007:function(t){rp(t)},f40008:function(t){rp(t)},f50070003:function(t){t.code.replace("500",""),rp(t)},f50030001:function(t){rp(t)},f50070221:function(t){rp(t)}};op.echo=rp;var ap=function(){function t(e){ci(this,t),this.methods=op,this.tim=e,this._initielizeListener()}return li(t,[{key:"_initielizeListener",value:function(){this.tim.innerEmitter.on(Ju.ERROR_DETECTED,this._onErrorDetected,this)}},{key:"ask",value:function(t){var e=["f",t.code].join(""),i=op.echo;this.methods.hasOwnProperty(e)?this.methods[e](t):i(t)}},{key:"_onErrorDetected",value:function(t){this.ask(t),this.tim.outerEmitter.emit(Qe.ERROR,t)}}]),t}(),sp=["jpg","jpeg","gif","png"],cp=function(){function t(e){ci(this,t),Ps(e)||(this.userID=e.userID||"",this.nick=e.nick||"",this.gender=e.gender||"",this.birthday=e.birthday||0,this.location=e.location||"",this.selfSignature=e.selfSignature||"",this.allowType=e.allowType||Ze.ALLOW_TYPE_ALLOW_ANY,this.language=e.language||0,this.avatar=e.avatar||"",this.messageSettings=e.messageSettings||0,this.adminForbidType=e.adminForbidType||Ze.FORBID_TYPE_NONE,this.level=e.level||0,this.role=e.role||0,this.lastUpdatedTime=0)}return li(t,[{key:"validate",value:function(t){var e=1,i="";for(var n in Ps(t)&&(e=0,i="empty options"),t)if(Object.prototype.hasOwnProperty.call(t,n)){if(Ps(t[n])&&!fs(t[n])&&!ls(t[n])){i="key:"+n+", invalid value:"+t[n],e=0;continue}switch(n){case"nick":fs(t[n])||(i="nick should be a string",e=0),bs(t[n])>500&&(i="nick name limited: must less than or equal to ".concat(500," bytes, current size: ").concat(bs(t[n])," bytes"),e=0);break;case"gender":xs(Dl,t.gender)||(i="key:gender, invalid value:"+t.gender,e=0);break;case"birthday":ls(t.birthday)||(i="birthday should be a number",e=0);break;case"location":fs(t.location)||(i="location should be a string",e=0);break;case"selfSignature":fs(t.selfSignature)||(i="selfSignature should be a string",e=0);break;case"allowType":xs(Ll,t.allowType)||(i="key:allowType, invalid value:"+t.allowType,e=0);break;case"language":ls(t.language)||(i="language should be a number",e=0);break;case"avatar":fs(t.avatar)||(i="avatar should be a string",e=0);break;case"messageSettings":0!==t.messageSettings&&1!==t.messageSettings&&(i="messageSettings should be 0 or 1",e=0);break;case"adminForbidType":xs(Ml,t.adminForbidType)||(i="key:adminForbidType, invalid value:"+t.adminForbidType,e=0);break;case"level":ls(t.level)||(i="level should be a number",e=0);break;case"role":ls(t.role)||(i="role should be a number",e=0);break;default:i="unknown key:"+n,e=0}}return{valid:e,tips:i}}}]),t}(),up=function(){function t(e){ci(this,t),this.uc=e,this.TAG="profile",this.Actions={Q:"query",U:"update"},this.accountProfileMap=new Map,this.expirationTime=864e5}return li(t,[{key:"setExpirationTime",value:function(t){this.expirationTime=t}},{key:"getUserProfile",value:function(t){var e=this,i=this.uc.tim,n=i.connectionController,r=i.outerEmitter,o=t.userIDList;if(!gs(o))return as.error("ProfileHandler.getUserProfile options.userIDList 必需是数组"),kl({code:$u.GET_PROFILE_INVALID_PARAM,message:ju.GET_PROFILE_INVALID_PARAM});t.fromAccount=this.uc.getMyAccount(),o.length>100&&(as.warn("ProfileHandler.getUserProfile 获取用户资料人数不能超过100人"),o.length=100);for(var a,s=[],c=[],u=0,l=o.length;u<l;u++)a=o[u],this.uc.isMyFriend(a)&&this._containsAccount(a)?c.push(this._getProfileFromMap(a)):s.push(a);if(0===s.length)return r.emit(Qe.PROFILE_GET_SUCCESS,c),Rl(c);t.toAccount=s;var f=t.bFromGetMyProfile||0,h=this.uc.makeCapsule(this.TAG,this.Actions.Q,t);return n.request(h).then((function(t){as.info("ProfileHandler.getUserProfile ok");var i=e._handleResponse(t).concat(c);return r.emit(Qe.PROFILE_GET_SUCCESS,i),f?(e.uc.onGotMyProfile(),new Ol(i[0])):new Ol(i)})).catch((function(t){return as.error("ProfileHandler.getUserProfile error:",t),kl(t)}))}},{key:"getMyProfile",value:function(){var t=this.uc.getMyAccount();if(as.log("ProfileHandler.getMyProfile myAccount="+t),this._fillMap(),this._containsAccount(t)){var e=this._getProfileFromMap(t);return as.debug("ProfileHandler.getMyProfile from cache, myProfile:"+JSON.stringify(e)),this.uc.tim.outerEmitter.emit(Qe.PROFILE_GET_SUCCESS,[e]),this.uc.onGotMyProfile(),Rl(e)}return this.getUserProfile({fromAccount:t,userIDList:[t],bFromGetMyProfile:1})}},{key:"_handleResponse",value:function(t){for(var e,i,n=Es.now(),r=t.data.userProfileItem,o=[],a=0,s=r.length;a<s;a++)"@TLS#NOT_FOUND"!==r[a].to&&""!==r[a].to&&(e=r[a].to,i=this._updateMap(e,this._getLatestProfileFromResponse(e,r[a].profileItem)),o.push(i));return as.log("ProfileHandler._handleResponse cost "+(Es.now()-n)+" ms"),o}},{key:"_getLatestProfileFromResponse",value:function(t,e){var i={};if(i.userID=t,!Ps(e))for(var n=0,r=e.length;n<r;n++)switch(e[n].tag){case xl.NICK:i.nick=e[n].value;break;case xl.GENDER:i.gender=e[n].value;break;case xl.BIRTHDAY:i.birthday=e[n].value;break;case xl.LOCATION:i.location=e[n].value;break;case xl.SELFSIGNATURE:i.selfSignature=e[n].value;break;case xl.ALLOWTYPE:i.allowType=e[n].value;break;case xl.LANGUAGE:i.language=e[n].value;break;case xl.AVATAR:i.avatar=e[n].value;break;case xl.MESSAGESETTINGS:i.messageSettings=e[n].value;break;case xl.ADMINFORBIDTYPE:i.adminForbidType=e[n].value;break;case xl.LEVEL:i.level=e[n].value;break;case xl.ROLE:i.role=e[n].value;break;default:as.warn("ProfileHandler._handleResponse unkown tag->",e[n].tag)}return i}},{key:"updateMyProfile",value:function(t){var e=this,i=this.uc.tim,n=i.connectionController,r=i.outerEmitter,o=(new cp).validate(t);if(!o.valid)return as.error("ProfileHandler.updateMyProfile info:"+o.tips),kl({code:$u.UPDATE_PROFILE_INVALID_PARAM,message:ju.UPDATE_PROFILE_INVALID_PARAM});var a=[];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&a.push({tag:xl[s.toUpperCase()],value:t[s]});var c=this.uc.makeCapsule(this.TAG,this.Actions.U,{fromAccount:this.uc.getMyAccount(),profileItem:a});return n.request(c).then((function(i){as.info("ProfileHandler.updateMyProfile ok");var n=e._updateMap(e.uc.getMyAccount(),t);return r.emit(Qe.PROFILE_UPDATED,[n]),Rl(n)})).catch((function(t){return as.error("ProfileHandler.updateMyProfile error:",t),kl(t)}))}},{key:"onProfileModified",value:function(t){var e=t.data;if(!Ps(e)){var i,n,r=e.length;as.info("ProfileHandler.onProfileModified length="+r);for(var o=[],a=0;a<r;a++)i=e[a].userID,n=this._updateMap(i,this._getLatestProfileFromResponse(i,e[a].profileList)),o.push(n);var s=this.uc.tim,c=s.innerEmitter,u=s.outerEmitter;c.emit(Ju.PROFILE_UPDATED,{data:o}),u.emit(Qe.PROFILE_UPDATED,o)}}},{key:"_fillMap",value:function(){if(0===this.accountProfileMap.size){for(var t=this._getCachedProfiles(),e=Date.now(),i=0,n=t.length;i<n;i++)e-t[i].lastUpdatedTime<this.expirationTime&&this.accountProfileMap.set(t[i].userID,t[i]);as.log("ProfileHandler._fillMap from chache, map.size="+this.accountProfileMap.size)}}},{key:"_updateMap",value:function(t,e){var i,n=Date.now();return this._containsAccount(t)?(i=this._getProfileFromMap(t),Cs(i,e),i.lastUpdatedTime=n):(i=new cp(e),(this.uc.isMyFriend(t)||t===this.uc.getMyAccount())&&(i.lastUpdatedTime=n,this.accountProfileMap.set(t,i))),this._flushMap(t===this.uc.getMyAccount()),i}},{key:"_flushMap",value:function(t){var e=Ci(this.accountProfileMap.values()),i=this.uc.tim.storage;as.debug("ProfileHandler._flushMap length=".concat(e.length," flushAtOnce=").concat(t)),i.setItem(this.TAG,e,t)}},{key:"_containsAccount",value:function(t){return this.accountProfileMap.has(t)}},{key:"_getProfileFromMap",value:function(t){return this.accountProfileMap.get(t)}},{key:"_getCachedProfiles",value:function(){var t=this.uc.tim.storage.getItem(this.TAG);return Ps(t)?[]:t}},{key:"onConversationsProfileUpdated",value:function(t){for(var e,i,n,r=[],o=0,a=t.length;o<a;o++)i=(e=t[o]).userID,this._containsAccount(i)?(n=this._getProfileFromMap(i),Cs(n,e)>0&&r.push(i)):r.push(e.userID);0!==r.length&&(as.info("ProfileHandler.onConversationsProfileUpdated toAccount:",r),this.getUserProfile({userIDList:r}))}},{key:"reset",value:function(){this._flushMap(1),this.accountProfileMap.clear()}}]),t}(),lp="".repeat||function(t){var e=String(C(this)),i="",n=ct(t);if(n<0||1/0==n)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(i+=e);return i};Ot({target:"String",proto:1},{repeat:lp});var fp=function(){function t(e){ci(this,t),this.options=e?e.options:{enablePointer:1},this.pointsList={},this.reportText={},this.maxNameLen=0,this.gapChar="-",this.log=console.log,this.currentTask=""}return li(t,[{key:"newTask",value:function(t){0!=this.options.enablePointer&&(t||(t=["task",this._timeFormat()].join("-")),this.pointsList[t]=[],this.currentTask=t,n("log","Pointer new Task : ".concat(this.currentTask)," at node_modules\\tim-js-sdk\\tim-js.js:1"))}},{key:"deleteTask",value:function(t){0!=this.options.enablePointer&&(t||(t=this.currentTask),this.pointsList[t].length=0,delete this.pointsList[t])}},{key:"dot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;if(0!=this.options.enablePointer){e=e||this.currentTask;var i=+new Date;this.maxNameLen=this.maxNameLen<t.length?t.length:this.maxNameLen,this.flen=this.maxNameLen+10,this.pointsList[e].push({pointerName:t,time:i})}}},{key:"_analisys",value:function(t){if(0!=this.options.enablePointer){t=t||this.currentTask;for(var e=this.pointsList[t],i=e.length,n=[],r=[],o=0;o<i;o++)0!==o&&(r=this._analisysTowPoints(e[o-1],e[o]),n.push(r.join("")));return r=this._analisysTowPoints(e[0],e[i-1],1),n.push(r.join("")),n.join("")}}},{key:"_analisysTowPoints",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0!=this.options.enablePointer){var n=this.flen,r=e.time-t.time,o=r.toString(),a=t.pointerName+this.gapChar.repeat(n-t.pointerName.length),s=e.pointerName+this.gapChar.repeat(n-e.pointerName.length),c=this.gapChar.repeat(4-o.length)+o,u=i?["%c",a,s,c,"ms\n%c"]:[a,s,c,"ms\n"];return u}}},{key:"report",value:function(t){if(0!=this.options.enablePointer){t=t||this.currentTask;var e=this._analisys(t);this.pointsList=[];var i=this._timeFormat(),r="Pointer[".concat(t,"(").concat(i,")]"),o=4*this.maxNameLen,a=(o-r.length)/2;n("log",["-".repeat(a),r,"-".repeat(a)].join("")," at node_modules\\tim-js-sdk\\tim-js.js:1"),n("log","%c"+e,"color:#66a","color:red","color:#66a"," at node_modules\\tim-js-sdk\\tim-js.js:1"),n("log","-".repeat(o)," at node_modules\\tim-js-sdk\\tim-js.js:1")}}},{key:"_timeFormat",value:function(){var t=new Date,e=this.zeroFix(t.getMonth()+1,2),i=this.zeroFix(t.getDate(),2);return"".concat(e,"-").concat(i," ").concat(t.getHours(),":").concat(t.getSeconds(),":").concat(t.getMinutes(),"~").concat(t.getMilliseconds())}},{key:"zeroFix",value:function(t,e){return("000000000"+t).slice(-e)}},{key:"reportAll",value:function(){if(0!=this.options.enablePointer)for(var t in this.pointsList)Object.prototype.hasOwnProperty.call(this.pointsList,t)&&this.eport(t)}}]),t}(),hp=function t(e,i){ci(this,t),this.userID=e;var n={};if(n.userID=e,!Ps(i))for(var r=0,o=i.length;r<o;r++)switch(i[r].tag){case xl.NICK:n.nick=i[r].value;break;case xl.GENDER:n.gender=i[r].value;break;case xl.BIRTHDAY:n.birthday=i[r].value;break;case xl.LOCATION:n.location=i[r].value;break;case xl.SELFSIGNATURE:n.selfSignature=i[r].value;break;case xl.ALLOWTYPE:n.allowType=i[r].value;break;case xl.LANGUAGE:n.language=i[r].value;break;case xl.AVATAR:n.avatar=i[r].value;break;case xl.MESSAGESETTINGS:n.messageSettings=i[r].value;break;case xl.ADMINFORBIDTYPE:n.adminForbidType=i[r].value;break;case xl.LEVEL:n.level=i[r].value;break;case xl.ROLE:n.role=i[r].value;break;default:as.warn("snsProfileItem unkown tag->",i[r].tag)}this.profile=new cp(n)},pp=function(){function t(e){ci(this,t),this.uc=e,this.TAG="friend",this.Actions={G:"get",D:"delete"},this.friends=new Map,this.pointer=new fp}return li(t,[{key:"isMyFriend",value:function(t){var e=this.friends.has(t);return e||as.debug("FriendHandler.isMyFriend "+t+" is not my friend"),e}},{key:"_transformFriendList",value:function(t){if(!Ps(t)&&!Ps(t.infoItem)){as.info("FriendHandler._transformFriendList friendNum="+t.friendNum);for(var e,i,n=t.infoItem,r=0,o=n.length;r<o;r++)i=n[r].infoAccount,e=new hp(i,n[r].snsProfileItem),this.friends.set(i,e)}}},{key:"_friends2map",value:function(t){var e=new Map;for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.set(i,t[i]);return e}},{key:"getFriendList",value:function(){var t=this,e=this.uc.tim,i=e.connectionController,n=e.outerEmitter,r={};r.fromAccount=this.uc.getMyAccount(),as.info("FriendHandler.getFriendList myAccount="+r.fromAccount);var o=this.uc.makeCapsule(this.TAG,this.Actions.G,r);return i.request(o).then((function(e){as.info("FriendHandler.getFriendList ok"),t._transformFriendList(e.data);var i=Ci(t.friends.values());return n.emit(Qe.FRIENDLIST_GET_SUCCESS,i),Rl(i)})).catch((function(t){return as.error("FriendHandler.getFriendList error:",JSON.stringify(t)),kl(t)}))}},{key:"deleteFriend",value:function(t){if(!Array.isArray(t.toAccount))return as.error("FriendHandler.deleteFriend options.toAccount 必需是数组"),kl({code:$u.DEL_FRIEND_INVALID_PARAM,message:ju.DEL_FRIEND_INVALID_PARAM});t.toAccount.length>1e3&&(as.warn("FriendHandler.deleteFriend 删除好友人数不能超过1000人"),t.toAccount.length=1e3);var e=this.uc.tim,i=e.connectionController,n=e.outerEmitter,r=this.uc.makeCapsule(this.TAG,this.Actions.D,t);return i.request(r).then((function(t){return as.info("FriendHandler.deleteFriend ok"),n.emit(Qe.FRIEND_DELETE_SUCCESS),Rl()})).catch((function(t){return as.error("FriendHandler.deleteFriend error:",t),kl(t)}))}}]),t}(),gp=function t(e){ci(this,t),Ps||(this.userID=e.userID||"",this.timeStamp=e.timeStamp||0)},dp=function(){function t(e){ci(this,t),this.uc=e,this.TAG="blacklist",this.Actions={G:"get",C:"create",D:"delete"},this.blacklistMap=new Map,this.startIndex=0,this.maxLimited=100,this.curruentSequence=0}return li(t,[{key:"getBlacklist",value:function(){var t=this,e=this.uc.tim.connectionController,i={};i.fromAccount=this.uc.getMyAccount(),i.maxLimited=this.maxLimited,i.startIndex=0,i.lastSequence=this.curruentSequence;var n=this.uc.makeCapsule(this.TAG,this.Actions.G,i);return e.request(n).then((function(e){return as.info("BlacklistHandler.getBlacklist ok"),t.curruentSequence=e.data.curruentSequence,t._handleResponse(e.data.blackListItem,1),t._onBlacklistUpdated()})).catch((function(t){return as.error("BlacklistHandler.getBlacklist error:",t),kl(t)}))}},{key:"addBlacklist",value:function(t){var e=this;if(!gs(t.userIDList))return as.error("BlacklistHandler.addBlacklist options.userIDList 必需是数组"),kl({code:$u.ADD_BLACKLIST_INVALID_PARAM,message:ju.ADD_BLACKLIST_INVALID_PARAM});var i=this.uc.tim.loginInfo.identifier;if(1===t.userIDList.length&&t.userIDList[0]===i)return as.error("BlacklistHandler.addBlacklist 不能把自己拉黑"),kl({code:$u.CANNOT_ADD_SELF_TO_BLACKLIST,message:ju.CANNOT_ADD_SELF_TO_BLACKLIST});t.userIDList.includes(i)&&(t.userIDList=t.userIDList.filter((function(t){return t!==i})),as.warn("BlacklistHandler.addBlacklist 不能把自己拉黑，已过滤"));var n=this.uc.tim.connectionController;t.fromAccount=this.uc.getMyAccount(),t.toAccount=t.userIDList;var r=this.uc.makeCapsule(this.TAG,this.Actions.C,t);return n.request(r).then((function(t){return as.info("BlacklistHandler.addBlacklist ok"),e._handleResponse(t.data.resultItem,1),e._onBlacklistUpdated()})).catch((function(t){return as.error("BlacklistHandler.addBlacklist error:",t),kl(t)}))}},{key:"_handleResponse",value:function(t,e){if(!Ps(t))for(var i,n,r,o=0,a=t.length;o<a;o++)n=t[o].to,r=t[o].resultCode,(ds(r)||0===r)&&(e?((i=this.blacklistMap.has(n)?this.blacklistMap.get(n):new gp).userID=n,!Ps(t[o].addBlackTimeStamp)&&(i.timeStamp=t[o].addBlackTimeStamp),this.blacklistMap.set(n,i)):this.blacklistMap.has(n)&&(i=this.blacklistMap.get(n),this.blacklistMap.delete(n)));as.log("BlacklistHandler._handleResponse total="+this.blacklistMap.size+" bAdd="+e)}},{key:"deleteBlacklist",value:function(t){var e=this;if(!gs(t.userIDList))return as.error("BlacklistHandler.deleteBlacklist options.userIDList 必需是数组"),kl({code:$u.DEL_BLACKLIST_INVALID_PARAM,message:ju.DEL_BLACKLIST_INVALID_PARAM});var i=this.uc.tim.connectionController;t.fromAccount=this.uc.getMyAccount(),t.toAccount=t.userIDList;var n=this.uc.makeCapsule(this.TAG,this.Actions.D,t);return i.request(n).then((function(t){return as.info("BlacklistHandler.deleteBlacklist ok"),e._handleResponse(t.data.resultItem,0),e._onBlacklistUpdated()})).catch((function(t){return as.error("BlacklistHandler.deleteBlacklist error:",t),kl(t)}))}},{key:"_onBlacklistUpdated",value:function(){var t=this.uc.tim.outerEmitter,e=Ci(this.blacklistMap.keys());return t.emit(Qe.BLACKLIST_UPDATED,e),Rl(e)}},{key:"handleBlackListDelAccount",value:function(t){for(var e,i=[],n=0,r=t.length;n<r;n++)e=t[n],this.blacklistMap.has(e)&&(this.blacklistMap.delete(e),i.push(e));i.length>0&&(as.log("BlacklistHandler.handleBlackListDelAccount delCount="+i.length+" : "+i.join(",")),this.tim.outerEmitter.emit(Qe.BLACKLIST_UPDATED,Ci(this.blacklistMap.keys())))}},{key:"handleBlackListAddAccount",value:function(t){for(var e,i=[],n=0,r=t.length;n<r;n++)e=t[n],this.blacklistMap.has(e)||(this.blacklistMap.set(e,new gp({userID:e})),i.push(e));i.length>0&&(as.log("BlacklistHandler.handleBlackListAddAccount addCount="+i.length+" : "+i.join(",")),this.tim.outerEmitter.emit(Qe.BLACKLIST_UPDATED,Ci(this.blacklistMap.keys())))}},{key:"reset",value:function(){this.blacklistMap.clear(),this.startIndex=0,this.maxLimited=100,this.curruentSequence=0}}]),t}(),mp=function(){function t(e){ci(this,t),this.uc=e,this.TAG="applyC2C",this.Actions={C:"create",G:"get",D:"delete",U:"update"}}return li(t,[{key:"applyAddFriend",value:function(t){var e=this,i=this.uc.tim,n=i.outerEmitter,r=i.connectionController,o=this.uc.makeCapsule(this.TAG,this.Actions.C,t),a=r.request(o);return a.then((function(t){e.uc.isActionSuccessful("applyAddFriend",e.Actions.C,t)?n.emit(Qe.APPLY_ADD_FRIEND_SUCCESS,{data:t.data}):n.emit(Qe.APPLY_ADD_FRIEND_FAIL,{data:t.data})})).catch((function(t){n.emit(Qe.APPLY_ADD_FRIEND_FAIL,{data:t})})),a}},{key:"getPendency",value:function(t){var e=this,i=this.tim,n=i.connectionController,r=i.outerEmitter,o=this.uc.makeCapsule(this.TAG,this.Actions.G,t),a=n.request(o);return a.then((function(t){e.uc.isActionSuccessful("getPendency",e.Actions.G,t)?r.emit(Qe.GET_PENDENCY_SUCCESS,{data:t.data}):r.emit(Qe.GET_PENDENCY_FAIL,{data:t.data})})).catch((function(t){r.emit(Qe.GET_PENDENCY_FAIL,{data:t})})),a}},{key:"deletePendency",value:function(t){var e=this,i=this.tim,n=i.connectionController,r=i.outerEmitter,o=this.uc.makeCapsule(this.TAG,this.Actions.D,t),a=n.request(o);return a.then((function(t){e.uc.isActionSuccessful("deletePendency",e.Actions.D,t)?r.emit(Qe.DELETE_PENDENCY_SUCCESS,{data:t.data}):r.emit(Qe.DELETE_PENDENCY_FAIL,{data:t.data})})).catch((function(t){r.emit(Qe.DELETE_PENDENCY_FAIL,{data:t})})),a}},{key:"replyPendency",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=this.tim,n=i.connectionController,r=i.outerEmitter,o=this.uc.makeCapsule(this.TAG,this.Actions.U,e),a=n.request(o);return a.then((function(e){t.uc.isActionSuccessful("replyPendency",t.Actions.U,e)?r.emit(Qe.REPLY_PENDENCY_SUCCESS,{data:e.data}):r.emit(Qe.REPLY_PENDENCY_FAIL,{data:e.data})})).catch((function(t){r.emit(Qe.REPLY_PENDENCY_FAIL,{data:t})})),a}}]),t}(),vp=function(t){function e(t){var i;return ci(this,e),(i=Si(this,di(e).call(this,t))).profileHandler=new up(yi(i)),i.friendHandler=new pp(yi(i)),i.blacklistHandler=new dp(yi(i)),i.applyC2CHandler=new mp(yi(i)),i._initializeListener(),i}return gi(e,cl),li(e,[{key:"_initializeListener",value:function(t){var e=this.tim.innerEmitter;e.on(Ju.CONTEXT_A2KEY_AND_TINYID_UPDATED,this.onContextUpdated,this),e.on(Ju.NOTICE_LONGPOLL_PROFILE_MODIFIED,this.onProfileModified,this),e.on(Ju.NOTICE_LONGPOLL_NEW_FRIEND_MESSAGES,this.onNewFriendMessages,this),e.on(Ju.CONVERSATION_LIST_PROFILE_UPDATED,this.onConversationsProfileUpdated,this)}},{key:"onContextUpdated",value:function(t){var e=t.data.context;0!=!!e.a2Key&&0!=!!e.tinyID&&(this.profileHandler.getMyProfile(),this.friendHandler.getFriendList(),this.blacklistHandler.getBlacklist())}},{key:"onGotMyProfile",value:function(){this.triggerReady()}},{key:"onProfileModified",value:function(t){this.profileHandler.onProfileModified(t)}},{key:"onNewFriendMessages",value:function(t){as.debug("onNewFriendMessages",JSON.stringify(t.data)),Ps(t.data.blackListDelAccount)||this.blacklistHandler.handleBlackListDelAccount(t.data.blackListDelAccount),Ps(t.data.blackListAddAccount)||this.blacklistHandler.handleBlackListAddAccount(t.data.blackListAddAccount)}},{key:"onConversationsProfileUpdated",value:function(t){this.profileHandler.onConversationsProfileUpdated(t.data)}},{key:"getMyAccount",value:function(){return this.tim.context.identifier}},{key:"isMyFriend",value:function(t){return this.friendHandler.isMyFriend(t)}},{key:"makeCapsule",value:function(t,e,i){return this.createPackage({name:t,action:e,param:i})}},{key:"getMyProfile",value:function(){return this.profileHandler.getMyProfile()}},{key:"getUserProfile",value:function(t){return this.profileHandler.getUserProfile(t)}},{key:"updateMyProfile",value:function(t){return this.profileHandler.updateMyProfile(t)}},{key:"getFriendList",value:function(){return this.friendHandler.getFriendList()}},{key:"deleteFriend",value:function(t){return this.friendHandler.deleteFriend(t)}},{key:"getBlacklist",value:function(){return this.blacklistHandler.getBlacklist()}},{key:"addBlacklist",value:function(t){return this.blacklistHandler.addBlacklist(t)}},{key:"deleteBlacklist",value:function(t){return this.blacklistHandler.deleteBlacklist(t)}},{key:"applyAddFriend",value:function(t){return this.applyC2CHandler.applyAddFriend(t)}},{key:"getPendency",value:function(t){return this.applyC2CHandler.getPendency(t)}},{key:"deletePendency",value:function(t){return this.applyC2CHandler.deletePendency(t)}},{key:"replyPendency",value:function(t){return this.applyC2CHandler.replyPendency(t)}},{key:"reset",value:function(){as.warn("UserController.reset"),this.resetReady(),this.profileHandler.reset(),this.blacklistHandler.reset(),this.checkTimes=0}}]),e}(),_p=[].sort,yp=[1,2,3],Sp=h((function(){yp.sort(void 0)})),Ep=h((function(){yp.sort(null)})),Cp=Kt("sort");Ot({target:"Array",proto:1,forced:Sp||!Ep||Cp},{sort:function(t){return void 0===t?_p.call(Rt(this)):_p.call(Rt(this),Nt(t))}});var Ip=function(){function t(e){ci(this,t),this.type=Ze.MSG_TEXT,this.content={text:e.text||""}}return li(t,[{key:"setText",value:function(t){this.content.text=t}},{key:"isEmpty",value:function(){return 0===this.content.text.length?1:0}}]),t}(),bp=function(){function t(e){ci(this,t),this._imageMemoryURL="",this._file=e.file,Ma?this.createImageDataASURLInWXMiniApp(e.file):this.createImageDataASURLInWeb(e.file),this._initImageInfoModel(),this.type=Ze.MSG_IMAGE,this._percent=0,this.content={imageFormat:pl.IMAGE_FORMAT[e.imageFormat]||pl.IMAGE_FORMAT.UNKNOWN,uuid:e.uuid,imageInfoArray:[]},this.initImageInfoArray(e.imageInfoArray),this._defaultImage="http://imgcache.qq.com/open/qcloud/video/act/webim-images/default.jpg",this._autoFixUrl()}return li(t,[{key:"_initImageInfoModel",value:function(){var t=this;this._ImageInfoModel=function(e){this.instanceID=As(9999999),this.sizeType=e.type||0,this.size=e.size||0,this.width=e.width||0,this.height=e.height||0,this.imageUrl=e.url||"",this.url=e.url||t._imageMemoryURL||t._defaultImage},this._ImageInfoModel.prototype={setSizeType:function(t){this.sizeType=t},setImageUrl:function(t){t&&(this.imageUrl=t)},getImageUrl:function(){return this.imageUrl}}}},{key:"initImageInfoArray",value:function(t){for(var e=2,i=null,n=null;e>=0;)n=void 0===t||void 0===t[e]?{type:0,size:0,width:0,height:0,url:""}:t[e],(i=new this._ImageInfoModel(n)).setSizeType(e+1),this.addImageInfo(i),e--}},{key:"updateImageInfoArray",value:function(t){for(var e,i=this.content.imageInfoArray.length,n=0;n<i;n++)e=this.content.imageInfoArray[n],t.size&&(e.size=t.size),t.url&&e.setImageUrl(t.url),t.width&&(e.width=t.width),t.height&&(e.height=t.height)}},{key:"_autoFixUrl",value:function(){for(var t=this.content.imageInfoArray.length,e="",i="",n=["http","https"],r=null,o=0;o<t;o++)this.content.imageInfoArray[o].url&&""!==(r=this.content.imageInfoArray[o]).imageUrl&&(i=r.imageUrl.slice(0,r.imageUrl.indexOf("://")+1),e=r.imageUrl.slice(r.imageUrl.indexOf("://")+1),n.indexOf(i)<0&&(i="https:"),this.content.imageInfoArray[o].setImageUrl([i,e].join("")))}},{key:"updatePercent",value:function(t){this._percent=t,this._percent>1&&(this._percent=1)}},{key:"updateImageFormat",value:function(t){this.content.imageFormat=t}},{key:"createImageDataASURLInWeb",value:function(t){void 0!==t&&t.files.length>0&&(this._imageMemoryURL=window.URL.createObjectURL(t.files[0]))}},{key:"createImageDataASURLInWXMiniApp",value:function(t){t&&t.url&&(this._imageMemoryURL=t.url)}},{key:"replaceImageInfo",value:function(t,e){this.content.imageInfoArray[e]instanceof this._ImageInfoModel||(this.content.imageInfoArray[e]=t)}},{key:"addImageInfo",value:function(t){this.content.imageInfoArray.length>=3||this.content.imageInfoArray.push(t)}},{key:"isEmpty",value:function(){return 0===this.content.imageInfoArray.length?1:""===this.content.imageInfoArray[0].imageUrl?1:0===this.content.imageInfoArray[0].size?1:0}}]),t}(),Ap=function(){function t(e){ci(this,t),this.type=Ze.MSG_FACE,this.content=e||null}return li(t,[{key:"isEmpty",value:function(){return null===this.content?1:0}}]),t}(),wp=function(){function t(e){ci(this,t),this.type=Ze.MSG_AUDIO,this.content={downloadFlag:2,second:e.second,size:e.size,url:e.url,remoteAudioUrl:"",uuid:e.uuid}}return li(t,[{key:"updateAudioUrl",value:function(t){this.content.remoteAudioUrl=t}},{key:"isEmpty",value:function(){return""===this.content.remoteAudioUrl?1:0}}]),t}(),Tp={from:1,groupID:1,groupName:1,to:1},xp=function(){function t(e){ci(this,t),this.type=Ze.MSG_GRP_TIP,this.content={},this._initContent(e)}return li(t,[{key:"_initContent",value:function(t){var e=this;Object.keys(t).forEach((function(i){switch(i){case"remarkInfo":break;case"groupProfile":e.content.groupProfile={},e._initGroupProfile(t[i]);break;case"operatorInfo":case"memberInfoList":break;default:e.content[i]=t[i]}})),this.content.userIDList||(this.content.userIDList=[this.content.operatorID])}},{key:"_initGroupProfile",value:function(t){for(var e=Object.keys(t),i=0;i<e.length;i++){var n=e[i];Tp[n]&&(this.content.groupProfile[n]=t[n])}}}]),t}(),Dp={from:1,groupID:1,name:1,to:1},Mp=function(){function t(e){ci(this,t),this.type=Ze.MSG_GRP_SYS_NOTICE,this.content={},this._initContent(e)}return li(t,[{key:"_initContent",value:function(t){var e=this;Object.keys(t).forEach((function(i){switch(i){case"memberInfoList":break;case"remarkInfo":e.content.handleMessage=t[i];break;case"groupProfile":e.content.groupProfile={},e._initGroupProfile(t[i]);break;default:e.content[i]=t[i]}}))}},{key:"_initGroupProfile",value:function(t){for(var e=Object.keys(t),i=0;i<e.length;i++){var n=e[i];Dp[n]&&(this.content.groupProfile[n]=t[n])}}}]),t}(),Lp=Math.min,Op=[].lastIndexOf,Np=!!Op&&1/[1].lastIndexOf(1,-0)<0,Pp=Kt("lastIndexOf"),Rp=Np||Pp?function(t){if(Np)return Op.apply(this,arguments)||0;var e=I(this),i=lt(e.length),n=i-1;for(arguments.length>1&&(n=Lp(n,ct(arguments[1]))),n<0&&(n=i+n);n>=0;n--)if(n in e&&e[n]===t)return n||0;return-1}:Op;Ot({target:"Array",proto:1,forced:Rp!==[].lastIndexOf},{lastIndexOf:Rp});var kp=function(){function t(e){ci(this,t);var i=this._check(e);if(i instanceof qu)throw i;this.type=Ze.MSG_FILE,this._percent=0;var n=this._getFileInfo(e);this.content={downloadFlag:2,fileUrl:e.url||"",uuid:e.uuid,fileName:n.name||"",fileSize:n.size||0}}return li(t,[{key:"_getFileInfo",value:function(t){if(t.fileName&&t.fileSize)return{size:t.fileSize,name:t.fileName};if(Ma)return{};var e=t.file.files[0];return{size:e.size,name:e.name,type:e.type.slice(e.type.lastIndexOf("/")+1).toUpperCase()}}},{key:"updatePercent",value:function(t){this._percent=t,this._percent>1&&(this._percent=1)}},{key:"updateFileUrl",value:function(t){this.content.fileUrl=t}},{key:"_check",value:function(t){if(t.size>20971520)return new qu({code:$u.MESSAGE_FILE_SIZE_LIMIT,message:"".concat(ju.MESSAGE_FILE_SIZE_LIMIT,": ").concat(20971520," bytes")})}},{key:"isEmpty",value:function(){return""===this.content.fileUrl?1:""===this.content.fileName?1:0===this.content.fileSize?1:0}}]),t}(),Gp=function(){function t(e){ci(this,t),this.type=Ze.MSG_CUSTOM,this.content={data:e.data||"",description:e.description||"",extension:e.extension||""}}return li(t,[{key:"setData",value:function(t){return this.content.data=t,this}},{key:"setDescription",value:function(t){return this.content.description=t,this}},{key:"setExtension",value:function(t){return this.content.extension=t,this}},{key:"isEmpty",value:function(){return 0===this.content.data.length&&0===this.content.description.length&&0===this.content.extension.length?1:0}}]),t}(),Up=function t(e){ci(this,t),this.type=Ze.MSG_VIDEO,this.content={videoFormat:e.videoFormat,videoSecond:e.videoSecond,videoSize:e.videoSize,videoUrl:e.videoUrl,videoDownloadFlag:e.videoDownloadFlag,uuid:e.uuid,thumbSize:e.thumbSize,thumbWidth:e.thumbWidth,thumbHeight:e.thumbHeight,thumbDownloadFlag:e.thumbDownloadFlag,thumbUrl:e.thumbUrl}},Fp=function(){function t(e){ci(this,t),this.ID="",this.conversationID=e.conversationID||null,this.conversationType=e.conversationType||Ze.CONV_C2C,this.conversationSubType=e.conversationSubType,this.time=e.time||Math.ceil(Date.now()/1e3),this.sequence=e.sequence||0,this.clientSequence=e.clientSequence||e.sequence||0,this.random=e.random||As(),this.messagePriority=e.messagePriority||0,this._elements=[],this.isPlaceMessage=0,this.geo={},this.from=e.from||null,this.to=e.to||null,this.flow="",this.isSystemMessage=e.isSystemMessage||0,this.protocol=e.protocol||"JSON",this.isResend=0,this.isRead=0,this.status=e.status||fl.MESSAGE_STATUS.SUCCESS,this._error=0,this._errorInfo="",this.reInitialize(e.currentUser),this.extractGroupInfo(e.groupProfile||null)}return li(t,[{key:"getElements",value:function(){return this._elements}},{key:"setError",value:function(t,e){"number"==typeof t&&(this._error=t),this._errorInfo=e||"message elements error!"}},{key:"extractGroupInfo",value:function(t){if(null!==t){var e=t.messageFromAccountExtraInformation;this.nick="","string"==typeof t.fromAccountNick&&(this.nick=t.fromAccountNick),this.avatar="","string"==typeof t.fromAccountHeadurl&&(this.avatar=t.fromAccountHeadurl),this.nameCard="","object"===si(e)&&e.hasOwnProperty("nameCard")&&(this.nameCard=e.nameCard)}}},{key:"isError",value:function(){return 0===this._error?0:1}},{key:"getIMError",value:function(){return new qu({code:this._error,message:this._errorInfo})}},{key:"_initProxy",value:function(){this.payload=this._elements[0].content,this.type=this._elements[0].type}},{key:"afterOperated",value:function(t){this._onOperatedHandle=null,"function"==typeof t&&(this._onOperatedHandle=t),1==this.isSendable()&&this.triggerOperated()}},{key:"triggerOperated",value:function(){null!==this._onOperatedHandle&&"function"==typeof this._onOperatedHandle&&this._onOperatedHandle(this)}},{key:"reInitialize",value:function(t){t&&(this.status=this.from?fl.MESSAGE_STATUS.SUCCESS:fl.MESSAGE_STATUS.UNSEND,!this.from&&(this.from=t),this.isRead=1),this._initFlow(t),this._initielizeSequence(t),this._concactConversationID(t),this.generateMessageID(t)}},{key:"isSendable",value:function(){return 0===this._elements.length?0:"function"!=typeof this._elements[0].isEmpty?(as.warn("".concat(this._elements[0].type,' need "boolean : isEmpty()" method')),0):1==this._elements[0].isEmpty()?0:1}},{key:"_initTo",value:function(t){this.conversationType===Ze.CONV_GROUP&&(this.to=t.groupID)}},{key:"_initielizeSequence",value:function(t){0===this.clientSequence&&t&&(this.clientSequence=function(t){if(!t)return as.error("autoincrementIndex(string: key) need key parameter"),0;if(void 0===Ds[t]){var e=new Date,i="3".concat(e.getHours()).slice(-2),n="0".concat(e.getMinutes()).slice(-2),r="0".concat(e.getSeconds()).slice(-2);Ds[t]=parseInt([i,n,r,"0001"].join("")),i=null,n=null,r=null,as.warn("utils.autoincrementIndex() create new sequence : ".concat(t," = ").concat(Ds[t]))}return Ds[t]++}(t)),0===this.sequence&&this.conversationType===Ze.CONV_C2C&&(this.sequence=this.clientSequence)}},{key:"generateMessageID",value:function(t){var e=t===this.from?1:0,i=this.sequence>0?this.sequence:this.clientSequence;this.ID="".concat(this.conversationID,"-").concat(i,"-").concat(this.random,"-").concat(e)}},{key:"_initFlow",value:function(t){""!==t&&(this.flow=t===this.from?"out":"in")}},{key:"_concactConversationID",value:function(t){var e=this.to,i="",n=this.conversationType;n!==Ze.CONV_SYSTEM?(i=n===Ze.CONV_C2C?t===this.from?e:this.from:this.to,this.conversationID="".concat(n).concat(i)):this.conversationID=Ze.CONV_SYSTEM}},{key:"isElement",value:function(t){return t instanceof Ip||t instanceof bp||t instanceof Ap||t instanceof wp||t instanceof kp||t instanceof xp||t instanceof Mp||t instanceof Gp}},{key:"setElement",value:function(t){var e=this;if(this.isElement(t))return this._elements=[t],void this._initProxy();var i=function(t){switch(t.type){case Ze.MSG_TEXT:e.setTextElement(t.content);break;case Ze.MSG_IMAGE:e.setImageElement(t.content);break;case Ze.MSG_AUDIO:e.setAudioElement(t.content);break;case Ze.MSG_FILE:e.setFileElement(t.content);break;case Ze.MSG_VIDEO:e.setVideoElement(t.content);break;case Ze.MSG_CUSTOM:e.setCustomElement(t.content);break;case Ze.MSG_GEO:e.setGEOElement(t.content);break;case Ze.MSG_GRP_TIP:e.setGroupTipElement(t.content);break;case Ze.MSG_GRP_SYS_NOTICE:e.setGroupSystemNoticeElement(t.content);break;case Ze.MSG_FACE:e.setFaceElement(t.content);break;default:as.warn(t.type,t.content,"no operation......")}};if(Array.isArray(t))for(var n=0;n<t.length;n++)i(t[n]);else i(t);this._initProxy()}},{key:"setTextElement",value:function(t){var e="string"==typeof t?t:t.text,i=new Ip({text:e});this._elements.push(i)}},{key:"setImageElement",value:function(t){var e=new bp(t);this._elements.push(e)}},{key:"setAudioElement",value:function(t){var e=new wp(t);this._elements.push(e)}},{key:"setFileElement",value:function(t){var e=new kp(t);this._elements.push(e)}},{key:"setVideoElement",value:function(t){var e=new Up(t);this._elements.push(e)}},{key:"setGEOElement",value:function(t){}},{key:"setCustomElement",value:function(t){var e=new Gp(t);this._elements.push(e)}},{key:"setGroupTipElement",value:function(t){var e=new xp(t);this._elements.push(e)}},{key:"setGroupSystemNoticeElement",value:function(t){var e=new Mp(t);this._elements.push(e)}},{key:"setFaceElement",value:function(t){var e=new Ap(t);this._elements.push(e)}},{key:"elements",get:function(){return as.warn("！！！Message 实例的 elements 属性即将废弃，请尽快修改。使用 type 和 payload 属性处理单条消息，兼容组合消息使用 _elements 属性！！！"),this._elements}}]),t}(),$p=["groupID","name","avatar","type","introduction","notification","ownerID","selfInfo","createTime","infoSequence","lastInfoTime","lastMessage","nextMessageSeq","memberNum","maxMemberNum","memberList","joinOption","groupCustomField"],jp=function(){function t(e){ci(this,t),this.groupID="",this.name="",this.avatar="",this.type="",this.introduction="",this.notification="",this.ownerID="",this.createTime="",this.infoSequence="",this.lastInfoTime="",this.selfInfo={messageRemindType:"",joinTime:"",nameCard:"",role:""},this.lastMessage={lastTime:"",lastSequence:"",fromAccount:"",messageForShow:""},this.nextMessageSeq="",this.memberNum="",this.maxMemberNum="",this.joinOption="",this.groupCustomField=[],this._initGroup(e)}return li(t,[{key:"_initGroup",value:function(t){for(var e in t)$p.indexOf(e)<0||(this[e]=t[e])}},{key:"updateGroup",value:function(t){t.lastMsgTime&&(this.lastMessage.lastTime=t.lastMsgTime),Cs(this,t,["members","errorCode","lastMsgTime"])}}]),t}(),qp=function(t,e){if(ds(e))return"";switch(t){case Ze.MSG_TEXT:return e.text;case Ze.MSG_IMAGE:return"[图片]";case Ze.MSG_GEO:return"[位置]";case Ze.MSG_AUDIO:return"[语音]";case Ze.MSG_VIDEO:return"[视频]";case Ze.MSG_FILE:return"[文件]";case Ze.MSG_CUSTOM:return"[自定义消息]";case Ze.MSG_GRP_TIP:return"[群提示消息]";case Ze.MSG_GRP_SYS_NOTICE:return"[群系统通知]";case Ze.MSG_FACE:return"[自定义表情]";default:return""}},Hp=function(t){return ds(t)?{lastTime:0,lastSequence:0,fromAccount:0,messageForShow:"",payload:null,type:""}:t instanceof Fp?{lastTime:t.time||0,lastSequence:t.sequence||0,fromAccount:t.from||"",messageForShow:qp(t.type,t.payload),payload:t.payload||null,type:t.type||null}:pi({},t,{messageForShow:qp(t.type,t.payload)})},Bp=function(){function t(e){ci(this,t),this.conversationID=e.conversationID||"",this.unreadCount=e.unreadCount||0,this.type=e.type||"",this.subType=e.subType||"",this.lastMessage=Hp(e.lastMessage),this._isInfoCompleted=0,this._initProfile(e)}return li(t,[{key:"_initProfile",value:function(t){var e=this;Object.keys(t).forEach((function(i){switch(i){case"userProfile":e.userProfile=t.userProfile;break;case"groupProfile":e.groupProfile=t.groupProfile}})),ds(this.userProfile)&&this.type===Ze.CONV_C2C?this.userProfile=new cp({userID:t.conversationID.replace("C2C","")}):ds(this.groupProfile)&&this.type===Ze.CONV_GROUP&&(this.groupProfile=new jp({groupID:t.conversationID.replace("GROUP","")}))}},{key:"toAccount",get:function(){return this.conversationID.replace("C2C","").replace("GROUP","")}}]),t}(),Vp=function(t){function e(t){var i;return ci(this,e),(i=Si(this,di(e).call(this,t))).conversationMap=new Map,i.hasLocalConversationList=0,i.tempGroupList=[],i._initListeners(),i}return gi(e,cl),li(e,[{key:"createLocalConversation",value:function(t){return this.conversationMap.has(t)?this.conversationMap.get(t):new Bp({conversationID:t,type:t.slice(0,3)===Ze.CONV_C2C?Ze.CONV_C2C:Ze.CONV_GROUP})}},{key:"hasLocalConversation",value:function(t){return this.conversationMap.has(t)}},{key:"getConversationList",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=!e,n=this.createPackage({name:"conversation",action:"query"});return as.log("ConversationController.getConversationList."),this.tim.connectionController.request(n).then((function(n){var r=n.data.conversations,o=void 0===r?[]:r,a=t._getConversationOptions(o);return e&&t._conversationMapTreeShaking(a),t._updateLocalConversationList(a,1),t._setStorageConversationList(),t.tempGroupList.length>0&&(t._onUpdateConversationGroupProfile(t.tempGroupList),t.tempGroupList=[]),t._isReady&&t._emitConversationUpdate(i),t.triggerReady(),as.log("ConversationController.getConversationList ok."),Rl({conversationList:t.getLocalConversationList()})})).catch((function(t){return as.error("ConversationController.getConversationList error:",t),kl(t)}))}},{key:"getConversationProfile",value:function(t){var e=this.conversationMap.has(t)?this.conversationMap.get(t):this.createLocalConversation(t);return e._isInfoCompleted||e.type===Ze.CONV_SYSTEM?Rl({conversation:e}):(as.log("ConversationController.getConversationProfile. conversationID:",t),this._updateUserOrGroupProfileCompletely(e).then((function(e){return as.log("ConversationController.getConversationProfile ok. conversationID:",t),e})).catch((function(t){return as.error("ConversationController.getConversationProfile error:",t),kl(t)})))}},{key:"deleteConversation",value:function(t){var e=this,i={};if(!this.conversationMap.has(t)){var n=new qu({code:$u.CONVERSATION_NOT_FOUND,message:ju.CONVERSATION_NOT_FOUND});return kl(n)}switch(this.conversationMap.get(t).type){case Ze.CONV_C2C:i.type=1,i.toAccount=t.slice(3);break;case Ze.CONV_GROUP:i.type=2,i.toGroupID=t.slice(5);break;case Ze.CONV_SYSTEM:return this.tim.groupController.deleteGroupSystemNotice({messageList:this.tim.messageController.getLocalMessageList(t)}),this._deleteLocalConversation(t),Rl({conversationID:t});default:var r=new qu({code:$u.CONVERSATION_UN_RECORDED_TYPE,message:ju.CONVERSATION_UN_RECORDED_TYPE});return kl(r)}as.log("ConversationController.deleteConversation. conversationID:",t);var o=this.createPackage({name:"conversation",action:"delete",param:i});return this.tim.setMessageRead({conversationID:t}).then((function(){return e.connectionController.request(o)})).then((function(){return as.log("ConversationController.deleteConversation ok. conversationID:",t),e._deleteLocalConversation(t),Rl({conversationID:t})})).catch((function(t){return as.error("ConversationController.deleteConversation error:",t),kl(t)}))}},{key:"getLocalConversationList",value:function(){return Ci(this.conversationMap.values())}},{key:"getLocalConversation",value:function(t){return this.conversationMap.get(t)}},{key:"_initLocalConversationList",value:function(){as.time(Fl),as.log("ConversationController._initLocalConversationList init");var t=this._getStorageConversationList();if(this.hasLocalConversationList=null!==t&&0!==t.length,this.hasLocalConversationList){for(var e=0,i=t.length;e<i;e++)this.conversationMap.set(t[e].conversationID,new Bp(t[e]));this._emitConversationUpdate(1,0)}this.getConversationList(1).then((function(){as.log("ConversationController._initLocalConversationList init ok. initCost=".concat(as.timeEnd(Fl),"ms"))}))}},{key:"_getStorageConversationList",value:function(){return this.tim.storage.getItem("conversationMap")}},{key:"_setStorageConversationList",value:function(){var t=[];this.conversationMap.forEach((function(e){var i=e.conversationID,n=e.type,r=e.subType,o=e.lastMessage,a=e.groupProfile,s=e.userProfile;t.push({conversationID:i,type:n,subType:r,lastMessage:o,groupProfile:a,userProfile:s})})),this.tim.storage.setItem("conversationMap",t)}},{key:"_initListeners",value:function(){this.tim.innerEmitter.once(Ju.CONTEXT_A2KEY_AND_TINYID_UPDATED,this._initLocalConversationList,this),this.tim.innerEmitter.on(Ju.MESSAGE_SENDING,this._onSendOrReceiveMessage,this),this.tim.innerEmitter.on(Ju.MESSAGE_SENDINGSEND_SUCCESS,this._onSendOrReceiveMessage,this),this.tim.innerEmitter.on(Ju.MESSAGE_GROUP_SEND_SUCCESS,this._onSendOrReceiveMessage,this),this.tim.innerEmitter.on(Ju.MESSAGE_SYNC_PROCESSING,this._handleSyncMessages,this),this.tim.innerEmitter.on(Ju.MESSAGE_SYNC_FINISHED,this._handleSyncMessages,this),this.tim.innerEmitter.on(Ju.MESSAGE_C2C_INSTANT_RECEIVED,this._onSendOrReceiveMessage,this),this.tim.innerEmitter.on(Ju.MESSAGE_GROUP_INSTANT_RECEIVED,this._onSendOrReceiveMessage,this),this.tim.innerEmitter.on(Ju.MESSAGE_GROUP_SYSTEM_NOTICE_RECEIVED,this._onSendOrReceiveMessage,this),this.tim.innerEmitter.on(Ju.GROUP_LIST_UPDATED,this._onUpdateConversationGroupProfile,this),this.tim.innerEmitter.on(Ju.PROFILE_UPDATED,this._onUpdateConversationUserProfile,this)}},{key:"_onUpdateConversationGroupProfile",value:function(t){var e=this;this.hasLocalConversationList||(this.tempGroupList=t),t.forEach((function(t){var i="GROUP".concat(t.groupID);if(e.conversationMap.has(i)){var n=e.conversationMap.get(i);n.groupProfile=t,n.lastMessage.lastSequence=t.nextMessageSeq-1,n.subType||(n.subType=t.type)}})),this._emitConversationUpdate(1,0)}},{key:"_onUpdateConversationUserProfile",value:function(t){var e=this;t.data.forEach((function(t){var i="C2C".concat(t.userID);e.conversationMap.has(i)&&(e.conversationMap.get(i).userProfile=t)})),this._emitConversationUpdate(1,0)}},{key:"_handleSyncMessages",value:function(t){this._onSendOrReceiveMessage(t,1)}},{key:"_onSendOrReceiveMessage",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t.data.eventDataList;this._isReady?0!==n.length&&(this._updateLocalConversationList(n,0,i),this._setStorageConversationList(),this._emitConversationUpdate()):this.ready((function(){e._onSendOrReceiveMessage(t,i)}))}},{key:"_updateLocalConversationList",value:function(t,e,i){var n;n=this._updateTempConversations(t,e,i),this.conversationMap=new Map(this._sortConversations([].concat(Ci(n.conversations),Ci(this.conversationMap)))),e||this._updateUserOrGroupProfile(n.newerConversations)}},{key:"_updateTempConversations",value:function(t,e,i){for(var n=[],r=[],o=0,a=t.length;o<a;o++){var s=new Bp(t[o]),c=this.conversationMap.get(s.conversationID);if(this.conversationMap.has(s.conversationID)){var u=["unreadCount","allowType","adminForbidType","payload"];i&&u.push("lastMessage"),Cs(c,s,u,[null,void 0,"",0,NaN]),c.unreadCount=this._updateUnreadCount(c,s,e),i||(c.lastMessage.payload=t[o].lastMessage.payload),this.conversationMap.delete(c.conversationID),n.push([c.conversationID,c])}else r.push(s),n.push([s.conversationID,s])}return{conversations:n,newerConversations:r}}},{key:"_updateUnreadCount",value:function(t,e,i){if([Ze.GRP_CHATROOM,Ze.GRP_AVCHATROOM].includes(t.subType))return 0;if(i){if(t.type===Ze.CONV_C2C)return t.unreadCount;if(t.type===Ze.CONV_GROUP)return e.unreadCount}return e.unreadCount+t.unreadCount}},{key:"_sortConversations",value:function(t){return t.sort((function(t,e){return e[1].lastMessage.lastTime-t[1].lastMessage.lastTime}))}},{key:"_updateUserOrGroupProfile",value:function(t){var e=this;if(0!==t.length){var i=[],n=[];t.forEach((function(t){if(t.type===Ze.CONV_C2C)i.push(t.toAccount);else if(t.type===Ze.CONV_GROUP){var r=t.toAccount;e.tim.groupController.hasLocalGroup(r)?t.groupProfile=e.tim.groupController.getLocalGroupProfile(r):n.push(r)}})),i.length>0&&this.tim.getUserProfile({userIDList:i}).then((function(t){var i=t.data;gs(i)?i.forEach((function(t){e.conversationMap.get("C2C".concat(t.userID)).userProfile=t})):e.conversationMap.get("C2C".concat(i.userID)).userProfile=i})),n.length>0&&this.tim.groupController.getGroupProfileAdvance({groupIDList:n,responseFilter:{groupBaseInfoFilter:["Type","Name","FaceUrl"]}}).then((function(t){t.data.successGroupList.forEach((function(t){var i="GROUP".concat(t.groupID);if(e.conversationMap.has(i)){var n=e.conversationMap.get(i);Cs(n.groupProfile,t,[],[null,void 0,"",0,NaN]),!n.subType&&t.type&&(n.subType=t.type)}}))}))}}},{key:"_updateUserOrGroupProfileCompletely",value:function(t){var e=this;return t.type===Ze.CONV_C2C?this.tim.getUserProfile({userIDList:[t.toAccount]}).then((function(i){var n=i.data;return 0===n.length?kl(new qu({code:$u.USER_OR_GROUP_NOT_FOUND,message:ju.USER_OR_GROUP_NOT_FOUND})):(t.userProfile=n[0],t._isInfoCompleted=1,e._unshiftConversation(t),Rl({conversation:t}))})):this.tim.getGroupProfile({groupID:t.toAccount}).then((function(i){return t.groupProfile=i.data.group,t._isInfoCompleted=1,e._unshiftConversation(t),Rl({conversation:t})}))}},{key:"_unshiftConversation",value:function(t){t instanceof Bp&&!this.conversationMap.has(t.conversationID)&&(this.conversationMap=new Map([[t.conversationID,t]].concat(Ci(this.conversationMap))),this._setStorageConversationList(),this._emitConversationUpdate(1,0))}},{key:"_deleteLocalConversation",value:function(t){return this.conversationMap.delete(t),this._setStorageConversationList(),this.tim.innerEmitter.emit(Ju.CONVERSATION_DELETED,t),this._emitConversationUpdate(1,0),this.conversationMap.has(t)}},{key:"_getConversationOptions",value:function(t){var e=[],i=t.map((function(t){if(1===t.type){var i={userID:t.userID,nick:t.c2CNick,avatar:t.c2CImage};return e.push(i),{conversationID:"C2C".concat(t.userID),type:"C2C",lastMessage:{lastTime:t.time,lastSequence:t.sequence,fromAccount:t.lastC2CMsgFromAccount,messageForShow:t.messageShow,type:t.lastMsg.elements[0]?t.lastMsg.elements[0].type:null,payload:t.lastMsg.elements[0]?t.lastMsg.elements[0].content:null},userProfile:new cp(i)}}return{conversationID:"GROUP".concat(t.groupID),type:"GROUP",lastMessage:{lastTime:t.time,lastSequence:t.messageReadSeq+t.unreadCount,fromAccount:t.msgGroupFromAccount,messageForShow:t.messageShow,type:t.lastMsg.elements[0]?t.lastMsg.elements[0].type:null,payload:t.lastMsg.elements[0]?t.lastMsg.elements[0].content:null},groupProfile:new jp({groupID:t.groupID,name:t.groupNick,avatar:t.groupImage}),unreadCount:t.unreadCount}}));return e.length>0&&this.tim.innerEmitter.emit(Ju.CONVERSATION_LIST_PROFILE_UPDATED,{data:e}),i}},{key:"_emitConversationUpdate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=Ci(this.conversationMap.values());e&&this.tim.innerEmitter.emit(Ju.CONVERSATION_LIST_UPDATED,i),t&&this.tim.outerEmitter.emit(Qe.CONVERSATION_LIST_UPDATED,i)}},{key:"_conversationMapTreeShaking",value:function(t){var e=this,i=new Map(Ci(this.conversationMap));t.forEach((function(t){return i.delete(t.conversationID)})),i.has(Ze.CONV_SYSTEM)&&i.delete(Ze.CONV_SYSTEM);var n=this.tim.groupController.getJoinedAVChatRoom();n&&i.delete("".concat(Ze.CONV_GROUP).concat(n.groupID)),Ci(i.keys()).forEach((function(t){return e.conversationMap.delete(t)}))}},{key:"reset",value:function(){this.conversationMap.clear(),this.hasLocalConversationList=0,this.resetReady(),this.tim.innerEmitter.once(Ju.CONTEXT_A2KEY_AND_TINYID_UPDATED,this._initLocalConversationList,this)}}]),e}(),Kp=Vt.find,zp=1;"find"in[]&&Array(1).find((function(){zp=0})),Ot({target:"Array",proto:1,forced:zp},{find:function(t){return Kp(this,t,arguments.length>1?arguments[1]:void 0)}}),wn("find");var Yp=function(){function t(e){if(ci(this,t),void 0===e)throw new qu({code:$u.MESSAGE_LIST_CONSTRUCTOR_NEED_OPTIONS,message:ju.MESSAGE_LIST_CONSTRUCTOR_NEED_OPTIONS});if(void 0===e.tim)throw new qu({code:$u.MESSAGE_LIST_CONSTRUCTOR_NEED_OPTIONS,message:"".concat(ju.MESSAGE_LIST_CONSTRUCTOR_NEED_OPTIONS,".tim")});this.list=new Map,this.tim=e.tim,this._initializeOptions(e)}return li(t,[{key:"getLocalOldestMessageByConversationID",value:function(t){if(!t)return null;if(!this.list.has(t))return null;var e=this.list.get(t).values();return e?e.next().value:null}},{key:"_initializeOptions",value:function(t){this.options={};var e={memory:{maxDatasPerKey:100,maxBytesPerData:256,maxKeys:0},cache:{maxDatasPerKey:10,maxBytesPerData:256,maxKeys:0}};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(void 0===t[i]){this.options[i]=e[i];continue}var n=e[i];for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(void 0===t[i][r]){this.options[i][r]=n[r];continue}this.options[i][r]=t[i][r]}}}},{key:"_parseMessageFormLikeKeyValue",value:function(t){return[t.conversationID,t]}},{key:"pushIn",value:function(t){var e=this._parseMessageFormLikeKeyValue(t),i=0;return void 0===this.list.get(e[0])&&this.list.set(e[0],new Map),this.list.has(t.conversationID)&&this.list.get(t.conversationID).has(e[1].ID)&&(i=1),this.list.get(e[0]).set(e[1].ID,e[1]),i?null:t}},{key:"shiftIn",value:function(t){Array.isArray(t)?0!==t.length&&this._shiftInMultipleMessages(t):this._shiftSingleMessage(t)}},{key:"_shiftSingleMessage",value:function(t){var e=this._parseMessageFormLikeKeyValue(t);if(void 0===this.list.get(e[0]))return this.list.set(e[0],new Map),void this.list.get(e[0]).set(e[1].ID,e[1]);var i=Array.from(this.list.get(e[0]));i.unshift([e[1].ID,e[1]]),this.list.set(e[0],new Map(i))}},{key:"_shiftInMultipleMessages",value:function(t){for(var e=t.length,i=[],n=t[0].conversationID,r=this.list.has(n)?Array.from(this.list.get(n)):[],o=0;o<e;o++)i.push([t[o].ID,t[o]]);this.list.set(n,new Map(i.concat(r)))}},{key:"remove",value:function(t){var e=t.conversationID,i=t.ID;this.list.get(e).delete(i)}},{key:"removeByConversationID",value:function(t){this.list.has(t)&&this.list.delete(t)}},{key:"hasLocalMessageList",value:function(t){return this.list.has(t)}},{key:"getLocalMessageList",value:function(t){return this.hasLocalMessageList(t)?Ci(this.list.get(t).values()):[]}},{key:"hasLocalMessage",value:function(t,e){return this.hasLocalMessageList(t)?this.list.get(t).has(e):0}},{key:"getLocalMessage",value:function(t,e){return this.hasLocalMessage(t,e)?this.list.get(t).get(e):null}},{key:"reset",value:function(){this.list.clear()}}]),t}(),Wp=function(){function t(e){ci(this,t),this.tim=e}return li(t,[{key:"setMessageRead",value:function(t){var e=t.conversationID,i=t.messageID,n=this.tim.conversationController.getLocalConversation(e);if(!n||0===n.unreadCount)return Rl();var r=i?this.tim.messageController.getLocalMessage(e,i):null;switch(n.type){case Ze.CONV_C2C:return this._setC2CMessageRead({conversationID:e,lastMessageTime:r?r.time:n.lastMessage.lastTime});case Ze.CONV_GROUP:return this._setGroupMessageRead({conversationID:e,lastMessageSeq:r?r.sequence:n.lastMessage.lastSequence});case Ze.CONV_SYSTEM:return n.unreadCount=0,Rl();default:return Rl()}}},{key:"_setC2CMessageRead",value:function(t){var e=this,i=t.conversationID,n=t.lastMessageTime,r=this.tim.messageController.createPackage({name:"conversation",action:"setC2CMessageRead",param:{C2CMsgReaded:{cookie:"",C2CMsgReadedItem:[{toAccount:i.replace("C2C",""),lastMessageTime:n}]}}});return this._updateIsReadAfterReadReport({conversationID:i,lastMessageTime:n}),this._updateUnreadCount(i),this.tim.connectionController.request(r).then((function(){return new Ol})).catch((function(t){return e.tim.innerEmitter.emit(Ju.ERROR_DETECTED,t),Promise.reject(new Ol(t))}))}},{key:"_setGroupMessageRead",value:function(t){var e=this,i=t.conversationID,n=t.lastMessageSeq,r=this.tim.messageController.createPackage({name:"conversation",action:"setGroupMessageRead",param:{groupID:i.replace("GROUP",""),messageReadSeq:n}});return this._updateIsReadAfterReadReport({conversationID:i,lastMessageSeq:n}),this._updateUnreadCount(i),this.tim.connectionController.request(r).then((function(){return new Ol})).catch((function(t){return e.tim.innerEmitter.emit(Ju.ERROR_DETECTED,t),Promise.reject(new Ol(t))}))}},{key:"_updateUnreadCount",value:function(t){var e=this.tim,i=e.conversationController,n=e.messageController,r=i.getLocalConversation(t),o=n.getLocalMessageList(t);r&&(r.unreadCount=o.filter((function(t){return!t.isRead})).length)}},{key:"_updateIsReadAfterReadReport",value:function(t){var e=t.conversationID,i=t.lastMessageSeq,n=t.lastMessageTime,r=this.tim.messageController.getLocalMessageList(e);if(0!==r.length)for(var o=r.length-1;o>=0;o--){var a=r[o];if(!(n&&a.time>n||i&&a.sequence>i)){if("in"===a.flow&&a.isRead)break;a.isRead=1}}}},{key:"updateIsRead",value:function(t){var e=this.tim,i=e.conversationController,n=e.messageController,r=i.getLocalConversation(t),o=n.getLocalMessageList(t);if(r&&0!==o.length&&[Ze.CONV_C2C,Ze.CONV_GROUP].includes(r.type))for(var a=0;a<o.length-r.unreadCount&&!o[a].isRead;a++)o[a].isRead=1}}]),t}(),Jp=Vt.findIndex,Xp=1;"findIndex"in[]&&Array(1).findIndex((function(){Xp=0})),Ot({target:"Array",proto:1,forced:Xp},{findIndex:function(t){return Jp(this,t,arguments.length>1?arguments[1]:void 0)}}),wn("findIndex");var Qp=function(){function t(e){var i=e.tim,n=e.messageController;ci(this,t),this.tim=i,this.messageController=n,this.completedMap=new Map,this._initListener()}return li(t,[{key:"getMessageList",value:function(t){var e=this,i=t.conversationID,n=t.nextReqMessageID,r=t.count;(ds(r)||r>15)&&(r=15);var o=this._computeLeftCount({conversationID:i,nextReqMessageID:n});return this._needGetHistory({conversationID:i,leftCount:o,count:r})?this.messageController.getHistoryMessages({conversationID:i,count:20}).then((function(){return o=e._computeLeftCount({conversationID:i,nextReqMessageID:n}),new Ol(e._computeResult({conversationID:i,nextReqMessageID:n,count:r,leftCount:o}))})):Rl(this._computeResult({conversationID:i,nextReqMessageID:n,count:r,leftCount:o}))}},{key:"setCompleted",value:function(t){this.completedMap.set(t,1)}},{key:"deleteCompletedItem",value:function(t){this.completedMap.delete(t)}},{key:"_initListener",value:function(){var t=this;this.tim.innerEmitter.on(Ju.SDK_READY,(function(){t.completedMap.set(Ze.CONV_SYSTEM,1)})),this.tim.innerEmitter.on(Ju.AVCHATROOM_JOIN_SUCCESS,(function(e){var i=e.data;t.completedMap.set("".concat(Ze.CONV_GROUP).concat(i),1)}))}},{key:"_getMessageListSize",value:function(t){return this.messageController.getLocalMessageList(t).length}},{key:"_needGetHistory",value:function(t){var e=t.conversationID,i=t.leftCount,n=t.count,r=this.tim.conversationController.getLocalConversation(e),o=r?r.type===Ze.CONV_SYSTEM:0,a=r?r.subType===Ze.GRP_AVCHATROOM:0;return o||a?0:i<n&&!this.completedMap.has(e)}},{key:"_computeResult",value:function(t){var e=t.conversationID,i=t.nextReqMessageID,n=t.count,r=t.leftCount,o=this._computeMessageList({conversationID:e,nextReqMessageID:i,count:n}),a=this._computeIsCompleted({conversationID:e,leftCount:r,count:n});return{messageList:o,nextReqMessageID:this._computeNextReqMessageID({messageList:o,isCompleted:a,conversationID:e}),isCompleted:a}}},{key:"_computeNextReqMessageID",value:function(t){var e=t.messageList,i=t.isCompleted,n=t.conversationID;if(!i)return 0===e.length?"":e[0].ID;var r=this.messageController.getLocalMessageList(n);return 0===r.length?"":r[0].ID}},{key:"_computeMessageList",value:function(t){var e=t.conversationID,i=t.nextReqMessageID,n=t.count,r=this.messageController.getLocalMessageList(e),o=this._computeIndexEnd({nextReqMessageID:i,messageList:r}),a=this._computeIndexStart({indexEnd:o,count:n});return r.slice(a,o)}},{key:"_computeIndexEnd",value:function(t){var e=t.messageList,i=void 0===e?[]:e,n=t.nextReqMessageID;return n?i.findIndex((function(t){return t.ID===n})):i.length}},{key:"_computeIndexStart",value:function(t){var e=t.indexEnd,i=t.count;return e>i?e-i:0}},{key:"_computeLeftCount",value:function(t){var e=t.conversationID,i=t.nextReqMessageID;return i?this.messageController.getLocalMessageList(e).findIndex((function(t){return t.ID===i})):this._getMessageListSize(e)}},{key:"_computeIsCompleted",value:function(t){var e=t.conversationID;return t.leftCount<=t.count&&this.completedMap.has(e)?1:0}},{key:"reset",value:function(){this.completedMap.clear()}}]),t}(),Zp=Math.floor;Ot({target:"Number",stat:1},{isInteger:function(t){return!b(t)&&isFinite(t)&&Zp(t)===t}});var tg=function(){function t(e,i){ci(this,t),this.options=i||{enablePointer:1},this.taskName=e||["task",this._timeFormat()].join("-"),this.pointsList=[],this.reportText="",this.gapChar="…",this.currentTask=""}return li(t,[{key:"dot",value:function(t){if("string"==typeof t)if(0!==t.length){var e=Date.now();this.pointsList.push({pointerName:t,time:e})}else as.error("PointerTask.dot(pointerName), need param: pointerName");else as.error("PointerTask.dot(pointerName), pointerName must be string")}},{key:"_analisys",value:function(){for(var t=this.pointsList,e=t.length,i=[],n=[],r=0;r<e;r++)0!==r&&(n=this._analisysTowPoints(t[r-1],t[r]),i.push(n.join("")));return n=this._analisysTowPoints(t[0],t[e-1],1),i.push(n.join("")),i.join("")}},{key:"_analisysTowPoints",value:function(t,e){var i=(e.time-t.time).toString();return["(",t.pointerName,")->(",e.pointerName,")=",i,"ms;"]}},{key:"report",value:function(){0!=this.options.enablePointer&&as.log(this.reportString())}},{key:"reportString",value:function(){return 1==!!this.reportText?this.reportText:0===this.pointsList.length?"":(this.reportText="".concat(this.taskName," report：").concat(this._analisys()),this.reportText)}},{key:"_timeFormat",value:function(){var t=new Date,e=this.zeroFix(t.getMonth()+1,2),i=this.zeroFix(t.getDate(),2);return"".concat(e,"-").concat(i," ").concat(t.getHours(),":").concat(t.getSeconds(),":").concat(t.getMinutes(),".").concat(t.getMilliseconds())}},{key:"zeroFix",value:function(t,e){return Number.isInteger(e)?e<0?(as.error('PointerTask.zeroFix(num, length); param "length" must greater then zero'),""):("000000000"+t).slice(e=1+~e):(as.error('PointerTask.zeroFix(num, length); param "length" should be an integer'),"")}}]),t}(),eg=function(t,e){return new tg(t,e)},ig=function t(e){ci(this,t),this.value=e,this.next=null},ng=function(){function t(e){ci(this,t),this.MAX_LENGTH=e,this.pTail=null,this.pNodeToDel=null,this.map=new Map,as.log("SinglyLinkedList init MAX_LENGTH=".concat(this.MAX_LENGTH))}return li(t,[{key:"pushIn",value:function(t){var e=new ig(t);if(this.map.size<this.MAX_LENGTH)null===this.pTail?(this.pTail=e,this.pNodeToDel=e):(this.pTail.next=e,this.pTail=e),this.map.set(t,1);else{var i=this.pNodeToDel;this.pNodeToDel=this.pNodeToDel.next,this.map.delete(i.value),i.next=null,i=null,this.pTail.next=e,this.pTail=e,this.map.set(t,1)}}},{key:"has",value:function(t){return this.map.has(t)}},{key:"reset",value:function(){for(var t;null!==this.pNodeToDel;)t=this.pNodeToDel,this.pNodeToDel=this.pNodeToDel.next,t.next=null,t=null;this.pTail=null,this.map.clear()}}]),t}(),rg=function(t){function e(t){var i;return ci(this,e),(i=Si(this,di(e).call(this,t)))._initializeMembers(),i._initializeListener(),i._initialzeHandlers(),i}return gi(e,cl),li(e,[{key:"_initializeMembers",value:function(){this.messagesList=new Yp({tim:this.tim}),this.currentMessageKey={},this.singlyLinkedList=new ng(100)}},{key:"_initialzeHandlers",value:function(){this.readReportHandler=new Wp(this.tim),this.getMessageHandler=new Qp({messageController:this,tim:this.tim})}},{key:"reset",value:function(){this.messagesList.reset(),this.currentMessageKey={},this.getMessageHandler.reset(),this.singlyLinkedList.reset()}},{key:"_initializeListener",value:function(){var t=this.tim.innerEmitter;t.on(Ju.NOTICE_LONGPOLL_NEW_C2C_NOTICE,this._onReceiveC2CMessage,this),t.on(Ju.SYNC_MESSAGE_C2C_PROCESSING,this._onSyncMessagesProcessing,this),t.on(Ju.SYNC_MESSAGE_C2C_FINISHED,this._onSyncMessagesFinished,this),t.on(Ju.NOTICE_LONGPOLL_NEW_GROUP_MESSAGES,this._onReceiveGroupMessage,this),t.on(Ju.NOTICE_LONGPOLL_NEW_GROUP_TIPS,this._onReceiveGroupTips,this),t.on(Ju.NOTICE_LONGPOLL_NEW_GROUP_NOTICE,this._onReceiveSystemNotice,this),t.on(Ju.CONVERSATION_DELETED,this._clearConversationMessages,this)}},{key:"sendMessageInstance",value:function(t){var e=this,i=eg("MessageController.sendMessageInstance(), ".concat(t.ID),this.tim.options),n=this.tim.innerEmitter;if(1==t.isError()){i.dot("message error"),i.report();var r=t.getIMError();return this._onSendMessageFailed(t,r),kl(r)}if(0==t.isSendable()){i.dot("message unsendable"),i.report();var o=new qu({code:$u.MESSAGE_FILE_IS_EMPTY,message:ju.MESSAGE_FILE_IS_EMPTY});return this._onSendMessageFailed(t,o),kl(o)}var a=null,s=null;switch(i.dot("innerEmitter ".concat(Ju.MESSAGE_SENDING)),n.emit(Ju.MESSAGE_SENDING,{data:{eventDataList:[{conversationID:t.conversationID,unreadCount:0,type:t.conversationType,subType:t.conversationSubType,lastMessage:t}]}}),i.dot("init handles ".concat(t.conversationType)),t.conversationType){case Ze.CONV_C2C:a=this._createC2CMessagePack(t),s=this._handleOnSendC2CMessageSuccess.bind(this);break;case Ze.CONV_GROUP:a=this._createGroupMessagePack(t),s=this._handleOnSendGroupMessageSuccess.bind(this);break;default:return i.dot("error ".concat(t.conversationType)),i.report(),kl(new qu({code:$u.MESSAGE_SEND_INVALID_CONVERSATION_TYPE,message:ju.MESSAGE_SEND_INVALID_CONVERSATION_TYPE}))}return this.singlyLinkedList.pushIn(t.random),this.tim.connectionController.request(a).then((function(n){return i.dot("send success"),t.conversationType===Ze.CONV_GROUP&&(i.dot("updateID"),t.sequence=n.data.sequence,t.time=n.data.time,t.generateMessageID(e.tim.context.identifier)),i.dot("pushIn"),e.messagesList.pushIn(t),s(t,n.data),i.report(),new Ol({message:t})})).catch((function(n){return e._onSendMessageFailed(t,n),i.dot("send fail"),as.error("MessageController.sendMessageInstance() error:",n),i.report(),kl(new qu({code:$u.MESSAGE_SEND_FAIL,message:ju.MESSAGE_SEND_FAIL,data:{message:t}}))}))}},{key:"resendMessage",value:function(t){return 1==this._isFileLikeMessage(t)?(as.warn("MessageController.resendMessage(), file like message can not resendBy SDK.resendMessage()"),kl(new qu({code:$u.MESSAGE_RESEND_FILE_UNSUPPORTED,message:ju.MESSAGE_RESEND_FILE_UNSUPPORTED}))):(t.isResend=1,t.status=fl.MESSAGE_STATUS.UNSEND,this.sendMessageInstance(t))}},{key:"_isFileLikeMessage",value:function(t){return[Ze.MSG_IMAGE,Ze.MSG_FILE,Ze.MSG_AUDIO,Ze.MSG_VIDEO].indexOf(t.type)>=0?1:0}},{key:"_resendBinaryTypeMessage",value:function(){}},{key:"_createC2CMessagePack",value:function(t){return this.createPackage({name:"c2cMessage",action:"create",param:{toAccount:t.to,msgBody:t.getElements(),msgSeq:t.sequence,msgRandom:t.random,offlinePushInfo:{desc:"offline message push",ext:"offline message push"}}})}},{key:"_handleOnSendC2CMessageSuccess",value:function(t,e){var i=this.tim,n=i.innerEmitter,r=i.outerEmitter;t.status=fl.MESSAGE_STATUS.SUCCESS,t.time=e.time,n.emit(Ju.MESSAGE_C2C_SEND_SUCCESS,{data:{eventDataList:[{conversationID:t.conversationID,unreadCount:0,type:t.conversationType,subType:t.conversationSubType,lastMessage:t}]}}),r.emit(Qe.MESSAGE_SEND_SUCCESS,t)}},{key:"_createGroupMessagePack",value:function(t){return this.createPackage({name:"groupMessage",action:"create",param:{groupID:t.to,msgBody:t.getElements(),random:t.random,clientSequence:t.clientSequence,offlinePushInfo:{desc:"offline message push",ext:"offline message push"}}})}},{key:"_handleOnSendGroupMessageSuccess",value:function(t,e){var i=this.tim,n=i.innerEmitter,r=i.outerEmitter;t.sequence=e.sequence,t.time=e.time,t.status=fl.MESSAGE_STATUS.SUCCESS,n.emit(Ju.MESSAGE_GROUP_SEND_SUCCESS,{data:{eventDataList:[{conversationID:t.conversationID,unreadCount:0,type:t.conversationType,subType:t.conversationSubType,lastMessage:t}]}}),r.emit(Qe.MESSAGE_SEND_SUCCESS,t)}},{key:"_onSendMessageFailed",value:function(t,e){var i=this.tim,n=i.innerEmitter,r=i.outerEmitter;t.status=fl.MESSAGE_STATUS.FAIL,n.emit(Ju.ERROR_DETECTED,e),r.emit(Qe.MESSAGE_SEND_FAIL,t)}},{key:"_onReceiveC2CMessage",value:function(t){var e=this.tim,i=e.innerEmitter,n=e.outerEmitter;as.log("MessageController._onReceiveC2CMessage(), get new messages");var r=this._newC2CMessageStoredAndSummary({notifiesList:t.data,type:Ze.CONV_C2C,C2CRemainingUnreadList:t.C2CRemainingUnreadList}),o=r.eventDataList,a=r.result;i.emit(Ju.MESSAGE_C2C_INSTANT_RECEIVED,{data:{eventDataList:o,result:a},resource:this}),a.length>0&&n.emit(Qe.MESSAGE_RECEIVED,a)}},{key:"_onReceiveGroupMessage",value:function(t){var e=this.tim,i=e.outerEmitter,n=e.innerEmitter,r=this._newGroupMessageStoredAndSummary(t.data),o=r.eventDataList,a=r.result;o.length>0&&(as.log("MessageController._onReceiveGroupMessage()"),n.emit(Ju.MESSAGE_GROUP_INSTANT_RECEIVED,{data:{eventDataList:o,result:a,isGroupTip:0}})),a.length>0&&i.emit(Qe.MESSAGE_RECEIVED,a)}},{key:"_onReceiveGroupTips",value:function(t){var e=this.tim,i=e.outerEmitter,n=e.innerEmitter,r=t.data,o=this._newGroupTipsStoredAndSummary(r,Ze.CONV_GROUP),a=o.eventDataList,s=o.result;as.log("MessageController._onReceiveGroupTips()"),n.emit(Ju.MESSAGE_GROUP_INSTANT_RECEIVED,{data:{eventDataList:a,result:s,isGroupTip:1}}),s.length>0&&i.emit(Qe.MESSAGE_RECEIVED,s)}},{key:"_onReceiveSystemNotice",value:function(t){var e=this.tim,i=e.outerEmitter,n=e.innerEmitter,r=t.data,o=r.groupSystemNotices,a=r.type,s=this._newSystemNoticeStoredAndSummary({notifiesList:o,type:a}),c=s.eventDataList,u=s.result;n.emit(Ju.MESSAGE_GROUP_SYSTEM_NOTICE_RECEIVED,{data:{eventDataList:c,result:u,type:a}}),u.length>0&&i.emit(Qe.MESSAGE_RECEIVED,u)}},{key:"_clearConversationMessages",value:function(t){this.messagesList.removeByConversationID(t),this.getMessageHandler.deleteCompletedItem(t)}},{key:"_pushIntoNoticeResult",value:function(t,e){var i=this.messagesList.pushIn(e),n=this.singlyLinkedList.has(e.random);null!==i&&0==n&&t.push(e)}},{key:"_newC2CMessageStoredAndSummary",value:function(t){for(var e=t.notifiesList,i=t.type,n=t.C2CRemainingUnreadList,r=t.isFromSync,o=null,a=[],s=[],c={},u=0,l=e.length;u<l;u++){var f=e[u];f.currentUser=this.tim.context.identifier,f.conversationType=i,f.isSystemMessage=!!f.isSystemMessage,(o=new Fp(f)).setElement(f.elements),r||this._pushIntoNoticeResult(s,o),void 0===c[o.conversationID]?c[o.conversationID]=a.push({conversationID:o.conversationID,unreadCount:"out"===o.flow?0:1,type:o.conversationType,subType:o.conversationSubType,lastMessage:o})-1:(a[c[o.conversationID]].type=o.conversationType,a[c[o.conversationID]].subType=o.conversationSubType,a[c[o.conversationID]].lastMessage=o,"in"===o.flow&&a[c[o.conversationID]].unreadCount++)}if(gs(n))for(var h=function(t,e){var i=a.find((function(e){return e.conversationID==="C2C".concat(n[t].from)}));i&&(i.unreadCount+=n[t].count)},p=0,g=n.length;p<g;p++)h(p);return{eventDataList:a,result:s}}},{key:"_newGroupMessageStoredAndSummary",value:function(t){for(var e=null,i=[],n={},r=[],o=Ze.CONV_GROUP,a=0,s=t.length;a<s;a++){var c=t[a];c.currentUser=this.tim.context.identifier,c.conversationType=o,c.isSystemMessage=!!c.isSystemMessage,(e=new Fp(c)).setElement(c.elements),this._pushIntoNoticeResult(r,e),void 0===n[e.conversationID]?n[e.conversationID]=i.push({conversationID:e.conversationID,unreadCount:"out"===e.flow?0:1,type:e.conversationType,subType:e.conversationSubType,lastMessage:e})-1:(i[n[e.conversationID]].type=e.conversationType,i[n[e.conversationID]].subType=e.conversationSubType,i[n[e.conversationID]].lastMessage=e,"in"===e.flow&&i[n[e.conversationID]].unreadCount++)}return{eventDataList:i,result:r}}},{key:"_newGroupTipsStoredAndSummary",value:function(t,e){for(var i=null,n=[],r=[],o={},a=0,s=t.length;a<s;a++){var c=t[a];c.currentUser=this.tim.context.identifier,c.conversationType=e,(i=new Fp(c)).setElement({type:Ze.MSG_GRP_TIP,content:pi({},c.elements,{groupProfile:c.groupProfile})}),i.isSystemMessage=0;var u=this.messagesList.pushIn(i);u&&r.push(u),void 0===o[i.conversationID]?o[i.conversationID]=n.push({conversationID:i.conversationID,unreadCount:"out"===i.flow?0:1,type:i.conversationType,subType:i.conversationSubType,lastMessage:i})-1:(n[o[i.conversationID]].type=i.conversationType,n[o[i.conversationID]].subType=i.conversationSubType,n[o[i.conversationID]].lastMessage=i,"in"===i.flow&&n[o[i.conversationID]].unreadCount++)}return{eventDataList:n,result:r}}},{key:"_newSystemNoticeStoredAndSummary",value:function(t){var e=t.notifiesList,i=t.type,n=null,r=e.length,o=0,a=[],s={conversationID:Ze.CONV_SYSTEM,unreadCount:0,type:Ze.CONV_SYSTEM,subType:null,lastMessage:null};for(o=0;o<r;o++){var c=e[o];if(c.elements.operationType!==Il){c.currentUser=this.tim.context.identifier,c.conversationType=Ze.CONV_SYSTEM,c.conversationID=Ze.CONV_SYSTEM,(n=new Fp(c)).setElement({type:Ze.MSG_GRP_SYS_NOTICE,content:pi({},c.elements,{groupProfile:c.groupProfile})}),n.isRead=1,n.isSystemMessage=1;var u=this.messagesList.pushIn(n);u&&(a.push(u),"poll"===i&&s.unreadCount++),s.subType=n.conversationSubType}}return s.lastMessage=a[a.length-1],{eventDataList:a.length>0?[s]:[],result:a}}},{key:"_onSyncMessagesProcessing",value:function(t){var e=this._newC2CMessageStoredAndSummary({notifiesList:t.data,type:Ze.CONV_C2C,isFromSync:1,C2CRemainingUnreadList:t.C2CRemainingUnreadList}),i=e.eventDataList,n=e.result;this.tim.innerEmitter.emit(Ju.MESSAGE_SYNC_PROCESSING,{data:{eventDataList:i,result:n},resource:this})}},{key:"_onSyncMessagesFinished",value:function(t){this.triggerReady();var e=this._newC2CMessageStoredAndSummary({notifiesList:t.data,type:Ze.CONV_C2C,isFromSync:1,C2CRemainingUnreadList:t.C2CRemainingUnreadList}),i=e.eventDataList,n=e.result;this.tim.innerEmitter.emit(Ju.MESSAGE_SYNC_FINISHED,{data:{eventDataList:i,result:n},resource:this})}},{key:"getHistoryMessages",value:function(t){if(t.conversationID===Ze.CONV_SYSTEM)return Rl();!t.count&&(t.count=15),t.count>20&&(t.count=20);var e=this.messagesList.getLocalOldestMessageByConversationID(t.conversationID);e||((e={}).time=0,e.sequence=0,0===t.conversationID.indexOf(Ze.CONV_C2C)?(e.to=t.conversationID.replace(Ze.CONV_C2C,""),e.conversationType=Ze.CONV_C2C):0===t.conversationID.indexOf(Ze.CONV_GROUP)&&(e.to=t.conversationID.replace(Ze.CONV_GROUP,""),e.conversationType=Ze.CONV_GROUP));var i="";switch(e.conversationType){case Ze.CONV_C2C:return i=t.conversationID.replace(Ze.CONV_C2C,""),this.getC2CRoamMessages({conversationID:t.conversationID,peerAccount:i,count:t.count,lastMessageTime:void 0===this.currentMessageKey[t.conversationID]?0:e.time});case Ze.CONV_GROUP:return this.getGroupRoamMessages({conversationID:t.conversationID,groupID:e.to,count:t.count,sequence:e.sequence-1});default:return Rl()}}},{key:"getC2CRoamMessages",value:function(t){var e=this,i=this.tim,n=i.connectionController,r=i.innerEmitter,o=void 0!==this.currentMessageKey[t.conversationID]?this.currentMessageKey[t.conversationID]:"",a=this.createPackage({name:"c2cMessage",action:"query",param:{peerAccount:t.peerAccount,count:t.count||15,lastMessageTime:t.lastMessageTime||0,messageKey:o}});return n.request(a).then((function(i){var n=i.data,r=n.complete,o=n.messageList;1===r&&e.getMessageHandler.setCompleted(t.conversationID);var a=e._roamMessageStore(o,Ze.CONV_C2C,t.conversationID);return e.readReportHandler.updateIsRead(t.conversationID),e.currentMessageKey[t.conversationID]=i.data.messageKey,a})).catch((function(t){return r.emit(Ju.ERROR_DETECTED,t),Promise.reject(t)}))}},{key:"getC2CRoamMessagesSliced",value:function(t){var e=this.tim.connectionController,i=this;return function(t){return new Promise((function(n,r){!function t(n,r,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=i.createPackage({name:"c2cMessage",action:"query",param:{peerAccount:n.peerAccount,count:n.count||15,lastMessageTime:n.lastMessageTime||0,messageKey:n.messageKey||""}}),c=e.request(s).then((function(e){var s=e.data.messageList,c=i._roamMessageStore(s,Ze.CONV_C2C);a.push.apply(a,Ci(c)),e.data.complete===fl.GET_HISTORY_MESSAGE_STATUS.C2C_IS_NOT_FINISHED?(n.messageKey=e.data.messageKey,t(n,r,a)):e.data.complete===fl.GET_HISTORY_MESSAGE_STATUS.C2C_IS_FINISHED?(as.log("getC2CRoamMessages finised..."),r(new Ol(a))):o(new qu({code:$u.MESSAGE_UNKNOW_ROMA_LIST_END_FLAG_FIELD,message:ju.MESSAGE_UNKNOW_ROMA_LIST_END_FLAG_FIELD}))})).reject((function(t){as.log("getC2CRoamMessages fail..."),o(t)}));return c}(t,n,r,[])}))}(t)}},{key:"getGroupRoamMessages",value:function(t){var e=this,i=this.tim,n=i.connectionController,r=i.groupController,o=t.sequence>=0?t.sequence:r.getLocalGroupLastSequence(t.groupID);if(o<0)return Rl([]);var a=this.createPackage({name:"groupMessage",action:"query",param:{groupID:t.groupID,count:t.count,sequence:o}});return n.request(a).then((function(i){var n=i.data.messagesList,r="GROUP".concat(t.groupID);Array.isArray(n)&&n.length<t.count&&e.getMessageHandler.setCompleted(r);var o=e._roamMessageStore(n,Ze.CONV_GROUP,r);return e.readReportHandler.updateIsRead(r),as.log("getGroupRoamMessages finished..."),o})).catch((function(t){return e.tim.exceptionController.ask(t),as.log("getGroupRoamMessages error..."),Promise.reject(t)}))}},{key:"_roamMessageStore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,n=null,r=[],o=0,a=t.length,s=null,c=e===Ze.CONV_GROUP,u=function(){o=c?t.length-1:0,a=c?0:t.length},l=function(){c?--o:++o},f=function(){return c?o>=a:o<a};for(c&&0===t.length&&this.getMessageHandler.setCompleted(i),u();f();l())0!==t[o].elements.length||0!==t[o].time?(c&&1===t[o].sequence&&this.getMessageHandler.setCompleted(i),(n=new Fp(t[o])).to=t[o].to,n.isSystemMessage=!!t[o].isSystemMessage,n.conversationType=e,s=t[o].event===pl.JSON.TYPE.GROUP.TIP?{type:Ze.MSG_GRP_TIP,content:pi({},t[o].elements,{groupProfile:t[o].groupProfile})}:t[o].elements[0],n.setElement(s),n.reInitialize(this.tim.context.identifier),r.push(n)):this.getMessageHandler.setCompleted(i);return this.messagesList.shiftIn(r),u=l=f=null,r}},{key:"getLocalMessageList",value:function(t){return this.messagesList.getLocalMessageList(t)}},{key:"getLocalMessage",value:function(t,e){return this.messagesList.getLocalMessage(t,e)}},{key:"setMessageRead",value:function(t){var e=this;return new Promise((function(i,n){e.ready((function(){e.readReportHandler.setMessageRead(t).then(i).catch(n)}))}))}},{key:"getMessageList",value:function(t){return this.getMessageHandler.getMessageList(t)}},{key:"createTextMessage",value:function(t){t.currentUser=this.tim.context.identifier;var e=new Fp(t),i="string"==typeof t.payload?t.payload:t.payload.text,n=new Ip({text:i});return e.setElement(n),e}},{key:"createCustomMessage",value:function(t){t.currentUser=this.tim.context.identifier;var e=new Fp(t),i=new Gp({data:t.payload.data,description:t.payload.description,extension:t.payload.extension});return e.setElement(i),e}},{key:"createImageMessage",value:function(t){var e=this.tim.uploadController;t.currentUser=this.tim.context.identifier;var n=new Fp(t);if(Ma){var r=t.payload.file,o=r.tempFilePaths[0],a={url:o,name:o.slice(o.lastIndexOf("/")+1),size:r.tempFiles[0].size,type:o.slice(o.lastIndexOf(".")+1).toUpperCase()};t.payload.file=a}var s=new bp({imageFormat:"UNKNOWN",uuid:this._generateUUID(),file:t.payload.file});return e.uploadImage({file:t.payload.file,to:t.to,onProgress:function(e){s.updatePercent.bind(s)(e),"function"==typeof t.onProgress&&t.onProgress(e)}}).then((function(t){var e,n=["https://",t.location].join("");return s.updateImageFormat(t.fileType),s.updateImageInfoArray({size:t.fileSize,url:n}),e=s._imageMemoryURL,Ma?new Promise((function(t,n){i.getImageInfo({src:e,success:function(e){t({width:e.width,height:e.height})},fail:function(){t({width:0,height:0})}})})):Ra&&9===ka?Promise.resolve({width:0,height:0}):new Promise((function(t,i){var n=new Image;n.onload=function(){t({width:this.width,height:this.height}),n=null},n.onerror=function(){t({width:0,height:0}),n=null},n.src=e}))})).then((function(t){0!==t.width&&0!==t.height&&(as.log("MessageController.probeImageWidthHeight width=".concat(t.width," height=").concat(t.height)),s.updateImageInfoArray({width:t.width,height:t.height})),n.triggerOperated()})).catch((function(t){n.status=fl.MESSAGE_STATUS.FAIL,as.warn("MessageController.createImageMessage(), error:",JSON.stringify(t))})),n.setElement(s),n}},{key:"createFileMessage",value:function(t){if(Ma)return kl({code:$u.MESSAGE_FILE_WECHAT_MINIAPP_NOT_SUPPORT,message:ju.MESSAGE_FILE_WECHAT_MINIAPP_NOT_SUPPORT});var e=this.tim.uploadController;t.currentUser=this.tim.context.identifier;var i=new Fp(t),n=new kp({uuid:this._generateUUID(),file:t.payload.file});return e.uploadFile({file:t.payload.file,to:t.to,onProgress:function(e){n.updatePercent.bind(n)(e),"function"==typeof t.onProgress&&t.onProgress(e)}}).then((function(t){var e=["https://",t.location].join("");n.updateFileUrl(e),as.log("MessageController.createFileMessage(), file upload success, URL: ".concat(e)),i.triggerOperated()})).catch((function(t){i.status=fl.MESSAGE_STATUS.FAIL,t.code===$u.MESSAGE_FILE_SIZE_LIMIT&&i.setError(t.code,t.message),as.warn("MessageController.createFileMessage(), file upload fail, error response: ",t),i.triggerOperated()})),i.setElement(n),i}},{key:"createAudioMessage",value:function(t){if(Ma){var e=this.tim.uploadController,i=t.payload.file;if(Ma){var n={url:i.tempFilePath,name:i.tempFilePath.slice(i.tempFilePath.lastIndexOf("/")+1),size:i.fileSize,second:parseInt(i.duration)/1e3,type:i.tempFilePath.slice(i.tempFilePath.lastIndexOf(".")+1).toUpperCase()};t.payload.file=n}t.currentUser=this.tim.context.identifier;var r=new Fp(t),o=new wp({second:Math.floor(i.duration/1e3),size:i.fileSize,url:i.tempFilePath,uuid:this._generateUUID()});return e.uploadAudio({file:t.payload.file,to:t.to}).then((function(t){var e,i=-1===(e=t.location).indexOf("http://")||-1===e.indexOf("https://")?"https://"+e:e.replace(/https|http/,"https");o.updateAudioUrl(i),r.triggerOperated()})).catch((function(t){r.status=fl.MESSAGE_STATUS.FAIL,as.warn("MessageController.createAudioMessage(), error:",t),r.triggerOperated()})),r.setElement(o),r}as.warn("createAudioMessage 目前只支持微信小程序发语音消息")}},{key:"createFaceMessage",value:function(t){t.currentUser=this.tim.context.identifier;var e=new Fp(t),i="string"==typeof t.payload?t.payload:t.payload.text,n=new Ip({text:i});return e.setElement(n),e}},{key:"_generateUUID",value:function(){var t=this.tim.context;return"".concat(t.SDKAppID,"-").concat(t.identifier,"-").concat(function(){for(var t="",e=32;e>0;--e)t+=ws[Math.floor(Math.random()*Ts)];return t}())}}]),e}(),og=function(){function t(e){ci(this,t),this.userID="",this.avatar="",this.nick="",this.role="",this.joinTime="",this.lastSendMsgTime="",this.nameCard="",this.muteUntil=0,this.memberCustomField=[],this._initMember(e)}return li(t,[{key:"_initMember",value:function(t){this.updateMember(t)}},{key:"updateMember",value:function(t){Cs(this,t,[],[null,void 0,"",0,NaN])}},{key:"updateRole",value:function(t){["Owner","Admin","Member"].indexOf(t)<0||(this.role=t)}},{key:"updateMemberCustomField",value:function(t){Cs(this.memberCustomField,t)}}]),t}(),ag=function(){function t(e){ci(this,t),this.tim=e.tim,this.groupController=e.groupController,this._initListeners()}return li(t,[{key:"_initListeners",value:function(){this.tim.innerEmitter.on(Ju.MESSAGE_GROUP_INSTANT_RECEIVED,this._onReceivedGroupTips,this)}},{key:"_onReceivedGroupTips",value:function(t){var e=this,i=t.data,n=i.result;i.isGroupTip&&n.forEach((function(t){switch(t.payload.operationType){case 1:e._onNewMemberComeIn(t);break;case 2:e._onMemberQuit(t);break;case 3:e._onMemberKickedOut(t);break;case 4:e._onMemberSetAdmin(t);break;case 5:e._onMemberCancelledAdmin(t);break;case 6:e._onGroupProfileModified(t);break;case 7:e._onMemberInfoModified(t);break;default:as.warn("GroupTipsHandler._onReceivedGroupTips Unhandled groupTips. operationType=",t.payload.operationType)}}))}},{key:"_onNewMemberComeIn",value:function(t){var e=0,i=t.payload.groupProfile.groupID,n=t.payload.userIDList;if(this.groupController.hasLocalGroupMemberMap(i))for(var r=0;r<n.length;r++){var o=n[0];if(!this.groupController.getLocalGroupMemberInfo(i,o)){e=1;break}}e&&this.groupController.updateGroupMemberList({groupID:i})}},{key:"_onMemberQuit",value:function(t){var e=t.payload.groupProfile.groupID;this.groupController._deleteLocalGroupMembers(e,t.payload.userIDList)}},{key:"_onMemberKickedOut",value:function(t){var e=t.payload.groupProfile.groupID;this.groupController._deleteLocalGroupMembers(e,t.payload.userIDList)}},{key:"_onMemberSetAdmin",value:function(t){var e=this,i=t.payload.groupProfile.groupID;t.payload.userIDList.forEach((function(t){var n=e.groupController.getLocalGroupMemberInfo(i,t);n&&n.updateRole(Ze.GRP_MBR_ROLE_ADMIN)}))}},{key:"_onMemberCancelledAdmin",value:function(t){var e=this,i=t.payload.groupProfile.groupID;t.payload.userIDList.forEach((function(t){var n=e.groupController.getLocalGroupMemberInfo(i,t);n&&n.updateRole(Ze.GRP_MBR_ROLE_MEMBER)}))}},{key:"_onGroupProfileModified",value:function(t){var e=this,i=t.payload.newGroupProfile,n=t.payload.groupProfile.groupID,r=this.groupController.getLocalGroupProfile(n);Object.keys(i).forEach((function(t){switch(t){case"ownerID":e._ownerChaged(r,i);break;default:r[t]=i[t]}})),this.groupController._emitGroupUpdate(1,1)}},{key:"_ownerChaged",value:function(t,e){var i=t.groupID,n=this.groupController.getLocalGroupProfile(i),r=this.tim.context.identifier;if(r===e.ownerID){n.updateGroup({selfInfo:{role:Ze.GRP_MBR_ROLE_OWNER}});var o=this.groupController.getLocalGroupMemberInfo(i,r),a=this.groupController.getLocalGroupProfile(i).ownerID,s=this.groupController.getLocalGroupMemberInfo(i,a);o&&o.updateRole(Ze.GRP_MBR_ROLE_OWNER),s&&s.updateRole(Ze.GRP_MBR_ROLE_MEMBER)}}},{key:"_onMemberInfoModified",value:function(t){var e=this,i=t.payload.groupProfile.groupID;t.payload.msgMemberInfo.forEach((function(t){var n=e.groupController.getLocalGroupMemberInfo(i,t.userAccount);n&&t.shutupTime&&(n.shutUpUntil=(Date.now()+1e3*t.shutupTime)/1e3)}))}}]),t}(),sg=function(){function t(e){ci(this,t),this.groupController=e.groupController,this.tim=e.tim,this._initLiceners()}return li(t,[{key:"_initLiceners",value:function(){this.tim.innerEmitter.on(Ju.MESSAGE_GROUP_SYSTEM_NOTICE_RECEIVED,this._onReceivedGroupSystemNotice,this)}},{key:"_onReceivedGroupSystemNotice",value:function(t){var e=this,i=t.data,n=i.result;"sync"!==i.type&&n.forEach((function(t){switch(t.payload.operationType){case 1:e._onApplyGroupRequest(t);break;case 2:e._onApplyGroupRequestAgreed(t);break;case 3:e._onApplyGroupRequestRefused(t);break;case 4:e._onMemberKicked(t);break;case 5:e._onGroupDismissed(t);break;case 6:break;case 7:e._onInviteGroup(t);break;case 8:e._onQuitGroup(t);break;case 9:e._onSetManager(t);break;case 10:e._onDeleteManager(t);break;case 11:case 12:case 15:break;case 255:e.tim.outerEmitter.emit(Qe.GROUP_SYSTEM_NOTICE_RECEIVED,{message:t,type:bl})}}))}},{key:"_onApplyGroupRequest",value:function(t){this.tim.outerEmitter.emit(Qe.GROUP_SYSTEM_NOTICE_RECEIVED,{message:t,type:gl})}},{key:"_onApplyGroupRequestAgreed",value:function(t){var e=t.payload.groupProfile.groupID;this.groupController.hasLocalGroup(e)||this.groupController.getGroupList(),this.tim.outerEmitter.emit(Qe.GROUP_SYSTEM_NOTICE_RECEIVED,{message:t,type:dl})}},{key:"_onApplyGroupRequestRefused",value:function(t){this.tim.outerEmitter.emit(Qe.GROUP_SYSTEM_NOTICE_RECEIVED,{message:t,type:ml})}},{key:"_onMemberKicked",value:function(t){var e=t.payload.groupProfile.groupID;this.groupController.hasLocalGroup(e)&&(this.groupController._deleteLocalGroup(e),this.tim.conversationController._deleteLocalConversation("GROUP".concat(e))),this.groupController._emitGroupUpdate(1,0),this.tim.outerEmitter.emit(Qe.GROUP_SYSTEM_NOTICE_RECEIVED,{message:t,type:vl})}},{key:"_onGroupDismissed",value:function(t){var e=t.payload.groupProfile.groupID;this.groupController._deleteLocalGroup(e),this.tim.conversationController._deleteLocalConversation("GROUP".concat(e)),this.groupController._emitGroupUpdate(1,0),this.tim.outerEmitter.emit(Qe.GROUP_SYSTEM_NOTICE_RECEIVED,{message:t,type:_l})}},{key:"_onInviteGroup",value:function(t){var e=t.payload.groupProfile.groupID;this.groupController.hasLocalGroup(e)||this.groupController.getGroupList(),this.tim.outerEmitter.emit(Qe.GROUP_SYSTEM_NOTICE_RECEIVED,{message:t,type:yl})}},{key:"_onQuitGroup",value:function(t){var e=t.payload.groupProfile.groupID;this.groupController.hasLocalGroup(e)&&(this.groupController._deleteLocalGroup(e),this.tim.conversationController._deleteLocalConversation("GROUP".concat(e)),this.groupController._emitGroupUpdate(1,0)),this.tim.outerEmitter.emit(Qe.GROUP_SYSTEM_NOTICE_RECEIVED,{message:t,type:Sl})}},{key:"_onSetManager",value:function(t){var e=t.payload.groupProfile,i=e.to,n=e.groupID,r=this.groupController.getLocalGroupMemberInfo(n,i);r&&r.updateRole(Ze.GRP_MBR_ROLE_ADMIN),this.tim.outerEmitter.emit(Qe.GROUP_SYSTEM_NOTICE_RECEIVED,{message:t,type:El})}},{key:"_onDeleteManager",value:function(t){var e=t.payload.groupProfile,i=e.to,n=e.groupID,r=this.groupController.getLocalGroupMemberInfo(n,i);r&&r.updateRole(Ze.GRP_MBR_ROLE_MEMBER),this.tim.outerEmitter.emit(Qe.GROUP_SYSTEM_NOTICE_RECEIVED,{message:t,type:Cl})}}]),t}(),cg=function(){function t(e){var i=e.tim,n=e.groupController;ci(this,t),this.tim=i,this.groupController=n,this.AVChatRoomLoop=null,this.key="",this.startSeq=1,this.errorCount=0,this.group={}}return li(t,[{key:"hasJoinedAVChatRoom",value:function(){return this.group&&!ds(this.group.groupID)?1:0}},{key:"checkJoinedAVChatRoomByID",value:function(t){return this.group||!ds(this.group.groupID)?t===this.group.groupID:0}},{key:"getJoinedAVChatRoom",value:function(){return this.hasJoinedAVChatRoom()?this.group:null}},{key:"_updateProperties",value:function(t){var e=this;Object.keys(t).forEach((function(i){e[i]=t[i]}))}},{key:"start",value:function(){var t={key:this.key,startSeq:this.startSeq};if(null===this.AVChatRoomLoop){var e=this.tim.notificationController.createPackage({name:"AVChatRoom",action:"startLongPoll",param:t});this.AVChatRoomLoop=this.tim.connectionController.createRunLoop({pack:e,before:this._updateRequestData.bind(this),success:this._handleSuccess.bind(this),fail:this._handleFailure.bind(this)}),this.AVChatRoomLoop.start()}else this.AVChatRoomLoop._stoped&&this.AVChatRoomLoop.start()}},{key:"stop",value:function(){null===this.AVChatRoomLoop||this.AVChatRoomLoop._stoped||(this.AVChatRoomLoop.abort(),this.AVChatRoomLoop.stop(),this.group={})}},{key:"applyJoinAVChatRoom",value:function(t){return this._checkBeforeJoinGroup(t),this.tim.context.a2Key&&this.tim.context.tinyID?this._joinWithAuth(t):this._joinWithoutAuth(t)}},{key:"_joinWithAuth",value:function(t){var e=this;return this.groupController.applyJoinGroup(t).then((function(i){return i.data.status===Ze.JOIN_STATUS_SUCCESS&&(e.tim.innerEmitter.emit(Ju.AVCHATROOM_JOIN_SUCCESS,{data:t.groupID}),e._updateProperties({key:i.data.longPollingKey,startSeq:1,group:i.data.group||{}}),e.groupController._updateGroupMap([i.data.group]),e.groupController._emitGroupUpdate(1,0),e.start()),i})).catch((function(t){return Promise.reject(t)}))}},{key:"_joinWithoutAuth",value:function(t){var e=this,i=this.groupController.createPackage({name:"group",action:"applyJoinAVChatRoom",param:t});return this.tim.connectionController.request(i).then((function(i){var n=i.data.longPollingKey;return as.log("AVChatRoomHandler.applyJoinAVChatRoom ok. groupID:",t.groupID),e.tim.innerEmitter.emit(Ju.AVCHATROOM_JOIN_SUCCESS,{data:t.groupID}),e._updateProperties({key:n,startSeq:1,group:e.groupController.getLocalGroupProfile(t.groupID)}),e.start(),new Ol({status:ll.SUCCESS,group:e.groupController.getLocalGroupProfile(t.groupID)})})).catch((function(e){return as.error("AVChatRoomHandler.applyJoinAVChatRoom error:".concat(e.message,". groupID:").concat(t.groupID)),kl(e)}))}},{key:"_checkBeforeJoinGroup",value:function(t){if(this.hasJoinedAVChatRoom()){if(t.groupID===this.group.groupID)return;this.group.selfInfo.role===Ze.GRP_MBR_ROLE_OWNER||this.group.ownerID===this.tim.loginInfo.identifier?(this.groupController._deleteLocalGroup(this.group.groupID),this.tim.conversationController._deleteLocalConversation("GROUP".concat(this.group.groupID)),this.groupController._emitGroupUpdate(1,0)):this.groupController.quitGroup(this.group.groupID)}null!==this.AVChatRoomLoop&&!this.AVChatRoomLoop._stoped&&this.stop()}},{key:"_updateRequestData",value:function(t){t.StartSeq=this.startSeq,t.Key=this.key}},{key:"_handleSuccess",value:function(t){this.startSeq=t.data.nextSeq,this.key=t.data.key,Array.isArray(t.data.rspMsgList)&&t.data.rspMsgList.forEach((function(t){t.to=t.groupID})),t.data.rspMsgList&&t.data.rspMsgList.length>0&&this.tim.notificationController._eachEventArray(t.data.rspMsgList)}},{key:"_handleFailure",value:function(t){t.error&&(this.errorCount++,this.errorCount>=5&&(this.stop(),this.errorCount=0),this.tim.innerEmitter.emit(Ju.ERROR_DETECTED,t.error))}}]),t}(),ug=function(t){function e(t){var i;return ci(this,e),(i=Si(this,di(e).call(this,t))).groupMap=new Map,i.groupMemberListMap=new Map,i.hasLocalGroupList=0,i.groupNoticeHandler=new sg({tim:t,groupController:yi(i)}),i.groupTipsHandler=new ag({tim:t,groupController:yi(i)}),i.AVChatRoomHandler=new cg({tim:t,groupController:yi(i)}),i._initListeners(),i}return gi(e,cl),li(e,[{key:"createGroup",value:function(t){var e=this;if(!["Public","Private","ChatRoom","AVChatRoom"].includes(t.type)){var i=new qu({code:$u.ILLEGAL_GROUP_TYPE,message:ju.ILLEGAL_GROUP_TYPE});return kl(i)}Ls(t.type)&&!ds(t.memberList)&&t.memberList.length>0&&(as.warn("GroupController.createGroup 创建AVChatRoom时不能添加群成员，自动忽略该字段"),t.memberList=void 0),Ms(t.type)||ds(t.joinOption)||(as.warn("GroupController.createGroup 创建Private/ChatRoom/AVChatRoom群时不能设置字段：joinOption，自动忽略该字段"),t.joinOption=void 0);var n=this.createPackage({name:"group",action:"create",param:t});return as.log("GroupController.createGroup."),this.tim.connectionController.request(n).then((function(i){if(as.log("GroupController.createGroup ok. groupID:",i.data.groupID),t.type===Ze.GRP_AVCHATROOM)return e.getGroupProfile({groupID:i.data.groupID});e._updateGroupMap([pi({},t,{groupID:i.data.groupID})]);var n=e.tim.createCustomMessage({to:i.data.groupID,conversationType:Ze.CONV_GROUP,payload:{data:"group_create",extension:"".concat(e.tim.context.identifier,"创建群组")}});return e.tim.sendMessage(n),e._emitGroupUpdate(),e.getGroupProfile({groupID:i.data.groupID})})).then((function(t){var e=t.data.group;return e.selfInfo.messageRemindType=Ze.MSG_REMIND_ACPT_AND_NOTE,e.selfInfo.role=Ze.GRP_MBR_ROLE_OWNER,t})).catch((function(t){return as.error("GroupController.createGroup error:",t),kl(t)}))}},{key:"joinGroup",value:function(t){if(this.hasLocalGroup(t.groupID)){var e={status:Ze.JOIN_STATUS_ALREADY_IN_GROUP};return Rl(e)}if(t.type===Ze.GRP_PRIVATE){var i=new qu({code:$u.CANNOT_JOIN_PRIVATE,message:ju.CANNOT_JOIN_PRIVATE});return this.tim.innerEmitter.emit(Ju.ERROR_DETECTED,i),kl(i)}return as.log("GroupController.joinGroup. groupID:",t.groupID),t.type===Ze.GRP_AVCHATROOM?this.applyJoinAVChatRoom(t):this.applyJoinGroup(t)}},{key:"quitGroup",value:function(t){var e=this;this.AVChatRoomHandler.group.groupID===t&&this.AVChatRoomHandler.stop();var i=this.createPackage({name:"group",action:"quitGroup",param:{groupID:t}});return as.log("GroupController.quitGroup. groupID:",t),this.tim.connectionController.request(i).then((function(){return as.log("GroupController.quitGroup ok. groupID:",t),e._deleteLocalGroup(t),e.tim.conversationController._deleteLocalConversation("GROUP".concat(t)),e._emitGroupUpdate(1,0),new Ol({groupID:t})})).catch((function(e){return as.error("GroupController.quitGroup error.  error:".concat(e,". groupID:").concat(t)),kl(e)}))}},{key:"changeGroupOwner",value:function(t){var e=this;if(this.hasLocalGroup(t.groupID)&&this.getLocalGroupProfile(t.groupID).type===Ze.GRP_AVCHATROOM)return kl(new qu({code:$u.CANNOT_CHANGE_OWNER_IN_AVCHATROOM,message:ju.CANNOT_CHANGE_OWNER_IN_AVCHATROOM}));if(t.newOwnerID===this.tim.loginInfo.identifier)return kl(new qu({code:$u.CANNOT_CHANGE_OWNER_TO_SELF,message:ju.CANNOT_CHANGE_OWNER_TO_SELF}));var i=this.createPackage({name:"group",action:"changeGroupOwner",param:t});return as.log("GroupController.changeGroupOwner. groupID:",t.groupID),this.tim.connectionController.request(i).then((function(){as.log("GroupController.changeGroupOwner ok. groupID:",t.groupID);var i=t.groupID,n=t.newOwnerID;e.groupMap.get(i).ownerID=n;var r=e.groupMemberListMap.get(i);if(r instanceof Map){var o=r.get(e.tim.loginInfo.identifier);ds(o)||(o.updateRole("Member"),e.groupMap.get(i).selfInfo.role="Member");var a=r.get(n);ds(a)||a.updateRole("Owner")}return e._emitGroupUpdate(1,0),new Ol({group:e.groupMap.get(i)})})).catch((function(e){return as.error("GroupController.changeGroupOwner error:".concat(e,". groupID:").concat(t.groupID)),kl(e)}))}},{key:"dismissGroup",value:function(t){var e=this;if(this.hasLocalGroup(t)&&this.getLocalGroupProfile(t).type===Ze.GRP_PRIVATE)return kl(new qu({code:$u.CANNOT_DISMISS_PRIVATE,message:ju.CANNOT_DISMISS_PRIVATE}));var i=this.createPackage({name:"group",action:"destroyGroup",param:{groupID:t}});return as.log("GroupController.dismissGroup. groupID:".concat(t)),this.tim.connectionController.request(i).then((function(){return as.log("GroupController.dismissGroup ok. groupID:".concat(t)),e._deleteLocalGroup(t),e.tim.conversationController._deleteLocalConversation("GROUP".concat(t)),e._emitGroupUpdate(1,0),new Ol({groupID:t})})).catch((function(e){return as.error("GroupController.dismissGroup error:".concat(e,". groupID:").concat(t)),kl(e)}))}},{key:"updateGroupProfile",value:function(t){var e=this;!this.hasLocalGroup(t.groupID)||Ms(this.getLocalGroupProfile(t.groupID).type)||ds(t.joinOption)||(as.warn("GroupController.modifyGroup: Private/ChatRoom/AVChatRoom群不能设置字段：joinOption，自动忽略该字段"),t.joinOption=void 0);var i=this.createPackage({name:"group",action:"updateGroupProfile",param:t});return as.log("GroupController.modifyGroup. groupID:",t.groupID),this.tim.connectionController.request(i).then((function(){return as.log("GroupController.modifyGroup ok. groupID:",t.groupID),e.hasLocalGroup(t.groupID)&&(e.groupMap.get(t.groupID).updateGroup(t),e._setLocalGroupList(e.groupMap)),new Ol({group:e.groupMap.get(t.groupID)})})).catch((function(e){return as.log("GroupController.modifyGroup error. error:".concat(e," groupID:").concat(t.groupID)),kl(e)}))}},{key:"setGroupMemberRole",value:function(t){var e=this,i=this.groupMap.get(t.groupID);if(i.selfInfo.role!==Ze.GRP_MBR_ROLE_OWNER)return kl(new qu({code:$u.NOT_OWNER,message:ju.NOT_OWNER}));if([Ze.GRP_PRIVATE,Ze.GRP_AVCHATROOM].includes(i.type))return kl(new qu({code:$u.CANNOT_SET_MEMBER_ROLE_IN_PRIVATE_AND_AVCHATROOM,message:ju.CANNOT_SET_MEMBER_ROLE_IN_PRIVATE_AND_AVCHATROOM}));if([Ze.GRP_MBR_ROLE_ADMIN,Ze.GRP_MBR_ROLE_MEMBER].indexOf(t.role)<0)return kl(new qu({code:$u.INVALID_MEMBER_ROLE,message:ju.INVALID_MEMBER_ROLE}));if(t.userID===this.tim.loginInfo.identifier)return kl(new qu({code:$u.CANNOT_SET_SELF_MEMBER_ROLE,message:ju.CANNOT_SET_SELF_MEMBER_ROLE}));as.log("GroupController.setGroupMemberRole. groupID:".concat(t.groupID,". userID: ").concat(t.userID));var n=t.groupID,r=t.userID,o=t.role;return this._modifyGroupMemberInfo({groupID:n,userID:r,role:o}).then((function(){as.log("GroupController.setGroupMemberRole ok. groupID:".concat(t.groupID,". userID: ").concat(t.userID));var i=e.groupMemberListMap.get(t.groupID);return void 0!==i&&void 0!==i.get(t.userID)&&i.get(t.userID).updateRole(t.role),new Ol({group:e.groupMap.get(t.groupID)})})).catch((function(e){return as.error("GroupController.setGroupMemberRole error:".concat(e,". groupID:").concat(t.groupID,". userID:").concat(t.userID)),kl(e)}))}},{key:"setGroupMemberMuteTime",value:function(t){var e=this;as.log("GroupController.setGroupMemberMuteTime. groupID:".concat(t.groupID,". userID: ").concat(t.userID));var i=t.groupID,n=t.userID,r=t.muteTime;return this._modifyGroupMemberInfo({groupID:i,userID:n,muteTime:r}).then((function(){return as.log("GroupController.setGroupMemberMuteTime ok. groupID:".concat(t.groupID,". userID: ").concat(t.userID)),e.updateGroupMemberList({groupID:i})})).then((function(){return new Ol({group:e.groupMap.get(t.groupID)})})).catch((function(e){return as.error("GroupController.setGroupMemberMuteTime error:".concat(e,". groupID:").concat(t.groupID,". userID:").concat(t.userID)),kl(e)}))}},{key:"setMessageRemindType",value:function(t){var e=this;as.log("GroupController.setMessageRemindType. groupID:".concat(t.groupID,". userID: ").concat(t.userID||this.tim.loginInfo.identifier));var i=t.groupID,n=t.messageRemindType;return this._modifyGroupMemberInfo({groupID:i,messageRemindType:n,userID:this.tim.loginInfo.identifier}).then((function(){as.log("GroupController.setMessageRemindType ok. groupID:".concat(t.groupID,". userID: ").concat(t.userID||e.tim.loginInfo.identifier));var i=e.groupMap.get(t.groupID);return i.selfInfo.messageRemindType=n,new Ol({group:i})})).catch((function(i){return as.error("GroupController.setMessageRemindType error:".concat(i,". groupID:").concat(t.groupID,". userID:").concat(t.userID||e.tim.loginInfo.identifier)),kl(i)}))}},{key:"setGroupMemberNameCard",value:function(t){var e=this;as.log("GroupController.setGroupMemberNameCard. groupID:".concat(t.groupID,". userID: ").concat(t.userID||this.tim.loginInfo.identifier));var i=t.groupID,n=t.userID,r=void 0===n?this.tim.loginInfo.identifier:n,o=t.nameCard;return this._modifyGroupMemberInfo({groupID:i,userID:r,nameCard:o}).then((function(){as.log("GroupController.setGroupMemberNameCard ok. groupID:".concat(t.groupID,". userID: ").concat(t.userID||e.tim.loginInfo.identifier));var n=e.groupMemberListMap.get(i);return void 0!==n&&void 0!==n.get(r)&&n.get(r).updateMember({nameCard:o}),r===e.tim.loginInfo.identifier&&e.hasLocalGroup(i)&&(e.getLocalGroupProfile(i).selfInfo.nameCard=o),new Ol({group:e.groupMap.get(i)})})).catch((function(i){return as.error("GroupController.setGroupMemberNameCard error:".concat(i,". groupID:").concat(t.groupID,". userID:").concat(t.userID||e.tim.loginInfo.identifier)),kl(i)}))}},{key:"setGroupMemberCustomField",value:function(t){var e=this;as.log("GroupController.setGroupMemberCustomField. groupID:".concat(t.groupID,". userID: ").concat(t.userID||this.tim.loginInfo.identifier));var i=t.groupID,n=t.userID,r=t.memberCustomField;return this._modifyGroupMemberInfo({groupID:i,userID:n||this.tim.loginInfo.identifier,memberCustomField:r}).then((function(){return as.log("GroupController.setGroupMemberCustomField ok. groupID:".concat(t.groupID,". userID: ").concat(t.userID||e.tim.loginInfo.identifier)),e.groupMemberListMap.has(i)&&e.groupMemberListMap.get(i).has(n)&&e.groupMemberListMap.get(i).get(n).updateMemberCustomField(r),new Ol({group:e.groupMap.get(i)})})).catch((function(i){return as.error("GroupController.setGroupMemberCustomField error:".concat(i,". groupID:").concat(t.groupID,". userID:").concat(t.userID||e.tim.loginInfo.identifier)),kl(i)}))}},{key:"getGroupList",value:function(t){var e=this;as.log("GroupController.getGroupList");var i={introduction:"Introduction",notification:"Notification",createTime:"CreateTime",ownerID:"Owner_Account",lastInfoTime:"LastInfoTime",memberNum:"MemberNum",maxMemberNum:"MaxMemberNum",joinOption:"ApplyJoinOption"},n=["Type","Name","FaceUrl","NextMsgSeq","LastMsgTime"];t&&t.groupProfileFilter&&t.groupProfileFilter.forEach((function(t){i[t]&&n.push(i[t])}));var r=this.createPackage({name:"group",action:"list",param:{responseFilter:{groupBaseInfoFilter:n,selfInfoFilter:["Role","JoinTime","MsgFlag"]}}});return this.tim.connectionController.request(r).then((function(t){var i=t.data.groups;return as.log("GroupController.getGroupList ok"),e._groupListTreeShaking(i),e._updateGroupMap(i),e.hasLocalGroupList=1,e.tempConversationList&&(e._handleUpdateGroupLastMessage(e.tempConversationList),e.tempConversationList=null),e._emitGroupUpdate(),new Ol({groupList:e.getLocalGroups()})})).catch((function(t){return as.error("GroupController.getGroupList error: ",t),kl(t)}))}},{key:"getGroupMemberList",value:function(t){var e=this,i=t.groupID,n=t.offset,r=void 0===n?0:n,o=t.count,a=void 0===o?15:o;as.log("GroupController.getGroupMemberList groupID: ".concat(i," offset: ").concat(r," count: ").concat(a));var s=this.createPackage({name:"group",action:"getGroupMemberList",param:{groupID:i,offset:r,limit:a>100?100:a,memberInfoFilter:["Account","Role","JoinTime","LastSendMsgTime","NameCard","ShutUpUntil"]}}),c=[];return this.connectionController.request(s).then((function(t){var n=t.data,r=n.members,o=n.memberNum;return gs(r)&&0!==r.length?(e.hasLocalGroup(i)&&(e.getLocalGroupProfile(i).memberNum=o),c=e._updateLocalGroupMemberList(i,r),e.tim.getUserProfile({userIDList:r.map((function(t){return t.userID}))})):Promise.resolve([])})).then((function(t){var n=t.data;if(!gs(n)||0===n.length)return Rl({memberList:[]});var r=n.map((function(t){return{userID:t.userID,nick:t.nick,avatar:t.avatar}}));return e._updateLocalGroupMemberList(i,r),as.log("GroupController.getGroupMemberList ok."),new Ol({memberList:c})})).catch((function(t){return as.error("GroupController.getGroupMemberList error: ",t),kl(t)}))}},{key:"getLocalGroups",value:function(){return Ci(this.groupMap.values())}},{key:"getLocalGroupProfile",value:function(t){return this.groupMap.get(t)}},{key:"hasLocalGroup",value:function(t){return this.groupMap.has(t)}},{key:"getLocalGroupMemberInfo",value:function(t,e){return this.groupMemberListMap.has(t)?this.groupMemberListMap.get(t).get(e):0}},{key:"hasLocalGroupMember",value:function(t,e){return this.groupMemberListMap.has(t)&&this.groupMemberListMap.get(t).has(e)}},{key:"hasLocalGroupMemberMap",value:function(t){return this.groupMemberListMap.has(t)}},{key:"getGroupProfile",value:function(t){var e=this;as.log("GroupController.getGroupProfile. groupID:",t.groupID);var i=t.groupID,n=t.groupCustomFieldFilter,r=t.memberCustomFieldFilter,o={groupIDList:[i],responseFilter:{groupBaseInfoFilter:["Type","Name","Introduction","Notification","FaceUrl","Owner_Account","CreateTime","InfoSeq","LastInfoTime","LastMsgTime","MemberNum","MaxMemberNum","ApplyJoinOption","NextMsgSeq"],groupCustomFieldFilter:n,memberCustomFieldFilter:r}};return this.getGroupProfileAdvance(o).then((function(n){var r=n.data,o=r.successGroupList,a=r.failureGroupList;return as.log("GroupController.getGroupProfile ok. groupID:",t.groupID),a.length>0?kl(a[0]):o[0].type!==Ze.GRP_AVCHATROOM||e.AVChatRoomHandler.checkJoinedAVChatRoomByID(t.groupID)?(e._updateGroupMap(o,1),e._emitGroupUpdate(1,0),new Ol({group:e.groupMap.get(i)})):new Ol({group:new jp(o[0])})})).catch((function(e){return as.error("GroupController.getGroupProfile error:".concat(e,". groupID:").concat(t.groupID)),kl(e)}))}},{key:"addGroupMember",value:function(t){var e=this,i=this.getLocalGroupProfile(t.groupID);if(Ls(i.type)){var n=new qu({code:$u.CANNOT_ADD_MEMBER_IN_AVCHATROOM,message:ju.CANNOT_ADD_MEMBER_IN_AVCHATROOM});return kl(n)}t.userIDList=t.userIDList.map((function(t){return{userID:t}}));var r=this.createPackage({name:"group",action:"addGroupMember",param:t});return as.log("GroupController.addGroupMember. groupID:",t.groupID),this.connectionController.request(r).then((function(n){var r=n.data.members;as.log("GroupController.addGroupMember ok. groupID:",t.groupID);var o=r.filter((function(t){return 1===t.result})).map((function(t){return t.userID})),a=r.filter((function(t){return 0===t.result})).map((function(t){return t.userID})),s=r.filter((function(t){return 2===t.result})).map((function(t){return t.userID}));return 0===o.length?new Ol({successUserIDList:o,failureUserIDList:a,existedUserIDList:s}):(e.updateGroupMemberList(t),new Ol({successUserIDList:o,failureUserIDList:a,existedUserIDList:s,group:i}))})).catch((function(e){return as.error("GroupController.addGroupMember error:".concat(e,", groupID:").concat(t.groupID)),kl(e)}))}},{key:"deleteGroupMember",value:function(t){var e=this;as.log("GroupController.deleteGroupMember groupID:".concat(t.groupID," userIDList:").concat(t.userIDList));var i=this.groupMap.get(t.groupID);if(i.type===Ze.GRP_AVCHATROOM)return kl(new qu({code:$u.CANNOT_KICK_MEMBER_IN_AVCHATROOM,message:ju.CANNOT_KICK_MEMBER_IN_AVCHATROOM}));var n=this.createPackage({name:"group",action:"deleteGroupMember",param:t});return this.connectionController.request(n).then((function(){return as.log("GroupController.deleteGroupMember ok"),e._deleteLocalGroupMembers(t.groupID,t.userIDList),e._emitGroupUpdate(),new Ol({group:i,userIDList:t.userIDList})})).catch((function(e){return as.error("GroupController.deleteGroupMember error:".concat(e.code,", groupID:").concat(t.groupID)),kl(e)}))}},{key:"searchGroupByID",value:function(t){var e={groupIDList:[t]},i=this.createPackage({name:"group",action:"searchGroupByID",param:e});return as.log("GroupController.searchGroupByID. groupID:".concat(t)),this.connectionController.request(i).then((function(e){var i=e.data.groupProfile;if(as.log("GroupController.searchGroupByID ok. groupID:".concat(t)),i[0].errorCode!==fl.REQUEST.SUCCESS)throw new qu({code:i[0].errorCode,message:i[0].errorInfo});return new Ol({group:new jp(i[0])})})).catch((function(e){return as.error("GroupController.searchGroupByID error:".concat(e,", groupID:").concat(t)),kl(e)}))}},{key:"applyJoinGroup",value:function(t){var e=this,i=this.createPackage({name:"group",action:"applyJoinGroup",param:t});return this.connectionController.request(i).then((function(i){var n=i.data,r=n.joinedStatus,o=n.longPollingKey;switch(as.log("GroupController.joinGroup ok. groupID:",t.groupID),r){case ll.WAIT_APPROVAL:return new Ol({status:ll.WAIT_APPROVAL});case ll.SUCCESS:return e.getGroupProfile({groupID:t.groupID}).then((function(t){var e={status:ll.SUCCESS,group:t.data.group};return ds(o)||(e.longPollingKey=o),new Ol(e)}));default:var a=new qu({code:$u.JOIN_GROUP_FAIL,message:ju.JOIN_GROUP_FAIL});return as.error("GroupController.joinGroup error:".concat(a,". groupID:").concat(t.groupID)),kl(a)}})).catch((function(e){return as.error("GroupController.joinGroup error:".concat(e,". groupID:").concat(t.groupID)),kl(e)}))}},{key:"applyJoinAVChatRoom",value:function(t){return this.AVChatRoomHandler.applyJoinAVChatRoom(t)}},{key:"handleGroupApplication",value:function(t){var e=this,i=t.message.payload,n=i.groupProfile.groupID,r=i.authentication,o=i.messageKey,a=i.operatorID,s=this.createPackage({name:"group",action:"handleApplyJoinGroup",param:pi({},t,{applicant:a,groupID:n,authentication:r,messageKey:o})});return as.log("GroupController.handleApplication. groupID:",n),this.connectionController.request(s).then((function(){return as.log("GroupController.handleApplication ok. groupID:",n),e.updateGroupMemberList({groupID:n})})).then((function(t){return new Ol({group:t})})).catch((function(t){return as.error("GroupController.handleApplication error.  error:".concat(t,". groupID:").concat(n)),kl(t)}))}},{key:"deleteGroupSystemNotice",value:function(t){if(!gs(t.messageList)||0===t.messageList.length)return Rl();as.log("GroupController.deleteGroupSystemNotice "+t.messageList.map((function(t){return t.ID})));var e=this.createPackage({name:"group",action:"deleteGroupSystemNotice",param:{messageListToDelete:t.messageList.map((function(t){return{from:Ze.CONV_SYSTEM,messageSeq:t.clientSequence,messageRandom:t.random}}))}});return this.connectionController.request(e).then((function(){return as.log("GroupController.deleteGroupSystemNotice ok"),new Ol})).catch((function(t){return as.error("GroupController.deleteGroupSystemNotice error:",t),kl(t)}))}},{key:"updateGroupMemberList",value:function(t){var e=this,i=t.groupID,n=t.memberCustomFieldFilter,r=t.memberInfoFilter,o={groupIDList:[i],responseFilter:{memberInfoFilter:r||["Account","Role","JoinTime","LastSendMsgTime","NameCard","ShutUpUntil"],memberCustomFieldFilter:n}};return this.getGroupProfileAdvance(o).then((function(t){var n=t.data,r=n.successGroupList,o=n.failureGroupList;if(o.length>0)return kl(o[0]);var a=[];return e._updateLocalGroupMemberList(r[0].groupID,r[0].members),e.groupMemberListMap.get(i).forEach((function(t){var e=t.userID;a.push(e)})),e.tim.getUserProfile({userIDList:a,tagList:["Tag_Profile_IM_Nick","Tag_Profile_IM_Image"]})})).then((function(t){var n=t.data.map((function(t){return{userID:t.userID,nick:t.nick,avatar:t.avatar}}));return e._updateLocalGroupMemberList(i,n),e._emitGroupUpdate(),e.groupMap.get(i)}))}},{key:"getLocalGroupLastSequence",value:function(t){if(!this.groupMap.has(t))return 0;var e=this.groupMap.get(t);return e.lastMessage.lastSequence?e.lastMessage.lastSequence:e.nextMessageSeq-1}},{key:"getGroupProfileAdvance",value:function(t){gs(t.groupIDList)&&t.groupIDList.length>50&&(as.warn("GroupController.getGroupProfileAdvance 获取群资料的数量不能超过50个"),t.groupIDList.length=50),as.log("GroupController.getGroupProfileAdvance. groupIDList:",t.groupIDList);var e=this.createPackage({name:"group",action:"query",param:t});return this.tim.connectionController.request(e).then((function(t){as.log("GroupController.getGroupProfileAdvance ok.");var e=t.data.groups,i=e.filter((function(t){return ds(t.errorCode)||t.errorCode===fl.REQUEST.SUCCESS})),n=e.filter((function(t){return t.errorCode&&t.errorCode!==fl.REQUEST.SUCCESS})).map((function(t){return new qu({code:Number("500".concat(t.errorCode)),message:t.errorInfo,data:{groupID:t.groupID}})}));return new Ol({successGroupList:i,failureGroupList:n})})).catch((function(e){return as.error("GroupController.getGroupProfile error:".concat(e,". groupID:").concat(t.groupID)),kl(e)}))}},{key:"_deleteLocalGroup",value:function(t){return this.groupMap.delete(t),this.groupMemberListMap.delete(t),this._setLocalGroupList(this.groupMap),this.groupMap.has(t)&&this.groupMemberListMap.has(t)}},{key:"_initGroupList",value:function(){var t=this;as.time($l),as.log("GroupController._initGroupList"),this.hasLocalGroupList=this._hasLocalGroupList(),this.hasLocalGroupList&&(this._getLocalGroups().forEach((function(e){t.groupMap.set(e[0],new jp(e[1]))})),this._emitGroupUpdate(1,0)),this.triggerReady(),as.log("GroupController._initGroupList ok. initCost=".concat(as.timeEnd($l),"ms")),this.getGroupList()}},{key:"_initListeners",value:function(){var t=this.tim.innerEmitter;t.once(Ju.CONTEXT_A2KEY_AND_TINYID_UPDATED,this._initGroupList,this),t.on(Ju.CONVERSATION_LIST_UPDATED,this._handleUpdateGroupLastMessage,this),t.on(Ju.MESSAGE_GROUP_INSTANT_RECEIVED,this._handleReceivedGroupMessage,this),t.on(Ju.PROFILE_UPDATED,this._handleProfileUpdated,this)}},{key:"_emitGroupUpdate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.getLocalGroups();e&&this.tim.innerEmitter.emit(Ju.GROUP_LIST_UPDATED,i),t&&this.tim.outerEmitter.emit(Qe.GROUP_LIST_UPDATED,i)}},{key:"_handleReceivedGroupMessage",value:function(t){var e=this,i=t.data.eventDataList;Array.isArray(i)&&i.forEach((function(t){var i=t.conversationID.replace(Ze.CONV_GROUP,"");e.groupMap.has(i)&&(e.groupMap.get(i).nextMessageSeq=t.lastMessage.sequence+1)}))}},{key:"_onReceivedGroupSystemNotice",value:function(t){var e=t.data;this.groupNoticeHandler._onReceivedGroupNotice(e)}},{key:"_handleUpdateGroupLastMessage",value:function(t){if(this.hasLocalGroupList){for(var e=0,i=0;i<t.length;i++){var n=t[i],r=n.type===Ze.CONV_GROUP;if(n.conversationID&&r){var o=n.conversationID.split(/^GROUP/)[1],a=this.getLocalGroupProfile(o);a&&(a.lastMessage=n.lastMessage,e=1)}}e&&(this.groupMap=this._sortLocalGroupList(this.groupMap),this._emitGroupUpdate(1,0))}else this.tempConversationList=t}},{key:"_sortLocalGroupList",value:function(t){var e=Ci(t).filter((function(t){var e=Ei(t,2);return e[0],!Ps(e[1].lastMessage)}));return e.sort((function(t,e){return e[1].lastMessage.lastTime-t[1].lastMessage.lastTime})),new Map([].concat(Ci(e),Ci(t)))}},{key:"_getLocalGroups",value:function(){return this.tim.storage.getItem("groupMap")}},{key:"_hasLocalGroupList",value:function(){var t=this.tim.storage.getItem("groupMap");return null!==t&&0!==t.length}},{key:"_setLocalGroupList",value:function(t){var e=[];t.forEach((function(t,i){var n=t.name,r=t.avatar,o=t.type;e.push([i,{groupID:i,name:n,avatar:r,type:o}])})),this.tim.storage.setItem("groupMap",e)}},{key:"_updateGroupMap",value:function(t){var e=this;t.forEach((function(t){e.groupMap.has(t.groupID)?e.groupMap.get(t.groupID).updateGroup(t):e.groupMap.set(t.groupID,new jp(t))})),this._setLocalGroupList(this.groupMap)}},{key:"_updateLocalGroupMemberList",value:function(t,e){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!e)return[];var r=this.groupMemberListMap.has(t)&&0==n?this.groupMemberListMap.get(t):new Map,o=e.map((function(e){if(e.userID===i.tim.context.identifier){var n=[null,void 0,"",0,NaN],o={role:e.role,joinTime:e.joinTime,nameCard:e.nameCard};Cs(i.groupMap.get(t).selfInfo,o,[],n)}return r.has(e.userID)?r.get(e.userID).updateMember(e):r.set(e.userID,new og(e)),r.get(e.userID)}));return this.groupMemberListMap.set(t,r),o}},{key:"_deleteLocalGroupMembers",value:function(t,e){var i=this.groupMemberListMap.get(t);void 0!==i&&(e.forEach((function(t){i.delete(t)})),this.groupMap.get(t).memberList=Ci(i.values()))}},{key:"_modifyGroupMemberInfo",value:function(t){var e=this.createPackage({name:"group",action:"modifyGroupMemberInfo",param:t});return this.tim.connectionController.request(e)}},{key:"_groupListTreeShaking",value:function(t){for(var e=new Map(Ci(this.groupMap)),i=0,n=t.length;i<n;i++)e.delete(t[i].groupID);this.AVChatRoomHandler.hasJoinedAVChatRoom()&&e.delete(this.AVChatRoomHandler.group.groupID);for(var r=Ci(e.keys()),o=0,a=r.length;o<a;o++)this.groupMap.delete(r[o])}},{key:"_handleProfileUpdated",value:function(t){for(var e=this,i=t.data,n=function(t){var n=i[t];e.groupMemberListMap.forEach((function(t){t.has(n.userID)&&t.get(n.userID).updateMember({nick:n.nick,avatar:n.avatar})}))},r=0;r<i.length;r++)n(r)}},{key:"getJoinedAVChatRoom",value:function(){return this.AVChatRoomHandler.getJoinedAVChatRoom()}},{key:"reset",value:function(){this.groupMap.clear(),this.groupMemberListMap.clear(),this.hasLocalGroupList=0,this.resetReady(),this.tim.innerEmitter.once(Ju.CONTEXT_A2KEY_AND_TINYID_UPDATED,this._initGroupList,this)}}]),e}(),lg=function(){for(var t=[],e=fg(arguments),i=0;i<arguments.length;i++)Number.isInteger(arguments[i])?t.push(arguments[i]):t.push(1==!!arguments[i]?"1":"0");return t.join(e)},fg=function(t){var e=t.length,i=t[e-1];if("string"!=typeof i)return"";if(i.length>1)return"";var n=t[e-1];return delete t[e-1],t.length-=e===t.length?1:0,n},hg=function(t){function e(t){var i;return ci(this,e),(i=Si(this,di(e).call(this,t)))._initializeMembers(),i._initializeStatus(),i._initializeListener(),i}return gi(e,cl),li(e,[{key:"_initializeMembers",value:function(){this.normalTimeout=300,this.realtimeNoticeTimeout=11e4,this.channelMaxTimeout=3e5,this._memoryUsed=0,this._memoryUsedThreshold=.9,this._onMemoryWarning=null}},{key:"_initializeStatus",value:function(){this._initializeAccountStatus(),this._initializeChannelStatus()}},{key:"_initializeAccountStatus",value:function(){this.accountStatus={lastSignInTime:0,status:fl.ACCOUNT_STATUS.SIGN_OUT}}},{key:"_initializeChannelStatus",value:function(){this.channelStatus={startTime:0,offlineTime:0,failCount:0,lastRequestTime:0,lastJitterTime:0,jitterCount:0,jitters:[],status:fl.CHANNEL_STATUS.OFFLINE}}},{key:"_onMemoryRunningLow",value:function(t){as.warn("memory running low : ",t)}},{key:"getChannelStatus",value:function(){return this.channelStatus.status}},{key:"_channelStatusJittersUpdate",value:function(t){this.channelStatus.jitterCount++,this.channelStatus.lastJitterTime=t,this.channelStatus.jitters.push(t),this.channelStatus.jitters.length>5&&this.channelStatus.jitters.pop()}},{key:"_initializeListener",value:function(){var t=this.tim.innerEmitter;t.on(Ju.NOTICE_LONGPOLL_START,this._onChannelStart,this),t.on(Ju.NOTICE_LONGPOLL_REQUEST_ARRIVED,this._onChannelRequestSuccess,this),t.on(Ju.NOTICE_LONGPOLL_REQUEST_NOT_ARRIVED,this._onChannelFail,this)}},{key:"_onChannelStart",value:function(){this.channelStatus.startTime=+new Date,this.channelStatus.status=fl.CHANNEL_STATUS.ONLINE}},{key:"_getMemoryUsed",value:function(){var t="disabled",e=0;return"undefined"!=typeof window&&void 0!==window.performance&&(e=window.performance.memory.usedJSHeapSize/window.performance.memory.jsHeapSizeLimit,this._memoryUsed=e,t=[Math.round(1e5*this._memoryUsed)/1e3,"%"].join("")),t}},{key:"_onChannelRequestSuccess",value:function(){var t=this.tim,e=t.innerEmitter,i=t.outerEmitter,n=Date.now(),r=n-(this.channelStatus.lastRequestTime>0?this.channelStatus.lastRequestTime:Date.now()+100),o=lg(r<this.realtimeNoticeTimeout,r<this.channelMaxTimeout);switch(this.channelStatus.status=fl.CHANNEL_STATUS.ONLINE,this.channelStatus.failCount=0,o){case"11":break;case"01":e.emit(Ju.NOTICE_LONGPOLL_SOON_RECONNECT),i.emit(Qe.NOTICE_LONGPOLL_RECONNECT);break;case"00":e.emit(Ju.NOTICE_LONGPOLL_LONG_RECONNECT)}this.channelStatus.lastRequestTime=n}},{key:"_onChannelFail",value:function(t){var e=this.tim.innerEmitter,i=Date.now();this.channelStatus.status=fl.CHANNEL_STATUS.OFFLINE;var n=i-(0===this.channelStatus.offlineTime?this.channelStatus.lastRequestTime:this.channelStatus.offlineTime);this.channelStatus.offlineTime=i,this.channelStatus.failCount++,as.log("_onChannelFail count : ".concat(this.channelStatus.failCount,"  time diff: ").concat(n,";")),this.channelStatus.failCount>5&&n<5e3&&(e.emit(Ju.NOTICE_LONGPOLL_DISCONNECT),as.error("Detected notice channel offline, please check your network!"))}}]),e}();function pg(){return null}var gg=function(){function t(e){ci(this,t),this.tim=e,this.isWX=Ma,this.storageQueue=new Map,this.checkTimes=0,this.checkTimer=setInterval(this._onCheckTimer.bind(this),1e3),this._prefix="",this._initListeners(),this._errorTolerantHandle()}return li(t,[{key:"_errorTolerantHandle",value:function(){!this.isWX&&ds(window.localStorage)&&(this.getItem=pg,this.setItem=pg,this.removeItem=pg,this.clear=pg)}},{key:"_onCheckTimer",value:function(){if(this.checkTimes++,this.checkTimes%20==0){if(0===this.storageQueue.size)return;this._doFlush()}}},{key:"_doFlush",value:function(){try{var t=1,e=0,n=void 0;try{for(var r,o=this.storageQueue[Symbol.iterator]();!(t=(r=o.next()).done);t=1){var a=Ei(r.value,2),s=a[0],c=a[1];this.isWX?i.setStorageSync(this._getKey(s),c):localStorage.setItem(this._getKey(s),JSON.stringify(c))}}catch(h){e=1,n=h}finally{try{t||null==o.return||o.return()}finally{if(e)throw n}}this.storageQueue.clear()}catch(Bg){as.error("Storage._doFlush error",Bg)}}},{key:"_initListeners",value:function(){this.tim.innerEmitter.once(Ju.CONTEXT_A2KEY_AND_TINYID_UPDATED,this._updatePrefix,this)}},{key:"_updatePrefix",value:function(){var t=this.tim.loginInfo,e=t.SDKAppID,i=t.identifier;this._prefix="TIM_".concat(e,"_").concat(i,"_")}},{key:"getItem",value:function(t){try{return this.isWX?i.getStorageSync(this._getKey(t)):JSON.parse(localStorage.getItem(this._getKey(t)))}catch(Bg){as.error("Storage.getItem error:",Bg)}}},{key:"setItem",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n?this.isWX?i.setStorageSync(this._getKey(t),e):localStorage.setItem(this._getKey(t),JSON.stringify(e)):this.storageQueue.set(t,e)}},{key:"clear",value:function(){try{this.isWX?i.clearStorageSync():localStorage.clear()}catch(Bg){as.error("Storage.clear error:",Bg)}}},{key:"removeItem",value:function(t){try{this.isWX?i.removeStorageSync(this._getKey(t)):localStorage.removeItem(this._getKey(t))}catch(Bg){as.error("Storage.removeItem error:",Bg)}}},{key:"getSize",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"b";try{var r={size:0,limitSize:5242880,unit:n};if(Object.defineProperty(r,"leftSize",{enumerable:1,get:function(){return r.limitSize-r.size}}),this.isWX&&(r.limitSize=1024*i.getStorageInfoSync().limitSize),t)r.size=JSON.stringify(this.getItem(t)).length+this._getKey(t).length;else if(this.isWX){var o=i.getStorageInfoSync(),a=o.keys;a.forEach((function(t){r.size+=JSON.stringify(i.getStorageSync(t)).length+e._getKey(t).length}))}else for(var s in localStorage)localStorage.hasOwnProperty(s)&&(r.size+=localStorage.getItem(s).length+s.length);return this._convertUnit(r)}catch(Bg){as.error("Storage.getSize error:",Bg)}}},{key:"_convertUnit",value:function(t){var e={},i=t.unit;for(var n in e.unit=i,t)"number"==typeof t[n]&&("kb"===i.toLowerCase()?e[n]=Math.round(t[n]/1024):"mb"===i.toLowerCase()?e[n]=Math.round(t[n]/1024/1024):e[n]=t[n]);return e}},{key:"_getKey",value:function(t){return"".concat(this._prefix).concat(t)}},{key:"reset",value:function(){this._doFlush(),this.checkTimes=0,this._prefix="",this.tim.innerEmitter.once(Ju.CONTEXT_A2KEY_AND_TINYID_UPDATED,this._updatePrefix,this)}}]),t}(),dg=o((function(t){var e=Object.prototype.hasOwnProperty,i="~";function n(){}function r(t,e,i){this.fn=t,this.context=e,this.once=i||0}function o(t,e,n,o,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new r(n,o||t,a),c=i?i+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],s]:t._events[c].push(s):(t._events[c]=s,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(i=0)),s.prototype.eventNames=function(){var t,n,r=[];if(0===this._eventsCount)return r;for(n in t=this._events)e.call(t,n)&&r.push(i?n.slice(1):n);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},s.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,a=new Array(o);r<o;r++)a[r]=n[r].fn;return a},s.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},s.prototype.emit=function(t,e,n,r,o,a){var s=i?i+t:t;if(!this._events[s])return 0;var c,u,l=this._events[s],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,1),f){case 1:return l.fn.call(l.context),1;case 2:return l.fn.call(l.context,e),1;case 3:return l.fn.call(l.context,e,n),1;case 4:return l.fn.call(l.context,e,n,r),1;case 5:return l.fn.call(l.context,e,n,r,o),1;case 6:return l.fn.call(l.context,e,n,r,o,a),1}for(u=1,c=new Array(f-1);u<f;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var h,p=l.length;for(u=0;u<p;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,1),f){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,n);break;case 4:l[u].fn.call(l[u].context,e,n,r);break;default:if(!c)for(h=1,c=new Array(f-1);h<f;h++)c[h-1]=arguments[h];l[u].fn.apply(l[u].context,c)}}return 1},s.prototype.on=function(t,e,i){return o(this,t,e,i,0)},s.prototype.once=function(t,e,i){return o(this,t,e,i,1)},s.prototype.removeListener=function(t,e,n,r){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||r&&!s.once||n&&s.context!==n||a(this,o);else{for(var c=0,u=[],l=s.length;c<l;c++)(s[c].fn!==e||r&&!s[c].once||n&&s[c].context!==n)&&u.push(s[c]);u.length?this._events[o]=1===u.length?u[0]:u:a(this,o)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&a(this,e)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=i,s.EventEmitter=s,t.exports=s})),mg=function(t){var e,i,n,r,o;return Ps(t.context)?(e="",i=0,n=0,r=0,o=1):(e=t.context.a2Key,i=t.context.tinyID,n=t.context.SDKAppID,r=t.context.contentType,o=t.context.apn),{platform:Vu,websdkappid:Bu,v:Hu,a2:e,tinyid:i,sdkappid:n,contentType:r,apn:o,reqtime:function(){return+new Date}}},vg=function(){function t(e){ci(this,t),this.isReady=0,this.tim=e,this.context=e.context,this._initList(),this._updateWhenCTXIsReady()}return li(t,[{key:"_updateWhenCTXIsReady",value:function(){this.tim.innerEmitter.on(Ju.CONTEXT_UPDATED,this.update,this),this.tim.innerEmitter.on(Ju.CONTEXT_RESET,this.reset,this)}},{key:"update",value:function(t){var e=t.context;this.context=e,this._initList()}},{key:"reset",value:function(t){this.context=t.data,this._initList()}},{key:"get",value:function(t){var e=t.name,i=t.action,n=t.param;if(void 0===this.config[e])throw new qu({code:$u.NETWORK_PACKAGE_UNDEFINED,message:"".concat(ju.NETWORK_PACKAGE_UNDEFINED,": PackageConfig.").concat(e)});if(void 0===this.config[e][i])throw new qu({code:$u.NETWORK_PACKAGE_UNDEFINED,message:"".concat(ju.NETWORK_PACKAGE_UNDEFINED,": PackageConfig.").concat(e,".").concat(i)});var r=function t(e){if(0===Object.getOwnPropertyNames(e).length)return Object.create(null);var i=Array.isArray(e)?[]:Object.create(null),n="";for(var r in e)null!==e[r]?void 0!==e[r]?(n=si(e[r]),["string","number","function","boolean"].indexOf(n)>=0?i[r]=e[r]:i[r]=t(e[r])):i[r]=void 0:i[r]=null;return i}(this.config[e][i]);return r.requestData=this._initRequestData(n,r),r.encode=this._initEncoder(r),r.decode=this._initDecoder(r),r}},{key:"set",value:function(t){var e=t.key,i=t.value;if(0!=!!e){var n=e.split(".");n.length<=0||function t(e,i,n,r){var o=i[n];"object"===si(e[o])?t(e[o],i,n+1,r):e[o]=r}(this.config,n,0,i)}}},{key:"_initList",value:function(){var t;this.config={},this.config.accessLayer=(t=this.tim,{create:null,query:{serverName:Yu.NAME.WEB_IM,cmd:Yu.CMD.ACCESS_LAYER,channel:Yu.CHANNEL.XHR,protocol:zu,method:"POST",queryString:{platform:Vu,identifier:t.loginInfo.identifier,usersig:t.loginInfo.userSig,contentType:t.loginInfo.contentType,apn:null!==t.context?t.context.apn:1,websdkappid:Bu,v:Hu},requestData:{}},update:null,delete:null}),this.config.login=function(t){return{create:null,query:{serverName:Yu.NAME.OPEN_IM,cmd:Yu.CMD.LOGIN,channel:Yu.CHANNEL.XHR,protocol:zu,method:"POST",queryString:{websdkappid:Bu,v:Hu,platform:Vu,identifier:t.loginInfo.identifier,usersig:t.loginInfo.userSig,sdkappid:t.loginInfo.SDKAppID,accounttype:t.loginInfo.accountType,contentType:null!==t.context?t.context.contentType:0,apn:null!==t.context?t.context.apn:1,reqtime:+new Date/1e3},requestData:{state:"Online"},keyMaps:{request:{tinyID:"tinyId"},response:{TinyId:"tinyID"}}},update:null,delete:null}}(this.tim),this.config.logout=function(t){return{create:null,query:{serverName:Yu.NAME.OPEN_IM,cmd:Yu.CMD.LOGOUT_ALL,channel:Yu.CHANNEL.XHR,protocol:zu,method:"POST",queryString:{websdkappid:Bu,v:Hu,platform:Vu,a2:null!==t.context?t.context.a2Key:"",tinyid:null!==t.context?t.context.tinyID:"",sdkappid:null!==t.loginInfo?t.loginInfo.SDKAppID:0,contentType:null!==t.context?t.context.contentType:0,apn:null!==t.context?t.context.apn:"",reqtime:+new Date/1e3},requestData:{}},update:null,delete:null}}(this.tim),this.config.longPollLogout=function(t){return{create:null,query:{serverName:Yu.NAME.OPEN_IM,cmd:Yu.CMD.LOGOUT_LONG_POLL,channel:Yu.CHANNEL.XHR,protocol:zu,method:"POST",queryString:{websdkappid:Bu,v:Hu,platform:Vu,a2:null!==t.context?t.context.a2Key:"",tinyid:null!==t.context?t.context.tinyID:0,sdkappid:null!==t.context?t.context.SDKAppID:0,contentType:null!==t.context?t.context.contentType:0,apn:null!==t.context?t.context.apn:1,reqtime:function(){return Date.now()}},requestData:{longPollID:""},keyMaps:{request:{longPollID:"LongPollingId"}}},update:null,delete:null}}(this.tim),this.config.profile=function(t){var e=mg(t),i=Yu.NAME.PROFILE,n=Yu.CHANNEL.XHR,r=zu,o=[];for(var a in xl)Object.prototype.hasOwnProperty.call(xl,a)&&o.push(xl[a]);return{query:{serverName:i,cmd:Yu.CMD.PORTRAIT_GET,channel:n,protocol:r,method:"POST",queryString:e,requestData:{fromAccount:"",toAccount:[],tagList:o}},update:{serverName:i,cmd:Yu.CMD.PORTRAIT_SET,channel:n,protocol:r,method:"POST",queryString:e,requestData:{fromAccount:"",profileItem:[{tag:xl.NICK,value:""},{tag:xl.GENDER,value:""},{tag:xl.ALLOWTYPE,value:""},{tag:xl.AVATAR,value:""}]}}}}(this.tim),this.config.group=function(t){var e={websdkappid:Bu,v:Hu,platform:Vu,a2:null!==t.context&&t.context.a2Key?t.context.a2Key:void 0,tinyid:null!==t.context&&t.context.tinyID?t.context.tinyID:void 0,sdkappid:null!==t.context?t.context.SDKAppID:0,contentType:null!==t.context?t.context.contentType:0,accounttype:null!==t.context?t.context.accountType:0},i={request:{ownerID:"Owner_Account",userID:"Member_Account",newOwnerID:"NewOwner_Account",maxMemberNum:"MaxMemberCount",groupCustomField:"AppDefinedData",memberCustomField:"AppMemberDefinedData",groupCustomFieldFilter:"AppDefinedDataFilter_Group",memberCustomFieldFilter:"AppDefinedDataFilter_GroupMember",messageRemindType:"MsgFlag",userIDList:"MemberList",groupIDList:"GroupIdList",applyMessage:"ApplyMsg",muteTime:"ShutUpTime",joinOption:"ApplyJoinOption"},response:{GroupIdList:"groups",MsgFlag:"messageRemindType",AppDefinedData:"groupCustomField",AppMemberDefinedData:"memberCustomField",AppDefinedDataFilter_Group:"groupCustomFieldFilter",AppDefinedDataFilter_GroupMember:"memberCustomFieldFilter",InfoSeq:"infoSequence",MemberList:"members",GroupInfo:"groups",ShutUpUntil:"muteUntil",ApplyJoinOption:"joinOption"}};return{create:{serverName:Yu.NAME.GROUP,cmd:Yu.CMD.CREATE_GROUP,channel:Yu.CHANNEL.XHR,protocol:zu,queryString:e,requestData:{type:Ze.GRP_PRIVATE,name:void 0,groupID:void 0,ownerID:t.loginInfo.identifier,introduction:void 0,notification:void 0,avatar:void 0,maxMemberNum:void 0,joinOption:void 0,memberList:void 0,groupCustomField:void 0},keyMaps:i},list:{serverName:Yu.NAME.GROUP,cmd:Yu.CMD.GET_JOINED_GROUPS,channel:Yu.CHANNEL.XHR,protocol:zu,queryString:e,requestData:{userID:t.loginInfo.identifier,limit:void 0,offset:void 0,groupType:void 0,responseFilter:void 0},keyMaps:i},query:{serverName:Yu.NAME.GROUP,cmd:Yu.CMD.GET_GROUP_INFO,channel:Yu.CHANNEL.XHR,protocol:zu,queryString:e,requestData:{groupIDList:void 0,responseFilter:void 0},keyMaps:i},getGroupMemberList:{serverName:Yu.NAME.GROUP,cmd:Yu.CMD.GET_GROUP_MEMBER_INFO,channel:Yu.CHANNEL.XHR,protocol:zu,queryString:e,requestData:{groupID:void 0,limit:0,offset:0,memberRoleFilter:void 0,memberInfoFilter:void 0},keyMaps:i},quitGroup:{serverName:Yu.NAME.GROUP,cmd:Yu.CMD.QUIT_GROUP,channel:Yu.CHANNEL.XHR,protocol:zu,queryString:e,requestData:{groupID:void 0}},changeGroupOwner:{serverName:Yu.NAME.GROUP,cmd:Yu.CMD.CHANGE_GROUP_OWNER,channel:Yu.CHANNEL.XHR,protocol:zu,queryString:e,requestData:{groupID:void 0,newOwnerID:void 0},keyMaps:i},destroyGroup:{serverName:Yu.NAME.GROUP,cmd:Yu.CMD.DESTROY_GROUP,channel:Yu.CHANNEL.XHR,protocol:zu,queryString:e,requestData:{groupID:void 0}},updateGroupProfile:{serverName:Yu.NAME.GROUP,cmd:Yu.CMD.MODIFY_GROUP_INFO,channel:Yu.CHANNEL.XHR,protocol:zu,queryString:e,requestData:{groupID:void 0,name:void 0,introduction:void 0,notification:void 0,avatar:void 0,maxMemberNum:void 0,joinOption:void 0,groupCustomField:void 0},keyMaps:{request:pi({},i.request,{groupCustomField:"AppDefinedData"}),response:i.response}},modifyGroupMemberInfo:{serverName:Yu.NAME.GROUP,cmd:Yu.CMD.MODIFY_GROUP_MEMBER_INFO,channel:Yu.CHANNEL.XHR,protocol:zu,queryString:e,requestData:{groupID:void 0,userID:void 0,messageRemindType:void 0,nameCard:void 0,role:void 0,memberCustomField:void 0,muteTime:void 0},keyMaps:i},addGroupMember:{serverName:Yu.NAME.GROUP,cmd:Yu.CMD.ADD_GROUP_MEMBER,channel:Yu.CHANNEL.XHR,protocol:zu,queryString:e,requestData:{groupID:void 0,silence:void 0,userIDList:void 0},keyMaps:i},deleteGroupMember:{serverName:Yu.NAME.GROUP,cmd:Yu.CMD.DELETE_GROUP_MEMBER,channel:Yu.CHANNEL.XHR,protocol:zu,queryString:e,requestData:{groupID:void 0,userIDList:void 0,reason:void 0},keyMaps:{request:{userIDList:"MemberToDel_Account"}}},searchGroupByID:{serverName:Yu.NAME.GROUP,cmd:Yu.CMD.SEARCH_GROUP_BY_ID,channel:Yu.CHANNEL.XHR,protocol:zu,queryString:e,requestData:{groupIDList:void 0,responseFilter:{groupBasePublicInfoFilter:["Type","Name","Introduction","Notification","FaceUrl","CreateTime","Owner_Account","LastInfoTime","LastMsgTime","NextMsgSeq","MemberNum","MaxMemberNum","ApplyJoinOption"]}},keyMaps:{request:{groupIDList:"GroupIdList"}}},applyJoinGroup:{serverName:Yu.NAME.GROUP,cmd:Yu.CMD.APPLY_JOIN_GROUP,channel:Yu.CHANNEL.XHR,protocol:zu,queryString:e,requestData:{groupID:void 0,applyMessage:void 0,userDefinedField:void 0},keyMaps:i},applyJoinAVChatRoom:{serverName:Yu.NAME.BIG_GROUP_NO_AUTH,cmd:Yu.CMD.APPLY_JOIN_GROUP,channel:Yu.CHANNEL.XHR,protocol:zu,queryString:{websdkappid:Bu,v:Hu,platform:Vu,sdkappid:null!==t.context?t.context.SDKAppID:0,contentType:null!==t.context?t.context.contentType:0,accounttype:null!==t.context?t.context.accountType:0},requestData:{groupID:void 0,applyMessage:void 0,userDefinedField:void 0},keyMaps:i},handleApplyJoinGroup:{serverName:Yu.NAME.GROUP,cmd:Yu.CMD.HANDLE_APPLY_JOIN_GROUP,channel:Yu.CHANNEL.XHR,protocol:zu,queryString:e,requestData:{groupID:void 0,applicant:void 0,handleAction:void 0,handleMessage:void 0,authentication:void 0,messageKey:void 0,userDefinedField:void 0},keyMaps:{request:{applicant:"Applicant_Account",handleAction:"HandleMsg",handleMessage:"ApprovalMsg",messageKey:"MsgKey"},response:{MsgKey:"messageKey"}}},deleteGroupSystemNotice:{serverName:Yu.NAME.OPEN_IM,cmd:Yu.CMD.DELETE_GROUP_SYSTEM_MESSAGE,channel:Yu.CHANNEL.XHR,protocol:zu,queryString:e,requestData:{messageListToDelete:void 0},keyMaps:{request:{messageListToDelete:"DelMsgList",messageSeq:"MsgSeq",messageRandom:"MsgRandom"}}}}}(this.tim),this.config.longPollID=function(t){return{create:{},query:{serverName:Yu.NAME.OPEN_IM,cmd:Yu.CMD.GET_LONG_POLL_ID,channel:Yu.CHANNEL.XHR,protocol:zu,queryString:{websdkappid:Bu,v:Hu,platform:Vu,a2:null!==t.context?t.context.a2Key:"",tinyid:null!==t.context?t.context.tinyID:0,sdkappid:null!==t.context?t.context.SDKAppID:0,contentType:null!==t.context?t.context.contentType:0,apn:null!==t.context?t.context.apn:1,reqtime:+new Date/1e3},requestData:{},keyMaps:{response:{LongPollingId:"longPollingID"}}},update:{},delete:{}}}(this.tim),this.config.longPoll=function(t){var e={websdkappid:Bu,v:Hu,platform:Vu,a2:null!==t.context?t.context.a2Key:"",tinyid:null!==t.context?t.context.tinyID:0,sdkappid:null!==t.context?t.context.SDKAppID:0,contentType:null!==t.context?t.context.contentType:0,accounttype:null!==t.context?t.loginInfo.accountType:0,apn:null!==t.context?t.context.apn:1,reqtime:Math.ceil(+new Date/1e3)};return{create:{},query:{serverName:Yu.NAME.OPEN_IM,cmd:Yu.CMD.LONG_POLL,channel:Yu.CHANNEL.AUTO,protocol:zu,queryString:e,requestData:{timeout:null,cookie:{notifySeq:0,noticeSeq:0,longPollingID:0}},keyMaps:{response:{C2cMsgArray:"C2CMessageArray",GroupMsgArray:"groupMessageArray",GroupTips:"groupTips",C2cNotifyMsgArray:"C2CNotifyMessageArray",ClientSeq:"clientSequence",MsgPriority:"messagePriority",NoticeSeq:"noticeSequence",MsgContent:"content",MsgType:"type",MsgBody:"elements",ToGroupId:"to",Desc:"description",Ext:"extension",MsgFrom_AccountExtraInfo:"messageFromAccountExtraInformation"}}},update:{},delete:{}}}(this.tim),this.config.applyC2C=function(t){var e=mg(t),i=Yu.NAME.FRIEND,n=Yu.CHANNEL.XHR,r=zu;return{create:{serverName:i,cmd:Yu.CMD.FRIEND_ADD,channel:n,protocol:r,queryString:e,requestData:{fromAccount:"",addFriendItem:[]}},get:{serverName:i,cmd:Yu.CMD.GET_PENDENCY,channel:n,protocol:r,queryString:e,requestData:{fromAccount:"",pendencyType:"Pendency_Type_ComeIn"}},update:{serverName:i,cmd:Yu.CMD.RESPONSE_PENDENCY,channel:n,protocol:r,queryString:e,requestData:{fromAccount:"",responseFriendItem:[]}},delete:{serverName:i,cmd:Yu.CMD.DELETE_PENDENCY,channel:n,protocol:r,queryString:e,requestData:{fromAccount:"",toAccount:[],pendencyType:"Pendency_Type_ComeIn"}}}}(this.tim),this.config.friend=function(t){var e=mg(t),i=Yu.NAME.FRIEND,n=Yu.CHANNEL.XHR,r=zu;return{get:{serverName:i,cmd:Yu.CMD.FRIEND_GET_ALL,channel:n,protocol:r,method:"POST",queryString:e,requestData:{fromAccount:"",timeStamp:0,startIndex:0,getCount:100,lastStandardSequence:0,tagList:["Tag_Profile_IM_Nick","Tag_SNS_IM_Remark"]},keyMaps:{request:{},response:{}}},delete:{serverName:i,cmd:Yu.CMD.FRIEND_DELETE,channel:n,protocol:r,method:"POST",queryString:e,requestData:{fromAccount:"",toAccount:[],deleteType:"Delete_Type_Single"}}}}(this.tim),this.config.blacklist=function(t){var e=mg(t);return{create:{serverName:Yu.NAME.FRIEND,cmd:Yu.CMD.ADD_BLACKLIST,channel:Yu.CHANNEL.XHR,protocol:zu,method:"POST",queryString:e,requestData:{fromAccount:"",toAccount:[]}},get:{serverName:Yu.NAME.FRIEND,cmd:Yu.CMD.GET_BLACKLIST,channel:Yu.CHANNEL.XHR,protocol:zu,method:"POST",queryString:e,requestData:{fromAccount:"",startIndex:0,maxLimited:30,lastSequence:0}},delete:{serverName:Yu.NAME.FRIEND,cmd:Yu.CMD.DELETE_BLACKLIST,channel:Yu.CHANNEL.XHR,protocol:zu,method:"POST",queryString:e,requestData:{fromAccount:"",toAccount:[]}},update:{}}}(this.tim),this.config.c2cMessage=function(t){var e={platform:Vu,websdkappid:Bu,v:Hu,a2:null!==t.context?t.context.a2Key:"",tinyid:null!==t.context?t.context.tinyID:0,sdkappid:null!==t.context?t.context.SDKAppID:0,contentType:null!==t.context?t.context.contentType:0,apn:null!==t.context?t.context.apn:1,reqtime:function(){return+new Date}},i={request:{fromAccount:"From_Account",toAccount:"To_Account",msgTimeStamp:"MsgTimeStamp",msgSeq:"MsgSeq",msgRandom:"MsgRandom",msgBody:"MsgBody",count:"MaxCnt",lastMessageTime:"LastMsgTime",messageKey:"MsgKey",peerAccount:"Peer_Account",data:"Data",description:"Desc",extension:"Ext",type:"MsgType",content:"MsgContent",sizeType:"Type",uuid:"UUID",imageUrl:"URL",fileUrl:"Url",remoteAudioUrl:"Url",downloadFlag:"Download_Flag"},response:{MsgContent:"content",MsgTime:"time",Data:"data",Desc:"description",Ext:"extension",MsgKey:"messageKey",MsgType:"type",MsgBody:"elements",Download_Flag:"downloadFlag"}};return{create:{serverName:Yu.NAME.OPEN_IM,cmd:Yu.CMD.SEND_MESSAGE,channel:Yu.CHANNEL.XHR,protocol:zu,method:"POST",queryString:e,requestData:{fromAccount:t.loginInfo.identifier,toAccount:"",msgTimeStamp:Math.ceil(+new Date/1e3),msgSeq:0,msgRandom:0,msgBody:[]},keyMaps:i},query:{serverName:Yu.NAME.OPEN_IM,cmd:Yu.CMD.GET_C2C_ROAM_MESSAGES,channel:Yu.CHANNEL.XHR,protocol:zu,method:"POST",queryString:e,requestData:{peerAccount:"",count:15,lastMessageTime:0,messageKey:""},keyMaps:i},update:null,delete:null}}(this.tim),this.config.groupMessage=function(t){var e={platform:Vu,websdkappid:Bu,v:Hu,a2:null!==t.context?t.context.a2Key:"",tinyid:null!==t.context?t.context.tinyID:0,sdkappid:null!==t.context?t.context.SDKAppID:0,contentType:null!==t.context?t.context.contentType:0,apn:null!==t.context?t.context.apn:1,reqtime:function(){return+new Date}},i={request:{to:"GroupId",extension:"Ext",data:"Data",description:"Desc",random:"Random",sequence:"ReqMsgSeq",count:"ReqMsgNumber",type:"MsgType",content:"MsgContent",elements:"MsgBody",sizeType:"Type",uuid:"UUID",imageUrl:"URL",fileUrl:"Url",remoteAudioUrl:"Url",downloadFlag:"Download_Flag",clientSequence:"ClientSeq"},response:{Random:"random",MsgTime:"time",MsgSeq:"sequence",ReqMsgSeq:"sequence",RspMsgList:"messagesList",IsPlaceMsg:"isPlaceMessage",IsSystemMsg:"isSystemMessage",ToGroupId:"to",MsgFrom_AccountExtraInfo:"messageFromAccountExtraInformation",EnumFrom_AccountType:"fromAccountType",EnumTo_AccountType:"toAccountType",GroupCode:"groupCode",MsgFlag:"messageRemindType",MsgPriority:"messagePriority",MsgBody:"elements",MsgType:"type",MsgContent:"content",IsFinished:"complete",Download_Flag:"downloadFlag",ClientSeq:"clientSequence"}};return{create:{serverName:Yu.NAME.GROUP,cmd:Yu.CMD.SEND_GROUP_MESSAGE,channel:Yu.CHANNEL.XHR,protocol:zu,method:"POST",queryString:e,requestData:{groupID:"",fromAccount:t.loginInfo.identifier,random:0,clientSequence:0,msgBody:[]},keyMaps:i},query:{serverName:Yu.NAME.GROUP,cmd:Yu.CMD.GET_GROUP_ROAM_MESSAGES,channel:Yu.CHANNEL.XHR,protocol:zu,method:"POST",queryString:e,requestData:{groupID:"",count:15,sequence:""},keyMaps:i},update:null,delete:null}}(this.tim),this.config.conversation=function(t){var e={platform:Vu,websdkappid:Bu,v:Hu,a2:null!==t.context?t.context.a2Key:"",tinyid:null!==t.context?t.context.tinyID:0,sdkappid:null!==t.context?t.context.SDKAppID:0,contentType:null!==t.context?t.context.contentType:0,apn:null!==t.context?t.context.apn:1};return{query:{serverName:Yu.NAME.RECENT_CONTACT,cmd:Yu.CMD.GET_CONVERSATION_LIST,channel:Yu.CHANNEL.XHR,protocol:zu,method:"POST",queryString:e,requestData:{fromAccount:t.loginInfo.identifier,count:0},keyMaps:{request:{},response:{SessionItem:"conversations",ToAccount:"groupID",To_Account:"userID",UnreadMsgCount:"unreadCount",MsgGroupReadedSeq:"messageReadSeq"}}},delete:{serverName:Yu.NAME.RECENT_CONTACT,cmd:Yu.CMD.DELETE_CONVERSATION,channel:Yu.CHANNEL.XHR,protocol:zu,method:"POST",queryString:e,requestData:{fromAccount:t.loginInfo.identifier,toAccount:void 0,type:1,toGroupID:void 0},keyMaps:{request:{toGroupID:"ToGroupid"}}},setC2CMessageRead:{serverName:Yu.NAME.OPEN_IM,cmd:Yu.CMD.SET_C2C_MESSAGE_READ,channel:Yu.CHANNEL.XHR,protocol:zu,method:"POST",queryString:e,requestData:{C2CMsgReaded:void 0},keyMaps:{request:{lastMessageTime:"LastedMsgTime"}}},setGroupMessageRead:{serverName:Yu.NAME.GROUP,cmd:Yu.CMD.SET_GROUP_MESSAGE_READ,channel:Yu.CHANNEL.XHR,protocol:zu,method:"POST",queryString:e,requestData:{groupID:void 0,messageReadSeq:void 0},keyMaps:{request:{messageReadSeq:"MsgReadedSeq"}}}}}(this.tim),this.config.syncMessage=function(t){var e={platform:Vu,websdkappid:Bu,v:Hu,a2:null!==t.context?t.context.a2Key:"",tinyid:null!==t.context?t.context.tinyID:0,sdkappid:null!==t.context?t.context.SDKAppID:0,contentType:null!==t.context?t.context.contentType:0,apn:null!==t.context?t.context.apn:1,reqtime:function(){return[Math.ceil(+new Date),Math.random()].join("")}};return{create:null,query:{serverName:Yu.NAME.OPEN_IM,cmd:Yu.CMD.GET_MESSAGES,channel:Yu.CHANNEL.XHR,protocol:zu,method:"POST",queryString:e,requestData:{cookie:"",syncFlag:0,needAbstract:1},keyMaps:{request:{fromAccount:"From_Account",toAccount:"To_Account",from:"From_Account",to:"To_Account",time:"MsgTimeStamp",sequence:"MsgSeq",random:"MsgRandom",elements:"MsgBody"},response:{MsgList:"messageList",SyncFlag:"syncFlag",To_Account:"to",From_Account:"from",ClientSeq:"clientSequence",MsgSeq:"sequence",NoticeSeq:"noticeSequence",NotifySeq:"notifySequence",MsgRandom:"random",MsgTimeStamp:"time",MsgContent:"content",ToGroupId:"groupID",MsgKey:"messageKey",GroupTips:"groupTips",MsgBody:"elements",MsgType:"type",C2CRemainingUnreadCount:"C2CRemainingUnreadList"}}},update:null,delete:null}}(this.tim),this.config.AVChatRoom=function(t){return{startLongPoll:{serverName:Yu.NAME.BIG_GROUP_LONG_POLLING_NO_AUTH,cmd:Yu.CMD.AVCHATROOM_LONG_POLL,channel:Yu.CHANNEL.XHR,protocol:zu,method:"POST",queryString:{websdkappid:Bu,v:Hu,platform:Vu,sdkappid:t.loginInfo.SDKAppID,accounttype:"792",apn:null!==t.context?t.context.apn:1,reqtime:function(){return+new Date}},requestData:{USP:1,startSeq:1,holdTime:90,key:void 0},keyMaps:{request:{USP:"USP"},response:{ToGroupId:"groupID"}}}}}(this.tim),this.config.cosUpload=function(t){var e={platform:Vu,websdkappid:Bu,v:Hu,a2:null!==t.context?t.context.a2Key:"",tinyid:null!==t.context?t.context.tinyID:0,sdkappid:null!==t.context?t.context.SDKAppID:0,contentType:null!==t.context?t.context.contentType:0,apn:null!==t.context?t.context.apn:1,reqtime:function(){return Date.now()}};return{create:{serverName:Yu.NAME.OPEN_IM,cmd:Yu.CMD.FILE_UPLOAD,channel:Yu.CHANNEL.XHR,protocol:zu,method:"POST",queryString:e,requestData:{appVersion:"2.1",fromAccount:"",toAccount:"",sequence:0,time:function(){return Math.ceil(Date.now()/1e3)},random:function(){return As()},fileStrMd5:"",fileSize:"",serverVer:1,authKey:"",busiId:1,pkgFlag:1,sliceOffset:0,sliceSize:0,sliceData:"",contentType:"application/x-www-form-urlencoded"},keyMaps:{request:{},response:{}}},update:null,delete:null}}(this.tim),this.config.cosSig=function(t){var e={sdkappid:function(){return t.loginInfo.SDKAppID},identifier:function(){return t.loginInfo.identifier},userSig:function(){return t.context.userSig}};return{create:null,query:{serverName:Yu.NAME.IM_COS_SIGN,cmd:Yu.CMD.COS_SIGN,channel:Yu.CHANNEL.XHR,protocol:zu,method:"POST",queryString:e,requestData:{cmd:"open_im_cos_svc",subCmd:"get_cos_token",duration:300,version:1},keyMaps:{request:{userSig:"usersig",subCmd:"sub_cmd",cmd:"cmd",duration:"duration",version:"version"},response:{expired_time:"expiredTime",bucket_name:"bucketName",session_token:"sessionToken",tmp_secret_id:"secretId",tmp_secret_key:"secretKey"}}},update:null,delete:null}}(this.tim)}},{key:"_initRequestData",value:function(t,e){if(void 0===t)return el(e.requestData,this._getRequestMap(e),this.tim);var i=e.requestData,n=Object.create(null);for(var r in i)if(Object.prototype.hasOwnProperty.call(i,r)){if(n[r]="function"==typeof i[r]?i[r]():i[r],void 0===t[r])continue;n[r]=t[r]}return el(n,this._getRequestMap(e),this.tim)}},{key:"_getRequestMap",value:function(t){if(t.keyMaps&&t.keyMaps.request&&Object.keys(t.keyMaps.request).length>0)return t.keyMaps.request}},{key:"_initEncoder",value:function(t){switch(t.protocol){case zu:return function(t){if("string"===si(t))try{return JSON.parse(t)}catch(Bg){return t}return t};case Ku:return function(t){return t};default:return function(t){return as.warn("PackageConfig._initEncoder(), unknow response type, data: ",JSON.stringify(t)),t}}}},{key:"_initDecoder",value:function(t){switch(t.protocol){case zu:return function(t){if("string"===si(t))try{return JSON.parse(t)}catch(Bg){return t}return t};case Ku:return function(t){return t};default:return function(t){return as.warn("PackageConfig._initDecoder(), unknow response type, data: ",t),t}}}}]),t}(),_g=function(t){function e(t){var i;return ci(this,e),(i=Si(this,di(e).call(this,t)))._initialization(),i}return gi(e,cl),li(e,[{key:"_initialization",value:function(){this._syncOffset="",this._syncNoticeList=[],this._syncEventArray=[],this._syncMessagesIsRunning=0,this._syncMessagesFinished=0,this._isLongPoll=0,this._longPollID=0,this._noticeSequence=0,this._initializeListener(),this._runLoop=null}},{key:"getLongPollID",value:function(){return this._longPollID}},{key:"_IAmReady",value:function(){this.triggerReady()}},{key:"reset",value:function(){this._noticeSequence=0,this._resetSync(),this.closeNoticeChannel()}},{key:"_resetSync",value:function(){this._syncOffset="",this._syncNoticeList=[],this._syncEventArray=[],this._syncMessagesIsRunning=0,this._syncMessagesFinished=0}},{key:"_setNoticeSeqInRequestData",value:function(t){t.Cookie.NoticeSeq=this._noticeSequence}},{key:"_updatenoticeSequence",value:function(t){if(t){var e=t[t.length-1].noticeSequence;!e||"number"!=typeof e||e<this._noticeSequence?this._noticeSequence++:this._noticeSequence=e}else this._noticeSequence++}},{key:"_initializeListener",value:function(){var t=this.tim.innerEmitter;t.on(Ju.NOTICE_LONGPOLL_RESTART,this.restartNoticeChannel,this),t.on(Ju.CONTEXT_A2KEY_AND_TINYID_UPDATED,this._startSyncMessages,this),t.on(Ju.SYNC_MESSAGE_C2C_FINISHED,this.openNoticeChannel,this),t.on(Ju.SIGN_LOGOUT_SUCCESS,this.closeNoticeChannel,this),t.on(Ju.NOTICE_LONGPOLL_SOON_RECONNECT,this._onChannelReconnect,this),t.on(Ju.NOTICE_LONGPOLL_DISCONNECT,this._onChannelDisconnected,this)}},{key:"openNoticeChannel",value:function(){as.log("NotificationController.openNoticeChannel"),this._getLongPollID()}},{key:"closeNoticeChannel",value:function(){as.log("NotificationController.closeNoticeChannel()"),(this._runLoop instanceof ep||this._runLoop instanceof ip)&&(this._runLoop.abort(),this._runLoop.stop()),this._longPollID=0,this._isLongPoll=0,this.tim.innerEmitter.emit(Ju.NOTICE_LONGPOLL_STOPPED),this.tim.outerEmitter.emit(Qe.NOTICE_LONGPOLL_STOPPED)}},{key:"restartNoticeChannel",value:function(){this.closeNoticeChannel(),this.openNoticeChannel()}},{key:"_getLongPollID",value:function(){var t=this,e=this.tim,i=e.innerEmitter,n=e.connectionController;if(0===this._longPollID){var r=this.createPackage({name:"longPollID",action:"query"});n.request(r).then((function(e){e.data.errorCode===fl.REQUEST.SUCCESS?t._onGetLongPollIDSuccess({data:e.data.longPollingID}):t._onGetLongPollIDFail({data:e.data})})).catch((function(t){i.emit(Ju.NOTICE_LONGPOLL_GETID_FAIL,t)}))}else this._onGetLongPollIDSuccess({data:this._longPollID})}},{key:"_onGetLongPollIDSuccess",value:function(t){this.tim.packageConfig.set({key:"long_poll_logout.query.requestData.longPollingID",value:t.data}),this.tim.packageConfig.set({key:"longPoll.query.requestData.cookie.longPollingID",value:t.data}),this._longPollID=t.data,this._startLongPoll(),this._IAmReady()}},{key:"_onGetLongPollIDFail",value:function(t){as.warn("Notification._onGetLongPollIDFail",t)}},{key:"_startLongPoll",value:function(){if(1!=this._isLongPoll){as.log("NotificationController._startLongPoll...");var t=this.tim,e=t.connectionController,i=t.innerEmitter,n=this.createPackage({name:"longPoll",action:"query"});this._isLongPoll=1,i.emit(Ju.NOTICE_LONGPOLL_START,{data:Date.now()}),this._runLoop=e.createRunLoop({pack:n,before:this._setNoticeSeqInRequestData.bind(this),success:this._onNoticeReceived.bind(this),fail:this._onNoticeFail.bind(this)}),this._runLoop.start()}else as.log("NotificationController._startLongPoll is running...")}},{key:"_onChannelReconnect",value:function(t){this.closeNoticeChannel(),this.syncMessage()}},{key:"_onChannelDisconnected",value:function(){}},{key:"_onNoticeReceived",value:function(t){var e=this.tim,i=e.innerEmitter,n=e.statusController,r=t.data,o=!n.getChannelStatus();if(i.emit(Ju.NOTICE_LONGPOLL_REQUEST_ARRIVED,{data:Date.now()}),r.errorCode!==fl.REQUEST.SUCCESS){if(r.errorCode===$u.LONG_POLL_KICK_OUT)return i.emit(Ju.NOTICE_LONGPOLL_KICKED_OUT),as.log("NotificationController._onNoticeReceived(), longPollingID was kicked"),void this.closeNoticeChannel();as.log("NotificationController._onNoticeReceived(), error: ".concat(r.errorCode,", errorInfo: ").concat(r.errorInfo)),i.emit(Ju.ERROR_DETECTED,{code:r.errorCode,message:r.errorInfo})}t.data.eventArray&&1!=o&&this._eachEventArray(t.data.eventArray)}},{key:"_onNoticeFail",value:function(t){this.tim.innerEmitter.emit(Ju.ERROR_DETECTED,t.error),this.tim.innerEmitter.emit(Ju.NOTICE_LONGPOLL_REQUEST_NOT_ARRIVED,{data:Date.now()})}},{key:"_eachEventArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"poll";if(gs(t)){var i=eg("NotificationController._eachEventArray()");i.dot("start");for(var n=this.tim.innerEmitter,r=null,o="",a="",s=0,c=t.length;s<c;s++){r=t[s];var u=this._confirmCarrierType(r);i.dot("type ".concat(u));var l=lg(r.event,u,",");switch(i.dot("condition ".concat(l)),l){case"9,1":this._updatenoticeSequence(r.C2CMessageArray),n.emit(Ju.NOTICE_LONGPOLL_NEW_C2C_NOTICE,{data:r.C2CMessageArray,type:e}),i.dot("emit ".concat(Ju.NOTICE_LONGPOLL_NEW_C2C_NOTICE));break;case"3,2":this._updatenoticeSequence(r.groupMessageArray),n.emit(Ju.NOTICE_LONGPOLL_NEW_GROUP_MESSAGES,{data:r.groupMessageArray}),i.dot("emit ".concat(Ju.NOTICE_LONGPOLL_NEW_GROUP_MESSAGES));break;case"4,3":this._updatenoticeSequence(r.groupTips),n.emit(Ju.NOTICE_LONGPOLL_NEW_GROUP_TIPS,{data:r.groupTips}),i.dot("emit ".concat(Ju.NOTICE_LONGPOLL_NEW_GROUP_TIPS));break;case"5,3":this._updatenoticeSequence(r.groupTips),n.emit(Ju.NOTICE_LONGPOLL_NEW_GROUP_NOTICE,{data:{groupSystemNotices:r.groupTips,type:e}}),i.dot("emit ".concat(Ju.NOTICE_LONGPOLL_NEW_GROUP_NOTICE));break;case"7,7":this._updatenoticeSequence(r.friendListMod),n.emit(Ju.NOTICE_LONGPOLL_NEW_FRIEND_MESSAGES,{data:r.friendListMod}),i.dot("emit ".concat(Ju.NOTICE_LONGPOLL_NEW_FRIEND_MESSAGES));break;case"8,6":this._updatenoticeSequence(r.profileModify),n.emit(Ju.NOTICE_LONGPOLL_PROFILE_MODIFIED,{data:r.profileModify}),i.dot("emit ".concat(Ju.NOTICE_LONGPOLL_PROFILE_MODIFIED));break;case"10,5":if(this._updatenoticeSequence(r.C2CNotifyMessageArray),this._isKickedoutNotice(r.C2CNotifyMessageArray))return void n.emit(Ju.NOTICE_LONGPOLL_MUTIPLE_DEVICE_KICKED_OUT);if(this._isSysCmdMsgNotify(r.C2CNotifyMessageArray))return void n.emit(Ju.NOTICE_LONGPOLL_RECEIVE_SYSTEM_ORDERS);as.warn("NotificationController._eachEventArray() get Event condition : ".concat(l,", only increase noticeSequence"));break;case"3,0":n.emit(Ju.NOTICE_LONGPOLL_NEW_GROUP_MESSAGES,{data:[r]}),i.dot("emit ".concat(Ju.NOTICE_LONGPOLL_NEW_GROUP_MESSAGES));break;case"6,0":n.emit(Ju.NOTICE_LONGPOLL_NEW_GROUP_TIPS,{data:[r]}),i.dot("emit ".concat(Ju.NOTICE_LONGPOLL_NEW_GROUP_TIPS));break;case"5,0":n.emit(Ju.NOTICE_LONGPOLL_NEW_GROUP_NOTICE,{data:{groupSystemNotices:[r],type:e}}),i.dot("emit ".concat(Ju.NOTICE_LONGPOLL_NEW_GROUP_NOTICE));break;default:this._updatenoticeSequence(),o="".concat($u.NOTICE_RUNLOOP_UNEXPECTED_CONDITION),a="".concat(ju.NOTICE_RUNLOOP_UNEXPECTED_CONDITION,": ").concat(l),n.emit(Ju.ERROR_DETECTED,new qu({code:o,message:a,data:{condition:l,eventItem:r}})),i.dot("".concat(Ju.ERROR_DETECTED,":").concat(o)),o=a=""}i.report()}}}},{key:"_confirmCarrierType",value:function(t){var e={C2CMessageArray:1,groupMessageArray:2,groupTips:3,messageList:4,C2CNotifyMessageArray:5,profileModify:6,friendListMod:7},i="";for(var n in t)if(e.hasOwnProperty(n)){i=n;break}return""===i?0:e.hasOwnProperty(i)?e[i]:0}},{key:"_isKickedoutNotice",value:function(t){return t[0].hasOwnProperty("kickoutMsgNotify")?1:0}},{key:"_isSysCmdMsgNotify",value:function(t){return t[0]&&t[0].hasOwnProperty("sysCmdMsgNotify")?1:0}},{key:"_startSyncMessages",value:function(t){1!=this._syncMessagesFinished&&this.syncMessage()}},{key:"syncMessage",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.tim,r=n.connectionController,o=n.innerEmitter;this._syncMessagesIsRunning=1;var a=this.createPackage({name:"syncMessage",action:"query",param:{cookie:e,syncFlag:i}});r.request(a).then((function(e){var i=e.data;switch(lg(i.cookie,i.syncFlag)){case"00":case"01":o.emit(Ju.ERROR_DETECTED,{code:$u.NOTICE_RUNLOOP_OFFSET_LOST,message:ju.NOTICE_RUNLOOP_OFFSET_LOST});break;case"10":case"11":i.eventArray&&t._eachEventArray(i.eventArray,"sync"),t._syncNoticeList=t._syncNoticeList.concat(i.messageList),o.emit(Ju.SYNC_MESSAGE_C2C_PROCESSING,{data:i.messageList,C2CRemainingUnreadList:i.C2CRemainingUnreadList}),t._syncOffset=i.cookie,t.syncMessage(i.cookie,i.syncFlag);break;case"12":i.eventArray&&t._eachEventArray(i.eventArray,"sync"),t._syncNoticeList=t._syncNoticeList.concat(i.messageList),o.emit(Ju.SYNC_MESSAGE_C2C_FINISHED,{data:i.messageList,C2CRemainingUnreadList:i.C2CRemainingUnreadList}),t._syncOffset=i.cookie,t._syncNoticeList=[],t._syncMessagesIsRunning=0,t._syncMessagesFinished=1}})).catch((function(e){t._syncMessagesIsRunning=0,as.error("NotificationController.syncMessage() failed, error:",JSON.stringify(e))}))}}]),e}(),yg=1..toFixed,Sg=Math.floor,Eg=function t(e,i,n){return 0===i?n:i%2==1?t(e,i-1,n*e):t(e*e,i/2,n)},Cg=yg&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!h((function(){yg.call({})}));Ot({target:"Number",proto:1,forced:Cg},{toFixed:function(t){var e,i,n,r,o=function(t){if("number"!=typeof t&&"Number"!=y(t))throw TypeError("Incorrect invocation");return+t}(this),a=ct(t),s=[0,0,0,0,0,0],c="",u="0",l=function(t,e){for(var i=-1,n=e;++i<6;)n+=t*s[i],s[i]=n%1e7,n=Sg(n/1e7)},f=function(t){for(var e=6,i=0;--e>=0;)i+=s[e],s[e]=Sg(i/t),i=i%t*1e7},h=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==s[t]){var i=String(s[t]);e=""===e?i:e+lp.call("0",7-i.length)+i}return e};if(a<0||a>20)throw RangeError("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(c="-",o=-o),o>1e-21)if(i=(e=function(t){for(var e=0,i=t;i>=4096;)e+=12,i/=4096;for(;i>=2;)e+=1,i/=2;return e}(o*Eg(2,69,1))-69)<0?o*Eg(2,-e,1):o/Eg(2,e,1),i*=4503599627370496,(e=52-e)>0){for(l(0,i),n=a;n>=7;)l(1e7,0),n-=7;for(l(Eg(10,n,1),0),n=e-1;n>=23;)f(1<<23),n-=23;f(1<<n),l(1,1),f(2),u=h()}else l(0,i),l(1<<-e,0),u=h()+lp.call("0",a);return a>0?c+((r=u.length)<=a?"0."+lp.call("0",a-r)+u:u.slice(0,r-a)+"."+u.slice(r-a)):c+u}});var Ig=function(t){function e(t){var i;return ci(this,e),(i=Si(this,di(e).call(this,t)))._initializeListener(),i}return gi(e,cl),li(e,[{key:"_initializeMembers",value:function(t){this.expiredTimeLimit=300,this.appid=t.appid||"",this.bucketName=t.bucketName||"",this.expiredTimeOut=t.expiredTimeOut||this.expiredTimeLimit,this.region="ap-shanghai",this.cos=null,this.cosOptions={secretId:t.secretId,secretKey:t.secretKey,sessionToken:t.sessionToken,expiredTime:t.expiredTime},this._initUploaderMethod()}},{key:"_expiredTimer",value:function(){var t=this,e=setInterval((function(){Math.ceil(Date.now()/1e3)>=t.cosOptions.expiredTime-20&&(t._isReady=0,t._getAuthorizationKey(),clearInterval(e))}),1e4)}},{key:"_initializeListener",value:function(){this.tim.innerEmitter.on(Ju.CONTEXT_A2KEY_AND_TINYID_UPDATED,this._initialization,this)}},{key:"_initialization",value:function(){this._initCOSSDKPlugin(),this.COSSDK?(this._initializeMembers({}),this._getAuthorizationKey()):as.warn("UploadController 没有检测到上传插件，将无法发送图片、音频、视频、文件等类型的消息。")}},{key:"_getAuthorizationKey",value:function(){var t=this,e=Math.ceil(Date.now()/1e3),i=this.createPackage({name:"cosSig",action:"query",param:{duration:this.expiredTimeLimit}});this.tim.connectionController.request(i).then((function(i){i.data.expiredTimeOut=i.data.expiredTime-e,as.log("UploadController._getAuthorizationKey timeout=".concat(i.data.expiredTimeOut,"s")),t._initializeMembers(i.data),t._expiredTimer(),t._initUploaderMethod()})).catch((function(t){as.warn(t)}))}},{key:"_initCOSSDKPlugin",value:function(){var t=Ma?"cos-wx-sdk":"cos-js-sdk";this.COSSDK=this.tim.getPlugin(t)}},{key:"_initUploaderMethod",value:function(){var t=this;this.appid&&(this.cos=Ma?new this.COSSDK({ForcePathStyle:1,getAuthorization:this._getAuthorization.bind(this)}):new this.COSSDK({getAuthorization:this._getAuthorization.bind(this)}),this._cosUploadMethod=Ma?function(e,i){t.cos.postObject(e,i)}:function(e,i){t.cos.uploadFiles(e,i)},this._IAmReady())}},{key:"_getAuthorization",value:function(t,e){e({TmpSecretId:this.cosOptions.secretId,TmpSecretKey:this.cosOptions.secretKey,XCosSecurityToken:this.cosOptions.sessionToken,ExpiredTime:this.cosOptions.expiredTime})}},{key:"_IAmReady",value:function(){this.triggerReady()}},{key:"uploadImage",value:function(t){if(!t.file)return kl(new qu({code:$u.MESSAGE_IMAGE_SELECT_FILE_FIRST,message:ju.MESSAGE_IMAGE_SELECT_FILE_FIRST}));var e=this._checkImageType(t.file);if(1!=e)return e;var i=this._checkImageMime(t.file);if(1!=i)return i;var n=this._checkImageSize(t.file);return 1!=n?n:this.upload(t)}},{key:"_checkImageType",value:function(t){var e="";return e=Ma?t.url.slice(t.url.lastIndexOf(".")+1):t.files[0].name.slice(t.files[0].name.lastIndexOf(".")+1),sp.indexOf(e.toLowerCase())>=0?1:kl(new qu({coe:$u.MESSAGE_IMAGE_TYPES_LIMIT,message:ju.MESSAGE_IMAGE_TYPES_LIMIT}))}},{key:"_checkImageMime",value:function(t){return 1}},{key:"_checkImageSize",value:function(t){return(Ma?t.size:t.files[0].size)<20971520?1:kl(new qu({coe:$u.MESSAGE_IMAGE_SIZE_LIMIT,message:"".concat(ju.MESSAGE_IMAGE_SIZE_LIMIT,": ").concat(20971520," bytes")}))}},{key:"uploadFile",value:function(t){var e=null;return t.file?t.file.files[0].size>20971520?(e=new qu({code:$u.MESSAGE_FILE_SIZE_LIMIT,message:"".concat(ju.MESSAGE_FILE_SIZE_LIMIT,": ").concat(20971520," bytes")}),kl(e)):this.upload(t):(e=new qu({code:$u.MESSAGE_FILE_SELECT_FILE_FIRST,message:ju.MESSAGE_FILE_SELECT_FILE_FIRST}),kl(e))}},{key:"uploadVideo",value:function(t){return t.file?this.upload(t):kl()}},{key:"uploadAudio",value:function(t){return t.file?t.file.size>20971520?kl(new qu({code:$u.MESSAGE_AUDIO_SIZE_LIMIT,message:"".concat(ju.MESSAGE_AUDIO_SIZE_LIMIT,": ").concat(20971520," bytes")})):this.upload(t):kl(new qu({code:$u.MESSAGE_AUDIO_UPLOAD_FAIL,message:ju.MESSAGE_AUDIO_UPLOAD_FAIL}))}},{key:"upload",value:function(t){var e=this;as.time(jl);var i=Ma?t.file:t.file.files[0];return new Promise((function(n,r){var o=Ma?e._createCosOptionsWXMiniApp(t):e._createCosOptionsWeb(t),a=e;e._cosUploadMethod(o,(function(t,o){var s=Object.create(null);if(o){if(e._isUploadError(o,t))return r(o.files[0].error),void as.warn("UploadController.upload failed, network error:".concat(o.files[0].error.error));s.fileName=i.name,s.fileSize=i.size,s.fileType=i.type.slice(i.type.indexOf("/")+1).toUpperCase(),s.location=Ma?o.Location:o.files[0].data.Location;var c=as.timeEnd(jl),u=a._formatFileSize(i.size),l=a._formatSpeed(1e3*i.size/c),f="UploadController.upload success name=".concat(i.name,",size=").concat(u,",time=").concat(c,"ms,speed=").concat(l);return as.log(f),void n(s)}as.warn("UploadController.upload failed, error:".concat(t)),r(t)}))}))}},{key:"_isUploadError",value:function(t,e){return Ma?e?1:0:null!==t.files[0].error?1:0}},{key:"_formatFileSize",value:function(t){return t<1024?t+"B":t<1048576?Math.floor(t/1024)+"KB":Math.floor(t/1048576)+"MB"}},{key:"_formatSpeed",value:function(t){return t<=1048576?(t/1024).toFixed(1)+"KB/s":(t/1048576).toFixed(1)+"MB/s"}},{key:"_createCosOptionsWeb",value:function(t){var e=this.tim.context.identifier;return{files:[{Bucket:"".concat(this.bucketName,"-").concat(this.appid),Region:this.region,Key:"imfiles/".concat(e,"/").concat(t.to,"-").concat(As(9999999),"-").concat(t.file.files[0].name),Body:t.file.files[0]}],SliceSize:1048576,onProgress:function(e){if("function"==typeof t.onProgress)try{t.onProgress(e.percent)}catch(a){as.warn("onProgress callback error:"),as.error(a)}},onFileFinish:function(t,e,i){}}}},{key:"_createCosOptionsWXMiniApp",value:function(t){var e=this.tim.context.identifier,i=t.file.url;return{Bucket:"".concat(this.bucketName,"-").concat(this.appid),Region:this.region,Key:"imfiles/".concat(e,"/").concat(t.to,"-").concat(t.file.name),FilePath:i,onProgress:function(e){if(as.log(JSON.stringify(e)),"function"==typeof t.onProgress)try{t.onProgress(e.percent)}catch(i){as.warn("onProgress callback error:"),as.error(i)}}}}}]),e}(),bg={app_id:"",event_id:"",api_base:"https://pingtas.qq.com/pingd",prefix:"_mta_",version:"1.3.9",stat_share_app:0,stat_pull_down_fresh:0,stat_reach_bottom:0,stat_param:1};function Ag(){try{var t="s"+wg();return i.setStorageSync(bg.prefix+"ssid",t),t}catch(o){}}function wg(t){for(var e=[0,1,2,3,4,5,6,7,8,9],i=10;1<i;i--){var n=Math.floor(10*Math.random()),r=e[n];e[n]=e[i-1],e[i-1]=r}for(i=n=0;5>i;i++)n=10*n+e[i];return(t||"")+(n+"")+ +new Date}function Tg(){try{var t=getCurrentPages(),e="/";return 0<t.length&&(e=t.pop().__route__),e}catch(a){n("log","get current page path error:"+a," at node_modules\\tim-js-sdk\\tim-js.js:1")}}function xg(){var t,e={dm:"wechat.apps.xx",url:encodeURIComponent(Tg()+Lg(Og.Data.pageQuery)),pvi:"",si:"",ty:0};return e.pvi=((t=function(){try{return i.getStorageSync(bg.prefix+"auid")}catch(e){}}())||(t=function(){try{var e=wg();return i.setStorageSync(bg.prefix+"auid",e),e}catch(t){}}(),e.ty=1),t),e.si=function(){var t=function(){try{return i.getStorageSync(bg.prefix+"ssid")}catch(t){}}();return t||(t=Ag()),t}(),e}function Dg(){var t=function(){var t=i.getSystemInfoSync();return{adt:encodeURIComponent(t.model),scl:t.pixelRatio,scr:t.windowWidth+"x"+t.windowHeight,lg:t.language,fl:t.version,jv:encodeURIComponent(t.system),tz:encodeURIComponent(t.platform)}}();return function(t){i.getNetworkType({success:function(e){t(e.networkType)}})}((function(t){try{i.setStorageSync(bg.prefix+"ntdata",t)}catch(o){}})),t.ct=i.getStorageSync(bg.prefix+"ntdata")||"4g",t}function Mg(){var t,e=Og.Data.userInfo,i=[];for(t in e)e.hasOwnProperty(t)&&i.push(t+"="+e[t]);return e=i.join(";"),{r2:bg.app_id,r4:"wx",ext:"v="+bg.version+(null!==e&&""!==e?";ui="+encodeURIComponent(e):"")}}function Lg(t){if(!bg.stat_param||!t)return"";t=function(t){if(1>bg.ignore_params.length)return t;var e,i={};for(e in t)0<=bg.ignore_params.indexOf(e)||(i[e]=t[e]);return i}(t);var e,i=[];for(e in t)i.push(e+"="+t[e]);return 0<i.length?"?"+i.join("&"):""}var Og={App:{init:function(t){"appID"in t&&(bg.app_id=t.appID),"eventID"in t&&(bg.event_id=t.eventID),"statShareApp"in t&&(bg.stat_share_app=t.statShareApp),"statPullDownFresh"in t&&(bg.stat_pull_down_fresh=t.statPullDownFresh),"statReachBottom"in t&&(bg.stat_reach_bottom=t.statReachBottom),"ignoreParams"in t&&(bg.ignore_params=t.ignoreParams),"statParam"in t&&(bg.stat_param=t.statParam),Ag();try{"lauchOpts"in t&&(Og.Data.lanchInfo=t.lauchOpts,Og.Data.lanchInfo.landing=1)}catch(o){}"autoReport"in t&&t.autoReport&&function(){var t=r;r=function(e){var i=e.onLoad;e.onLoad=function(t){i&&i.call(this,t),Og.Data.lastPageQuery=Og.Data.pageQuery,Og.Data.pageQuery=t,Og.Data.lastPageUrl=Og.Data.pageUrl,Og.Data.pageUrl=Tg(),Og.Data.show=0,Og.Page.init()},t(e)}}()}},Page:{init:function(){var t,e=getCurrentPages()[getCurrentPages().length-1];e.onShow&&(t=e.onShow,e.onShow=function(){if(1==Og.Data.show){var e=Og.Data.lastPageQuery;Og.Data.lastPageQuery=Og.Data.pageQuery,Og.Data.pageQuery=e,Og.Data.lastPageUrl=Og.Data.pageUrl,Og.Data.pageUrl=Tg()}Og.Data.show=1,Og.Page.stat(),t.apply(this,arguments)}),bg.stat_pull_down_fresh&&e.onPullDownRefresh&&function(){var t=e.onPullDownRefresh;e.onPullDownRefresh=function(){Og.Event.stat(bg.prefix+"pulldownfresh",{url:e.__route__}),t.apply(this,arguments)}}(),bg.stat_reach_bottom&&e.onReachBottom&&function(){var t=e.onReachBottom;e.onReachBottom=function(){Og.Event.stat(bg.prefix+"reachbottom",{url:e.__route__}),t.apply(this,arguments)}}(),bg.stat_share_app&&e.onShareAppMessage&&function(){var t=e.onShareAppMessage;e.onShareAppMessage=function(){return Og.Event.stat(bg.prefix+"shareapp",{url:e.__route__}),t.apply(this,arguments)}}()},multiStat:function(t,e){if(1==e)Og.Page.stat(t);else{var i=getCurrentPages()[getCurrentPages().length-1];i.onShow&&function(){var e=i.onShow;i.onShow=function(){Og.Page.stat(t),e.call(this,arguments)}}()}},stat:function(t){if(""!=bg.app_id){var e=[],n=Mg();if(t&&(n.r2=t),t=[xg(),n,Dg()],Og.Data.lanchInfo){t.push({ht:Og.Data.lanchInfo.scene}),Og.Data.pageQuery&&Og.Data.pageQuery._mta_ref_id&&t.push({rarg:Og.Data.pageQuery._mta_ref_id});try{1==Og.Data.lanchInfo.landing&&(n.ext+=";lp=1",Og.Data.lanchInfo.landing=0)}catch(u){}}t.push({rdm:"/",rurl:0>=Og.Data.lastPageUrl.length?Og.Data.pageUrl+Lg(Og.Data.lastPageQuery):encodeURIComponent(Og.Data.lastPageUrl+Lg(Og.Data.lastPageQuery))}),t.push({rand:+new Date}),n=0;for(var r=t.length;n<r;n++)for(var o in t[n])t[n].hasOwnProperty(o)&&e.push(o+"="+(void 0===t[n][o]?"":t[n][o]));i.request({url:bg.api_base+"?"+e.join("&").toLowerCase()})}}},Event:{stat:function(t,e){if(""!=bg.event_id){var n=[],r=xg(),o=Mg();r.dm="wxapps.click",r.url=t,o.r2=bg.event_id;var a,s=void 0===e?{}:e,c=[];for(a in s)s.hasOwnProperty(a)&&c.push(encodeURIComponent(a)+"="+encodeURIComponent(s[a]));for(s=c.join(";"),o.r5=s,s=0,o=(r=[r,o,Dg(),{rand:+new Date}]).length;s<o;s++)for(var u in r[s])r[s].hasOwnProperty(u)&&n.push(u+"="+(void 0===r[s][u]?"":r[s][u]));i.request({url:bg.api_base+"?"+n.join("&").toLowerCase()})}}},Data:{userInfo:null,lanchInfo:null,pageQuery:null,lastPageQuery:null,pageUrl:"",lastPageUrl:"",show:0}},Ng=Og,Pg=function(){function t(){ci(this,t),this.cache=[],this.MtaWX=null,this._init()}return li(t,[{key:"report",value:function(t,e){var i=this;try{Da?window.MtaH5?(window.MtaH5.clickStat(t,e),this.cache.forEach((function(t){var e=t.name,n=t.param;window.MtaH5.clickStat(e,n),i.cache.shift()}))):this.cache.push({name:t,param:e}):Ma&&(this.MtaWX?(this.MtaWX.Event.stat(t,e),this.cache.forEach((function(t){var e=t.name,n=t.param;i.MtaWX.stat(e,n),i.cache.shift()}))):this.cache.push({name:t,param:e}))}catch(Bg){}}},{key:"stat",value:function(){try{Da&&window.MtaH5?window.MtaH5.pgv():Ma&&this.MtaWX&&this.MtaWX.Page.stat()}catch(Bg){}}},{key:"_init",value:function(){try{if(Da){window._mtac={autoReport:0};var t=document.createElement("script"),e=function(){if(Ma)return"https:";var t=window.location.protocol;return["http:","https:"].indexOf(t)<0&&(t="http:"),t}();t.src="".concat(e,"//pingjs.qq.com/h5/stats.js?v2.0.4"),t.setAttribute("name","MTAH5"),t.setAttribute("sid","500690998"),t.setAttribute("cid","500691017");var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i)}else Ma&&(this.MtaWX=Ng,this.MtaWX.App.init({appID:"500690995",eventID:"500691014",autoReport:0,statParam:1}))}catch(Bg){}}}]),t}(),Rg=function(t){function e(t){var i;return ci(this,e),(i=Si(this,di(e).call(this,t))).tim=t,i.MTA=new Pg,i._initListener(),i}return gi(e,cl),li(e,[{key:"_initListener",value:function(){var t=this,e=this.tim.innerEmitter;this._sendMessageSuccessRateReport(),this._loginSuccessRateReport(),e.on(Ju.SDK_READY,(function(){t.MTA.report("sdkappid",{value:t.tim.context.SDKAppID}),t.MTA.report("version",{value:Hg.VERSION}),t.MTA.stat()}))}},{key:"_sendMessageSuccessRateReport",value:function(){var t=this,e=this.tim.innerEmitter;e.on(Ju.MESSAGE_SENDING,(function(){t.MTA.report("sendmessage",{send:1})})),e.on(Ju.MESSAGE_C2C_SEND_SUCCESS,(function(){t.MTA.report("sendmessage",{success:1})})),e.on(Ju.MESSAGE_C2C_SEND_FAIL,(function(){t.MTA.report("sendmessage",{fail:1})})),e.on(Ju.MESSAGE_GROUP_SEND_SUCCESS,(function(){t.MTA.report("sendmessage",{success:1})})),e.on(Ju.MESSAGE_GROUP_SEND_FAIL,(function(){t.MTA.report("sendmessage",{fail:1})}))}},{key:"_loginSuccessRateReport",value:function(){var t=this,e=this.tim.innerEmitter;e.on(Ju.SIGN_LOGIN,(function(){t.MTA.report("login",{login:1})})),e.on(Ju.SIGN_LOGIN_SUCCESS,(function(){t.MTA.report("login",{success:1})})),e.on(Ju.SIGN_LOGIN_FAIL,(function(){t.MTA.report("login",{fail:1})}))}}]),e}(),kg=function(t){return function(e,i,n,r){Nt(i);var o=Rt(e),a=E(o),s=lt(o.length),c=t?s-1:0,u=t?-1:1;if(n<2)for(;;){if(c in a){r=a[c],c+=u;break}if(c+=u,t?c<0:s<=c)throw TypeError("Reduce of empty array with no initial value")}for(;t?c>=0:s>c;c+=u)c in a&&(r=i(r,a[c],c,o));return r}},Gg={left:kg(0),right:kg(1)}.left;Ot({target:"Array",proto:1,forced:Kt("reduce")},{reduce:function(t){return Gg(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var Ug=new(function(){function t(){ci(this,t),this.map=new Map,this.thresholdValue=10}return li(t,[{key:"push",value:function(t,e){if(this.map.has(t)){var i=this.map.get(t);i.push(e),this.needReport(i)&&(this.report(i,t),this.map.delete(t))}else this.map.set(t,[e])}},{key:"needReport",value:function(t){return t.length===this.thresholdValue}},{key:"report",value:function(t,e){var i=t.reduce((function(t,e){return t+e}))/t.length,n=Math.min.apply(null,t),r=Math.max.apply(null,t);as.log("AverageCalculator.report ".concat(e," count=").concat(t.length," average=").concat(i,"ms max=").concat(r,"ms min=").concat(n,"ms"))}},{key:"reset",value:function(){this.map.clear()}}]),t}()),Fg=function(){function t(e){ci(this,t),sl.mixin(this),this.setLogLevel(0),this._initOptions(e),this._initMemberVariables(),this._initControllers(),this._initListener(),as.info("SDK inWxMiniApp:".concat(Ma,", SDKAppID:").concat(e.SDKAppID)),as.info("UserAgent:".concat(La))}return li(t,[{key:"login",value:function(t){return as.time(Gl),this.loginInfo.identifier=t.identifier||t.userID,this.loginInfo.userSig=t.userSig,this.signController.login(this.loginInfo)}},{key:"logout",value:function(){var t=this.signController.logout();return this.resetSDK(),t}},{key:"on",value:function(t,e,i){as.debug("on","eventName:".concat(t)),this.outerEmitter.on(t,e,i||this)}},{key:"once",value:function(t,e,i){as.debug("once","eventName:".concat(t)),this.outerEmitter.once(t,e,i||this)}},{key:"off",value:function(t,e,i,n){as.debug("off","eventName:".concat(t)),this.outerEmitter.off(t,e,i,n)}},{key:"registerPlugin",value:function(t){var e=this;this.plugins||(this.plugins={}),Object.keys(t).forEach((function(i){e.plugins[i]=t[i]}))}},{key:"getPlugin",value:function(t){return this.plugins[t]||void 0}},{key:"setLogLevel",value:function(t){as.setLevel(t)}},{key:"downloadLog",value:function(){var t=document.createElement("a"),e=new Date,i=new Blob(this.getLog());t.download="TIM-"+e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+"-"+this.loginInfo.SDKAppID+"-"+this.context.identifier+".txt",t.href=URL.createObjectURL(i),t.click(),URL.revokeObjectURL(i)}},{key:"destroy",value:function(){this.logout(),this.outerEmitter.emit(Qe.SDK_DESTROY,{SDKAppID:this.loginInfo.SDKAppID})}},{key:"createTextMessage",value:function(t){return this.messageController.createTextMessage(t)}},{key:"createImageMessage",value:function(t){return this.messageController.createImageMessage(t)}},{key:"createAudioMessage",value:function(t){return this.messageController.createAudioMessage(t)}},{key:"createFileMessage",value:function(t){return Ma?kl({code:$u.MESSAGE_FILE_WECHAT_MINIAPP_NOT_SUPPORT,message:ju.MESSAGE_FILE_WECHAT_MINIAPP_NOT_SUPPORT}):this.messageController.createFileMessage(t)}},{key:"createFaceMessage",value:function(t){return this.messageController.createFaceMessage(t)}},{key:"createCustomMessage",value:function(t){return this.messageController.createCustomMessage(t)}},{key:"sendMessage",value:function(t){var e=this;return t instanceof Fp?new Promise((function(i,n){t.afterOperated((function(t){e.messageController.sendMessageInstance(t).then((function(t){i(t)})).catch((function(t){n(t)}))}))})):kl(new qu({code:$u.MESSAGE_SEND_NEED_MESSAGE_INSTANCE,message:ju.MESSAGE_SEND_NEED_MESSAGE_INSTANCE}))}},{key:"resendMessage",value:function(t){return this.messageController.resendMessage(t)}},{key:"getMessageList",value:function(t){return this.messageController.getMessageList(t)}},{key:"setMessageRead",value:function(t){return this.messageController.setMessageRead(t)}},{key:"getConversationList",value:function(){return this.conversationController.getConversationList()}},{key:"getConversationProfile",value:function(t){return this.conversationController.getConversationProfile(t)}},{key:"deleteConversation",value:function(t){return this.conversationController.deleteConversation(t)}},{key:"getMyProfile",value:function(){return this.userController.getMyProfile()}},{key:"getUserProfile",value:function(t){return this.userController.getUserProfile(t)}},{key:"updateMyProfile",value:function(t){return this.userController.updateMyProfile(t)}},{key:"getFriendList",value:function(){return this.userController.getFriendList()}},{key:"deleteFriend",value:function(t){return this.userController.deleteFriend(t)}},{key:"getBlacklist",value:function(){return this.userController.getBlacklist()}},{key:"addToBlacklist",value:function(t){return this.userController.addBlacklist(t)}},{key:"removeFromBlacklist",value:function(t){return this.userController.deleteBlacklist(t)}},{key:"getGroupList",value:function(t){return this.groupController.getGroupList(t)}},{key:"getGroupProfile",value:function(t){return this.groupController.getGroupProfile(t)}},{key:"createGroup",value:function(t){return this.groupController.createGroup(t)}},{key:"dismissGroup",value:function(t){return this.groupController.dismissGroup(t)}},{key:"updateGroupProfile",value:function(t){return this.groupController.updateGroupProfile(t)}},{key:"joinGroup",value:function(t){return this.groupController.joinGroup(t)}},{key:"quitGroup",value:function(t){return this.groupController.quitGroup(t)}},{key:"searchGroupByID",value:function(t){return this.groupController.searchGroupByID(t)}},{key:"changeGroupOwner",value:function(t){return this.groupController.changeGroupOwner(t)}},{key:"handleGroupApplication",value:function(t){return this.groupController.handleGroupApplication(t)}},{key:"setMessageRemindType",value:function(t){return this.groupController.setMessageRemindType(t)}},{key:"getGroupMemberList",value:function(t){return this.groupController.getGroupMemberList(t)}},{key:"addGroupMember",value:function(t){return this.groupController.addGroupMember(t)}},{key:"deleteGroupMember",value:function(t){return this.groupController.deleteGroupMember(t)}},{key:"setGroupMemberMuteTime",value:function(t){return this.groupController.setGroupMemberMuteTime(t)}},{key:"setGroupMemberRole",value:function(t){return this.groupController.setGroupMemberRole(t)}},{key:"setGroupMemberNameCard",value:function(t){return this.groupController.setGroupMemberNameCard(t)}},{key:"setGroupMemberCustomField",value:function(t){return this.groupController.setGroupMemberCustomField(t)}},{key:"_initOptions",value:function(t){this.plugins={},this.loginInfo={SDKAppID:t.SDKAppID||null,accountType:As(),identifier:null,userSig:null},this.options={runLoopNetType:t.runLoopNetType||Al,enablePointer:t.enablePointer||0}}},{key:"_initMemberVariables",value:function(){this.context=null,this.innerEmitter=new dg,this.outerEmitter=new dg,Pl(this.outerEmitter),this.packageConfig=new vg(this),this.storage=new gg(this),this.outerEmitter._emit=this.outerEmitter.emit,this.outerEmitter.emit=function(t,e){var i=arguments[0],n=[i,{name:arguments[0],data:arguments[1]}];as.debug("emit ".concat(i),n[1]),this.outerEmitter._emit.apply(this.outerEmitter,n)}.bind(this)}},{key:"_initControllers",value:function(){this.exceptionController=new ap(this),this.connectionController=new np(this),this.contextController=new hl(this),this.signController=new ql(this),this.messageController=new rg(this),this.conversationController=new Vp(this),this.userController=new vp(this),this.groupController=new ug(this),this.notificationController=new _g(this),this.statusController=new hg(this),this.uploadController=new Ig(this),this.reporterController=new Rg(this),this._initReadyListener()}},{key:"_initListener",value:function(){this.innerEmitter.on(Ju.NOTICE_LONGPOLL_LONG_RECONNECT,this._onNoticeChannelReconnectedAfterLongTime,this)}},{key:"_initReadyListener",value:function(){for(var t=this,e=this.readyList,i=0,n=e.length;i<n;i++)this[e[i]].ready((function(){return t._readyHandle()}))}},{key:"_onNoticeChannelReconnectedAfterLongTime",value:function(t){as.log("reconnect after long time...",t),this.notificationController.closeNoticeChannel(),this.resetSDK(),this.login(this.loginInfo)}},{key:"resetSDK",value:function(){var t=this;this.initList.forEach((function(e){t[e].reset&&t[e].reset()})),this.storage.reset(),Ug.reset(),this.resetReady(),this._initReadyListener(),this.outerEmitter.emit(Qe.SDK_NOT_READY)}},{key:"_readyHandle",value:function(){for(var t=this.readyList,e=1,i=0,n=t.length;i<n;i++)if(!this[t[i]].isReady()){e=0;break}e&&(as.warn("SDK is ready. cost=".concat(as.timeEnd(Gl),"ms")),this.triggerReady(),this.innerEmitter.emit(Ju.SDK_READY),this.outerEmitter.emit(Qe.SDK_READY))}}]),t}();Fg.prototype.readyList=["conversationController"],Fg.prototype.initList=["exceptionController","connectionController","signController","contextController","messageController","conversationController","userController","groupController","notificationController"];var $g={login:"login",on:"on",off:"off",ready:"ready",setLogLevel:"setLogLevel",joinGroup:"joinGroup",registerPlugin:"registerPlugin"};function jg(t,e,i){if(t||void 0!==$g[e])return 1;i.innerEmitter.emit(Ju.ERROR_DETECTED,new qu({code:$u.SDK_IS_NOT_READY,message:"".concat(ju.SDK_IS_NOT_READY," ").concat(e)}))}var qg={},Hg={create:function(t){if(t.SDKAppID&&qg[t.SDKAppID])return qg[t.SDKAppID];as.log("TIM.create");var e=new Fg(t);e.on(Qe.SDK_DESTROY,(function(t){qg[t.data.SDKAppID]=null,delete qg[t.data.SDKAppID]}));var i=function(t){var e=Object.create(null);return Object.keys(Us).forEach((function(i){if(t[i]){var n=Us[i],r=new Ii;e[n]=function(){var e=Array.from(arguments);return r.use((function(e,n){if(jg(t.isReady(),i,t))return n()})).use((function(t,e){if(1==Rs(t,Gs[i],n))return e()})).use((function(e,n){return t[i].apply(t,e)})),r.run(e)}}})),e}(e);return qg[t.SDKAppID]=i,as.log("TIM.create ok"),i}};return Hg.TYPES=Ze,Hg.EVENT=Qe,Hg.VERSION="2.1.4",as.log("TIM.VERSION: ".concat(Hg.VERSION)),Hg}))}).call(this,i("c8ba"),i("fe07")["default"],i("0de9")["default"],i("fe07")["Page"])},"921b":function(t,e,i){"use strict";var n=i("8189");function r(t){return function(){var e,i=c(t);if(s()){var n=c(this).constructor;e=Reflect.construct(i,arguments,n)}else e=i.apply(this,arguments);return o(this,e)}}function o(t,e){return!e||"object"!==typeof e&&"function"!==typeof e?a(t):e}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function u(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},l(t,e)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(t,e,i){return e&&h(t.prototype,e),i&&h(t,i),t}var g=n.version,d="https://tongji.dcloud.io/uni/stat",m="https://tongji.dcloud.io/uni/stat.gif",v=1800,_=300,y=10,S="__DC_STAT_UUID",E="__DC_UUID_VALUE";function C(){var t="";if("n"===w()){try{t=plus.runtime.getDCloudId()}catch(e){t=""}return t}try{t=uni.getStorageSync(S)}catch(e){t=E}if(!t){t=Date.now()+""+Math.floor(1e7*Math.random());try{uni.setStorageSync(S,t)}catch(e){uni.setStorageSync(S,E)}}return t}var I=function(t){var e=Object.keys(t),i=e.sort(),n={},r="";for(var o in i)n[i[o]]=t[i[o]],r+=i[o]+"="+t[i[o]]+"&";return{sign:"",options:r.substr(0,r.length-1)}},b=function(t){var e="";for(var i in t)e+=i+"="+t[i]+"&";return e.substr(0,e.length-1)},A=function(){return parseInt((new Date).getTime()/1e3)},w=function(){var t={"app-plus":"n",h5:"h5","mp-weixin":"wx","mp-alipay":"ali","mp-baidu":"bd","mp-toutiao":"tt","mp-qq":"qq"};return t["app-plus"]},T=function(){var t="";return"wx"!==w()&&"qq"!==w()||uni.canIUse("getAccountInfoSync")&&(t=uni.getAccountInfoSync().miniProgram.appId||""),t},x=function(){return"n"===w()?plus.runtime.version:""},D=function(){var t=w(),e="";return"n"===t&&(e=plus.runtime.channel),e},M=function(t){var e=w(),i="";return t||("wx"===e&&(i=uni.getLaunchOptionsSync().scene),i)},L="First__Visit__Time",O="Last__Visit__Time",N=function(){var t=uni.getStorageSync(L),e=0;return t?e=t:(e=A(),uni.setStorageSync(L,e),uni.removeStorageSync(O)),e},P=function(){var t=uni.getStorageSync(O),e=0;return e=t||"",uni.setStorageSync(O,A()),e},R="__page__residence__time",k=0,G=0,U=function(){return k=A(),"n"===w()&&uni.setStorageSync(R,A()),k},F=function(){return G=A(),"n"===w()&&(k=uni.getStorageSync(R)),G-k},$="Total__Visit__Count",j=function(){var t=uni.getStorageSync($),e=1;return t&&(e=t,e++),uni.setStorageSync($,e),e},q=function(t){var e={};for(var i in t)e[i]=encodeURIComponent(t[i]);return e},H=0,B=0,V=function(){var t=(new Date).getTime();return H=t,B=0,t},K=function(){var t=(new Date).getTime();return B=t,t},z=function(t){var e=0;if(0!==H&&(e=B-H),e=parseInt(e/1e3),e=e<1?1:e,"app"===t){var i=e>_;return{residenceTime:e,overtime:i}}if("page"===t){var n=e>v;return{residenceTime:e,overtime:n}}return{residenceTime:e}},Y=function(){var t=getCurrentPages(),e=t[t.length-1],i=e.$vm;return"bd"===w()?i.$mp&&i.$mp.page.is:i.$scope&&i.$scope.route||i.$mp&&i.$mp.page.route},W=function(t){var e=getCurrentPages(),i=e[e.length-1],n=i.$vm,r=t._query,o=r&&"{}"!==JSON.stringify(r)?"?"+JSON.stringify(r):"";return t._query="","bd"===w()?n.$mp&&n.$mp.page.is+o:n.$scope&&n.$scope.route+o||n.$mp&&n.$mp.page.route+o},J=function(t){return!!("page"===t.mpType||t.$mp&&"page"===t.$mp.mpType||"page"===t.$options.mpType)},X=function(t,e){return t?"string"!==typeof t?(console.error("uni.report [eventName] 参数类型错误,只能为 String 类型"),!0):t.length>255?(console.error("uni.report [eventName] 参数长度不能大于 255"),!0):"string"!==typeof e&&"object"!==typeof e?(console.error("uni.report [options] 参数类型错误,只能为 String 或 Object 类型"),!0):"string"===typeof e&&e.length>255?(console.error("uni.report [options] 参数长度不能大于 255"),!0):"title"===t&&"string"!==typeof e?(console.error("uni.report [eventName] 参数为 title 时，[options] 参数只能为 String 类型"),!0):void 0:(console.error("uni.report 缺少 [eventName] 参数"),!0)},Q=i("4062").default,Z=i("a2ba").default||i("a2ba"),tt=uni.getSystemInfoSync(),et=function(){function t(){f(this,t),this.self="",this._retry=0,this._platform="",this._query={},this._navigationBarTitle={config:"",page:"",report:"",lt:""},this._operatingTime=0,this._reportingRequestData={1:[],11:[]},this.__prevent_triggering=!1,this.__licationHide=!1,this.__licationShow=!1,this._lastPageRoute="",this.statData={uuid:C(),ut:w(),mpn:T(),ak:Z.appid,usv:g,v:x(),ch:D(),cn:"",pn:"",ct:"",t:A(),tt:"",p:"android"===tt.platform?"a":"i",brand:tt.brand||"",md:tt.model,sv:tt.system.replace(/(Android|iOS)\s/,""),mpsdk:tt.SDKVersion||"",mpv:tt.version||"",lang:tt.language,pr:tt.pixelRatio,ww:tt.windowWidth,wh:tt.windowHeight,sw:tt.screenWidth,sh:tt.screenHeight}}return p(t,[{key:"_applicationShow",value:function(){if(this.__licationHide){K();var t=z("app");if(t.overtime){var e={path:this._lastPageRoute,scene:this.statData.sc};this._sendReportRequest(e)}this.__licationHide=!1}}},{key:"_applicationHide",value:function(t,e){this.__licationHide=!0,K();var i=z();V();var n=W(this);this._sendHideRequest({urlref:n,urlref_ts:i.residenceTime},e)}},{key:"_pageShow",value:function(){var t=W(this),e=Y();if(this._navigationBarTitle.config=Q&&Q.pages[e]&&Q.pages[e].titleNView&&Q.pages[e].titleNView.titleText||Q&&Q.pages[e]&&Q.pages[e].navigationBarTitleText||"",this.__licationShow)return V(),this.__licationShow=!1,void(this._lastPageRoute=t);K(),this._lastPageRoute=t;var i=z("page");if(i.overtime){var n={path:this._lastPageRoute,scene:this.statData.sc};this._sendReportRequest(n)}V()}},{key:"_pageHide",value:function(){if(!this.__licationHide){K();var t=z("page");return this._sendPageRequest({url:this._lastPageRoute,urlref:this._lastPageRoute,urlref_ts:t.residenceTime}),void(this._navigationBarTitle={config:"",page:"",report:"",lt:""})}}},{key:"_login",value:function(){this._sendEventRequest({key:"login"},0)}},{key:"_share",value:function(){this._sendEventRequest({key:"share"},0)}},{key:"_payment",value:function(t){this._sendEventRequest({key:t},0)}},{key:"_sendReportRequest",value:function(t){this._navigationBarTitle.lt="1";var e=t.query&&"{}"!==JSON.stringify(t.query)?"?"+JSON.stringify(t.query):"";this.statData.lt="1",this.statData.url=t.path+e||"",this.statData.t=A(),this.statData.sc=M(t.scene),this.statData.fvts=N(),this.statData.lvts=P(),this.statData.tvc=j(),"n"===w()?this.getProperty():this.getNetworkInfo()}},{key:"_sendPageRequest",value:function(t){var e=t.url,i=t.urlref,n=t.urlref_ts;this._navigationBarTitle.lt="11";var r={ak:this.statData.ak,uuid:this.statData.uuid,lt:"11",ut:this.statData.ut,url:e,tt:this.statData.tt,urlref:i,urlref_ts:n,ch:this.statData.ch,usv:this.statData.usv,t:A(),p:this.statData.p};this.request(r)}},{key:"_sendHideRequest",value:function(t,e){var i=t.urlref,n=t.urlref_ts,r={ak:this.statData.ak,uuid:this.statData.uuid,lt:"3",ut:this.statData.ut,urlref:i,urlref_ts:n,ch:this.statData.ch,usv:this.statData.usv,t:A(),p:this.statData.p};this.request(r,e)}},{key:"_sendEventRequest",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.key,i=void 0===e?"":e,n=t.value,r=void 0===n?"":n,o=this._lastPageRoute,a={ak:this.statData.ak,uuid:this.statData.uuid,lt:"21",ut:this.statData.ut,url:o,ch:this.statData.ch,e_n:i,e_v:"object"===typeof r?JSON.stringify(r):r.toString(),usv:this.statData.usv,t:A(),p:this.statData.p};this.request(a)}},{key:"getNetworkInfo",value:function(){var t=this;uni.getNetworkType({success:function(e){t.statData.net=e.networkType,t.getLocation()}})}},{key:"getProperty",value:function(){var t=this;plus.runtime.getProperty(plus.runtime.appid,(function(e){t.statData.v=e.version||"",t.getNetworkInfo()}))}},{key:"getLocation",value:function(){var t=this;Z.getLocation?uni.getLocation({type:"wgs84",geocode:!0,success:function(e){e.address&&(t.statData.cn=e.address.country,t.statData.pn=e.address.province,t.statData.ct=e.address.city),t.statData.lat=e.latitude,t.statData.lng=e.longitude,t.request(t.statData)}}):(this.statData.lat=0,this.statData.lng=0,this.request(this.statData))}},{key:"request",value:function(t,e){var i=this,n=A(),r=this._navigationBarTitle;t.ttn=r.page,t.ttpj=r.config,t.ttc=r.report;var o=this._reportingRequestData;if("n"===w()&&(o=uni.getStorageSync("__UNI__STAT__DATA")||{}),o[t.lt]||(o[t.lt]=[]),o[t.lt].push(t),"n"===w()&&uni.setStorageSync("__UNI__STAT__DATA",o),!(F()<y)||e){var a=this._reportingRequestData;"n"===w()&&(a=uni.getStorageSync("__UNI__STAT__DATA")),U();var s=[],c=[],u=[],l=function(t){var e=a[t];e.forEach((function(e){var i=b(e);0===t?s.push(i):3===t?u.push(i):c.push(i)}))};for(var f in a)l(f);s.push.apply(s,c.concat(u));var h={usv:g,t:n,requests:JSON.stringify(s)};this._reportingRequestData={},"n"===w()&&uni.removeStorageSync("__UNI__STAT__DATA"),"h5"!==t.ut?"n"!==w()||"a"!==this.statData.p?this._sendRequest(h):setTimeout((function(){i._sendRequest(h)}),200):this.imageRequest(h)}}},{key:"_sendRequest",value:function(t){var e=this;uni.request({url:d,method:"POST",data:t,success:function(){},fail:function(i){++e._retry<3&&setTimeout((function(){e._sendRequest(t)}),1e3)}})}},{key:"imageRequest",value:function(t){var e=new Image,i=I(q(t)).options;e.src=m+"?"+i}},{key:"sendEvent",value:function(t,e){X(t,e)||("title"!==t?this._sendEventRequest({key:t,value:"object"===typeof e?JSON.stringify(e):e},1):this._navigationBarTitle.report=e)}}]),t}(),it=function(t){u(i,t);var e=r(i);function i(){var t;return f(this,i),t=e.call(this),t.instance=null,"function"===typeof uni.addInterceptor&&(t.addInterceptorInit(),t.interceptLogin(),t.interceptShare(!0),t.interceptRequestPayment()),t}return p(i,null,[{key:"getInstance",value:function(){return this.instance||(this.instance=new i),this.instance}}]),p(i,[{key:"addInterceptorInit",value:function(){var t=this;uni.addInterceptor("setNavigationBarTitle",{invoke:function(e){t._navigationBarTitle.page=e.title}})}},{key:"interceptLogin",value:function(){var t=this;uni.addInterceptor("login",{complete:function(){t._login()}})}},{key:"interceptShare",value:function(t){var e=this;t?uni.addInterceptor("share",{success:function(){e._share()},fail:function(){e._share()}}):e._share()}},{key:"interceptRequestPayment",value:function(){var t=this;uni.addInterceptor("requestPayment",{success:function(){t._payment("pay_success")},fail:function(){t._payment("pay_fail")}})}},{key:"report",value:function(t,e){this.self=e,U(),this.__licationShow=!0,this._sendReportRequest(t,!0)}},{key:"load",value:function(t,e){if(!e.$scope&&!e.$mp){var i=getCurrentPages();e.$scope=i[i.length-1]}this.self=e,this._query=t}},{key:"show",value:function(t){this.self=t,J(t)?this._pageShow(t):this._applicationShow(t)}},{key:"ready",value:function(t){}},{key:"hide",value:function(t){this.self=t,J(t)?this._pageHide(t):this._applicationHide(t,!0)}},{key:"error",value:function(t){this._platform;var e="";e=t.message?t.stack:JSON.stringify(t);var i={ak:this.statData.ak,uuid:this.statData.uuid,lt:"31",ut:this.statData.ut,ch:this.statData.ch,mpsdk:this.statData.mpsdk,mpv:this.statData.mpv,v:this.statData.v,em:e,usv:this.statData.usv,t:A(),p:this.statData.p};this.request(i)}}]),i}(et),nt=it.getInstance(),rt=!1,ot={onLaunch:function(t){nt.report(t,this)},onReady:function(){nt.ready(this)},onLoad:function(t){if(nt.load(t,this),this.$scope&&this.$scope.onShareAppMessage){var e=this.$scope.onShareAppMessage;this.$scope.onShareAppMessage=function(t){return nt.interceptShare(!1),e.call(this,t)}}},onShow:function(){rt=!1,nt.show(this)},onHide:function(){rt=!0,nt.hide(this)},onUnload:function(){rt?rt=!1:nt.hide(this)},onError:function(t){nt.error(t)}};function at(){var t=i("8bbf");(t.default||t).mixin(ot),uni.report=function(t,e){nt.sendEvent(t,e)}}at()},9506:function(t,e){t.exports="static/img/sheying.png"},"95f0":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,r=a(i("4563")),o=a(i("a000"));function a(t){return t&&t.__esModule?t:{default:t}}var s=null,c=null,u={components:{MescrollUni:o.default},data:function(){return{labelCount:0,aggregateData:{},x:0,y:0,userInfo:{},cWidth:"",cHeight:"",pixelRatio:1,textarea:"",Interactive:"",currentUserIndex:1,currentIndex:-1,isUpdate:!1,UpdateConten:"",UpdateUrl:"",isScroll:!1,topHeight:"",latestData:{},customer:{},listData:[],downOption:{use:!0,auto:!0},upOption:{use:!0,auto:!0,textNoMore:"~ 我是有底线的 ~",page:{num:0,size:10},noMoreSize:0,empty:{use:!1,tip:"~ 暂无数据 ~",fixed:!0,top:"75%",zIndex:99}}}},mounted:function(){},onPageScroll:function(t){},onReady:function(){},onLoad:function(){n=this,this.cWidth=uni.upx2px(700),this.cHeight=uni.upx2px(330);var t=uni.getStorageSync("accountInfo");t||uni.navigateTo({url:"../mycenter/login"})},onShow:function(){this.getTCloudConfigs();var t=uni.getStorageSync("accountInfo");t&&(uni.showLoading({title:"加载中"}),this.GetStockProfitAndLoss(!0),this.getUserInfoData(),this.goods=[],this.mescroll.resetUpScroll())},methods:{getTimIngor:function(){var t=this;uni.showLoading({title:"加载中..."}),this.$http.get("/StockSkyEyes/App/GetChatGroup").then((function(e){uni.hideLoading(),e.data.result&&(uni.setStorageSync("groupID",e.data.result.chatGroupId),uni.setStorageSync("userId",e.data.result.chatUserId),uni.setStorageSync("userSig",e.data.result.chatUserSig),uni.setStorageSync("Level",e.data.result.chatLevel),t.loginTim())}))},loginTim:function(){var e=this.$store.state.isLogin,i=this,n="",r="";if(n=uni.getStorageSync("userId"),r=uni.getStorageSync("userSig"),0==e){var o=this.tim.login({userID:n,userSig:r});o.then((function(t){i.$store.commit("toggleIsLogin",!0),uni.setStorageSync("userTIMInfo",JSON.stringify(t.data))})).catch((function(e){t("warn","login error:",e," at pages\\tabbar\\home\\index.vue:278")}))}},onChange:function(t){},getTCloudConfigs:function(){uni.showLoading({title:"加载中..."}),this.$http.get("/StockSkyEyes/App/GetTCloudConfigs").then((function(t){uni.hideLoading(),t.data&&200===t.data.status&&(uni.setStorageSync("licenceURL",t.data.result.liveLicenseUrl),uni.setStorageSync("licenceKey",t.data.result.liveLicenseKey),uni.setStorageSync("liveAppId",t.data.result.liveAppId))}))},GetStockProfitAndLoss:function(t){var e=this;uni.showLoading({title:"加载中..."}),this.$http.get("/StockSkyEyes/App/GetStockProfitAndLoss").then((function(i){if(uni.hideLoading(),i.data&&200===i.data.status){for(var n=i.data.result,r={categories:[],series:[]},o={name:"",color:"#ffffff",data:[]},a=0;a<n.length;a++){var s=n[a].date.replace(/\-/g,".");s=s.slice(2,10),r.categories.push(s),o.data.push(n[a].value)}var c=r.categories.length;e.labelCount=c%5==0?5:(c-1)%4==0?4:3,r.series.push(o),e.aggregateData=r,e.showLineA("canvasLineA",e.aggregateData,t)}}))},downCallback:function(t){this.listData=[],t.resetUpScroll()},upCallback:function(t){var e=this;1==t.num&&(this.listData=[]),this.getListDataFromNet(t.num,t.size,(function(i){t.endSuccess(i.length),e.listData=e.listData.concat(i)}),(function(){t.endErr()}))},getListDataFromNet:function(t,e,i,n){var r=this,o=[];this.latestData={},this.$http.get("/StockSkyEyes/App/GetStocks",{params:{offset:t,limit:e}}).then((function(t){if(t.data&&200===t.data.status){r.upOption.noMoreSize=t.data.result.length;for(var e=t.data.result,n=0;n<e.length;n++)e[n].isLatest?r.latestData=e[n]:o.push(e[n])}i&&i(o)})).catch((function(t){n&&n(),uni.showToast({icon:"none",title:t,duration:2e3})}))},mescrollInit:function(t){this.mescroll=t},getUserInfoData:function(){var t=this;this.$http.get("/StockSkyEyes/App/GetSelfInfo").then((function(e){if(uni.hideLoading(),e.data&&200===e.data.status){var i=e.data.result;t.userInfo=i,uni.setStorageSync("userInfo",i),t.getTimIngor(),"VIP"==e.data.result.level&&t.$http.get("/StockSkyEyes/App/GetKFInfo").then((function(e){e.data.result&&(t.customer=e.data.result,uni.setStorageSync("customer",e.data.result))}))}}))},toApplyVip:function(){uni.navigateTo({url:"./applyVip"})},showLineA:function(t,e,i){s=new r.default({$this:n,canvasId:t,type:"line",colors:["#facc14","#8543e0","#8543e0","#8543e0"],fontSize:11,padding:[15,15,0,15],legend:{show:!1,padding:5,lineHeight:11,margin:0,fontColor:"#Fff"},dataLabel:!1,dataPointShape:!0,background:"#e7253a",pixelRatio:n.pixelRatio,categories:e.categories,series:e.series,animation:i,xAxis:{type:"grid",gridColor:"rgba(255,255,255,0.15)",gridType:"solid",dashLength:8,disableGrid:!0,fontColor:"#ffffff",calibration:!0,gridEval:2,labelCount:n.labelCount},yAxis:{gridType:"solid",gridColor:"rgba(255,255,255,0.15)",dashLength:8,disableGrid:!1,data:[{fontColor:"#ffffff",format:function(t){return t.toFixed(2)}}]},width:n.cWidth*n.pixelRatio,height:n.cHeight*n.pixelRatio,extra:{line:{type:"straight",data:{fontColor:"#fff"}}}})},touchLineA:function(t){c=Date.now()},moveLineA:function(t){var e=Date.now(),i=e-c;if(!(i<Math.floor(1e3/60))){c=e;var n=s.getCurrentDataIndex(t);if(n>-1&&n<s.opts.categories.length){var r=s.opts.categories[n],o=s.opts.series[0].name,a=s.opts.series[0].data[n];this.Interactive=o+":"+r+"-"+a+"元"}s.showToolTip(t,{format:function(t,e){return e+" "+t.name+":"+t.data}})}},touchEndLineA:function(t){var e=s.getCurrentDataIndex(t);if(e>-1&&e<s.opts.categories.length){var i=s.opts.categories[e],n=s.opts.series[0].name,r=s.opts.series[0].data[e];this.Interactive=n+":"+i+"-"+r+"元"}s.touchLegend(t),s.showToolTip(t,{format:function(t,e){return e+" "+t.name+":"+t.data}})},toStockDetail:function(t,e){this.currentIndex=t,uni.navigateTo({url:"./stockDetail?id="+e})},viewDetail:function(t,e){var i=e.buyTime.slice(2,10),n=e.sellTime.slice(2,10);i=i.replace(/\-/g,"."),n=n.replace(/\-/g,"."),this.currentIndex=t,this.viewStockDetail(i,n)},viewStockDetail:function(t,e){var i=this.aggregateData.categories,n=this.aggregateData.categories.length,r=i.indexOf(e),o=[],a=[],s=[];if(0==r){var c={color:"#facc14",name:""};c.data=o,this.aggregateData.series.length>1?this.aggregateData.series[1]=c:this.aggregateData.series.push(c),this.showLineA("canvasLineA",this.aggregateData,!1)}else{for(var u=0;u<r-1;u++)a.push(null);for(var l=this.aggregateData.series[0].data.slice(r-1,r+1),f=n-r,h=0;h<f;h++)s.push(null);o=a.concat(l).concat(s);var p={color:"#facc14",name:""};p.data=o,this.aggregateData.series.length>1?this.aggregateData.series[1]=p:this.aggregateData.series.push(p),this.showLineA("canvasLineA",this.aggregateData,!1)}},tomyInfor:function(){uni.navigateTo({url:"../mycenter/index"})},viewDetails:function(t){this.currentIndex=t,this.GetStockProfitAndLoss(!1)},toFunds:function(){uni.navigateTo({url:"./funds"})}}};e.default=u}).call(this,i("0de9")["default"])},"96bf":function(t,e,i){"use strict";var n,r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",[n("view",[n("view",{staticClass:t._$s(2,"sc","status_bar bg-white"),attrs:{_i:2}}),n("view",{style:t._$s(3,"s",t.isScroll?"position: fixed":""),attrs:{_i:3}},[n("view",{staticClass:t._$s(4,"sc","bg-white"),attrs:{_i:4}},[t._$s(5,"i",1==t.currentIndex)?n("view",{staticClass:t._$s(5,"sc","flex justify-center align-center"),attrs:{_i:5}},[n("view",{staticClass:t._$s(6,"sc","text-center"),class:t._$s(6,"c",1==t.currentIndex?"text-white chatBgColor":"bg-white"),attrs:{_i:6}},[n("text"),t._$s(8,"i",1==t.currentIndex)?n("view",[n("text",{staticClass:t._$s(9,"sc","block"),class:t._$s(9,"c",1==t.currentIndex?"text-white chatBgColor":"bg-white"),attrs:{_i:9}})]):t._e()]),n("view",{staticClass:t._$s(10,"sc","text-center"),class:t._$s(10,"c",2==t.currentIndex?"text-white chatBgColorVip":"chatVipText"),attrs:{_i:10},on:{click:t.toApplyVip}},[n("text"),t._$s(12,"i",2==t.currentIndex)?n("view",[n("text",{staticClass:t._$s(13,"sc","block bg-red"),class:t._$s(13,"c",2==t.currentIndex?"text-white chatBgColorVip":"bg-white"),attrs:{_i:13}})]):t._e()])]):t._e(),t._$s(14,"i",2==t.currentIndex)?n("view",{staticClass:t._$s(14,"sc","flex align-center"),attrs:{_i:14}},[n("view")]):t._e(),t._$s(16,"i","VIP"==t.Level&&!t.isAnchor)?n("view",{staticClass:t._$s(16,"sc","foot flex"),attrs:{_i:16}},[n("view",{staticClass:t._$s(17,"sc","liveBtn flex"),attrs:{_i:17}},[n("image",{attrs:{src:t._$s(18,"a-src","/"+i("9506")),_i:18}}),n("view")]),n("view",{staticClass:t._$s(20,"sc","flex liveBtn"),attrs:{_i:20},on:{click:t.openLiveBtn}},[n("image",{attrs:{src:t._$s(21,"a-src","/"+i("0831")),_i:21}})])]):t._e()])]),n("view",{staticClass:t._$s(22,"sc","content"),attrs:{_i:22},on:{touchstart:t.hideDrawer}},[n("view",[n("view",[t._$s(25,"i",1==t.currentIndex)?n("image",{attrs:{src:t._$s(25,"a-src","/"+i("1101")),_i:25}}):t._e(),t._$s(26,"i",2==t.currentIndex)?n("image",{attrs:{src:t._$s(26,"a-src","/"+i("331e")),_i:26}}):t._e(),t._$s(27,"i",2==t.currentIndex)?n("view",[t._v(t._$s(27,"t0-0",t._s(t.memberNum)))]):t._e(),t._$s(28,"i",1==t.currentIndex)?n("view",[t._v(t._$s(28,"t0-0",t._s(t.memberNum)))]):t._e()])]),n("scroll-view",{staticClass:t._$s(29,"sc","msg-list"),style:t._$s(29,"s",{top:t.msgTop,height:t.mesHeight}),attrs:{"scroll-with-animation":t._$s(29,"a-scroll-with-animation",t.scrollAnimation),"scroll-top":t._$s(29,"a-scroll-top",t.scrollTop),"scroll-into-view":t._$s(29,"a-scroll-into-view",t.scrollToView),_i:29},on:{scrolltoupper:t.loadHistory,scroll:t.scrollClick}},[n("view",{directives:[{name:"show",rawName:"v-show",value:t._$s(30,"v-show",t.isHistoryLoading),expression:"_$s(30,'v-show',isHistoryLoading)"}],staticClass:t._$s(30,"sc","loading"),attrs:{_i:30}},[n("view",{staticClass:t._$s(31,"sc","spinner"),attrs:{_i:31}},[n("view",{staticClass:t._$s(32,"sc","rect1"),attrs:{_i:32}}),n("view",{staticClass:t._$s(33,"sc","rect2"),attrs:{_i:33}}),n("view",{staticClass:t._$s(34,"sc","rect3"),attrs:{_i:34}}),n("view",{staticClass:t._$s(35,"sc","rect4"),attrs:{_i:35}}),n("view",{staticClass:t._$s(36,"sc","rect5"),attrs:{_i:36}})])]),t._l(t._$s(37,"f",{forItems:t.msgList}),(function(e,r,o,a){return n("view",{key:t._$s(37,"f",{forIndex:o,key:r}),staticClass:t._$s("37-"+a,"sc","row"),attrs:{id:t._$s("37-"+a,"a-id",e.id),_i:"37-"+a}},[[t._$s("39-"+a,"i","out"==e.flow)?n("view",{staticClass:t._$s("39-"+a,"sc","my"),attrs:{_i:"39-"+a}},[n("view",{staticClass:t._$s("40-"+a,"sc","left"),attrs:{_i:"40-"+a}},[t._$s("41-"+a,"i","TIMTextElem"==e.type)?n("view",{staticClass:t._$s("41-"+a,"sc","bubble"),attrs:{_i:"41-"+a}},[n("rich-text",{attrs:{nodes:t._$s("42-"+a,"a-nodes",t.nodesFliter(e.payload.text)),_i:"42-"+a}})]):t._e()]),n("view",{staticClass:t._$s("43-"+a,"sc","right"),attrs:{_i:"43-"+a}},[n("image",{attrs:{src:t._$s("44-"+a,"a-src","/"+i("18bb")),_i:"44-"+a}})])]):n("view",{staticClass:t._$s("45-"+a,"sc","other"),attrs:{_i:"45-"+a}},[n("view",{staticClass:t._$s("46-"+a,"sc","left"),attrs:{_i:"46-"+a}},[n("image",{attrs:{src:t._$s("47-"+a,"a-src","/"+i("18bb")),_i:"47-"+a}})]),n("view",{staticClass:t._$s("48-"+a,"sc","right"),attrs:{_i:"48-"+a}},[n("view",{staticClass:t._$s("49-"+a,"sc","username"),attrs:{_i:"49-"+a}},[n("view",{staticClass:t._$s("50-"+a,"sc","name"),attrs:{_i:"50-"+a}},[t._v(t._$s("50-"+a,"t0-0",t._s("用户"+e.from)))]),n("view",{staticClass:t._$s("51-"+a,"sc","time"),attrs:{_i:"51-"+a}},[t._v(t._$s("51-"+a,"t0-0",t._s(t.timeFliter(e.time))))])]),t._$s("52-"+a,"i","TIMTextElem"==e.type)?n("view",{staticClass:t._$s("52-"+a,"sc","bubble"),attrs:{_i:"52-"+a}},[n("rich-text",{attrs:{nodes:t._$s("53-"+a,"a-nodes",t.nodesFliter(e.payload.text)),_i:"53-"+a}})]):t._e()])])]],2)}))],2)]),n("view",{staticClass:t._$s(54,"sc","popup-layer-s"),class:t._$s(54,"c",t.popupLayerClass),attrs:{_i:54},on:{touchmove:function(e){return e.stopPropagation(),e.preventDefault(),t.discard(e)}}},[n("swiper",{staticClass:t._$s(55,"sc","emoji-swiper"),class:t._$s(55,"c",{hidden:t.hideEmoji}),attrs:{_i:55}},t._l(t._$s(56,"f",{forItems:t.emojiList}),(function(e,i,r,o){return n("swiper-item",{key:t._$s(56,"f",{forIndex:r,key:i})},t._l(t._$s("57-"+o,"f",{forItems:e}),(function(e,i,r,a){return n("view",{key:t._$s("57-"+o,"f",{forIndex:r,key:i}),attrs:{_i:"57-"+o+"-"+a},on:{click:function(i){return t.addEmoji(e)}}},[n("image",{attrs:{src:t._$s("58-"+o+"-"+a,"a-src","/static/img/emoji/"+e.url),_i:"58-"+o+"-"+a}})])})),0)})),0),n("view",{staticClass:t._$s(59,"sc","more-layer"),class:t._$s(59,"c",{hidden:t.hideMore}),attrs:{_i:59}},[n("view",{staticClass:t._$s(60,"sc","list"),attrs:{_i:60}},[n("view",{staticClass:t._$s(61,"sc","box"),attrs:{_i:61},on:{click:t.chooseImage}},[n("view",{staticClass:t._$s(62,"sc","icon tupian2"),attrs:{_i:62}})]),n("view",{staticClass:t._$s(63,"sc","box"),attrs:{_i:63},on:{click:t.camera}},[n("view",{staticClass:t._$s(64,"sc","icon paizhao"),attrs:{_i:64}})]),n("view",{staticClass:t._$s(65,"sc","box"),attrs:{_i:65},on:{click:t.handRedEnvelopes}},[n("view",{staticClass:t._$s(66,"sc","icon hongbao"),attrs:{_i:66}})])])])]),n("view",{staticClass:t._$s(67,"sc","input-box-s"),class:t._$s(67,"c",t.popupLayerClass),attrs:{_i:67},on:{touchmove:function(e){return e.stopPropagation(),e.preventDefault(),t.discard(e)}}},[n("view",{staticClass:t._$s(68,"sc","textbox"),attrs:{_i:68}},[n("view",{staticClass:t._$s(69,"sc","voice-mode"),class:t._$s(69,"c",[t.isVoice?"":"hidden",t.recording?"recording":""]),attrs:{_i:69},on:{touchstart:t.voiceBegin,touchmove:function(e){return e.stopPropagation(),e.preventDefault(),t.voiceIng(e)},touchend:t.voiceEnd,touchcancel:t.voiceCancel}},[t._v(t._$s(69,"t0-0",t._s(t.voiceTis)))]),n("view",{staticClass:t._$s(70,"sc","text-mode"),class:t._$s(70,"c",t.isVoice?"hidden":""),attrs:{_i:70}},[n("view",{staticClass:t._$s(71,"sc","box "),attrs:{_i:71}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textMsg,expression:"textMsg"}],attrs:{_i:72},domProps:{value:t._$s(72,"v-model",t.textMsg)},on:{blur:t.textareaBlur,focus:t.textareaFocus,input:function(e){e.target.composing||(t.textMsg=e.target.value)}}})]),n("view",{staticClass:t._$s(73,"sc","em"),attrs:{_i:73},on:{click:t.chooseEmoji}},[n("image",{attrs:{src:t._$s(74,"a-src","/"+i("aae1")),_i:74}})])])]),n("view",{staticClass:t._$s(75,"sc","send"),class:t._$s(75,"c",t.isVoice?"hidden":""),attrs:{_i:75},on:{click:t.sendText}},[n("image",{attrs:{src:t._$s(76,"a-src","/"+i("67cc")),_i:76}})]),t._$s(77,"i",t.isAnchor)?n("view",{staticClass:t._$s(77,"sc","send"),class:t._$s(77,"c",t.isVoice?"hidden":""),attrs:{_i:77},on:{click:t.openPushBtn}},[n("image",{attrs:{src:t._$s(78,"a-src","/"+i("a866")),_i:78}})]):t._e()]),n("view",{staticClass:t._$s(79,"sc","record"),class:t._$s(79,"c",t.recording?"":"hidden"),attrs:{_i:79}},[n("view",{staticClass:t._$s(80,"sc","ing"),class:t._$s(80,"c",t.willStop?"hidden":""),attrs:{_i:80}},[n("view",{staticClass:t._$s(81,"sc","icon luyin2"),attrs:{_i:81}})]),n("view",{staticClass:t._$s(82,"sc","cancel"),class:t._$s(82,"c",t.willStop?"":"hidden"),attrs:{_i:82}},[n("view",{staticClass:t._$s(83,"sc","icon chehui"),attrs:{_i:83}})]),n("view",{staticClass:t._$s(84,"sc","tis"),class:t._$s(84,"c",t.willStop?"change":""),attrs:{_i:84}},[t._v(t._$s(84,"t0-0",t._s(t.recordTis)))])]),n("view",{staticClass:t._$s(85,"sc","windows"),class:t._$s(85,"c",t.windowsState),attrs:{_i:85}},[n("view",{staticClass:t._$s(86,"sc","mask"),attrs:{_i:86},on:{touchmove:function(e){return e.stopPropagation(),e.preventDefault(),t.discard(e)},click:t.closeRedEnvelope}}),n("view",{staticClass:t._$s(87,"sc","layer"),attrs:{_i:87},on:{touchmove:function(e){return e.stopPropagation(),e.preventDefault(),t.discard(e)}}},[n("view",{staticClass:t._$s(88,"sc","open-redenvelope"),attrs:{_i:88}},[n("view",{staticClass:t._$s(89,"sc","top"),attrs:{_i:89}},[n("view",{staticClass:t._$s(90,"sc","close-btn"),attrs:{_i:90}},[n("view",{staticClass:t._$s(91,"sc","icon close"),attrs:{_i:91},on:{click:t.closeRedEnvelope}})]),n("image",{attrs:{_i:92}})]),n("view",{staticClass:t._$s(93,"sc","from"),attrs:{_i:93}},[t._v(t._$s(93,"t0-0",t._s(t.redenvelopeData.from)))]),n("view",{staticClass:t._$s(94,"sc","blessing"),attrs:{_i:94}},[t._v(t._$s(94,"t0-0",t._s(t.redenvelopeData.blessing)))]),n("view",{staticClass:t._$s(95,"sc","money"),attrs:{_i:95}},[t._v(t._$s(95,"t0-0",t._s(t.redenvelopeData.money)))]),n("view",{staticClass:t._$s(96,"sc","showDetails"),attrs:{_i:96},on:{click:function(e){return t.toDetails(t.redenvelopeData.rid)}}},[n("view",{staticClass:t._$s(97,"sc","icon to"),attrs:{_i:97}})])])])])])])},o=[];i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},"96cf":function(t,e){!function(e){"use strict";var i,n=Object.prototype,r=n.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag",u="object"===typeof t,l=e.regeneratorRuntime;if(l)u&&(t.exports=l);else{l=e.regeneratorRuntime=u?t.exports:{},l.wrap=S;var f="suspendedStart",h="suspendedYield",p="executing",g="completed",d={},m={};m[a]=function(){return this};var v=Object.getPrototypeOf,_=v&&v(v(O([])));_&&_!==n&&r.call(_,a)&&(m=_);var y=b.prototype=C.prototype=Object.create(m);I.prototype=y.constructor=b,b.constructor=I,b[c]=I.displayName="GeneratorFunction",l.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===I||"GeneratorFunction"===(e.displayName||e.name))},l.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(y),t},l.awrap=function(t){return{__await:t}},A(w.prototype),w.prototype[s]=function(){return this},l.AsyncIterator=w,l.async=function(t,e,i,n){var r=new w(S(t,e,i,n));return l.isGeneratorFunction(e)?r:r.next().then((function(t){return t.done?t.value:r.next()}))},A(y),y[c]="Generator",y[a]=function(){return this},y.toString=function(){return"[object Generator]"},l.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){while(e.length){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},l.values=O,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(M),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=i)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return s.type="throw",s.arg=t,e.next=n,r&&(e.method="next",e.arg=i),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),M(i),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var r=n.arg;M(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:O(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=i),d}}}function S(t,e,i,n){var r=e&&e.prototype instanceof C?e:C,o=Object.create(r.prototype),a=new L(n||[]);return o._invoke=T(t,i,a),o}function E(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(n){return{type:"throw",arg:n}}}function C(){}function I(){}function b(){}function A(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function w(t){function e(i,n,o,a){var s=E(t[i],t,n);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"===typeof u&&r.call(u,"__await")?Promise.resolve(u.__await).then((function(t){e("next",t,o,a)}),(function(t){e("throw",t,o,a)})):Promise.resolve(u).then((function(t){c.value=t,o(c)}),(function(t){return e("throw",t,o,a)}))}a(s.arg)}var i;function n(t,n){function r(){return new Promise((function(i,r){e(t,n,i,r)}))}return i=i?i.then(r,r):r()}this._invoke=n}function T(t,e,i){var n=f;return function(r,o){if(n===p)throw new Error("Generator is already running");if(n===g){if("throw"===r)throw o;return N()}i.method=r,i.arg=o;while(1){var a=i.delegate;if(a){var s=x(a,i);if(s){if(s===d)continue;return s}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===f)throw n=g,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=p;var c=E(t,e,i);if("normal"===c.type){if(n=i.done?g:h,c.arg===d)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(n=g,i.method="throw",i.arg=c.arg)}}}function x(t,e){var n=t.iterator[e.method];if(n===i){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=i,x(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=E(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=i),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function D(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(D,this),this.reset(!0)}function O(t){if(t){var e=t[a];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){while(++n<t.length)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=i,e.done=!0,e};return o.next=o}}return{next:N}}function N(){return{value:i,done:!0}}}(function(){return this||"object"===typeof self&&self}()||Function("return this")())},"9a5e":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.test=e.http=void 0;var n=o(i("4522")),r=o(i("70be"));function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach((function(e){c(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var u=new n.default;e.test=u;var l=r.default.apiHost,f="";if(uni.getStorageSync("accountInfo")){var h=uni.getStorageSync("accountInfo");f=h.token}u.setConfig((function(t){t.baseUrl=l,t.header=s({},t.header,{Authorization:f})})),u.interceptor.request((function(t,e){var i="";if(uni.getStorageSync("accountInfo")){var n=uni.getStorageSync("accountInfo");i=n.token}return t.header=s({},t.header,{Authorization:i}),t})),u.validateStatus=function(t){return 200===t},u.interceptor.response((function(t){return t}),(function(t){return t}));var p=new n.default;e.http=p,p.setConfig((function(t){return t.baseUrl=l,t.header=s({},t.header,{Authorization:f}),t})),p.validateStatus=function(t){return 200===t},p.interceptor.request((function(t,e){var i="";if(uni.getStorageSync("accountInfo")){var n=uni.getStorageSync("accountInfo");i=n.token}return t.header=s({},t.header,{Authorization:i}),t})),p.interceptor.response((function(t){return 401==t.data.status?Promise.reject(t):(t.data.status,t)}),(function(t){return t}))},a000:function(t,e,i){"use strict";i.r(e);var n=i("5df7"),r=i("7ed0");for(var o in r)"default"!==o&&function(t){i.d(e,t,(function(){return r[t]}))}(o);var a,s=i("f0c5"),c=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);e["default"]=c.exports},a27e:function(t,e){t.exports="static/img/bg-tuchu2.png"},a2ba:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={appid:"__UNI__EA8A9B2"};e.default=n},a333:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("2f62");function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){a(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var s={data:function(){return{isKF:!1,userAddConversationList:[],windowHeight:0}},onLoad:function(t){this.isKF=uni.getStorageSync("userInfo").isKF,this.isSDKReady&&this.getConversationList()},onShow:function(){this.getConversationList()},computed:o({},(0,n.mapState)({isSDKReady:function(t){return t.isSDKReady},conversationList:function(t){return t.conversationList}})),watch:{groupMessageList:function(t,e){this.msgList=t,this.screenMsg(t,e)},isSDKReady:function(t){t&&this.getConversationList()},conversationList:function(t){this.getUserInfo(t)}},methods:{getUserInfo:function(e){var i=this;this.userAddConversationList=[],e.forEach((function(t){var e={};"C2C"==t.type&&(e.conversation=t,i.userAddConversationList.push(JSON.parse(JSON.stringify(e))))})),t("log","userAddConversationList",this.userAddConversationList," at pages\\tabbar\\mycenter\\service.vue:115")},toRoom:function(e){if(t("log","item",e," at pages\\tabbar\\mycenter\\service.vue:135"),"C2C"==e.conversation.type){if(this.$store.commit("updateConversationActive",e),e.user)var i=e.user.user;else i="用户"+e.conversation.userProfile.userID;uni.navigateTo({url:"../chat/customerRoom?userName="+i+"&userId="+e.conversation.userProfile.userID})}},getConversationList:function(){var e=this,i=this.tim.getConversationList();i.then((function(t){var i=t.data.conversationList;i.length&&e.$store.commit("updateConversationList",i)})).catch((function(e){t("warn","getConversationList error:",e," at pages\\tabbar\\mycenter\\service.vue:161")}))},screenMsg:function(t,e){var i=this;t.forEach((function(t){var e=(new Date).getTime(),i="G"+e;t.id&&t.id.indexOf("G")>-1||(t.id=i)})),t[0].ID&&e[0].ID?(t[0].ID!=e[0].ID&&(t.length,this.count),this.$nextTick((function(){i.scrollToView=t[t.length-1].id}))):this.$nextTick((function(){i.scrollToView=t[t.length-1].id}))},scrollClick:function(t){},nodesFliter:function(t){var e='<div style="align-items: center;word-wrap:break-word;">'+t+"</div>";return e},timeFliter:function(t){var e=new Date(1e3*t),i=this.$commen.dateTimeFliter(e);return i},toliveShow:function(){uni.navigateTo({url:"./liveshow/liveshow"})},topullShow:function(){uni.navigateTo({url:"./liveshow/pull"})},toscreenShow:function(){uni.navigateTo({url:"./liveshow/screen"})}}};e.default=s}).call(this,i("0de9")["default"])},a5c2:function(t,e){t.exports="static/img/mycenter/icon-about.png"},a653:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(i("4795")),r=o(i("70be"));i("2f62");function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e,i,n,r,o,a){try{var s=t[o](a),c=s.value}catch(u){return void i(u)}s.done?e(c):Promise.resolve(c).then(n,r)}function s(t){return function(){var e=this,i=arguments;return new Promise((function(n,r){var o=t.apply(e,i);function s(t){a(o,n,r,s,c,"next",t)}function c(t){a(o,n,r,s,c,"throw",t)}s(void 0)}))}}var c={data:function(){return{errMsg:"",update:null,index:0,indexnum:0,categoryName:"个人资料",headImg:"../../../static/img/default-avatar.png",UserNickName:"",token:"",userId:"",userInfo:{},vipUserInfo:{},isVIP:!1,applyInfo:{}}},onLoad:function(){var t=uni.getStorageSync("accountInfo");this.token=t.token},onShow:function(){this.getUserInfoData()},methods:{getUserInfoData:function(){var e=this;uni.showLoading({title:"加载中"}),this.$http.get("/StockSkyEyes/App/GetSelfInfo").then((function(i){t("log",i," at pages\\tabbar\\mycenter\\personalInfo.vue:157"),uni.hideLoading(),i.data&&200===i.data.status&&(e.userInfo=i.data.result,e.UserNickName=i.data.result.memberName,e.userInfo.headImageUrl&&(e.headImg=e.userInfo.headImageUrl),"Normal"!=e.userInfo.level&&e.getVipUserInfo())}))},getVipUserInfo:function(){var e=this;this.isVIP=!0,this.$http.get("/StockSkyEyes/App/GetVipInfo").then((function(i){i.data&&i.data.result&&(t("log",i," at pages\\tabbar\\mycenter\\personalInfo.vue:177"),e.applyInfo=i.data.result)}))},setInfoData:function(t){var e=this;this.$http.post("/StockSkyEyes/App/UpdateSelfInfo",t).then((function(t){if(200==t.data.status){e.update=null;var i=t.data.result;uni.setStorageSync("userInfo",i),uni.showToast({icon:"none",title:"个人资料修改成功",duration:2e3})}}))},hideModal:function(t){this.update=null},updateName:function(t){this.update="updateModal"},confirmName:function(){var t={MemberName:this.UserNickName};this.setInfoData(t)},chooseImage:function(){var e=s(n.default.mark((function e(){var i;return n.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=this,uni.chooseImage({sizeType:["compressed"],success:function(e){uni.showLoading({title:"加载中"});var n=e.tempFilePaths;uni.uploadFile({url:r.default.apiHost+"/StockSkyEyes/App/Upload?catalog=HeadImage",filePath:n[0],name:"file1",header:{Authorization:i.token},success:function(e){var n;n=JSON.parse(e.data),i.headImg=n.result[0].url;var r=n.result[0].id;uni.showToast({icon:"none",title:"头像修改成功",duration:2e3});var o={HeadImageId:r};i.$http.post("/StockSkyEyes/App/UpdateSelfInfo",o).then((function(e){if(t("log","res",e," at pages\\tabbar\\mycenter\\personalInfo.vue:238"),uni.hideLoading(),200==e.data.status){i.headImg=e.data.result.headImageUrl;var n=e.data.result;uni.setStorageSync("userInfo",n)}}))}})}});case 2:case"end":return e.stop()}}),e,this)})));function i(){return e.apply(this,arguments)}return i}(),logout:function(){var e=this;uni.showModal({title:"温馨提示",content:"确定要退出登录吗？",cancelText:"再看看",cancelColor:"#2fb2da",confirmText:"离开",confirmColor:"#999",success:function(i){if(i.confirm){uni.clearStorageSync(),uni.removeStorageSync("accountInfo"),uni.removeStorageSync("userInfo"),uni.removeStorageSync("userId"),uni.removeStorageSync("userSig"),uni.removeStorageSync("groupID"),uni.removeStorageSync("customer"),uni.removeStorageSync("Level"),uni.$emit("isHiddenLive",{hiddenLive:!0}),uni.setStorageSync("hiddenLive",!0),uni.redirectTo({url:"./login"});var n=e.tim.logout();n.then((function(t){e.$store.commit("reset")})).catch((function(e){t("log","退出失败"," at pages\\tabbar\\mycenter\\personalInfo.vue:280")}))}}})}}};e.default=c}).call(this,i("0de9")["default"])},a6c8:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(i("f86b")),r=i("2f62");function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach((function(e){c(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var u={data:function(){return{currentIndex:1,isScroll:!1,x:0,y:0,textMsg:"",isHistoryLoading:!0,scrollAnimation:!1,scrollTop:0,scrollToView:"",msgList:[],msgImgList:[],myuid:0,RECORDER:uni.getRecorderManager(),isVoice:!1,voiceTis:"按住 说话",recordTis:"手指上滑 取消发送",recording:!1,willStop:!1,initPoint:{identifier:0,Y:0},recordTimer:null,recordLength:0,isShowLive:!1,AUDIO:uni.createInnerAudioContext(),playMsgid:null,VoiceTimer:null,popupLayerClass:"",hideMore:!0,hideEmoji:!0,msgTop:"250upx",mesHeight:"74%",emojiList:[[{url:"100.gif",alt:"[微笑]"},{url:"101.gif",alt:"[伤心]"},{url:"102.gif",alt:"[美女]"},{url:"103.gif",alt:"[发呆]"},{url:"104.gif",alt:"[墨镜]"},{url:"105.gif",alt:"[哭]"},{url:"106.gif",alt:"[羞]"},{url:"107.gif",alt:"[哑]"},{url:"108.gif",alt:"[睡]"},{url:"109.gif",alt:"[哭]"},{url:"110.gif",alt:"[囧]"},{url:"111.gif",alt:"[怒]"},{url:"112.gif",alt:"[调皮]"},{url:"113.gif",alt:"[笑]"},{url:"114.gif",alt:"[惊讶]"},{url:"115.gif",alt:"[难过]"},{url:"116.gif",alt:"[酷]"},{url:"117.gif",alt:"[汗]"},{url:"118.gif",alt:"[抓狂]"},{url:"119.gif",alt:"[吐]"},{url:"120.gif",alt:"[笑]"},{url:"121.gif",alt:"[快乐]"},{url:"122.gif",alt:"[奇]"},{url:"123.gif",alt:"[傲]"}],[{url:"124.gif",alt:"[饿]"},{url:"125.gif",alt:"[累]"},{url:"126.gif",alt:"[吓]"},{url:"127.gif",alt:"[汗]"},{url:"128.gif",alt:"[高兴]"},{url:"129.gif",alt:"[闲]"},{url:"130.gif",alt:"[努力]"},{url:"131.gif",alt:"[骂]"},{url:"132.gif",alt:"[疑问]"},{url:"133.gif",alt:"[秘密]"},{url:"134.gif",alt:"[乱]"},{url:"135.gif",alt:"[疯]"},{url:"136.gif",alt:"[哀]"},{url:"137.gif",alt:"[鬼]"},{url:"138.gif",alt:"[打击]"},{url:"139.gif",alt:"[bye]"},{url:"140.gif",alt:"[汗]"},{url:"141.gif",alt:"[抠]"},{url:"142.gif",alt:"[鼓掌]"},{url:"143.gif",alt:"[糟糕]"},{url:"144.gif",alt:"[恶搞]"},{url:"145.gif",alt:"[什么]"},{url:"146.gif",alt:"[什么]"},{url:"147.gif",alt:"[累]"}],[{url:"148.gif",alt:"[看]"},{url:"149.gif",alt:"[难过]"},{url:"150.gif",alt:"[难过]"},{url:"151.gif",alt:"[坏]"},{url:"152.gif",alt:"[亲]"},{url:"153.gif",alt:"[吓]"},{url:"154.gif",alt:"[可怜]"},{url:"155.gif",alt:"[刀]"},{url:"156.gif",alt:"[水果]"},{url:"157.gif",alt:"[酒]"},{url:"158.gif",alt:"[篮球]"},{url:"159.gif",alt:"[乒乓]"},{url:"160.gif",alt:"[咖啡]"},{url:"161.gif",alt:"[美食]"},{url:"162.gif",alt:"[动物]"},{url:"163.gif",alt:"[鲜花]"},{url:"164.gif",alt:"[枯]"},{url:"165.gif",alt:"[唇]"},{url:"166.gif",alt:"[爱]"},{url:"167.gif",alt:"[分手]"},{url:"168.gif",alt:"[生日]"},{url:"169.gif",alt:"[电]"},{url:"170.gif",alt:"[炸弹]"},{url:"171.gif",alt:"[刀子]"}],[{url:"172.gif",alt:"[足球]"},{url:"173.gif",alt:"[瓢虫]"},{url:"174.gif",alt:"[翔]"},{url:"175.gif",alt:"[月亮]"},{url:"176.gif",alt:"[太阳]"},{url:"177.gif",alt:"[礼物]"},{url:"178.gif",alt:"[抱抱]"},{url:"179.gif",alt:"[拇指]"},{url:"180.gif",alt:"[贬低]"},{url:"181.gif",alt:"[握手]"},{url:"182.gif",alt:"[剪刀手]"},{url:"183.gif",alt:"[抱拳]"},{url:"184.gif",alt:"[勾引]"},{url:"185.gif",alt:"[拳头]"},{url:"186.gif",alt:"[小拇指]"},{url:"187.gif",alt:"[拇指八]"},{url:"188.gif",alt:"[食指]"},{url:"189.gif",alt:"[ok]"},{url:"190.gif",alt:"[情侣]"},{url:"191.gif",alt:"[爱心]"},{url:"192.gif",alt:"[蹦哒]"},{url:"193.gif",alt:"[颤抖]"},{url:"194.gif",alt:"[怄气]"},{url:"195.gif",alt:"[跳舞]"}],[{url:"196.gif",alt:"[发呆]"},{url:"197.gif",alt:"[背着]"},{url:"198.gif",alt:"[伸手]"},{url:"199.gif",alt:"[耍帅]"},{url:"200.png",alt:"[微笑]"},{url:"201.png",alt:"[生病]"},{url:"202.png",alt:"[哭泣]"},{url:"203.png",alt:"[吐舌]"},{url:"204.png",alt:"[迷糊]"},{url:"205.png",alt:"[瞪眼]"},{url:"206.png",alt:"[恐怖]"},{url:"207.png",alt:"[忧愁]"},{url:"208.png",alt:"[眨眉]"},{url:"209.png",alt:"[闭眼]"},{url:"210.png",alt:"[鄙视]"},{url:"211.png",alt:"[阴暗]"},{url:"212.png",alt:"[小鬼]"},{url:"213.png",alt:"[礼物]"},{url:"214.png",alt:"[拜佛]"},{url:"215.png",alt:"[力量]"},{url:"216.png",alt:"[金钱]"},{url:"217.png",alt:"[蛋糕]"},{url:"218.png",alt:"[彩带]"},{url:"219.png",alt:"[礼物]"}]],onlineEmoji:{"100.gif":"AbNQgA.gif","101.gif":"AbN3ut.gif","102.gif":"AbNM3d.gif","103.gif":"AbN8DP.gif","104.gif":"AbNljI.gif","105.gif":"AbNtUS.gif","106.gif":"AbNGHf.gif","107.gif":"AbNYE8.gif","108.gif":"AbNaCQ.gif","109.gif":"AbNN4g.gif","110.gif":"AbN0vn.gif","111.gif":"AbNd3j.gif","112.gif":"AbNsbV.gif","113.gif":"AbNwgs.gif","114.gif":"AbNrD0.gif","115.gif":"AbNDuq.gif","116.gif":"AbNg5F.gif","117.gif":"AbN6ET.gif","118.gif":"AbNcUU.gif","119.gif":"AbNRC4.gif","120.gif":"AbNhvR.gif","121.gif":"AbNf29.gif","122.gif":"AbNW8J.gif","123.gif":"AbNob6.gif","124.gif":"AbN5K1.gif","125.gif":"AbNHUO.gif","126.gif":"AbNIDx.gif","127.gif":"AbN7VK.gif","128.gif":"AbNb5D.gif","129.gif":"AbNX2d.gif","130.gif":"AbNLPe.gif","131.gif":"AbNjxA.gif","132.gif":"AbNO8H.gif","133.gif":"AbNxKI.gif","134.gif":"AbNzrt.gif","135.gif":"AbU9Vf.gif","136.gif":"AbUSqP.gif","137.gif":"AbUCa8.gif","138.gif":"AbUkGQ.gif","139.gif":"AbUFPg.gif","140.gif":"AbUPIS.gif","141.gif":"AbUZMn.gif","142.gif":"AbUExs.gif","143.gif":"AbUA2j.gif","144.gif":"AbUMIU.gif","145.gif":"AbUerq.gif","146.gif":"AbUKaT.gif","147.gif":"AbUmq0.gif","148.gif":"AbUuZV.gif","149.gif":"AbUliF.gif","150.gif":"AbU1G4.gif","151.gif":"AbU8z9.gif","152.gif":"AbU3RJ.gif","153.gif":"AbUYs1.gif","154.gif":"AbUJMR.gif","155.gif":"AbUadK.gif","156.gif":"AbUtqx.gif","157.gif":"AbUUZ6.gif","158.gif":"AbUBJe.gif","159.gif":"AbUdIO.gif","160.gif":"AbU0iD.gif","161.gif":"AbUrzd.gif","162.gif":"AbUDRH.gif","163.gif":"AbUyQA.gif","164.gif":"AbUWo8.gif","165.gif":"AbU6sI.gif","166.gif":"AbU2eP.gif","167.gif":"AbUcLt.gif","168.gif":"AbU4Jg.gif","169.gif":"AbURdf.gif","170.gif":"AbUhFS.gif","171.gif":"AbU5WQ.gif","172.gif":"AbULwV.gif","173.gif":"AbUIzj.gif","174.gif":"AbUTQs.gif","175.gif":"AbU7yn.gif","176.gif":"AbUqe0.gif","177.gif":"AbUHLq.gif","178.gif":"AbUOoT.gif","179.gif":"AbUvYF.gif","180.gif":"AbUjFU.gif","181.gif":"AbaSSJ.gif","182.gif":"AbUxW4.gif","183.gif":"AbaCO1.gif","184.gif":"Abapl9.gif","185.gif":"Aba9yR.gif","186.gif":"AbaFw6.gif","187.gif":"Abaiex.gif","188.gif":"AbakTK.gif","189.gif":"AbaZfe.png","190.gif":"AbaEFO.gif","191.gif":"AbaVYD.gif","192.gif":"AbamSH.gif","193.gif":"AbaKOI.gif","194.gif":"Abanld.gif","195.gif":"Abau6A.gif","196.gif":"AbaQmt.gif","197.gif":"Abal0P.gif","198.gif":"AbatpQ.gif","199.gif":"Aba1Tf.gif","200.png":"Aba8k8.png","201.png":"AbaGtS.png","202.png":"AbaJfg.png","203.png":"AbaNlj.png","204.png":"Abawmq.png","205.png":"AbaU6s.png","206.png":"AbaaXn.png","207.png":"Aba000.png","208.png":"AbarkT.png","209.png":"AbastU.png","210.png":"AbaB7V.png","211.png":"Abafn1.png","212.png":"Abacp4.png","213.png":"AbayhF.png","214.png":"Abag1J.png","215.png":"Aba2c9.png","216.png":"AbaRXR.png","217.png":"Aba476.png","218.png":"Abah0x.png","219.png":"Abdg58.png"},windowsState:"",redenvelopeData:{rid:null,from:null,face:null,blessing:null,money:null},grounpChat:{},groupID:"",memberNum:0,appHeight:{height:"480px"},isKF:!1,userAddConversationList:[],openLive:!1,Level:"",isAnchor:!1}},onPageScroll:function(t){t.scrollTop>0?this.isScroll=!0:this.isScroll=!1},computed:s({},(0,r.mapState)({groupMessageList:function(t){return t.groupMessageList},isLogin:function(t){return t.isLogin},isSDKReady:function(t){return t.isSDKReady},conversationList:function(t){return t.conversationList},GroupList:function(t){return t.GroupList}})),watch:{groupMessageList:function(t,e){this.msgList=t,this.screenMsg(t,e)},conversationList:function(t){this.getUserInfo(t)}},onLoad:function(t){},onShow:function(){var t=this;uni.$on("pullLive",(function(e){t.closeLive()})),uni.$on("isHiddenLive",(function(e){e.hiddenLive&&(t.closeLive(),t.closePush())})),uni.$on("pushLive",(function(e){t.closePush()})),this.$store.commit("createGrounpChat",uni.getStorageSync("groupID")),this.scrollTop=9999999,this.isHistoryLoading=!1;var e=uni.getStorageSync("userInfo");e.isKF;this.isAnchor=e.isAnchor;var i=uni.getStorageSync("Level");this.Level=i,(this.isAnchor||"Normal"==i)&&(this.msgTop="150rpx",this.mesHeight="80%"),this.currentIndex="Normal"==i?1:2,this.isKF=uni.getStorageSync("userInfo").isKF,this.getGroupList(),this.groupID=this.$store.state.groupID,this.grounpChat=this.$store.state.grounpChat,this.getGroupInfor(),this.getMsgList()},onUnload:function(){},onHide:function(){var t=this;this.textMsg="",uni.$on("pullLive",(function(e){t.closeLive()})),uni.$on("pushLive",(function(e){t.closePush()}))},methods:{openLiveBtn:function(){var t=this;this.$http.get("/StockSkyEyes/App/QueryLiveRooms?online=true").then((function(e){if(uni.hideLoading(),e.data.result.length>0&&200===e.data.status){var i=e.data.result[0].serialNo;uni.hideLoading(),t.$http.get("/StockSkyEyes/App/GetLiveRoomUrl?serialNo="+i).then((function(t){if(200===t.data.status){var e=t.data.result.playUrl;uni.$emit("pullUrl",{playUrl:e});var i=uni.getSubNVueById("pullLive");i.show(),uni.$emit("isHiddenLive",{hiddenLive:!1})}})),t.mesHeight="44%",t.msgTop="628rpx"}else uni.showModal({content:"抱歉，暂时没有主播开播",showCancel:!1,confirmText:"我知道了",success:function(t){}})})),this.hideDrawer()},closeLive:function(){this.isAnchor||"Normal"==this.Level?(this.msgTop="150rpx",this.mesHeight="80%"):(this.mesHeight="72%",this.msgTop="260rpx");var t=uni.getSubNVueById("pullLive");t.hide()},openPushBtn:function(){this.mesHeight="44%",this.msgTop="628rpx",this.isShowLive=!0,this.$http.post("/StockSkyEyes/App/CreateLiveRoom").then((function(t){if(uni.hideLoading(),t.data&&200===t.data.status){var e=t.data.result.pushUrl;uni.$emit("openPush",{pushUrl:e})}}));var t=uni.getSubNVueById("popup");t.show(),this.hideDrawer(),uni.$emit("isHiddenLive",{hiddenLive:!1})},closePush:function(){this.isAnchor||"Normal"==this.Level?(this.msgTop="150rpx",this.mesHeight="80%"):(this.mesHeight="72%",this.msgTop="260rpx");var t=uni.getSubNVueById("popup");t.hide()},toliveShow:function(){uni.navigateTo({url:"./liveshow/liveshow"})},topullShow:function(){uni.navigateTo({url:"./liveshow/pull"})},toscreenShow:function(){uni.navigateTo({url:"./liveshow/screen"})},getUserInfo:function(t){var e=this;this.userAddConversationList=[],t.forEach((function(t){var i={};i.conversation=t,n.default.forEach((function(e){t.toAccount==e.userId&&(i.user=e)})),e.userAddConversationList.push(JSON.parse(JSON.stringify(i)))}))},toApplyVip:function(){uni.navigateTo({url:"../home/applyVip"})},scrollClick:function(t){},nodesFliter:function(t){var e='<div style="align-items: center;word-wrap:break-word;">'+t+"</div>";return e},timeFliter:function(t){var e=new Date(1e3*t),i=this.$commen.dateTimeFliter(e);return i},getGroupInfor:function(){var t=this,e=this.tim.getGroupProfile({groupID:this.groupID,groupCustomFieldFilter:["key1","key2"]});e.then((function(e){t.memberNum=e.data.group.memberNum})).catch((function(t){}))},getGroupList:function(){var e=this,i=this.tim.getGroupList();i.then((function(t){var i=t.data.groupList;e.groupList=i,i.length&&e.$store.commit("updategetGroupList",i)})).catch((function(e){t("warn","getGroupList error:",e," at pages\\tabbar\\chat\\index.vue:826")}))},screenMsg:function(t,e){var i=this;t.forEach((function(t){var e=(new Date).getTime(),i="G"+e;t.id&&t.id.indexOf("G")>-1||(t.id=i)})),t&&e?t[0].ID&&e[0].ID&&(t[0].ID!=e[0].ID&&(t.length,this.count),this.$nextTick((function(){i.scrollToView=t[t.length-1].id}))):this.$nextTick((function(){i.scrollToView=t[t.length-1].id})),this.isHistoryLoading=!1},loadHistory:function(t){var e=this;this.isHistoryLoading=!0;var i=this.grounpChat.conversationID,n=this.tim.getMessageList({conversationID:i,nextReqMessageID:this.nextReqMessageID,count:this.count});n.then((function(t){e.$store.commit("unshiftGroupMessageList",t.data.messageList),e.nextReqMessageID=t.data.nextReqMessageID,e.isCompleted=t.data.isCompleted;var i=t.data.messageList;i.forEach((function(t){var e=(new Date).getTime(),i="G"+e+Math.ceil(100*Math.random());t.id&&t.id.indexOf("G")>-1||(t.id=i)})),e.$nextTick((function(){i&&i.length&&(this.scrollToView=i[i.length-1].id)}))})),this.isHistoryLoading=!1},sendText:function(){if(this.textMsg){var t=this.replaceEmoji(this.textMsg),e={text:t};this.sendMsg(e,"text"),this.textMsg=""}},getMsgList:function(){var t=this,e=this.grounpChat.conversationID,i=this.tim.getMessageList({conversationID:e,count:this.count});i.then((function(e){t.$store.commit("pushGroupMessageList",e.data.messageList),t.isCompleted=e.data.isCompleted;var i=e.data.messageList;t.nextReqMessageID=e.data.nextReqMessageID,i.forEach((function(t){var e=(new Date).getTime(),i="G"+e+Math.ceil(100*Math.random());t.id&&t.id.indexOf("G")>-1||(t.id=i)})),t.$nextTick((function(){i.length>0&&(this.scrollToView=i[i.length-1].id)}))})),this.$nextTick((function(){this.scrollTop=99999999,this.$nextTick((function(){this.scrollAnimation=!0}))}))},setPicSize:function(t){var e=uni.upx2px(350),i=uni.upx2px(350);if(t.w>e||t.h>i){var n=t.w/t.h;t.w=n>1?e:i*n,t.h=n>1?e/n:i}return t},showMore:function(){this.isVoice=!1,this.hideEmoji=!0,this.hideMore?(this.hideMore=!1,this.openDrawer()):this.hideDrawer()},openDrawer:function(){this.popupLayerClass="showLayer"},hideDrawer:function(){var t=this;this.popupLayerClass="",setTimeout((function(){t.hideMore=!0,t.hideEmoji=!0}),150),this.mesHeight="74%",this.scrollTop=9999},chooseImage:function(){this.getImage("album")},camera:function(){this.getImage("camera")},handRedEnvelopes:function(){uni.navigateTo({url:"HM-hand/HM-hand"}),this.hideDrawer()},getImage:function(e){var i=this;this.hideDrawer(),uni.chooseImage({sourceType:[e],sizeType:["original","compressed"],success:function(e){for(var n=function(n){uni.getImageInfo({src:e.tempFilePaths[n],success:function(r){var o={url:e.tempFilePaths[n],w:r.width,h:r.height},a=i.tim.createImageMessage({to:i.groupID,conversationType:TIM.TYPES.CONV_C2C,payload:{file:o},onProgress:function(e){t("log","file uploading:",e," at pages\\tabbar\\chat\\index.vue:1016")}}),s=i.tim.sendMessage(a);s.then((function(t){})).catch((function(e){t("warn","sendMessage error:",e," at pages\\tabbar\\chat\\index.vue:1026")}))}})},r=0;r<e.tempFilePaths.length;r++)n(r)}})},chooseEmoji:function(){this.hideMore=!0,this.hideEmoji?(this.hideEmoji=!1,this.openDrawer()):this.hideDrawer(),this.mesHeight="50%",this.scrollTop=999999},addEmoji:function(t){this.textMsg+=t.alt},textareaFocus:function(t){this.mesHeight="57%",this.scrollTop=9999,this.hideMore=!1,"showLayer"==this.popupLayerClass&&0==this.hideMore&&this.hideDrawer(),uni.hideTabBar(),this.$nextTick((function(){this.scrollTop=99999999,this.$nextTick((function(){this.scrollAnimation=!0}))}))},textareaBlur:function(){uni.showTabBar(),this.mesHeight="74%",this.scrollTop=9999},sendMsg:function(t,e){var i=this,n=this.tim.createTextMessage({to:this.groupID,conversationType:"GROUP",payload:{text:t.text}});this.$store.commit("pushGroupMessageList",n);var r=this.tim.sendMessage(n);r.then((function(t){i.$nextTick((function(){i.scrollToView=t.data.message.id}))}))},replaceEmoji:function(e){var i=this,n=e.replace(/\[([^(\]|\[)]*)\]/g,(function(e,n){for(var r=0;r<i.emojiList.length;r++)for(var o=i.emojiList[r],a=0;a<o.length;a++){var s=o[a];if(s.alt==e){var c="https://s2.ax1x.com/2019/04/12/",u='<img src="'+c+i.onlineEmoji[s.url]+'">';return t("log","imgstr: "+u," at pages\\tabbar\\chat\\index.vue:1107"),u}}}));return'<div style="display: flex;align-items: center;word-wrap:break-word;">'+n+"</div>"},addTextMsg:function(t){this.msgList.push(t)},addVoiceMsg:function(t){this.msgList.push(t)},addImgMsg:function(t){t.msg.content=this.setPicSize(t.msg.content),this.msgImgList.push(t.msg.content.url),this.msgList.push(t)},addRedEnvelopeMsg:function(t){this.msgList.push(t)},addSystemTextMsg:function(t){this.msgList.push(t)},addSystemRedEnvelopeMsg:function(t){this.msgList.push(t)},openRedEnvelope:function(e,i){var n=this,r=e.content.rid;uni.showLoading({title:"加载中..."}),setTimeout((function(){0==r?n.redenvelopeData={rid:0,from:"大黑哥",face:"/static/img/im/face/face.jpg",blessing:"恭喜发财，大吉大利",money:"已领完"}:(n.redenvelopeData={rid:1,from:"售后客服008",face:"/static/img/im/face/face_2.jpg",blessing:"恭喜发财",money:"0.01"},e.content.isReceived||(n.sendSystemMsg({text:"你领取了"+(e.userinfo.uid==n.myuid?"自己":e.userinfo.username)+"的红包"},"redEnvelope"),t("log","this.msgList[index]: "+JSON.stringify(n.msgList[i])," at pages\\tabbar\\chat\\index.vue:1169"),n.msgList[i].msg.content.isReceived=!0)),uni.hideLoading(),n.windowsState="show"}),200)},closeRedEnvelope:function(){var t=this;this.windowsState="hide",setTimeout((function(){t.windowsState=""}),200)},sendSystemMsg:function(t,e){var i=this.msgList[this.msgList.length-1].msg.id;i++;var n={type:"system",msg:{id:i,type:e,content:t}};this.screenMsg(n)},toDetails:function(t){uni.navigateTo({url:"HM-details/HM-details?rid="+t})},showPic:function(t){uni.previewImage({indicator:"none",current:t.content.url,urls:this.msgImgList})},playVoice:function(t){this.playMsgid=t.id,this.AUDIO.src=t.content.url,this.$nextTick((function(){this.AUDIO.play()}))},voiceBegin:function(t){t.touches.length>1||(this.initPoint.Y=t.touches[0].clientY,this.initPoint.identifier=t.touches[0].identifier,this.RECORDER.start({duration:6e4,sampleRate:44100,numberOfChannels:1,encodeBitRate:192e3,format:"aac"}))},recordBegin:function(t){var e=this;this.recording=!0,this.voiceTis="松开 结束",this.recordLength=0,this.recordTimer=setInterval((function(){e.recordLength++}),1e3)},voiceCancel:function(){this.recording=!1,this.voiceTis="按住 说话",this.recordTis="手指上滑 取消发送",this.willStop=!0,this.RECORDER.stop()},voiceIng:function(t){if(this.recording){var e=t.touches[0];this.initPoint.Y-e.clientY>=uni.upx2px(100)?(this.willStop=!0,this.recordTis="松开手指 取消发送"):(this.willStop=!1,this.recordTis="手指上滑 取消发送")}},voiceEnd:function(t){this.recording&&(this.recording=!1,this.voiceTis="按住 说话",this.recordTis="手指上滑 取消发送",this.RECORDER.stop())},recordEnd:function(t){},toRoom:function(t){if("C2C"==t.conversation.type){if(this.$store.commit("updateConversationActive",t),t.user)var e=t.user.user;else e="用户"+t.conversation.userProfile.userID;uni.navigateTo({url:"./customerRoom?userName="+e+"&userId="+t.conversation.userProfile.userID})}},sendvoiceMsg:function(t,e){var i=this,n=this.tim.createTextMessage({to:this.groupID,conversationType:"GROUP",payload:{type:t.text}});this.$store.commit("pushGroupMessageList",n);var r=this.tim.sendMessage(n);r.then((function(t){i.$nextTick((function(){i.scrollToView=t.data.message.id}))}))},switchVoice:function(){this.hideDrawer(),this.isVoice=!this.isVoice},discard:function(){},viewCustomerService:function(){var t=uni.getStorageSync("customer").kfId;this.$store.commit("createConversationActive",t),uni.navigateTo({url:"./customerService"})}}};e.default=u}).call(this,i("0de9")["default"])},a866:function(t,e){t.exports="static/img/icon-zhibo.png"},aae1:function(t,e){t.exports="static/img/mycenter/icon-emoj.png"},ad2e:function(t,e,i){"use strict";i.r(e);var n=i("f128"),r=i("2ea0");for(var o in r)"default"!==o&&function(t){i.d(e,t,(function(){return r[t]}))}(o);var a,s=i("f0c5"),c=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);e["default"]=c.exports},af52:function(t,e,i){"use strict";i.r(e);var n=i("f328"),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=r.a},b0ae:function(t,e){t.exports="static/img/back-break.png"},b145:function(t,e,i){"use strict";i.r(e);var n=i("f982"),r=i("c777");for(var o in r)"default"!==o&&function(t){i.d(e,t,(function(){return r[t]}))}(o);var a,s=i("f0c5"),c=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);e["default"]=c.exports},b198:function(t,e){t.exports="static/img/back.png"},ba33:function(t,e){t.exports="static/img/erweima.jpg"},bad5:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;r(i("f86b"));var n=i("2f62");function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){s(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var c={data:function(){return{currentIndex:1,isScroll:!1,textMsg:"",isHistoryLoading:!1,scrollAnimation:!1,scrollTop:0,scrollToView:"",msgList:[],msgImgList:[],myuid:0,userName:"",RECORDER:uni.getRecorderManager(),isVoice:!1,voiceTis:"按住 说话",recordTis:"手指上滑 取消发送",recording:!1,willStop:!1,initPoint:{identifier:0,Y:0},recordTimer:null,recordLength:0,customer:{},AUDIO:uni.createInnerAudioContext(),playMsgid:null,VoiceTimer:null,popupLayerClass:"",hideMore:!0,hideEmoji:!0,emojiList:[[{url:"100.gif",alt:"[微笑]"},{url:"101.gif",alt:"[伤心]"},{url:"102.gif",alt:"[美女]"},{url:"103.gif",alt:"[发呆]"},{url:"104.gif",alt:"[墨镜]"},{url:"105.gif",alt:"[哭]"},{url:"106.gif",alt:"[羞]"},{url:"107.gif",alt:"[哑]"},{url:"108.gif",alt:"[睡]"},{url:"109.gif",alt:"[哭]"},{url:"110.gif",alt:"[囧]"},{url:"111.gif",alt:"[怒]"},{url:"112.gif",alt:"[调皮]"},{url:"113.gif",alt:"[笑]"},{url:"114.gif",alt:"[惊讶]"},{url:"115.gif",alt:"[难过]"},{url:"116.gif",alt:"[酷]"},{url:"117.gif",alt:"[汗]"},{url:"118.gif",alt:"[抓狂]"},{url:"119.gif",alt:"[吐]"},{url:"120.gif",alt:"[笑]"},{url:"121.gif",alt:"[快乐]"},{url:"122.gif",alt:"[奇]"},{url:"123.gif",alt:"[傲]"}],[{url:"124.gif",alt:"[饿]"},{url:"125.gif",alt:"[累]"},{url:"126.gif",alt:"[吓]"},{url:"127.gif",alt:"[汗]"},{url:"128.gif",alt:"[高兴]"},{url:"129.gif",alt:"[闲]"},{url:"130.gif",alt:"[努力]"},{url:"131.gif",alt:"[骂]"},{url:"132.gif",alt:"[疑问]"},{url:"133.gif",alt:"[秘密]"},{url:"134.gif",alt:"[乱]"},{url:"135.gif",alt:"[疯]"},{url:"136.gif",alt:"[哀]"},{url:"137.gif",alt:"[鬼]"},{url:"138.gif",alt:"[打击]"},{url:"139.gif",alt:"[bye]"},{url:"140.gif",alt:"[汗]"},{url:"141.gif",alt:"[抠]"},{url:"142.gif",alt:"[鼓掌]"},{url:"143.gif",alt:"[糟糕]"},{url:"144.gif",alt:"[恶搞]"},{url:"145.gif",alt:"[什么]"},{url:"146.gif",alt:"[什么]"},{url:"147.gif",alt:"[累]"}],[{url:"148.gif",alt:"[看]"},{url:"149.gif",alt:"[难过]"},{url:"150.gif",alt:"[难过]"},{url:"151.gif",alt:"[坏]"},{url:"152.gif",alt:"[亲]"},{url:"153.gif",alt:"[吓]"},{url:"154.gif",alt:"[可怜]"},{url:"155.gif",alt:"[刀]"},{url:"156.gif",alt:"[水果]"},{url:"157.gif",alt:"[酒]"},{url:"158.gif",alt:"[篮球]"},{url:"159.gif",alt:"[乒乓]"},{url:"160.gif",alt:"[咖啡]"},{url:"161.gif",alt:"[美食]"},{url:"162.gif",alt:"[动物]"},{url:"163.gif",alt:"[鲜花]"},{url:"164.gif",alt:"[枯]"},{url:"165.gif",alt:"[唇]"},{url:"166.gif",alt:"[爱]"},{url:"167.gif",alt:"[分手]"},{url:"168.gif",alt:"[生日]"},{url:"169.gif",alt:"[电]"},{url:"170.gif",alt:"[炸弹]"},{url:"171.gif",alt:"[刀子]"}],[{url:"172.gif",alt:"[足球]"},{url:"173.gif",alt:"[瓢虫]"},{url:"174.gif",alt:"[翔]"},{url:"175.gif",alt:"[月亮]"},{url:"176.gif",alt:"[太阳]"},{url:"177.gif",alt:"[礼物]"},{url:"178.gif",alt:"[抱抱]"},{url:"179.gif",alt:"[拇指]"},{url:"180.gif",alt:"[贬低]"},{url:"181.gif",alt:"[握手]"},{url:"182.gif",alt:"[剪刀手]"},{url:"183.gif",alt:"[抱拳]"},{url:"184.gif",alt:"[勾引]"},{url:"185.gif",alt:"[拳头]"},{url:"186.gif",alt:"[小拇指]"},{url:"187.gif",alt:"[拇指八]"},{url:"188.gif",alt:"[食指]"},{url:"189.gif",alt:"[ok]"},{url:"190.gif",alt:"[情侣]"},{url:"191.gif",alt:"[爱心]"},{url:"192.gif",alt:"[蹦哒]"},{url:"193.gif",alt:"[颤抖]"},{url:"194.gif",alt:"[怄气]"},{url:"195.gif",alt:"[跳舞]"}],[{url:"196.gif",alt:"[发呆]"},{url:"197.gif",alt:"[背着]"},{url:"198.gif",alt:"[伸手]"},{url:"199.gif",alt:"[耍帅]"},{url:"200.png",alt:"[微笑]"},{url:"201.png",alt:"[生病]"},{url:"202.png",alt:"[哭泣]"},{url:"203.png",alt:"[吐舌]"},{url:"204.png",alt:"[迷糊]"},{url:"205.png",alt:"[瞪眼]"},{url:"206.png",alt:"[恐怖]"},{url:"207.png",alt:"[忧愁]"},{url:"208.png",alt:"[眨眉]"},{url:"209.png",alt:"[闭眼]"},{url:"210.png",alt:"[鄙视]"},{url:"211.png",alt:"[阴暗]"},{url:"212.png",alt:"[小鬼]"},{url:"213.png",alt:"[礼物]"},{url:"214.png",alt:"[拜佛]"},{url:"215.png",alt:"[力量]"},{url:"216.png",alt:"[金钱]"},{url:"217.png",alt:"[蛋糕]"},{url:"218.png",alt:"[彩带]"},{url:"219.png",alt:"[礼物]"}]],onlineEmoji:{"100.gif":"AbNQgA.gif","101.gif":"AbN3ut.gif","102.gif":"AbNM3d.gif","103.gif":"AbN8DP.gif","104.gif":"AbNljI.gif","105.gif":"AbNtUS.gif","106.gif":"AbNGHf.gif","107.gif":"AbNYE8.gif","108.gif":"AbNaCQ.gif","109.gif":"AbNN4g.gif","110.gif":"AbN0vn.gif","111.gif":"AbNd3j.gif","112.gif":"AbNsbV.gif","113.gif":"AbNwgs.gif","114.gif":"AbNrD0.gif","115.gif":"AbNDuq.gif","116.gif":"AbNg5F.gif","117.gif":"AbN6ET.gif","118.gif":"AbNcUU.gif","119.gif":"AbNRC4.gif","120.gif":"AbNhvR.gif","121.gif":"AbNf29.gif","122.gif":"AbNW8J.gif","123.gif":"AbNob6.gif","124.gif":"AbN5K1.gif","125.gif":"AbNHUO.gif","126.gif":"AbNIDx.gif","127.gif":"AbN7VK.gif","128.gif":"AbNb5D.gif","129.gif":"AbNX2d.gif","130.gif":"AbNLPe.gif","131.gif":"AbNjxA.gif","132.gif":"AbNO8H.gif","133.gif":"AbNxKI.gif","134.gif":"AbNzrt.gif","135.gif":"AbU9Vf.gif","136.gif":"AbUSqP.gif","137.gif":"AbUCa8.gif","138.gif":"AbUkGQ.gif","139.gif":"AbUFPg.gif","140.gif":"AbUPIS.gif","141.gif":"AbUZMn.gif","142.gif":"AbUExs.gif","143.gif":"AbUA2j.gif","144.gif":"AbUMIU.gif","145.gif":"AbUerq.gif","146.gif":"AbUKaT.gif","147.gif":"AbUmq0.gif","148.gif":"AbUuZV.gif","149.gif":"AbUliF.gif","150.gif":"AbU1G4.gif","151.gif":"AbU8z9.gif","152.gif":"AbU3RJ.gif","153.gif":"AbUYs1.gif","154.gif":"AbUJMR.gif","155.gif":"AbUadK.gif","156.gif":"AbUtqx.gif","157.gif":"AbUUZ6.gif","158.gif":"AbUBJe.gif","159.gif":"AbUdIO.gif","160.gif":"AbU0iD.gif","161.gif":"AbUrzd.gif","162.gif":"AbUDRH.gif","163.gif":"AbUyQA.gif","164.gif":"AbUWo8.gif","165.gif":"AbU6sI.gif","166.gif":"AbU2eP.gif","167.gif":"AbUcLt.gif","168.gif":"AbU4Jg.gif","169.gif":"AbURdf.gif","170.gif":"AbUhFS.gif","171.gif":"AbU5WQ.gif","172.gif":"AbULwV.gif","173.gif":"AbUIzj.gif","174.gif":"AbUTQs.gif","175.gif":"AbU7yn.gif","176.gif":"AbUqe0.gif","177.gif":"AbUHLq.gif","178.gif":"AbUOoT.gif","179.gif":"AbUvYF.gif","180.gif":"AbUjFU.gif","181.gif":"AbaSSJ.gif","182.gif":"AbUxW4.gif","183.gif":"AbaCO1.gif","184.gif":"Abapl9.gif","185.gif":"Aba9yR.gif","186.gif":"AbaFw6.gif","187.gif":"Abaiex.gif","188.gif":"AbakTK.gif","189.gif":"AbaZfe.png","190.gif":"AbaEFO.gif","191.gif":"AbaVYD.gif","192.gif":"AbamSH.gif","193.gif":"AbaKOI.gif","194.gif":"Abanld.gif","195.gif":"Abau6A.gif","196.gif":"AbaQmt.gif","197.gif":"Abal0P.gif","198.gif":"AbatpQ.gif","199.gif":"Aba1Tf.gif","200.png":"Aba8k8.png","201.png":"AbaGtS.png","202.png":"AbaJfg.png","203.png":"AbaNlj.png","204.png":"Abawmq.png","205.png":"AbaU6s.png","206.png":"AbaaXn.png","207.png":"Aba000.png","208.png":"AbarkT.png","209.png":"AbastU.png","210.png":"AbaB7V.png","211.png":"Abafn1.png","212.png":"Abacp4.png","213.png":"AbayhF.png","214.png":"Abag1J.png","215.png":"Aba2c9.png","216.png":"AbaRXR.png","217.png":"Aba476.png","218.png":"Abah0x.png","219.png":"Abdg58.png"},windowsState:"",redenvelopeData:{rid:null,from:null,face:null,blessing:null,money:null},toUserId:"",userId:""}},onPageScroll:function(t){t.scrollTop>0?this.isScroll=!0:this.isScroll=!1},onLoad:function(t){var e=this;this.userName=t.userName,this.toUserId=t.userId,this.getMsgList(),this.AUDIO.onEnded((function(t){e.playMsgid=null})),this.RECORDER.onStart((function(t){e.recordBegin(t)})),this.RECORDER.onStop((function(t){e.recordEnd(t)}))},computed:a({},(0,n.mapState)({currentMessageList:function(t){return t.currentMessageList}})),watch:{currentMessageList:function(t,e){this.msgList=t,this.screenMsg(t,e)}},onShow:function(){this.toUserId=this.$store.state.toUserId,this.scrollTop=9999999,this.customer=uni.getStorageSync("customer"),this.conversationActive=this.$store.state.conversationActive,this.setDestroyed()},destroyed:function(){this.setDestroyed()},methods:{setDestroyed:function(){var e=this.$store.state.conversationActive.conversationID;t("log","conversationID",e," at pages\\tabbar\\chat\\customerRoom.vue:272");var i=this.tim.setMessageRead({conversationID:e});i.then((function(e){t("log","全部已读"," at pages\\tabbar\\chat\\customerRoom.vue:275")})).catch((function(e){t("warn","setMessageRead error:",e," at pages\\tabbar\\chat\\customerRoom.vue:279")}))},scrollClick:function(t){},nodesFliter:function(t){var e='<div style="align-items: center;word-wrap:break-word;">'+t+"</div>";return e},timeFliter:function(t){var e=new Date(1e3*t),i=this.$commen.dateTimeFliter(e);return i},screenMsg:function(t,e){var i=this;t.forEach((function(t){var e=(new Date).getTime(),i="G"+e;t.id&&t.id.indexOf("G")>-1||(t.id=i)})),t[0].ID&&e[0].ID?(t[0].ID!=e[0].ID&&(t.length,this.count),this.$nextTick((function(){i.scrollToView=t[t.length-1].id}))):this.$nextTick((function(){i.scrollToView=t[t.length-1].id}))},loadHistory:function(t){var e=this,i=this.$store.state.conversationActive.conversationID,n=this.tim.getMessageList({conversationID:i,nextReqMessageID:this.nextReqMessageID,count:this.count});n.then((function(t){e.$store.commit("unshiftCurrentMessageList",t.data.messageList),e.nextReqMessageID=t.data.nextReqMessageID,e.isCompleted=t.data.isCompleted;var i=t.data.messageList;i.forEach((function(t){var e=(new Date).getTime(),i="G"+e+Math.ceil(100*Math.random());t.id&&t.id.indexOf("G")>-1||(t.id=i)}))})),this.$nextTick((function(){_messageList.length>0&&(this.scrollToView=_messageList[_messageList.length-1].id)})),this.isHistoryLoading=!1},getMsgList:function(){var t=this,e=this.$store.state.conversationActive.conversationID,i=this.tim.getMessageList({conversationID:e,count:this.count});i.then((function(e){t.$store.commit("pushCurrentMessageList",e.data.messageList),t.isCompleted=e.data.isCompleted;var i=e.data.messageList;t.nextReqMessageID=e.data.nextReqMessageID,i.forEach((function(t){var e=(new Date).getTime(),i="G"+e+Math.ceil(100*Math.random());t.id&&t.id.indexOf("G")>-1||(t.id=i)})),t.$nextTick((function(){i.length>0&&(this.scrollToView=i[i.length-1].id)}))})),this.$nextTick((function(){this.scrollTop=99999999,this.$nextTick((function(){this.scrollAnimation=!0}))}))},showMore:function(){this.isVoice=!1,this.hideEmoji=!0,this.hideMore?(this.hideMore=!1,this.openDrawer()):this.hideDrawer()},openDrawer:function(){this.popupLayerClass="showLayer"},hideDrawer:function(){var t=this;this.popupLayerClass="",setTimeout((function(){t.hideMore=!0,t.hideEmoji=!0}),150)},chooseImage:function(){this.getImage("album")},camera:function(){this.getImage("camera")},handRedEnvelopes:function(){uni.navigateTo({url:"HM-hand/HM-hand"}),this.hideDrawer()},getImage:function(e){var i=this;this.hideDrawer(),uni.chooseImage({sourceType:[e],sizeType:["original","compressed"],success:function(e){for(var n=function(n){uni.getImageInfo({src:e.tempFilePaths[n],success:function(r){t("log",r.width," at pages\\tabbar\\chat\\customerRoom.vue:438"),t("log",r.height," at pages\\tabbar\\chat\\customerRoom.vue:439");var o={url:e.tempFilePaths[n],w:r.width,h:r.height};i.sendMsg(o,"img")}})},r=0;r<e.tempFilePaths.length;r++)n(r)}})},chooseEmoji:function(){this.hideMore=!0,this.hideEmoji?(this.hideEmoji=!1,this.openDrawer()):this.hideDrawer()},addEmoji:function(t){this.textMsg+=t.alt},textareaFocus:function(){"showLayer"==this.popupLayerClass&&0==this.hideMore&&this.hideDrawer()},sendText:function(){if(this.hideDrawer(),this.textMsg){var t=this.replaceEmoji(this.textMsg),e={text:t};this.sendMsg(e,"text"),this.textMsg=""}},replaceEmoji:function(e){var i=this,n=e.replace(/\[([^(\]|\[)]*)\]/g,(function(e,n){t("log","item: "+e," at pages\\tabbar\\chat\\customerRoom.vue:483");for(var r=0;r<i.emojiList.length;r++)for(var o=i.emojiList[r],a=0;a<o.length;a++){var s=o[a];if(s.alt==e){var c="https://s2.ax1x.com/2019/04/12/",u='<img src="'+c+i.onlineEmoji[s.url]+'">';return t("log","imgstr: "+u," at pages\\tabbar\\chat\\customerRoom.vue:493"),u}}}));return'<div style="display: flex;align-items: center;word-wrap:break-word;">'+n+"</div>"},sendMsg:function(t,e){var i=this,n=this.tim.createTextMessage({to:this.toUserId,conversationType:"C2C",payload:{text:t.text}});this.$store.commit("pushCurrentMessageList",n);var r=this.tim.sendMessage(n);r.then((function(t){i.$nextTick((function(){i.scrollToView=t.data.message.id}))}))},addTextMsg:function(t){this.msgList.push(t)},addVoiceMsg:function(t){this.msgList.push(t)},addImgMsg:function(t){t.msg.content=this.setPicSize(t.msg.content),this.msgImgList.push(t.msg.content.url),this.msgList.push(t)},addRedEnvelopeMsg:function(t){this.msgList.push(t)},addSystemTextMsg:function(t){this.msgList.push(t)},addSystemRedEnvelopeMsg:function(t){this.msgList.push(t)},openRedEnvelope:function(e,i){var n=this,r=e.content.rid;uni.showLoading({title:"加载中..."}),t("log","index: "+i," at pages\\tabbar\\chat\\customerRoom.vue:553"),setTimeout((function(){0==r?n.redenvelopeData={rid:0,from:"大黑哥",face:"/static/img/im/face/face.jpg",blessing:"恭喜发财，大吉大利",money:"已领完"}:(n.redenvelopeData={rid:1,from:"售后客服008",face:"/static/img/im/face/face_2.jpg",blessing:"恭喜发财",money:"0.01"},e.content.isReceived||(n.sendSystemMsg({text:"你领取了"+(e.userinfo.uid==n.myuid?"自己":e.userinfo.username)+"的红包"},"redEnvelope"),t("log","this.msgList[index]: "+JSON.stringify(n.msgList[i])," at pages\\tabbar\\chat\\customerRoom.vue:576"),n.msgList[i].msg.content.isReceived=!0)),uni.hideLoading(),n.windowsState="show"}),200)},closeRedEnvelope:function(){var t=this;this.windowsState="hide",setTimeout((function(){t.windowsState=""}),200)},sendSystemMsg:function(t,e){var i=this.msgList[this.msgList.length-1].msg.id;i++;var n={type:"system",msg:{id:i,type:e,content:t}};this.screenMsg(n)},toDetails:function(t){uni.navigateTo({url:"HM-details/HM-details?rid="+t})},showPic:function(t){uni.previewImage({indicator:"none",current:t.content.url,urls:this.msgImgList})},playVoice:function(t){this.playMsgid=t.id,this.AUDIO.src=t.content.url,this.$nextTick((function(){this.AUDIO.play()}))},voiceBegin:function(t){t.touches.length>1||(this.initPoint.Y=t.touches[0].clientY,this.initPoint.identifier=t.touches[0].identifier,this.RECORDER.start({format:"mp3"}))},recordBegin:function(t){var e=this;this.recording=!0,this.voiceTis="松开 结束",this.recordLength=0,this.recordTimer=setInterval((function(){e.recordLength++}),1e3)},voiceCancel:function(){this.recording=!1,this.voiceTis="按住 说话",this.recordTis="手指上滑 取消发送",this.willStop=!0,this.RECORDER.stop()},voiceIng:function(t){if(this.recording){var e=t.touches[0];this.initPoint.Y-e.clientY>=uni.upx2px(100)?(this.willStop=!0,this.recordTis="松开手指 取消发送"):(this.willStop=!1,this.recordTis="手指上滑 取消发送")}},voiceEnd:function(t){this.recording&&(this.recording=!1,this.voiceTis="按住 说话",this.recordTis="手指上滑 取消发送",this.RECORDER.stop())},recordEnd:function(e){if(clearInterval(this.recordTimer),this.willStop)t("log","取消发送录音"," at pages\\tabbar\\chat\\customerRoom.vue:688");else{t("log","e: "+JSON.stringify(e)," at pages\\tabbar\\chat\\customerRoom.vue:676");var i={length:0,url:e.tempFilePath},n=parseInt(this.recordLength/60),r=this.recordLength%60;n=n<10?"0"+n:n,r=r<10?"0"+r:r,i.length=n+":"+r,this.sendMsg(i,"voice")}this.willStop=!1},switchVoice:function(){this.hideDrawer(),this.isVoice=!this.isVoice},discard:function(){}}};e.default=c}).call(this,i("0de9")["default"])},bbdd:function(t,e,i){var n=function(){return this||"object"===typeof self&&self}()||Function("return this")(),r=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,o=r&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=i("96cf"),r)n.regeneratorRuntime=o;else try{delete n.regeneratorRuntime}catch(a){n.regeneratorRuntime=void 0}},bd44:function(t,e){t.exports="static/img/title-txt-01.png"},be3f:function(t,e,i){"use strict";var n,r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",[i("cu-custom",{attrs:{bgColor:"bg-red",isBack:!0,_i:1}},[i("template",{slot:"content"})],2),i("view",[i("view",{staticClass:t._$s(4,"sc","cu-form-group margin-top photo"),attrs:{_i:4},on:{click:function(e){return t.chooseImage()}}},[i("view",{staticClass:t._$s(5,"sc","title"),attrs:{_i:5}}),i("view",{staticClass:t._$s(6,"sc","cu-avatar radius bg-gray circle"),attrs:{_i:6}},[i("image",{attrs:{src:t._$s(7,"a-src",t.headImg),_i:7}})]),i("text",{staticClass:t._$s(8,"sc","cuIcon-right iconfontright"),attrs:{_i:8}})])]),i("view",{staticClass:t._$s(9,"sc","from"),attrs:{_i:9}},[i("view",{staticClass:t._$s(10,"sc","cu-form-group margin-top"),attrs:{_i:10}},[i("view",{staticClass:t._$s(11,"sc","title"),attrs:{_i:11}}),i("input",{attrs:{_i:12}}),i("text",{staticClass:t._$s(13,"sc","photo-num bookfont-size"),attrs:{_i:13}},[t._v(t._$s(13,"t0-0",t._s(t.userInfo.phoneNumber)))])]),i("view",{staticClass:t._$s(14,"sc","cu-form-group"),attrs:{_i:14},on:{click:t.updateName}},[i("view",{staticClass:t._$s(15,"sc","title"),attrs:{_i:15}}),i("view",[i("text",{staticClass:t._$s(17,"sc","userName bookfont-size"),attrs:{_i:17}},[t._v(t._$s(17,"t0-0",t._s(t.UserNickName?t.UserNickName:t.userInfo.memberName)))]),i("text",{staticClass:t._$s(18,"sc","cuIcon-right iconfontright jiantou"),attrs:{_i:18}})])]),i("view",{staticClass:t._$s(19,"sc","cu-form-group"),attrs:{_i:19}},[i("view",{staticClass:t._$s(20,"sc","title"),attrs:{_i:20}}),i("input",{attrs:{_i:21}}),i("text",{staticClass:t._$s(22,"sc","photo-num bookfont-size"),attrs:{_i:22}},[t._v(t._$s(22,"t0-0",t._s(t.userInfo.levelDisplay)))])]),i("view",{staticClass:t._$s(23,"sc","cu-form-group"),attrs:{_i:23}},[i("view",{staticClass:t._$s(24,"sc","title"),attrs:{_i:24}}),i("view",[i("text",{staticClass:t._$s(26,"sc","userName bookfont-size"),attrs:{_i:26}},[t._v(t._$s(26,"t0-0",t._s(t.userInfo.customerManagerName?t.userInfo.customerManagerName:"")))])])]),t._$s(27,"i",t.isVIP)?i("view",[i("view",{staticClass:t._$s(28,"sc","cu-form-group margin-top"),attrs:{_i:28}},[i("view",{staticClass:t._$s(29,"sc","title"),attrs:{_i:29}}),i("input",{attrs:{_i:30}}),i("text",{staticClass:t._$s(31,"sc","photo-num bookfont-size"),attrs:{_i:31}},[t._v(t._$s(31,"t0-0",t._s(t.applyInfo.realname)))])]),i("view",{staticClass:t._$s(32,"sc","cu-form-group"),attrs:{_i:32}},[i("view",{staticClass:t._$s(33,"sc","title"),attrs:{_i:33}}),i("input",{attrs:{_i:34}}),i("text",{staticClass:t._$s(35,"sc","photo-num bookfont-size"),attrs:{_i:35}},[t._v(t._$s(35,"t0-0",t._s(t.applyInfo.birthday)))])]),i("view",{staticClass:t._$s(36,"sc","cu-form-group"),attrs:{_i:36}},[i("view",{staticClass:t._$s(37,"sc","title"),attrs:{_i:37}}),i("input",{attrs:{_i:38}}),i("text",{staticClass:t._$s(39,"sc","photo-num bookfont-size"),attrs:{_i:39}},[t._v(t._$s(39,"t0-0",t._s(t.applyInfo.stockAge)))])]),i("view",{staticClass:t._$s(40,"sc","cu-form-group"),attrs:{_i:40}},[i("view",{staticClass:t._$s(41,"sc","title"),attrs:{_i:41}}),i("input",{attrs:{_i:42}}),i("text",{staticClass:t._$s(43,"sc","photo-num bookfont-size"),attrs:{_i:43}},[t._v(t._$s(43,"t0-0",t._s(t.applyInfo.amountFunds)))])]),i("view",{staticClass:t._$s(44,"sc","cu-form-group"),attrs:{_i:44}},[i("view",{staticClass:t._$s(45,"sc","title"),attrs:{_i:45}}),i("input",{attrs:{_i:46}}),i("text",{staticClass:t._$s(47,"sc","photo-num bookfont-size"),attrs:{_i:47}},[t._v(t._$s(47,"t0-0",t._s(t.applyInfo.securitiesCompany)))])]),i("view",{staticClass:t._$s(48,"sc","cu-form-group"),attrs:{_i:48}},[i("view",{staticClass:t._$s(49,"sc","title"),attrs:{_i:49}}),i("input",{attrs:{_i:50}}),i("text",{staticClass:t._$s(51,"sc","photo-num bookfont-size"),attrs:{_i:51}},[t._v(t._$s(51,"t0-0",t._s(t.applyInfo.stockAccount)))])]),i("view",{staticClass:t._$s(52,"sc","cu-form-group"),attrs:{_i:52}},[i("view",{staticClass:t._$s(53,"sc","title"),attrs:{_i:53}}),i("input",{attrs:{_i:54}}),i("text",{staticClass:t._$s(55,"sc","photo-num bookfont-size"),attrs:{_i:55}},[t._v(t._$s(55,"t0-0",t._s(t.applyInfo.identifyTypeDisplay)))])]),i("view",{staticClass:t._$s(56,"sc","cu-form-group"),attrs:{_i:56}},[i("view",{staticClass:t._$s(57,"sc","title"),attrs:{_i:57}}),i("input",{attrs:{_i:58}}),i("text",{staticClass:t._$s(59,"sc","photo-num bookfont-size"),attrs:{_i:59}},[t._v(t._$s(59,"t0-0",t._s(t.applyInfo.identifyNo)))])])]):t._e()]),i("view",[i("button",{staticClass:t._$s(61,"sc","cu-btn block margin-tb-sm lg shadow text-white bg-red"),attrs:{_i:61},on:{click:function(e){return t.logout()}}})]),i("view",{staticClass:t._$s(62,"sc","cu-modal"),class:t._$s(62,"c","updateModal"==t.update?"show":""),attrs:{_i:62}},[i("view",{staticClass:t._$s(63,"sc","cu-dialog"),attrs:{_i:63}},[i("view",{staticClass:t._$s(64,"sc","cu-bar bg-white justify-end"),attrs:{_i:64}},[i("view",{staticClass:t._$s(65,"sc","content"),attrs:{_i:65}}),i("view",{staticClass:t._$s(66,"sc","action"),attrs:{_i:66},on:{click:t.hideModal}},[i("text",{staticClass:t._$s(67,"sc","cuIcon-close"),attrs:{_i:67}})])]),i("view",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.UserNickName,expression:"UserNickName"}],staticClass:t._$s(69,"sc","input-l"),attrs:{_i:69},domProps:{value:t._$s(69,"v-model",t.UserNickName)},on:{input:function(e){e.target.composing||(t.UserNickName=e.target.value)}}})]),i("view",{staticClass:t._$s(70,"sc","cu-bar bg-white justify-end"),attrs:{_i:70}},[i("view",{staticClass:t._$s(71,"sc","action"),attrs:{_i:71}},[i("button",{staticClass:t._$s(72,"sc","cu-btn"),attrs:{_i:72},on:{click:t.hideModal}}),i("button",{staticClass:t._$s(73,"sc","cu-btn margin-left bg-red text-white"),attrs:{_i:73},on:{click:t.confirmName}})])])])])],1)},o=[];i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},c777:function(t,e,i){"use strict";i.r(e);var n=i("8ec9"),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=r.a},c8ba:function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(n){"object"===typeof window&&(i=window)}t.exports=i},ca43:function(t,e,i){"use strict";i.r(e);var n=i("69a7"),r=i("f4ac");for(var o in r)"default"!==o&&function(t){i.d(e,t,(function(){return r[t]}))}(o);var a,s=i("f0c5"),c=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);e["default"]=c.exports},cad3:function(t,e,i){"use strict";i.r(e);var n=i("e8f4"),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=r.a},cc24:function(t,e){t.exports="static/img/successApply.png"},d13a:function(t,e,i){"use strict";i.r(e);var n=i("0b2a"),r=i("f102");for(var o in r)"default"!==o&&function(t){i.d(e,t,(function(){return r[t]}))}(o);var a,s=i("f0c5"),c=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],a);e["default"]=c.exports},d5a9:function(t,e,i){"use strict";i.r(e);var n=i("bad5"),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=r.a},d86e:function(t,e){t.exports="static/img/segment-VIP.png"},d95c:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("2f62");function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){a(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var s={data:function(){return{isKF:!1,userAddConversationList:[],windowHeight:0}},onLoad:function(t){this.isKF=uni.getStorageSync("userInfo").isKF,this.isSDKReady&&this.getConversationList()},onShow:function(){this.getConversationList()},computed:o({},(0,n.mapState)({isSDKReady:function(t){return t.isSDKReady},conversationList:function(t){return t.conversationList}})),watch:{groupMessageList:function(t,e){this.msgList=t,this.screenMsg(t,e)},isSDKReady:function(t){t&&this.getConversationList()},conversationList:function(t){this.getUserInfo(t)}},methods:{getUserInfo:function(e){this.userAddConversationList=[];var i=[];e.forEach((function(t){"C2C"==t.conversation.type&&i.push(t)})),this.userAddConversationList=i,t("log","userAddConversationList",this.userAddConversationList," at pages\\tabbar\\chat\\conversationList.vue:116")},toRoom:function(t){if("C2C"==t.conversation.type){if(this.$store.commit("updateConversationActive",t),t.user)var e=t.user.user;else e="用户"+t.conversation.userProfile.userID;uni.navigateTo({url:"./customerRoom?userName="+e+"&userId="+t.conversation.userProfile.userID})}},getConversationList:function(){var e=this,i=this.tim.getConversationList();i.then((function(t){var i=t.data.conversationList;i.length&&e.$store.commit("updateConversationList",i)})).catch((function(e){t("warn","getConversationList error:",e," at pages\\tabbar\\chat\\conversationList.vue:146")}))},screenMsg:function(t,e){var i=this;t.forEach((function(t){var e=(new Date).getTime(),i="G"+e;t.id&&t.id.indexOf("G")>-1||(t.id=i)})),t[0].ID&&e[0].ID?(t[0].ID!=e[0].ID&&(t.length,this.count),this.$nextTick((function(){i.scrollToView=t[t.length-1].id}))):this.$nextTick((function(){i.scrollToView=t[t.length-1].id}))},scrollClick:function(t){},nodesFliter:function(t){var e='<div style="align-items: center;word-wrap:break-word;">'+t+"</div>";return e},timeFliter:function(t){var e=new Date(1e3*t),i=this.$commen.dateTimeFliter(e);return i},toliveShow:function(){uni.navigateTo({url:"./liveshow/liveshow"})},topullShow:function(){uni.navigateTo({url:"./liveshow/pull"})},toscreenShow:function(){uni.navigateTo({url:"./liveshow/screen"})}}};e.default=s}).call(this,i("0de9")["default"])},da27:function(t,e){t.exports="static/img/top-txt.png"},dc43:function(t,e,i){"use strict";var n,r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:t._$s(0,"sc","content"),attrs:{_i:0}},[i("cu-custom",{attrs:{bgColor:"bg-white",isBack:!0,backColor:"text-red",_i:1}},[i("template",{slot:"content"},[i("text")])],2),i("view",{staticClass:t._$s(4,"sc","content-news"),attrs:{_i:4}},[i("view",{staticClass:t._$s(5,"sc","newTitle"),attrs:{_i:5}},[t._v(t._$s(5,"t0-0",t._s(t.newsDetail.title)))]),i("view",[i("text",[t._v(t._$s(7,"t0-0",t._s(t.newsDetail.author)))]),i("text",[t._v(t._$s(8,"t0-0",t._s(t.newsDetail.durationDisplay)))])]),i("view",[i("view",{attrs:{_i:10},domProps:{innerHTML:t._s(t._$s(10,"v-html",t.strings))}})])])],1)},o=[];i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},ddc7:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(i("4795")),r=o(i("70be"));function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e,i,n,r,o,a){try{var s=t[o](a),c=s.value}catch(u){return void i(u)}s.done?e(c):Promise.resolve(c).then(n,r)}function s(t){return function(){var e=this,i=arguments;return new Promise((function(n,r){var o=t.apply(e,i);function s(t){a(o,n,r,s,c,"next",t)}function c(t){a(o,n,r,s,c,"throw",t)}s(void 0)}))}}var c={data:function(){return{date:"",screenshotImg:"",imgList:[],index:0,indexnum:0,vipForm:{Realname:"",IdentifyType:"",IdentifyNo:"",Birthday:"",StockAge:"",SecuritiesCompany:"",StockAccount:"",AmountFunds:"",AccountImages:[]},token:"",certificateTypeValue:["身份证","港澳身份证","台胞证","中国护照"],certificateTypeLabel:["IdCard","GAIdCard","TaiwanesePassport","ChinaPassPort"],isApply:!1,applyInfo:{},screenHeight:""}},onReady:function(){},onLoad:function(){var t=uni.getStorageSync("accountInfo");this.token=t.token,this.vipForm.IdentifyType=this.certificateTypeLabel[this.indexnum]},onShow:function(){this.getApplyInfo();var e=this;uni.onKeyboardHeightChange((function(i){t("log",i.height," at pages\\tabbar\\home\\applyVip.vue:189"),e.screenHeight=i.height}))},methods:{isCardNo:function(t){var e=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;if(!1===e.test(t))return uni.showToast({icon:"none",title:"身份证输入不合法",duration:2e3}),void(this.vipForm.IdentifyNo="")},getApplyInfo:function(){var t=this;this.$http.get("/StockSkyEyes/App/GetVipInfo").then((function(e){e.data&&e.data.result&&(t.isApply=!0,t.applyInfo=e.data.result)}))},changeCertificateType:function(t){this.indexnum=t.detail.value,this.vipForm.IdentifyType=this.certificateTypeLabel[this.indexnum]},getStandard:function(t){if("IdCard"==this.vipForm.IdentifyType){var e=t.detail.value;this.isCardNo(e);var i=this.getBirthdayFromIdCard(e);this.date=i,this.vipForm.Birthday=i}},getBirthdayFromIdCard:function(t){var e="";return null!=t&&""!=t&&(15==t.length?e="19"+t.substr(6,6):18==t.length&&(e=t.substr(6,8)),e=e.replace(/(.{4})(.{2})/,"$1-$2-")),e},DateChange:function(t){this.date=t.detail.value,this.vipForm.Birthday=this.date},SecuritiesCompany:function(t){this.vipForm.SecuritiesCompany=this.SecuritiesCompanyList[this.index]},submitForm:function(){},submitApplyVIP:function(){var t=this;this.vipForm.Realname?this.vipForm.Birthday?this.vipForm.StockAge?this.vipForm.AmountFunds?this.vipForm.SecuritiesCompany?this.vipForm.StockAccount?this.vipForm.IdentifyType?this.vipForm.IdentifyNo?this.vipForm.AccountImages.length<=0?uni.showToast({icon:"none",title:"请上传股票账户截图",duration:2e3}):this.$http.post("/StockSkyEyes/App/VIPApply",this.vipForm).then((function(e){e.data&&e.data.result&&t.getApplyInfo()})):uni.showToast({icon:"none",title:"请输入证件号码",duration:2e3}):uni.showToast({icon:"none",title:"请选择证件类型",duration:2e3}):uni.showToast({icon:"none",title:"请输入股票账户",duration:2e3}):uni.showToast({icon:"none",title:"请输入开户卷商",duration:2e3}):uni.showToast({icon:"none",title:"请输入资金量",duration:2e3}):uni.showToast({icon:"none",title:"请输入股龄",duration:2e3}):uni.showToast({icon:"none",title:"请输入出生年月",duration:2e3}):uni.showToast({icon:"none",title:"请输入姓名",duration:2e3})},ageChange:function(){},chooseImage:function(){var t=s(n.default.mark((function t(){var e;return n.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=this,e.vipForm.AccountImages=[],uni.chooseImage({sizeType:["compressed"],success:function(t){uni.showLoading({title:"加载中"});var i=t.tempFilePaths;uni.uploadFile({url:r.default.apiHost+"/StockSkyEyes/App/Upload?catalog=AssetImages",filePath:i[0],name:"file1",header:{Authorization:e.token},success:function(t){if(uni.hideLoading(),t&&t.data){var i;i=JSON.parse(t.data),e.screenshotImg=i.result[0].url;var n=i.result[0].id;e.vipForm.AccountImages.push(n)}}})}});case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),toFundsState:function(){uni.navigateTo({url:"./successFunds"})}}};e.default=c}).call(this,i("0de9")["default"])},e146:function(t,e,i){"use strict";function n(t){var e=this;e.version="1.1.7",e.options=t||{},e.isDownScrolling=!1,e.isUpScrolling=!1;var i=e.options.down&&e.options.down.callback;e.initDownScroll(),e.initUpScroll(),setTimeout((function(){e.optDown.use&&e.optDown.auto&&i&&(e.optDown.autoShowLoading?e.triggerDownScroll():e.optDown.callback&&e.optDown.callback(e)),e.optUp.use&&e.optUp.auto&&!e.isUpAutoLoad&&e.triggerUpScroll()}),30)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n,n.prototype.extendDownScroll=function(t){n.extend(t,{use:!0,auto:!0,autoShowLoading:!1,isLock:!1,offset:80,startTop:100,fps:40,inOffsetRate:1,outOffsetRate:.2,bottomOffset:20,minAngle:45,textInOffset:"下拉刷新",textOutOffset:"释放更新",textLoading:"加载中 ...",inited:null,inOffset:null,outOffset:null,onMoving:null,beforeLoading:null,showLoading:null,afterLoading:null,endDownScroll:null,callback:function(t){t.resetUpScroll()}})},n.prototype.extendUpScroll=function(t){n.extend(t,{use:!0,auto:!0,isLock:!1,isBoth:!0,isBounce:!1,callback:null,page:{num:0,size:10,time:null},noMoreSize:5,offset:80,textLoading:"加载中 ...",textNoMore:" -- END --",inited:null,showLoading:null,showNoMore:null,hideUpScroll:null,toTop:{src:null,offset:1e3,duration:300,btnClick:null,onShow:null},empty:{use:!0,icon:null,tip:"~ 暂无相关数据 ~",btnText:"",btnClick:null,onShow:null},onScroll:!1})},n.extend=function(t,e){if(!t)return e;for(var i in e)if(null==t[i]){var r=e[i];t[i]=null!=r&&"object"===typeof r?n.extend({},r):r}else"object"===typeof t[i]&&n.extend(t[i],e[i]);return t},n.prototype.initDownScroll=function(){var t=this;t.optDown=t.options.down||{},t.extendDownScroll(t.optDown),t.downHight=0,t.optDown.use&&t.optDown.inited&&setTimeout((function(){t.optDown.inited(t)}),0)},n.prototype.touchstartEvent=function(t){this.optDown.use&&(this.startPoint=this.getPoint(t),this.startTop=this.getScrollTop(),this.lastPoint=this.startPoint,this.maxTouchmoveY=this.getBodyHeight()-this.optDown.bottomOffset,this.inTouchend=!1)},n.prototype.touchmoveEvent=function(t){if(this.optDown.use&&this.startPoint){var e=this,i=(new Date).getTime();if(!(e.moveTime&&i-e.moveTime<e.moveTimeDiff)){e.moveTime=i,e.moveTimeDiff=1e3/e.optDown.fps;var n=e.getScrollTop(),r=e.getPoint(t),o=r.y-e.startPoint.y;if(o>0&&(n<=0||n<=e.optDown.startTop&&n===e.startTop)&&e.optDown.use&&!e.inTouchend&&!e.isDownScrolling&&!e.optDown.isLock&&(!e.isUpScrolling||e.isUpScrolling&&e.optUp.isBoth)){var a=Math.abs(e.lastPoint.x-r.x),s=Math.abs(e.lastPoint.y-r.y),c=Math.sqrt(a*a+s*s);if(0!==c){var u=Math.asin(s/c)/Math.PI*180;if(u<e.optDown.minAngle)return}if(e.maxTouchmoveY>0&&r.y>=e.maxTouchmoveY)return e.inTouchend=!0,void e.touchendEvent();e.preventDefault(t);var l=r.y-e.lastPoint.y;e.downHight<e.optDown.offset?(1!==e.movetype&&(e.movetype=1,e.optDown.inOffset&&e.optDown.inOffset(e),e.isMoveDown=!0),e.downHight+=l*e.optDown.inOffsetRate):(2!==e.movetype&&(e.movetype=2,e.optDown.outOffset&&e.optDown.outOffset(e),e.isMoveDown=!0),e.downHight+=l>0?Math.round(l*e.optDown.outOffsetRate):l);var f=e.downHight/e.optDown.offset;e.optDown.onMoving&&e.optDown.onMoving(e,f,e.downHight)}e.lastPoint=r}}},n.prototype.touchendEvent=function(t){if(this.optDown.use)if(this.isMoveDown)this.downHight>=this.optDown.offset?this.triggerDownScroll():(this.downHight=0,this.optDown.endDownScroll&&this.optDown.endDownScroll(this)),this.movetype=0,this.isMoveDown=!1;else if(this.getScrollTop()===this.startTop){var e=this.getPoint(t).y-this.startPoint.y<0;e&&this.triggerUpScroll(!0)}},n.prototype.getPoint=function(t){return t.touches&&t.touches[0]?{x:t.touches[0].pageX,y:t.touches[0].pageY}:t.changedTouches&&t.changedTouches[0]?{x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY}:{x:t.clientX,y:t.clientY}},n.prototype.triggerDownScroll=function(){this.optDown.beforeLoading&&this.optDown.beforeLoading(this)||(this.showDownScroll(),this.optDown.callback&&this.optDown.callback(this))},n.prototype.showDownScroll=function(){this.isDownScrolling=!0,this.downHight=this.optDown.offset,this.optDown.showLoading(this,this.downHight)},n.prototype.endDownScroll=function(){var t=this,e=function(){t.downHight=0,t.isDownScrolling=!1,t.optDown.endDownScroll&&t.optDown.endDownScroll(t),t.setScrollHeight(0)},i=0;t.optDown.afterLoading&&(i=t.optDown.afterLoading(t)),"number"===typeof i&&i>0?setTimeout(e,i):e()},n.prototype.lockDownScroll=function(t){null==t&&(t=!0),this.optDown.isLock=t},n.prototype.initUpScroll=function(){var t=this;t.optUp=t.options.up||{use:!1},t.extendUpScroll(t.optUp),t.optUp.isBounce||t.setBounce(!1),!1!==t.optUp.use&&(t.optUp.hasNext=!0,t.startNum=t.optUp.page.num+1,t.optUp.inited&&setTimeout((function(){t.optUp.inited(t)}),0))},n.prototype.scroll=function(t,e){this.setScrollTop(t.scrollTop),this.setScrollHeight(t.scrollHeight),null==this.preScrollY&&(this.preScrollY=0),this.isScrollUp=t.scrollTop-this.preScrollY>0,this.preScrollY=t.scrollTop,this.isScrollUp&&this.triggerUpScroll(!0),t.scrollTop>=this.optUp.toTop.offset?this.showTopBtn():this.hideTopBtn(),this.optUp.onScroll&&e&&e()},n.prototype.triggerUpScroll=function(t){if(!this.isUpScrolling&&this.optUp.use&&this.optUp.callback){if(!0===t){var e=!1;if(!this.optUp.hasNext||this.optUp.isLock||this.isDownScrolling||this.getScrollBottom()<=this.optUp.offset&&(e=!0),!1===e)return}this.showUpScroll(),this.optUp.page.num++,this.isUpAutoLoad=!0,this.num=this.optUp.page.num,this.size=this.optUp.page.size,this.time=this.optUp.page.time,this.optUp.callback(this)}},n.prototype.showUpScroll=function(){this.isUpScrolling=!0,this.optUp.showLoading&&this.optUp.showLoading(this)},n.prototype.showNoMore=function(){this.optUp.hasNext=!1,this.optUp.showNoMore&&this.optUp.showNoMore(this)},n.prototype.hideUpScroll=function(){this.optUp.hideUpScroll&&this.optUp.hideUpScroll(this)},n.prototype.endUpScroll=function(t){null!=t&&(t?this.showNoMore():this.hideUpScroll()),this.isUpScrolling=!1},n.prototype.resetUpScroll=function(t){if(this.optUp&&this.optUp.use){var e=this.optUp.page;this.prePageNum=e.num,this.prePageTime=e.time,e.num=this.startNum,e.time=null,this.isDownScrolling||!1===t||(null==t?(this.removeEmpty(),this.showUpScroll()):this.showDownScroll()),this.isUpAutoLoad=!0,this.num=e.num,this.size=e.size,this.time=e.time,this.optUp.callback&&this.optUp.callback(this)}},n.prototype.setPageNum=function(t){this.optUp.page.num=t-1},n.prototype.setPageSize=function(t){this.optUp.page.size=t},n.prototype.endByPage=function(t,e,i){var n;this.optUp.use&&null!=e&&(n=this.optUp.page.num<e),this.endSuccess(t,n,i)},n.prototype.endBySize=function(t,e,i){var n;if(this.optUp.use&&null!=e){var r=(this.optUp.page.num-1)*this.optUp.page.size+t;n=r<e}this.endSuccess(t,n,i)},n.prototype.endSuccess=function(t,e,i){var n=this;if(n.isDownScrolling&&n.endDownScroll(),n.optUp.use){var r;if(null!=t){var o=n.optUp.page.num,a=n.optUp.page.size;if(1===o&&i&&(n.optUp.page.time=i),t<a||!1===e)if(n.optUp.hasNext=!1,0===t&&1===o)r=!1,n.showEmpty();else{var s=(o-1)*a+t;r=!(s<n.optUp.noMoreSize),n.removeEmpty()}else r=!1,n.optUp.hasNext=!0,n.removeEmpty()}n.endUpScroll(r)}},n.prototype.endErr=function(){if(this.isDownScrolling){var t=this.optUp.page;t&&this.prePageNum&&(t.num=this.prePageNum,t.time=this.prePageTime),this.endDownScroll()}this.isUpScrolling&&(this.optUp.page.num--,this.endUpScroll(!1))},n.prototype.showEmpty=function(){this.optUp.empty.use&&this.optUp.empty.onShow&&this.optUp.empty.onShow(!0)},n.prototype.removeEmpty=function(){this.optUp.empty.use&&this.optUp.empty.onShow&&this.optUp.empty.onShow(!1)},n.prototype.showTopBtn=function(){this.topBtnShow||(this.topBtnShow=!0,this.optUp.toTop.onShow&&this.optUp.toTop.onShow(!0))},n.prototype.hideTopBtn=function(){this.topBtnShow&&(this.topBtnShow=!1,this.optUp.toTop.onShow&&this.optUp.toTop.onShow(!1))},n.prototype.getScrollTop=function(){return this.scrollTop||0},n.prototype.setScrollTop=function(t){this.scrollTop=t},n.prototype.scrollTo=function(t,e){this.myScrollTo&&this.myScrollTo(t,e)},n.prototype.resetScrollTo=function(t){this.myScrollTo=t},n.prototype.getScrollBottom=function(){return this.getScrollHeight()-this.getClientHeight()-this.getScrollTop()},n.prototype.getStep=function(t,e,i,n,r){var o=e-t;if(0!==n&&0!==o){n=n||300,r=r||30;var a=n/r,s=o/a,c=0,u=setInterval((function(){c<a-1?(t+=s,i&&i(t,u),c++):(i&&i(e,u),clearInterval(u))}),r)}else i&&i(e)},n.prototype.getClientHeight=function(t){var e=this.clientHeight||0;return 0===e&&!0!==t&&(e=this.getBodyHeight()),e},n.prototype.setClientHeight=function(t){this.clientHeight=t},n.prototype.getScrollHeight=function(){return this.scrollHeight||0},n.prototype.setScrollHeight=function(t){this.scrollHeight=t},n.prototype.getBodyHeight=function(){return this.bodyHeight||0},n.prototype.setBodyHeight=function(t){this.bodyHeight=t},n.prototype.preventDefault=function(t){t&&t.cancelable&&!t.defaultPrevented&&t.preventDefault()},n.prototype.setBounce=function(t){}},e180:function(t,e,i){"use strict";i.r(e);var n=i("fdee"),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=r.a},e429:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;r(i("f86b"));var n=r(i("8bbf"));i("2f62");function r(t){return t&&t.__esModule?t:{default:t}}var o={mounted:function(){var t=this;this.tim.on(this.$TIM.EVENT.SDK_READY,this.onReadyStateUpdate,this),this.tim.on(this.$TIM.EVENT.MESSAGE_RECEIVED,this.onReceiveMessage),this.tim.on(this.$TIM.EVENT.CONVERSATION_LIST_UPDATED,(function(e){t.$store.commit("updateConversationList",e.data)}))},methods:{onReadyStateUpdate:function(t){var e=t.name,i=e===this.$TIM.EVENT.SDK_READY;this.$store.commit("toggleIsSDKReady",i)},onReceiveMessage:function(e){var i=e.data;t("log","mes:",i," at App.vue:29"),this.$store.commit("pushGroupMessageList",i),this.$store.commit("pushCurrentMessageList",i)}},onLaunch:function(){t("log","App Launch"," at App.vue:47"),uni.getSystemInfo({success:function(e){t("log","设备详情",e," at App.vue:50"),n.default.prototype.StatusBar=e.statusBarHeight,"android"==e.platform?n.default.prototype.CustomBar=e.statusBarHeight+50:n.default.prototype.CustomBar=e.statusBarHeight+45}}),uni.onTabBarMidButtonTap((function(){uni.navigateTo({url:"/pages/tabbar/chat/newIndex",animationType:"slide-in-bottom"})}))},onShow:function(){},onHide:function(){}};e.default=o}).call(this,i("0de9")["default"])},e514:function(t,e,i){"use strict";i.r(e);var n=i("a653"),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=r.a},e749:function(t,e,i){"use strict";var n,r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",[i("view",{staticClass:t._$s(1,"sc","cu-custom"),style:t._$s(1,"s",[{height:t.CustomBar+"px"}]),attrs:{_i:1}},[i("view",{staticClass:t._$s(2,"sc","cu-bar fixed"),class:t._$s(2,"c",[""!=t.bgImage?"none-bg text-white bg-img":"",t.bgColor]),style:t._$s(2,"s",t.style),attrs:{_i:2}},[t._$s(3,"i",t.isBack)?i("view",{staticClass:t._$s(3,"sc","action"),attrs:{_i:3},on:{click:t.BackPage}},[i("text",{staticClass:t._$s(4,"sc","cuIcon-back"),class:t._$s(4,"c",t.backColor),attrs:{_i:4}}),t._t("backText",null,{_i:5})],2):t._e(),i("view",{staticClass:t._$s(6,"sc","content"),style:t._$s(6,"s",[{top:t.StatusBar+"px"}]),attrs:{_i:6}},[t._t("content",null,{_i:7})],2),t._t("right",null,{_i:8})],2)])])},o=[];i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},e7fe:function(t,e){t.exports="static/img/logo.png"},e891:function(t,e,i){"use strict";var n,r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:t._$s(0,"sc","content"),attrs:{_i:0}},[i("view",{staticClass:t._$s(1,"sc","bg-white"),attrs:{_i:1}},[i("view",{staticClass:t._$s(2,"sc","status_bar bg-white"),attrs:{_i:2}}),i("view",{attrs:{_i:3},on:{click:t.back}},[i("text",{staticClass:t._$s(4,"sc","cuIcon-back"),attrs:{_i:4}})]),i("view",{staticClass:t._$s(5,"sc","flex justify-center align-center bg-white"),attrs:{_i:5}},[i("text",[t._v(t._$s(6,"t0-0",t._s(t.stockDetail.stockCode))+t._$s(6,"t0-1",t._s(t.stockDetail.stockName)))])])]),i("view",{staticClass:t._$s(7,"sc","flex justify-center"),attrs:{_i:7}},[i("text",[t._v(t._$s(8,"t0-0",t._s(t.stockDetail.createdTime)))])]),i("view",{staticClass:t._$s(9,"sc","text-center"),attrs:{_i:9}},[i("text",{staticClass:t._$s(10,"sc","block paytime"),attrs:{_i:10}},[t._v(t._$s(10,"t0-0",t._s(t.stockDetail.buyTime?t.stockDetail.buyTime:""))+t._$s(10,"t0-1",t._s(t.stockDetail.buyPrice?t.stockDetail.buyPrice:"")))]),i("text",{staticClass:t._$s(11,"sc","block paytime"),attrs:{_i:11}},[t._v(t._$s(11,"t0-0",t._s(t.stockDetail.modifiedTime?t.stockDetail.modifiedTime:""))+t._$s(11,"t0-1",t._s(t.stockDetail.sellPrice?t.stockDetail.sellPrice:"")))])]),i("view",{staticClass:t._$s(12,"sc","text-center"),attrs:{_i:12}},[i("text"),i("text",[t._v(t._$s(14,"t0-0",t._s(t.stockDetail.profitAndLoss?"+"+t.stockDetail.profitAndLoss+"%":"")))])]),i("view",{staticClass:t._$s(15,"sc","flex"),attrs:{_i:15}},[i("view",{staticClass:t._$s(16,"sc","text-center "),class:t._$s(16,"c",1==t.currentIndex?"text-white bg-red":"colorRed"),attrs:{_i:16},on:{click:function(e){return t.viewImg(1,"Buy")}}}),i("view",{staticClass:t._$s(17,"sc","text-center "),class:t._$s(17,"c",2==t.currentIndex?"text-white bg-red":"colorRed"),attrs:{_i:17},on:{click:function(e){return t.viewImg(2,"Sell")}}}),i("view",{staticClass:t._$s(18,"sc","text-center "),class:t._$s(18,"c",3==t.currentIndex?"text-white bg-red":"colorRed"),attrs:{_i:18},on:{click:function(e){return t.viewImg(3,"Profit")}}})]),i("view",[i("view",{staticClass:t._$s(20,"sc","text-center"),attrs:{_i:20}},[t._$s(21,"i",t.imgList.length<=0)?i("text"):t._l(t._$s(22,"f",{forItems:t.imgList}),(function(e,n,r,o){return i("view",{key:t._$s(22,"f",{forIndex:r,key:n})},[i("image",{attrs:{src:t._$s("23-"+o,"a-src",e.fileUrl),_i:"23-"+o}})])}))],2)]),i("view",[i("view",[i("view",{staticClass:t._$s(26,"sc","flex align-center"),attrs:{_i:26}},[i("text",{staticClass:t._$s(27,"sc","block"),attrs:{_i:27}}),i("text")]),i("view",[i("view",{staticClass:t._$s(30,"sc","block"),attrs:{_i:30}},[t._v(t._$s(30,"t0-0",t._s(t.stockDetail.remark1)))])])]),i("view",[i("view",{staticClass:t._$s(32,"sc","flex align-center"),attrs:{_i:32}},[i("text",{staticClass:t._$s(33,"sc","block"),attrs:{_i:33}}),i("text")]),i("view",[i("view",{staticClass:t._$s(36,"sc","block"),attrs:{_i:36}},[t._v(t._$s(36,"t0-0",t._s(t.stockDetail.remark2)))])])])])])},o=[];i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},e8cf:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{newsDetail:{},id:"",strings:""}},onLoad:function(t){this.id=t.id},onShow:function(){this.getNewsDetail()},methods:{getNewsDetail:function(){var t=this;this.$http.get("/StockSkyEyes/App/GetArticle",{params:{id:this.id}}).then((function(e){if(e.data&&200===e.data.status&&(t.newsDetail=e.data.result,e.data&&200===e.data.status&&e.data&&200===e.data.status)){var i=e.data.result;t.strings=i.content;var n=new RegExp("<img","gi");t.strings=t.strings.replace(n,'<img style="max-width: 100%; height: auto"'),t.strings=t.strings.replace(new RegExp("<o:p","gi"),'<p style="dislay: none"'),t.isExist=!1}}))}}};e.default=n},e8f4:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{currentIndex:1,id:"",stockDetail:{},imgList:[],imgBuy:[],imgSell:[],imgProfit:[]}},onReady:function(){},onLoad:function(t){this.id=t.id},onShow:function(){this.getStockDetail()},methods:{back:function(){uni.navigateBack({delta:1})},viewImg:function(t,e){this.currentIndex=t,this.imgList="Buy"==e?this.imgBuy:"Sell"==e?this.imgSell:this.imgProfit},getStockDetail:function(){var e=this;this.latestData={},this.listData=[],this.imgBuy=[],this.imgSell=[],this.imgProfit=[],this.$http.get("/StockSkyEyes/App/GetStock",{params:{id:this.id}}).then((function(i){if(t("log",i," at pages\\tabbar\\home\\stockDetail.vue:118"),i.data&&200===i.data.status){e.stockDetail=i.data.result;for(var n=e.stockDetail.images,r=0;r<n.length;r++)"Buy"==n[r].type?e.imgBuy.push(n[r]):"Sell"==n[r].type?e.imgSell.push(n[r]):e.imgProfit.push(n[r]);e.imgBuy&&e.imgBuy.length>0?e.imgList=e.imgBuy:e.imgSell&&e.imgSell.length>0?e.imgList=e.imgSell:e.imgList=e.imgProfit}}))},toFundsState:function(){uni.navigateTo({url:"./successFunds"})}}};e.default=i}).call(this,i("0de9")["default"])},ea63:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{serialNo:"",windowHeight:0,pushUrl:""}},onLoad:function(t){},methods:{toCoversation:function(){uni.navigateTo({url:"../conversationList"})},toliveShow:function(){uni.showLoading({}),this.$http.post("/StockSkyEyes/App/CreateLiveRoom").then((function(t){if(uni.hideLoading(),t.data&&200===t.data.status){var e=t.data.result.pushUrl;uni.setStorageSync("pushUrl",e),uni.navigateTo({url:"./liveshow"})}}))},toscreenShow:function(){uni.showLoading({}),this.$http.post("/StockSkyEyes/App/CreateLiveRoom").then((function(t){if(uni.hideLoading(),t.data&&200===t.data.status){var e=t.data.result.pushUrl;uni.setStorageSync("pushUrl",e),uni.navigateTo({url:"./screen"})}}))}}};e.default=n},ef6f:function(t,e,i){"use strict";i.r(e);var n=i("e8cf"),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=r.a},ef7c:function(t,e,i){"use strict";var n,r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",[n("cu-custom",{attrs:{bgColor:"bg-red",_i:1}},[n("template",{slot:"content"})],2),n("view",{staticClass:t._$s(3,"sc","conversition-box"),attrs:{_i:3}},[t._$s(4,"i",t.userAddConversationList.length>0)?n("view",{staticClass:t._$s(4,"sc","list-box"),attrs:{_i:4}},t._l(t._$s(5,"f",{forItems:t.userAddConversationList}),(function(e,r,o,a){return n("view",{key:t._$s(5,"f",{forIndex:o,key:r}),staticClass:t._$s("5-"+a,"sc","item-box"),attrs:{_i:"5-"+a},on:{click:function(i){return t.toRoom(e)}}},[t._$s("6-"+a,"i",e.user)?n("view",{staticClass:t._$s("6-"+a,"sc","item-img"),attrs:{_i:"6-"+a}},[n("image",{attrs:{src:t._$s("7-"+a,"a-src",e.user.img),_i:"7-"+a}})]):n("view",{staticClass:t._$s("8-"+a,"sc","item-img"),attrs:{_i:"8-"+a}},[n("image",{attrs:{src:t._$s("9-"+a,"a-src","/"+i("18bb")),_i:"9-"+a}})]),n("view",[n("view",{staticClass:t._$s("11-"+a,"sc","item-text"),attrs:{_i:"11-"+a}},[t._$s("12-"+a,"i",e.user)?n("view",{staticClass:t._$s("12-"+a,"sc","item-user"),attrs:{_i:"12-"+a}},[t._v(t._$s("12-"+a,"t0-0",t._s(e.user.user)))]):n("view",{staticClass:t._$s("13-"+a,"sc","item-user"),attrs:{_i:"13-"+a}},[t._v(t._$s("13-"+a,"t0-0",t._s("客户"+e.conversation.userProfile.userID)))]),t._$s("14-"+a,"i",e.conversation.time)?n("view",{staticClass:t._$s("14-"+a,"sc","time"),attrs:{_i:"14-"+a}},[t._v(t._$s("14-"+a,"t0-0",t._s(t.timeFliter(e.conversation.time))))]):t._e(),t._$s("15-"+a,"i",e.conversation.lastMessage.lastTime)?n("view",{staticClass:t._$s("15-"+a,"sc","time"),attrs:{_i:"15-"+a}},[t._v(t._$s("15-"+a,"t0-0",t._s(t.timeFliter(e.conversation.lastMessage.lastTime))))]):t._e()]),n("view",{staticClass:t._$s("16-"+a,"sc","item-msg-bottom"),attrs:{_i:"16-"+a}},[n("view",{staticClass:t._$s("17-"+a,"sc","item-text-info"),attrs:{_i:"17-"+a}},[n("rich-text",{attrs:{nodes:t._$s("18-"+a,"a-nodes",t.nodesFliter(e.conversation.lastMessage.messageForShow)),_i:"18-"+a}})]),n("view",{staticClass:t._$s("19-"+a,"sc","item-msg"),attrs:{_i:"19-"+a}},[t._$s("20-"+a,"i",e.conversation.unreadCount)?n("view",{staticClass:t._$s("20-"+a,"sc","item-msg-icon"),attrs:{_i:"20-"+a}},[t._v(t._$s("20-"+a,"t0-0",t._s(e.conversation.unreadCount)))]):t._e()])])])])})),0):n("view",{staticClass:t._$s(21,"sc","list-box"),attrs:{_i:21}},[n("span",{staticClass:t._$s(22,"sc","msg-box"),attrs:{_i:22}})])])],1)},o=[];i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},f0c5:function(t,e,i){"use strict";function n(t,e,i,n,r,o,a,s,c,u){var l,f="function"===typeof t?t.options:t;if(c){f.components||(f.components={});var h=Object.prototype.hasOwnProperty;for(var p in c)h.call(c,p)&&!h.call(f.components,p)&&(f.components[p]=c[p])}if(u&&((u.beforeCreate||(u.beforeCreate=[])).unshift((function(){this[u.__module]=this})),(f.mixins||(f.mixins=[])).push(u)),e&&(f.render=e,f.staticRenderFns=i,f._compiled=!0),n&&(f.functional=!0),o&&(f._scopeId="data-v-"+o),a?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},f._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(f.functional){f._injectStyles=l;var g=f.render;f.render=function(t,e){return l.call(e),g(t,e)}}else{var d=f.beforeCreate;f.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:f}}i.d(e,"a",(function(){return n}))},f102:function(t,e,i){"use strict";i.r(e);var n=i("52d8"),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=r.a},f128:function(t,e,i){"use strict";var n,r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",[i("cu-custom",{attrs:{bgColor:"bg-red",_i:1}},[i("template",{slot:"content"})],2),i("view",{staticClass:t._$s(3,"sc","item-msg-bottom"),attrs:{_i:3},on:{click:t.toliveShow}}),i("view",{staticClass:t._$s(4,"sc","item-msg-bottom"),attrs:{_i:4},on:{click:t.toscreenShow}}),i("view",{staticClass:t._$s(5,"sc","item-msg-bottom"),attrs:{_i:5},on:{click:t.toCoversation}})],1)},o=[];i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},f328:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(i("f86b")),r=i("2f62");function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach((function(e){c(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var u={data:function(){return{currentIndex:1,isScroll:!1,x:0,y:0,textMsg:"",isHistoryLoading:!0,scrollAnimation:!1,scrollTop:0,scrollToView:"",msgList:[],msgImgList:[],myuid:0,RECORDER:uni.getRecorderManager(),isVoice:!1,voiceTis:"按住 说话",recordTis:"手指上滑 取消发送",recording:!1,willStop:!1,initPoint:{identifier:0,Y:0},recordTimer:null,recordLength:0,isShowLive:!1,AUDIO:uni.createInnerAudioContext(),playMsgid:null,VoiceTimer:null,popupLayerClass:"",hideMore:!0,hideEmoji:!0,msgTop:"250upx",mesHeight:"74%",emojiList:[[{url:"100.gif",alt:"[微笑]"},{url:"101.gif",alt:"[伤心]"},{url:"102.gif",alt:"[美女]"},{url:"103.gif",alt:"[发呆]"},{url:"104.gif",alt:"[墨镜]"},{url:"105.gif",alt:"[哭]"},{url:"106.gif",alt:"[羞]"},{url:"107.gif",alt:"[哑]"},{url:"108.gif",alt:"[睡]"},{url:"109.gif",alt:"[哭]"},{url:"110.gif",alt:"[囧]"},{url:"111.gif",alt:"[怒]"},{url:"112.gif",alt:"[调皮]"},{url:"113.gif",alt:"[笑]"},{url:"114.gif",alt:"[惊讶]"},{url:"115.gif",alt:"[难过]"},{url:"116.gif",alt:"[酷]"},{url:"117.gif",alt:"[汗]"},{url:"118.gif",alt:"[抓狂]"},{url:"119.gif",alt:"[吐]"},{url:"120.gif",alt:"[笑]"},{url:"121.gif",alt:"[快乐]"},{url:"122.gif",alt:"[奇]"},{url:"123.gif",alt:"[傲]"}],[{url:"124.gif",alt:"[饿]"},{url:"125.gif",alt:"[累]"},{url:"126.gif",alt:"[吓]"},{url:"127.gif",alt:"[汗]"},{url:"128.gif",alt:"[高兴]"},{url:"129.gif",alt:"[闲]"},{url:"130.gif",alt:"[努力]"},{url:"131.gif",alt:"[骂]"},{url:"132.gif",alt:"[疑问]"},{url:"133.gif",alt:"[秘密]"},{url:"134.gif",alt:"[乱]"},{url:"135.gif",alt:"[疯]"},{url:"136.gif",alt:"[哀]"},{url:"137.gif",alt:"[鬼]"},{url:"138.gif",alt:"[打击]"},{url:"139.gif",alt:"[bye]"},{url:"140.gif",alt:"[汗]"},{url:"141.gif",alt:"[抠]"},{url:"142.gif",alt:"[鼓掌]"},{url:"143.gif",alt:"[糟糕]"},{url:"144.gif",alt:"[恶搞]"},{url:"145.gif",alt:"[什么]"},{url:"146.gif",alt:"[什么]"},{url:"147.gif",alt:"[累]"}],[{url:"148.gif",alt:"[看]"},{url:"149.gif",alt:"[难过]"},{url:"150.gif",alt:"[难过]"},{url:"151.gif",alt:"[坏]"},{url:"152.gif",alt:"[亲]"},{url:"153.gif",alt:"[吓]"},{url:"154.gif",alt:"[可怜]"},{url:"155.gif",alt:"[刀]"},{url:"156.gif",alt:"[水果]"},{url:"157.gif",alt:"[酒]"},{url:"158.gif",alt:"[篮球]"},{url:"159.gif",alt:"[乒乓]"},{url:"160.gif",alt:"[咖啡]"},{url:"161.gif",alt:"[美食]"},{url:"162.gif",alt:"[动物]"},{url:"163.gif",alt:"[鲜花]"},{url:"164.gif",alt:"[枯]"},{url:"165.gif",alt:"[唇]"},{url:"166.gif",alt:"[爱]"},{url:"167.gif",alt:"[分手]"},{url:"168.gif",alt:"[生日]"},{url:"169.gif",alt:"[电]"},{url:"170.gif",alt:"[炸弹]"},{url:"171.gif",alt:"[刀子]"}],[{url:"172.gif",alt:"[足球]"},{url:"173.gif",alt:"[瓢虫]"},{url:"174.gif",alt:"[翔]"},{url:"175.gif",alt:"[月亮]"},{url:"176.gif",alt:"[太阳]"},{url:"177.gif",alt:"[礼物]"},{url:"178.gif",alt:"[抱抱]"},{url:"179.gif",alt:"[拇指]"},{url:"180.gif",alt:"[贬低]"},{url:"181.gif",alt:"[握手]"},{url:"182.gif",alt:"[剪刀手]"},{url:"183.gif",alt:"[抱拳]"},{url:"184.gif",alt:"[勾引]"},{url:"185.gif",alt:"[拳头]"},{url:"186.gif",alt:"[小拇指]"},{url:"187.gif",alt:"[拇指八]"},{url:"188.gif",alt:"[食指]"},{url:"189.gif",alt:"[ok]"},{url:"190.gif",alt:"[情侣]"},{url:"191.gif",alt:"[爱心]"},{url:"192.gif",alt:"[蹦哒]"},{url:"193.gif",alt:"[颤抖]"},{url:"194.gif",alt:"[怄气]"},{url:"195.gif",alt:"[跳舞]"}],[{url:"196.gif",alt:"[发呆]"},{url:"197.gif",alt:"[背着]"},{url:"198.gif",alt:"[伸手]"},{url:"199.gif",alt:"[耍帅]"},{url:"200.png",alt:"[微笑]"},{url:"201.png",alt:"[生病]"},{url:"202.png",alt:"[哭泣]"},{url:"203.png",alt:"[吐舌]"},{url:"204.png",alt:"[迷糊]"},{url:"205.png",alt:"[瞪眼]"},{url:"206.png",alt:"[恐怖]"},{url:"207.png",alt:"[忧愁]"},{url:"208.png",alt:"[眨眉]"},{url:"209.png",alt:"[闭眼]"},{url:"210.png",alt:"[鄙视]"},{url:"211.png",alt:"[阴暗]"},{url:"212.png",alt:"[小鬼]"},{url:"213.png",alt:"[礼物]"},{url:"214.png",alt:"[拜佛]"},{url:"215.png",alt:"[力量]"},{url:"216.png",alt:"[金钱]"},{url:"217.png",alt:"[蛋糕]"},{url:"218.png",alt:"[彩带]"},{url:"219.png",alt:"[礼物]"}]],onlineEmoji:{"100.gif":"AbNQgA.gif","101.gif":"AbN3ut.gif","102.gif":"AbNM3d.gif","103.gif":"AbN8DP.gif","104.gif":"AbNljI.gif","105.gif":"AbNtUS.gif","106.gif":"AbNGHf.gif","107.gif":"AbNYE8.gif","108.gif":"AbNaCQ.gif","109.gif":"AbNN4g.gif","110.gif":"AbN0vn.gif","111.gif":"AbNd3j.gif","112.gif":"AbNsbV.gif","113.gif":"AbNwgs.gif","114.gif":"AbNrD0.gif","115.gif":"AbNDuq.gif","116.gif":"AbNg5F.gif","117.gif":"AbN6ET.gif","118.gif":"AbNcUU.gif","119.gif":"AbNRC4.gif","120.gif":"AbNhvR.gif","121.gif":"AbNf29.gif","122.gif":"AbNW8J.gif","123.gif":"AbNob6.gif","124.gif":"AbN5K1.gif","125.gif":"AbNHUO.gif","126.gif":"AbNIDx.gif","127.gif":"AbN7VK.gif","128.gif":"AbNb5D.gif","129.gif":"AbNX2d.gif","130.gif":"AbNLPe.gif","131.gif":"AbNjxA.gif","132.gif":"AbNO8H.gif","133.gif":"AbNxKI.gif","134.gif":"AbNzrt.gif","135.gif":"AbU9Vf.gif","136.gif":"AbUSqP.gif","137.gif":"AbUCa8.gif","138.gif":"AbUkGQ.gif","139.gif":"AbUFPg.gif","140.gif":"AbUPIS.gif","141.gif":"AbUZMn.gif","142.gif":"AbUExs.gif","143.gif":"AbUA2j.gif","144.gif":"AbUMIU.gif","145.gif":"AbUerq.gif","146.gif":"AbUKaT.gif","147.gif":"AbUmq0.gif","148.gif":"AbUuZV.gif","149.gif":"AbUliF.gif","150.gif":"AbU1G4.gif","151.gif":"AbU8z9.gif","152.gif":"AbU3RJ.gif","153.gif":"AbUYs1.gif","154.gif":"AbUJMR.gif","155.gif":"AbUadK.gif","156.gif":"AbUtqx.gif","157.gif":"AbUUZ6.gif","158.gif":"AbUBJe.gif","159.gif":"AbUdIO.gif","160.gif":"AbU0iD.gif","161.gif":"AbUrzd.gif","162.gif":"AbUDRH.gif","163.gif":"AbUyQA.gif","164.gif":"AbUWo8.gif","165.gif":"AbU6sI.gif","166.gif":"AbU2eP.gif","167.gif":"AbUcLt.gif","168.gif":"AbU4Jg.gif","169.gif":"AbURdf.gif","170.gif":"AbUhFS.gif","171.gif":"AbU5WQ.gif","172.gif":"AbULwV.gif","173.gif":"AbUIzj.gif","174.gif":"AbUTQs.gif","175.gif":"AbU7yn.gif","176.gif":"AbUqe0.gif","177.gif":"AbUHLq.gif","178.gif":"AbUOoT.gif","179.gif":"AbUvYF.gif","180.gif":"AbUjFU.gif","181.gif":"AbaSSJ.gif","182.gif":"AbUxW4.gif","183.gif":"AbaCO1.gif","184.gif":"Abapl9.gif","185.gif":"Aba9yR.gif","186.gif":"AbaFw6.gif","187.gif":"Abaiex.gif","188.gif":"AbakTK.gif","189.gif":"AbaZfe.png","190.gif":"AbaEFO.gif","191.gif":"AbaVYD.gif","192.gif":"AbamSH.gif","193.gif":"AbaKOI.gif","194.gif":"Abanld.gif","195.gif":"Abau6A.gif","196.gif":"AbaQmt.gif","197.gif":"Abal0P.gif","198.gif":"AbatpQ.gif","199.gif":"Aba1Tf.gif","200.png":"Aba8k8.png","201.png":"AbaGtS.png","202.png":"AbaJfg.png","203.png":"AbaNlj.png","204.png":"Abawmq.png","205.png":"AbaU6s.png","206.png":"AbaaXn.png","207.png":"Aba000.png","208.png":"AbarkT.png","209.png":"AbastU.png","210.png":"AbaB7V.png","211.png":"Abafn1.png","212.png":"Abacp4.png","213.png":"AbayhF.png","214.png":"Abag1J.png","215.png":"Aba2c9.png","216.png":"AbaRXR.png","217.png":"Aba476.png","218.png":"Abah0x.png","219.png":"Abdg58.png"},windowsState:"",redenvelopeData:{rid:null,from:null,face:null,blessing:null,money:null},grounpChat:{},groupID:"",memberNum:0,appHeight:{height:"480px"},isKF:!1,userAddConversationList:[],openLive:!1,Level:"",isAnchor:!1}},onPageScroll:function(t){t.scrollTop>0?this.isScroll=!0:this.isScroll=!1},computed:s({},(0,r.mapState)({groupMessageList:function(t){return t.groupMessageList},isLogin:function(t){return t.isLogin},isSDKReady:function(t){return t.isSDKReady},conversationList:function(t){return t.conversationList},GroupList:function(t){return t.GroupList}})),watch:{groupMessageList:function(t,e){this.msgList=t,this.screenMsg(t,e)},conversationList:function(t){this.getUserInfo(t)}},onLoad:function(t){this.closeLive(),this.closePush()},onShow:function(){var t=this;uni.$on("pullLive",(function(e){t.closeLive()})),uni.$on("isHiddenLive",(function(e){e.hiddenLive&&(t.closeLive(),t.closePush())})),uni.$on("pushLive",(function(e){t.closePush()})),this.$store.commit("createGrounpChat",uni.getStorageSync("groupID"));var e=uni.getStorageSync("userInfo");e.isKF;this.isAnchor=e.isAnchor;var i=uni.getStorageSync("Level");this.Level=i,(this.isAnchor||"Normal"==this.Level)&&(this.msgTop="200rpx",this.mesHeight="78%"),this.scrollTop=99999999,this.isHistoryLoading=!1,this.currentIndex="Normal"==i?1:2,this.isKF=uni.getStorageSync("userInfo").isKF,this.getGroupList(),this.groupID=this.$store.state.groupID,this.grounpChat=this.$store.state.grounpChat,this.getGroupInfor(),this.getMsgList()},onUnload:function(){},onHide:function(){this.textMsg=""},methods:{openLiveBtn:function(){var t=this;this.$http.get("/StockSkyEyes/App/QueryLiveRooms?online=true").then((function(e){if(uni.hideLoading(),e.data.result.length>0&&200===e.data.status){var i=e.data.result[0].serialNo;uni.hideLoading(),t.$http.get("/StockSkyEyes/App/GetLiveRoomUrl?serialNo="+i).then((function(t){if(200===t.data.status){var e=t.data.result.playUrl;uni.$emit("pullUrl",{playUrl:e});var i=uni.getSubNVueById("pullLive");i.show(),uni.$emit("isHiddenLive",{hiddenLive:!1})}})),t.mesHeight="50%",t.msgTop="628rpx",t.scrollTop=9999999,t.isShowLive=!0}else uni.showModal({content:"抱歉，暂时没有主播开播",showCancel:!1,confirmText:"我知道了",success:function(t){}})})),this.hideDrawer()},closeLive:function(){this.isAnchor||"Normal"==this.Level?(this.msgTop="150rpx",this.mesHeight="80%"):(this.mesHeight="74%",this.msgTop="260rpx");var t=uni.getSubNVueById("pullLive");t.hide(),this.isShowLive=!1},openPushBtn:function(){this.isShowLive=!0,this.$http.post("/StockSkyEyes/App/CreateLiveRoom").then((function(t){if(uni.hideLoading(),t.data&&200===t.data.status){var e=t.data.result.pushUrl;uni.$emit("openPush",{pushUrl:e})}}));var t=uni.getSubNVueById("popup");t.show(),this.hideDrawer(),uni.$emit("isHiddenLive",{hiddenLive:!1}),this.mesHeight="50%",this.msgTop="628rpx"},openBack:function(){uni.navigateBack()},closePush:function(){this.isAnchor||"Normal"==this.Level?(this.msgTop="150rpx",this.mesHeight="80%"):(this.mesHeight="74%",this.msgTop="260rpx"),this.isShowLive=!1;var t=uni.getSubNVueById("popup");t.hide()},toliveShow:function(){uni.navigateTo({url:"./liveshow/liveshow"})},topullShow:function(){uni.navigateTo({url:"./liveshow/pull"})},toscreenShow:function(){uni.navigateTo({url:"./liveshow/screen"})},getUserInfo:function(t){var e=this;this.userAddConversationList=[],t.forEach((function(t){var i={};i.conversation=t,n.default.forEach((function(e){t.toAccount==e.userId&&(i.user=e)})),e.userAddConversationList.push(JSON.parse(JSON.stringify(i)))}))},toApplyVip:function(){uni.navigateTo({url:"../home/applyVip"})},scrollClick:function(t){},nodesFliter:function(t){var e='<div style="align-items: center;word-wrap:break-word;">'+t+"</div>";return e},timeFliter:function(t){var e=new Date(1e3*t),i=this.$commen.dateTimeFliter(e);return i},getGroupInfor:function(){var t=this,e=this.tim.getGroupProfile({groupID:this.groupID,groupCustomFieldFilter:["key1","key2"]});e.then((function(e){t.memberNum=e.data.group.memberNum})).catch((function(t){}))},getGroupList:function(){var e=this,i=this.tim.getGroupList();i.then((function(t){var i=t.data.groupList;e.groupList=i,i.length&&e.$store.commit("updategetGroupList",i)})).catch((function(e){t("warn","getGroupList error:",e," at pages\\tabbar\\chat\\newIndex.vue:890")}))},screenMsg:function(t,e){var i=this;t.forEach((function(t){var e=(new Date).getTime(),i="G"+e;t.id&&t.id.indexOf("G")>-1||(t.id=i)})),t&&e?t[0]&&e[0]&&t[0].ID&&e[0].ID&&(t[0].ID!=e[0].ID&&(t.length,this.count),this.$nextTick((function(){i.scrollToView=t[t.length-1].id}))):this.$nextTick((function(){i.scrollToView=t[t.length-1].id,i.isHistoryLoading=!1}))},loadHistory:function(t){var e=this;this.isHistoryLoading=!0;var i=this.grounpChat.conversationID,n=this.tim.getMessageList({conversationID:i,nextReqMessageID:this.nextReqMessageID,count:this.count});n.then((function(t){e.$store.commit("unshiftGroupMessageList",t.data.messageList),e.nextReqMessageID=t.data.nextReqMessageID,e.isCompleted=t.data.isCompleted;var i=t.data.messageList;i&&i.length&&i.forEach((function(t){var e=(new Date).getTime(),i="G"+e+Math.ceil(100*Math.random());t.id&&t.id.indexOf("G")>-1||(t.id=i)})),e.$nextTick((function(){i&&i.length&&(this.scrollToView=i[i.length-1].id)}))})),this.isHistoryLoading=!1},sendText:function(){if(this.textMsg){var t=this.replaceEmoji(this.textMsg),e={text:t};this.sendMsg(e,"text"),this.textMsg=""}},getMsgList:function(){var t=this,e=this.grounpChat.conversationID,i=this.tim.getMessageList({conversationID:e,count:this.count});i.then((function(e){t.$store.commit("pushGroupMessageList",e.data.messageList),t.isCompleted=e.data.isCompleted;var i=e.data.messageList;t.nextReqMessageID=e.data.nextReqMessageID,i.forEach((function(t){var e=(new Date).getTime(),i="G"+e+Math.ceil(100*Math.random());t.id&&t.id.indexOf("G")>-1||(t.id=i)})),t.$nextTick((function(){i.length>0&&(this.scrollToView=i[i.length-1].id)}))})),this.$nextTick((function(){this.scrollTop=9999999,this.$nextTick((function(){this.scrollAnimation=!0}))}))},setPicSize:function(t){var e=uni.upx2px(350),i=uni.upx2px(350);if(t.w>e||t.h>i){var n=t.w/t.h;t.w=n>1?e:i*n,t.h=n>1?e/n:i}return t},showMore:function(){this.isVoice=!1,this.hideEmoji=!0,this.hideMore?(this.hideMore=!1,this.openDrawer()):this.hideDrawer()},openDrawer:function(){this.popupLayerClass="showLayer"},hideDrawer:function(){var t=this;this.popupLayerClass="",setTimeout((function(){t.hideMore=!0,t.hideEmoji=!0}),150)},chooseImage:function(){this.getImage("album")},camera:function(){this.getImage("camera")},handRedEnvelopes:function(){uni.navigateTo({url:"HM-hand/HM-hand"}),this.hideDrawer()},getImage:function(e){var i=this;this.hideDrawer(),uni.chooseImage({sourceType:[e],sizeType:["original","compressed"],success:function(e){for(var n=function(n){uni.getImageInfo({src:e.tempFilePaths[n],success:function(r){var o={url:e.tempFilePaths[n],w:r.width,h:r.height},a=i.tim.createImageMessage({to:i.groupID,conversationType:TIM.TYPES.CONV_C2C,payload:{file:o},onProgress:function(e){t("log","file uploading:",e," at pages\\tabbar\\chat\\newIndex.vue:1092")}}),s=i.tim.sendMessage(a);s.then((function(t){})).catch((function(e){t("warn","sendMessage error:",e," at pages\\tabbar\\chat\\newIndex.vue:1102")}))}})},r=0;r<e.tempFilePaths.length;r++)n(r)}})},chooseEmoji:function(){this.hideMore=!0,this.hideEmoji?(this.hideEmoji=!1,this.openDrawer()):this.hideDrawer(),this.mesHeight="50%",this.scrollTop=99999999},addEmoji:function(t){this.textMsg+=t.alt},textareaFocus:function(t){this.hideMore=!1,"showLayer"==this.popupLayerClass&&0==this.hideMore&&this.hideDrawer(),this.$nextTick((function(){this.scrollTop=99999999,this.$nextTick((function(){this.scrollAnimation=!0}))})),this.isShowLive?this.mesHeight="20%":this.mesHeight="60%",this.scrollTop=99999999},textareaBlur:function(){this.isShowLive?this.mesHeight="50%":this.isAnchor||"Normal"==this.Level?(this.mesHeight="78%",this.msgTop="180rpx"):this.mesHeight="74%",this.$nextTick((function(){this.scrollTop=99999999,this.$nextTick((function(){this.scrollAnimation=!0}))}))},sendMsg:function(t,e){var i=this,n=this.tim.createTextMessage({to:this.groupID,conversationType:"GROUP",payload:{text:t.text}});this.$store.commit("pushGroupMessageList",n);var r=this.tim.sendMessage(n);r.then((function(t){i.$nextTick((function(){i.scrollToView=t.data.message.id}))}))},replaceEmoji:function(e){var i=this,n=e.replace(/\[([^(\]|\[)]*)\]/g,(function(e,n){for(var r=0;r<i.emojiList.length;r++)for(var o=i.emojiList[r],a=0;a<o.length;a++){var s=o[a];if(s.alt==e){var c="https://s2.ax1x.com/2019/04/12/",u='<img src="'+c+i.onlineEmoji[s.url]+'">';return t("log","imgstr: "+u," at pages\\tabbar\\chat\\newIndex.vue:1202"),u}}}));return'<div style="display: flex;align-items: center;word-wrap:break-word;">'+n+"</div>"},addTextMsg:function(t){this.msgList.push(t)},addVoiceMsg:function(t){this.msgList.push(t)},addImgMsg:function(t){t.msg.content=this.setPicSize(t.msg.content),this.msgImgList.push(t.msg.content.url),this.msgList.push(t)},addRedEnvelopeMsg:function(t){this.msgList.push(t)},addSystemTextMsg:function(t){this.msgList.push(t)},addSystemRedEnvelopeMsg:function(t){this.msgList.push(t)},openRedEnvelope:function(e,i){var n=this,r=e.content.rid;uni.showLoading({title:"加载中..."}),setTimeout((function(){0==r?n.redenvelopeData={rid:0,from:"大黑哥",face:"/static/img/im/face/face.jpg",blessing:"恭喜发财，大吉大利",money:"已领完"}:(n.redenvelopeData={rid:1,from:"售后客服008",face:"/static/img/im/face/face_2.jpg",blessing:"恭喜发财",money:"0.01"},e.content.isReceived||(n.sendSystemMsg({text:"你领取了"+(e.userinfo.uid==n.myuid?"自己":e.userinfo.username)+"的红包"},"redEnvelope"),t("log","this.msgList[index]: "+JSON.stringify(n.msgList[i])," at pages\\tabbar\\chat\\newIndex.vue:1264"),n.msgList[i].msg.content.isReceived=!0)),uni.hideLoading(),n.windowsState="show"}),200)},closeRedEnvelope:function(){var t=this;this.windowsState="hide",setTimeout((function(){t.windowsState=""}),200)},sendSystemMsg:function(t,e){var i=this.msgList[this.msgList.length-1].msg.id;i++;var n={type:"system",msg:{id:i,type:e,content:t}};this.screenMsg(n)},toDetails:function(t){uni.navigateTo({url:"HM-details/HM-details?rid="+t})},showPic:function(t){uni.previewImage({indicator:"none",current:t.content.url,urls:this.msgImgList})},playVoice:function(t){this.playMsgid=t.id,this.AUDIO.src=t.content.url,this.$nextTick((function(){this.AUDIO.play()}))},voiceBegin:function(t){t.touches.length>1||(this.initPoint.Y=t.touches[0].clientY,this.initPoint.identifier=t.touches[0].identifier,this.RECORDER.start({duration:6e4,sampleRate:44100,numberOfChannels:1,encodeBitRate:192e3,format:"aac"}))},recordBegin:function(t){var e=this;this.recording=!0,this.voiceTis="松开 结束",this.recordLength=0,this.recordTimer=setInterval((function(){e.recordLength++}),1e3)},voiceCancel:function(){this.recording=!1,this.voiceTis="按住 说话",this.recordTis="手指上滑 取消发送",this.willStop=!0,this.RECORDER.stop()},voiceIng:function(t){if(this.recording){var e=t.touches[0];this.initPoint.Y-e.clientY>=uni.upx2px(100)?(this.willStop=!0,this.recordTis="松开手指 取消发送"):(this.willStop=!1,this.recordTis="手指上滑 取消发送")}},voiceEnd:function(t){this.recording&&(this.recording=!1,this.voiceTis="按住 说话",this.recordTis="手指上滑 取消发送",this.RECORDER.stop())},recordEnd:function(t){},toRoom:function(t){if("C2C"==t.conversation.type){if(this.$store.commit("updateConversationActive",t),t.user)var e=t.user.user;else e="用户"+t.conversation.userProfile.userID;uni.navigateTo({url:"./customerRoom?userName="+e+"&userId="+t.conversation.userProfile.userID})}},sendvoiceMsg:function(t,e){var i=this,n=this.tim.createTextMessage({to:this.groupID,conversationType:"GROUP",payload:{type:t.text}});this.$store.commit("pushGroupMessageList",n);var r=this.tim.sendMessage(n);r.then((function(t){i.$nextTick((function(){i.scrollToView=t.data.message.id}))}))},switchVoice:function(){this.hideDrawer(),this.isVoice=!this.isVoice},discard:function(){},viewCustomerService:function(){var t=uni.getStorageSync("customer").kfId;this.$store.commit("createConversationActive",t),uni.navigateTo({url:"./customerService"})}}};e.default=u}).call(this,i("0de9")["default"])},f3f0:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{dataDetail:{},isBuy:!1}},onReady:function(){},onLoad:function(){},onShow:function(){this.getbuyFundsState()},methods:{getbuyFundsState:function(){var e=this;this.$http.get("/StockSkyEyes/App/GetPurchaseFunds").then((function(i){t("log",i," at pages\\tabbar\\home\\funds.vue:83"),i.data&&i.data.result&&(e.dataDetail=i.data.result,e.isBuy=!0)}))},buyFunds:function(){var e=this;this.$http.post("/StockSkyEyes/App/PurchaseFunds").then((function(i){if(t("log",i," at pages\\tabbar\\home\\funds.vue:92"),200==i.data.status){var n=i.data.result;uni.setStorageSync("userInfo",n),uni.showToast({icon:"none",title:"举手抢购成功！！！",duration:2e3}),e.getbuyFundsState()}}))}}};e.default=i}).call(this,i("0de9")["default"])},f4ac:function(t,e,i){"use strict";i.r(e);var n=i("6431"),r=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=r.a},f75b:function(t,e,i){"use strict";i.r(e);var n=i("28a2"),r=i("70e2");for(var o in r)"default"!==o&&function(t){i.d(e,t,(function(){return r[t]}))}(o);var a,s=i("f0c5"),c=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,"7ffb22c2",null,!1,n["a"],a);e["default"]=c.exports},f815:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(i("9131"));function r(t){return t&&t.__esModule?t:{default:t}}var o={SDKAppID:1400335402},a=n.default.create(o),s=n.default;function c(t){var e=1400335402,i=604800,n="b7856c751ccb8ad1b951a78838bb8ca4d86428deb162d0cc37fafb0380f5c120";""!==e&&""!==n||alert("请先配置好您的账号信息： SDKAPPID 及 SECRETKEY \r\n\r\nPlease configure your SDKAPPID/SECRETKEY in js/debug/GenerateTestUserSig.js");var r=new LibGenerateTestUserSig(e,n,i),o=r.genTestUserSig(t);return{sdkAppId:e,userSig:o}}var u={tim:a,TIMData:s,genTestUserSig:c};e.default=u},f86b:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=[{user:"user2",userId:"2",img:"https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2262632647,543198910&fm=26&gp=0.jpg",userSig:"eJwtzMEKgkAUheF3udtCbuOMmuCmoKCCghJrKcwkt-A6mFkWvXviuDzfgf8Lp93Ra00NMQgPYTps0oYbupLjER-6nltLGuKZRPR9JVG4x7wt1aZ3pZRARKcNlYNFch6oUIZjhYq*uVqXOdvLPvosMdgUnN3EZItpy5muukV3rrLXE5lFesAEfn8PmC-h"},{user:"user1",userId:"1",img:"https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2262632647,543198910&fm=26&gp=0.jpg",userSig:"eJwtzMsKwjAQheF3ma1SJ2lGbcGNeENEUbMpuBESdRQ11mq84Ltb0i7Pd*D-gp6to6fNIQUZITTDZmMvBe84sKjxbk5b59hAKhRiHJNCWT325Ti3pRORRMRKCz4H66qkTR1BdYX3ZXNOPJHO*-dUJtlgxaPGpnV4oPN9FsMx3VCbpRaL4*eaqR78-ivLL2g_"},{user:"user3",userId:"3",img:"https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2262632647,543198910&fm=26&gp=0.jpg",userSig:"eJyrVgrxCdYrSy1SslIy0jNQ0gHzM1NS80oy0zLBwsZQweKU7MSCgswUJStDEwMDY2NTEwMjiExqRUFmUSpQ3NTU1MjAwAAiWpKZCxazMLE0MzU3NYOakpkONDMg3TyywqQwNyor2MvZLNE1KDw90tE03TPdIinQLdfEs8LM3Lw0wjndODLZVqkWAAQpLx4_"},{user:"user4",userId:"4",img:"https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=2262632647,543198910&fm=26&gp=0.jpg",userSig:"eJyrVgrxCdYrSy1SslIy0jNQ0gHzM1NS80oy0zLBwiZQweKU7MSCgswUJStDEwMDY2NTEwMjiExqRUFmUSpQ3NTU1MjAwAAiWpKZCxazMLE0MzU3s4CakpkONDMyz9mswDs4O7U8wDQoMt09wDizIjfN3TmyqjIt2dLLqbgixdks2zPTMMrRVqkWABkXL-0_"}],r=n;e.default=r},f982:function(t,e,i){"use strict";var n,r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("view",[n("cu-custom",{attrs:{bgColor:"bg-white",isBack:!0,backColor:"text-red",_i:1}},[n("template",{slot:"content"})],2),t._$s(3,"i",t.customer.id)?n("view",{staticClass:t._$s(3,"sc","bg-white flex"),attrs:{_i:3}},[n("view",{staticClass:t._$s(4,"sc","text-center"),attrs:{_i:4}},[t._$s(5,"i",t.customer.headImageUrl)?n("image",{attrs:{src:t._$s(5,"a-src",t.customer.headImageUrl),_i:5}}):n("image",{attrs:{src:t._$s(6,"a-src","/"+i("ba33")),_i:6}}),n("view"),n("view",[t._v(t._$s(8,"t0-0",t._s(t.customer.name)))])]),n("view"),n("view",{staticClass:t._$s(10,"sc","flex justify-center align-center"),attrs:{_i:10}},[n("view",{staticClass:t._$s(11,"sc","text-center"),attrs:{_i:11}},[n("view"),n("image",{attrs:{src:t._$s(13,"a-src",t.customer.wxqrCodeUrl),_i:13}}),n("view",[t._v(t._$s(14,"t0-0",t._s(t.customer.wxAccount)))])])])]):t._e(),n("view",{staticClass:t._$s(15,"sc","content-s"),attrs:{_i:15},on:{touchstart:t.hideDrawer}},[n("scroll-view",{staticClass:t._$s(16,"sc","msg-list"),attrs:{"scroll-with-animation":t._$s(16,"a-scroll-with-animation",t.scrollAnimation),"scroll-top":t._$s(16,"a-scroll-top",t.scrollTop),"scroll-into-view":t._$s(16,"a-scroll-into-view",t.scrollToView),_i:16},on:{scrolltoupper:t.loadHistory}},[n("view",{directives:[{name:"show",rawName:"v-show",value:t._$s(17,"v-show",t.isHistoryLoading),expression:"_$s(17,'v-show',isHistoryLoading)"}],staticClass:t._$s(17,"sc","loading"),attrs:{_i:17}},[n("view",{staticClass:t._$s(18,"sc","spinner"),attrs:{_i:18}},[n("view",{staticClass:t._$s(19,"sc","rect1"),attrs:{_i:19}}),n("view",{staticClass:t._$s(20,"sc","rect2"),attrs:{_i:20}}),n("view",{staticClass:t._$s(21,"sc","rect3"),attrs:{_i:21}}),n("view",{staticClass:t._$s(22,"sc","rect4"),attrs:{_i:22}}),n("view",{staticClass:t._$s(23,"sc","rect5"),attrs:{_i:23}})])]),t._l(t._$s(24,"f",{forItems:t.msgList}),(function(e,r,o,a){return n("view",{key:t._$s(24,"f",{forIndex:o,key:r}),staticClass:t._$s("24-"+a,"sc","row"),attrs:{id:t._$s("24-"+a,"a-id",e.id),_i:"24-"+a}},[[t._$s("26-"+a,"i","out"==e.flow)?n("view",{staticClass:t._$s("26-"+a,"sc","my"),attrs:{_i:"26-"+a}},[n("view",{staticClass:t._$s("27-"+a,"sc","left"),attrs:{_i:"27-"+a}},[t._$s("28-"+a,"i","TIMTextElem"==e.type)?n("view",{staticClass:t._$s("28-"+a,"sc","bubble"),attrs:{_i:"28-"+a}},[n("rich-text",{attrs:{nodes:t._$s("29-"+a,"a-nodes",t.nodesFliter(e.payload.text)),_i:"29-"+a}})]):t._e()]),n("view",{staticClass:t._$s("30-"+a,"sc","right"),attrs:{_i:"30-"+a}},[n("image",{attrs:{src:t._$s("31-"+a,"a-src","/"+i("18bb")),_i:"31-"+a}})])]):n("view",{staticClass:t._$s("32-"+a,"sc","other"),attrs:{_i:"32-"+a}},[n("view",{staticClass:t._$s("33-"+a,"sc","left"),attrs:{_i:"33-"+a}},[n("image",{attrs:{src:t._$s("34-"+a,"a-src","/"+i("18bb")),_i:"34-"+a}})]),n("view",{staticClass:t._$s("35-"+a,"sc","right"),attrs:{_i:"35-"+a}},[n("view",{staticClass:t._$s("36-"+a,"sc","username"),attrs:{_i:"36-"+a}},[n("view",{staticClass:t._$s("37-"+a,"sc","name"),attrs:{_i:"37-"+a}}),n("view",{staticClass:t._$s("38-"+a,"sc","time"),attrs:{_i:"38-"+a}},[t._v(t._$s("38-"+a,"t0-0",t._s(t.timeFliter(e.time))))])]),t._$s("39-"+a,"i","TIMTextElem"==e.type)?n("view",{staticClass:t._$s("39-"+a,"sc","bubble"),attrs:{_i:"39-"+a}},[n("rich-text",{attrs:{nodes:t._$s("40-"+a,"a-nodes",t.nodesFliter(e.payload.text)),_i:"40-"+a}})]):t._e()])])]],2)}))],2)]),n("view",{staticClass:t._$s(41,"sc","popup-layer-s"),class:t._$s(41,"c",t.popupLayerClass),attrs:{_i:41},on:{touchmove:function(e){return e.stopPropagation(),e.preventDefault(),t.discard(e)}}},[n("swiper",{staticClass:t._$s(42,"sc","emoji-swiper"),class:t._$s(42,"c",{hidden:t.hideEmoji}),attrs:{_i:42}},t._l(t._$s(43,"f",{forItems:t.emojiList}),(function(e,i,r,o){return n("swiper-item",{key:t._$s(43,"f",{forIndex:r,key:i})},t._l(t._$s("44-"+o,"f",{forItems:e}),(function(e,i,r,a){return n("view",{key:t._$s("44-"+o,"f",{forIndex:r,key:i}),attrs:{_i:"44-"+o+"-"+a},on:{click:function(i){return t.addEmoji(e)}}},[n("image",{attrs:{src:t._$s("45-"+o+"-"+a,"a-src","/static/img/emoji/"+e.url),_i:"45-"+o+"-"+a}})])})),0)})),0),n("view",{staticClass:t._$s(46,"sc","more-layer"),class:t._$s(46,"c",{hidden:t.hideMore}),attrs:{_i:46}},[n("view",{staticClass:t._$s(47,"sc","list"),attrs:{_i:47}},[n("view",{staticClass:t._$s(48,"sc","box"),attrs:{_i:48},on:{click:t.chooseImage}},[n("view",{staticClass:t._$s(49,"sc","icon tupian2"),attrs:{_i:49}})]),n("view",{staticClass:t._$s(50,"sc","box"),attrs:{_i:50},on:{click:t.camera}},[n("view",{staticClass:t._$s(51,"sc","icon paizhao"),attrs:{_i:51}})]),n("view",{staticClass:t._$s(52,"sc","box"),attrs:{_i:52},on:{click:t.handRedEnvelopes}},[n("view",{staticClass:t._$s(53,"sc","icon hongbao"),attrs:{_i:53}})])])])]),n("view",{staticClass:t._$s(54,"sc","input-box-s"),class:t._$s(54,"c",t.popupLayerClass),attrs:{_i:54},on:{touchmove:function(e){return e.stopPropagation(),e.preventDefault(),t.discard(e)}}},[n("view",{staticClass:t._$s(55,"sc","textbox"),attrs:{_i:55}},[n("view",{staticClass:t._$s(56,"sc","voice-mode"),class:t._$s(56,"c",[t.isVoice?"":"hidden",t.recording?"recording":""]),attrs:{_i:56},on:{touchstart:t.voiceBegin,touchmove:function(e){return e.stopPropagation(),e.preventDefault(),t.voiceIng(e)},touchend:t.voiceEnd,touchcancel:t.voiceCancel}},[t._v(t._$s(56,"t0-0",t._s(t.voiceTis)))]),n("view",{staticClass:t._$s(57,"sc","text-mode"),class:t._$s(57,"c",t.isVoice?"hidden":""),attrs:{_i:57}},[n("view",{staticClass:t._$s(58,"sc","box"),attrs:{_i:58}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textMsg,expression:"textMsg"}],attrs:{_i:59},domProps:{value:t._$s(59,"v-model",t.textMsg)},on:{focus:t.textareaFocus,input:function(e){e.target.composing||(t.textMsg=e.target.value)}}})]),n("view",{staticClass:t._$s(60,"sc","em"),attrs:{_i:60},on:{click:t.chooseEmoji}},[n("image",{attrs:{src:t._$s(61,"a-src","/"+i("aae1")),_i:61}})])])]),n("view",{staticClass:t._$s(62,"sc","send"),class:t._$s(62,"c",t.isVoice?"hidden":""),attrs:{_i:62},on:{click:t.sendText}},[n("image",{attrs:{src:t._$s(63,"a-src","/"+i("67cc")),_i:63}})])]),n("view",{staticClass:t._$s(64,"sc","record"),class:t._$s(64,"c",t.recording?"":"hidden"),attrs:{_i:64}},[n("view",{staticClass:t._$s(65,"sc","ing"),class:t._$s(65,"c",t.willStop?"hidden":""),attrs:{_i:65}},[n("view",{staticClass:t._$s(66,"sc","icon luyin2"),attrs:{_i:66}})]),n("view",{staticClass:t._$s(67,"sc","cancel"),class:t._$s(67,"c",t.willStop?"":"hidden"),attrs:{_i:67}},[n("view",{staticClass:t._$s(68,"sc","icon chehui"),attrs:{_i:68}})]),n("view",{staticClass:t._$s(69,"sc","tis"),class:t._$s(69,"c",t.willStop?"change":""),attrs:{_i:69}},[t._v(t._$s(69,"t0-0",t._s(t.recordTis)))])]),n("view",{staticClass:t._$s(70,"sc","windows"),class:t._$s(70,"c",t.windowsState),attrs:{_i:70}},[n("view",{staticClass:t._$s(71,"sc","mask"),attrs:{_i:71},on:{touchmove:function(e){return e.stopPropagation(),e.preventDefault(),t.discard(e)},click:t.closeRedEnvelope}}),n("view",{staticClass:t._$s(72,"sc","layer"),attrs:{_i:72},on:{touchmove:function(e){return e.stopPropagation(),e.preventDefault(),t.discard(e)}}},[n("view",{staticClass:t._$s(73,"sc","open-redenvelope"),attrs:{_i:73}},[n("view",{staticClass:t._$s(74,"sc","top"),attrs:{_i:74}},[n("view",{staticClass:t._$s(75,"sc","close-btn"),attrs:{_i:75}},[n("view",{staticClass:t._$s(76,"sc","icon close"),attrs:{_i:76},on:{click:t.closeRedEnvelope}})]),n("image",{attrs:{_i:77}})]),n("view",{staticClass:t._$s(78,"sc","from"),attrs:{_i:78}},[t._v(t._$s(78,"t0-0",t._s(t.redenvelopeData.from)))]),n("view",{staticClass:t._$s(79,"sc","blessing"),attrs:{_i:79}},[t._v(t._$s(79,"t0-0",t._s(t.redenvelopeData.blessing)))]),n("view",{staticClass:t._$s(80,"sc","money"),attrs:{_i:80}},[t._v(t._$s(80,"t0-0",t._s(t.redenvelopeData.money)))]),n("view",{staticClass:t._$s(81,"sc","showDetails"),attrs:{_i:81},on:{click:function(e){return t.toDetails(t.redenvelopeData.rid)}}},[n("view",{staticClass:t._$s(82,"sc","icon to"),attrs:{_i:82}})])])])])],1)},o=[];i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}))},fd7b:function(t,e){t.exports="static/img/my.png"},fdee:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{StatusBar:this.StatusBar,CustomBar:this.CustomBar>56?this.CustomBar:56}},name:"cu-custom",computed:{style:function(){var t=this.StatusBar,e=this.CustomBar,i=this.bgImage,n="height:".concat(e,"px;padding-top:").concat(t,"px;");return this.bgImage&&(n="".concat(n,"background-image:url(").concat(i,");")),n}},props:{backColor:{type:String,default:""},bgColor:{type:String,default:""},isBack:{type:[Boolean,String],default:!1},bgImage:{type:String,default:""}},methods:{BackPage:function(){uni.navigateBack({delta:1})}}};e.default=n},fe07:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.Behavior=Dt,e.Component=xt,e.Page=wt,e.nextTick=e.default=void 0;var n,r=o(i("8bbf"));function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function s(t,e){return h(t)||f(t,e)||u(t,e)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,e){if(t){if("string"===typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function f(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var i=[],n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0)if(i.push(a.value),e&&i.length===e)break}catch(c){r=!0,o=c}finally{try{n||null==s["return"]||s["return"]()}finally{if(r)throw o}}return i}}function h(t){if(Array.isArray(t))return t}function p(t,e){t&&(e.mpOptions.data=t)}function g(e){e.components=t.__wxVueOptions.components}var d=Object.prototype.toString,m=Object.prototype.hasOwnProperty;function v(t){return"function"===typeof t}function _(t){return"[object Object]"===d.call(t)}function y(t,e){return m.call(t,e)}function S(){}function E(t){var e=Object.create(null);return function(i){var n=e[i];return n||(e[i]=t(i))}}var C=/-(\w)/g,I=E((function(t){return t.replace(C,(function(t,e){return e?e.toUpperCase():""}))})),b="__data__",A={created:"onServiceCreated",attached:"onServiceAttached",ready:"mounted",moved:"moved",detached:"destroyed"},w=Object.keys(A),T={show:"onPageShow",hide:"onPageHide",resize:"onPageResize"},x=Object.keys(T),D=["onLoad","onShow","onReady","onHide","onUnload","onPullDownRefresh","onReachBottom","onShareAppMessage","onPageScroll","onResize","onTabItemTap"];function M(t,e){var i=Object.create(null);Object.keys(t).forEach((function(e){var n=t[e];v(n)&&-1===D.indexOf(e)&&(i[e]=n)})),e.methods=i}function L(t,e){Object.keys(t).forEach((function(i){-1!==D.indexOf(i)&&(e[i]=t[i])}))}function O(t){var e={mixins:[],mpOptions:{}};return g(e),p(t.data,e),M(t,e),L(t,e),e}function N(t,e){t&&(e.mpOptions.properties=t)}function P(t,e){t&&(e.mpOptions.options=t)}function R(t,e){t&&(t.$emit&&(console.warn('Method "$emit" conflicts with an existing Vue instance method'),delete t.$emit),e.methods=t)}function k(t,e){w.forEach((function(i){y(t,i)&&(e[A[i]]||(e[A[i]]=[])).push(t[i])}))}var G={"wx://form-field":{},"wx://component-export":{}};function U(t){var e=t.behaviors,i=t.definitionFilter,n=[];if(Array.isArray(e)&&e.forEach((function(e){e="string"===typeof e?G[e]:e,e.definitionFilter&&(n.push(e.definitionFilter),e.definitionFilter.call(null,t,[]))})),v(i))return function(t){i(t,n)}}function F(t,e){U(t)}function $(t){var e=t.data,i=t.methods,n=t.behaviors,r=t.properties,o={watch:{},mpOptions:{mpObservers:[]}};return p(e,o),R(i,o),q(n,o),N(r,o),k(t,o),F(t),o}var j={"wx://form-field":{beforeCreate:function(){var t=this.$options.mpOptions;t.properties||(t.properties=Object.create(null));var e=t.properties;y(e,"name")||(e.name={type:String}),y(e,"value")||(e.value={type:String})}}};function q(t,e){t&&t.forEach((function(t){"string"===typeof t?j[t]&&e.mixins.push(j[t]):e.mixins.push($(t))}))}function H(t){return t.split(".")}function B(t){return t.split(",").map((function(t){return H(t)}))}function V(t,e){if(t){var i=e.mpOptions.mpObservers;Object.keys(t).forEach((function(e){i.push({paths:B(e),observer:t[e]})}))}}function K(t,e){0===e.indexOf("/")&&(t="");var i=t.split("/"),n=e.split("/");i.pop();while(n.length){var r=n.shift();""!==r&&"."!==r&&(".."!==r?i.push(r):i.pop())}return i.join("/")}function z(e,i){e&&(Object.keys(e).forEach((function(i){var n=e[i];n.name=i,n.target=n.target?String(n.target):K(t.__wxRoute,i)})),i.mpOptions.relations=e)}function Y(t,e){t&&(Array.isArray(t)||(t=[t]),e.mpOptions.externalClasses=t,e.mpOptions.properties||(e.mpOptions.properties=Object.create(null)),t.forEach((function(t){e.mpOptions.properties[I(t)]={type:String,value:""}})))}function W(t,e){t&&k(t,e)}function J(t,e){t&&x.forEach((function(i){var n=t[i];v(n)&&(e[T[i]]=n)}))}function X(t){var e=t.data,i=t.options,n=t.methods,r=t.behaviors,o=t.lifetimes,a=t.observers,s=t.relations,c=t.properties,u=t.pageLifetimes,l=t.externalClasses,f={mixins:[],props:{},watch:{},mpOptions:{mpObservers:[]}};return g(f),p(e,f),P(i,f),R(n,f),q(r,f),W(o,f),V(a,f),z(s,f),N(c,f),J(u,f),Y(l,f),k(t,f),F(t),f}function Q(t,e,i,n){if(e){var r="_$".concat(t,"Handlers");(n[r]||(n[r]=[])).push((function(){e.call(n,i)}))}}function Z(t,e,i){var n="linked",r=t.name,o=i._$relationNodes||(i._$relationNodes=Object.create(null));(o[r]||(o[r]=[])).push(e),Q(n,t[n],e,i)}function tt(t,e,i){var n="unlinked";Q(n,t[n],e,i)}function et(t,e,i){var n=t&&t.$options.mpOptions&&t.$options.mpOptions.relations;if(!n)return[];var r=Object.keys(n).find((function(t){var r=n[t];return r.target===e&&r.type===i}));return r?[n[r],t]:[]}function it(t,e,i){var n=i(t,t.$options.mpOptions.path),r=s(n,2),o=r[0],a=r[1];o&&(Z(o,t,a),Z(e,a,t),tt(o,t,a),tt(e,a,t))}function nt(t,e){var i=t.type;"parent"===i?it(e,t,(function(t,e){return et(t.$parent,e,"child")})):"ancestor"===i&&it(e,t,(function(t,e){var i=t.$parent;while(i){var n=et(i,e,"descendant");if(n.length)return n;i=i.$parent}return[]}))}function rt(t){var e=t.$options.mpOptions||{},i=e.relations;i&&Object.keys(i).forEach((function(e){nt(i[e],t)}))}function ot(t,e){var i=t["_$".concat(e,"Handlers")];i&&i.forEach((function(t){return t()}))}var at={enumerable:!0,configurable:!0,get:S,set:S};function st(t,e,i){at.get=function(){return this[e][i]},at.set=function(t){this[e][i]=t},Object.defineProperty(t,i,at)}function ct(t,e,i){var n=t.replace(/\[(\d+?)\]/g,".$1").split(".");return n.reduce((function(t,i,r){if(r!==n.length-1)return"undefined"===typeof t[i]&&(t[i]={}),t[i];t[i]=e}),i),1===n.length}function ut(t,e){var i=this;_(t)&&(Object.keys(t).forEach((function(e){ct(e,t[e],i.data)&&!y(i,e)&&st(i,b,e)})),this.$forceUpdate(),v(e)&&this.$nextTick(e))}var lt=Object.prototype.toString,ft=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,n=lt.call(i);if("[object Array]"===n)return e=i.slice(0),e;if("[object Object]"===n){for(var r in i)e[r]=t(e[r],i[r]);return e}if("[object Date]"===n)return new Date(i.getTime());if("[object RegExp]"===n){var o=String(i),a=o.lastIndexOf("/");return new RegExp(o.slice(1,a),o.slice(a+1))}return i},ht=function(t){return ft("[object Array]"===lt.call(t)?[]:{},t)},pt=(n={},a(n,String,""),a(n,Number,0),a(n,Boolean,!1),a(n,Object,null),a(n,Array,[]),a(n,null,null),n);function gt(t){return pt[t]}function dt(t){return _(t)?y(t,"value")?t.value:gt(t.type):gt(t)}function mt(t){return _(t)?t.type:t}function vt(t,e,i,n){var r=i[t];if(void 0!==r){var o=e[t],a=mt(o);r=_t(r,a);var s=o&&o.observer;return s&&setTimeout((function(){yt(s,n,r)}),4),r}return dt(e[t])}function _t(t,e){return e===Boolean?!!t:e===String?String(t):t}function yt(t,e,i,n){try{"function"===typeof t?t.call(e,i,n):"string"===typeof t&&"function"===typeof e[t]&&e[t](i,n)}catch(r){console.error("execute observer ".concat(t," callback fail! err: ").concat(r))}}function St(t,e){var i=t.$options.mpOptions.properties;if(i){var n=ht(t.$options.propsData)||{},r=function(r){var o=!!_(i[r])&&i[r].observer,a=vt(r,i,n,t);Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:function(){return a},set:function(e){var i=a;e===a||e!==e&&a!==a||(a=Array.isArray(e)?e.slice(0):e,o&&yt(o,t,e,i),t.$forceUpdate())}})};for(var o in i)r(o)}}function Et(t){var e=t.$options.mpOptions&&t.$options.mpOptions.properties,i=t.$options.propsData;i&&e&&Object.keys(e).forEach((function(n){y(i,n)&&(t[n]=_t(i[n],mt(e[n])))}))}function Ct(t){var e=JSON.parse(JSON.stringify(t.$options.mpOptions.data||{}));t[b]=e;var i={get:function(){return t[b]},set:function(e){t[b]=e}};Object.defineProperties(t,{data:i,properties:i}),t.setData=ut,St(t,e),Object.keys(e).forEach((function(e){st(t,b,e)}))}function It(t){var e=t.$emit;t.triggerEvent=function(i,n,r){var o={dataset:t.$el.dataset},a={target:o,currentTarget:o,detail:n,preventDefault:S,stopPropagation:S};e.call(t,i,a)},t.$emit=function(){t.triggerEvent.apply(t,arguments)},t.getRelationNodes=function(e){return(t._$relationNodes&&t._$relationNodes[e]||[]).filter((function(t){return!t._isDestroyed}))},t._$updateProperties=Et}function bt(t){var e=t.$options.watch;e&&Object.keys(e).forEach((function(i){var n=e[i];if(n.mounted){var r=t[i],o=n.handler;"string"===typeof o&&(o=t[o]),o&&o.call(t,r,r)}}))}var At={beforeCreate:function(){this._renderProxy=this},created:function(){Ct(this),It(this),rt(this)},mounted:function(){bt(this)},destroyed:function(){ot(this,"unlinked")}};function wt(e){var i=O(e);i.mixins.unshift(At),i.mpOptions.path=t.__wxRoute,t.__wxComponents[t.__wxRoute]=i}function Tt(t){t.onServiceAttached||(t.onServiceAttached=[]),t.onServiceAttached.push((function(){ot(this,"linked")}))}function xt(e){var i=X(e);i.mixins.unshift(At),i.mpOptions.path=t.__wxRoute,Tt(i),t.__wxComponents[t.__wxRoute]=i}function Dt(t){return t}t.__wxRoute="",t.__wxComponents=Object.create(null),t.__wxVueOptions=Object.create(null);var Mt=r.default.nextTick;e.nextTick=Mt;var Lt=uni.__$wx__,Ot=Lt;e.default=Ot}).call(this,i("c8ba"))}},[["8084","app-config"]]]);