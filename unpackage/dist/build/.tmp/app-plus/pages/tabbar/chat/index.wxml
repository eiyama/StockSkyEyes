<view><view class="status_bar bg-white"></view><view style="{{'position:relative;top:0;width:100%;z-index:200;background-color:#FFFFFF;height:112rpx;'+(isScroll?'position: fixed':'')}}"><view class="bg-white"><view class="flex justify-center align-center" style="height:112rpx;"><view class="{{['text-center',currentIndex==1?'text-white chatBgColor':'bg-white']}}" style="border:1px solid #505050;border-right:0;width:45.5%;padding:5rpx;border-radius:10rpx 0 0 10rpx;" data-id="{{1}}"><text>普通室</text><block wx:if="{{currentIndex==1}}"><view style="position:relative;"><text class="{{['block',currentIndex==1?'text-white chatBgColor':'bg-white']}}" style="width:7px;height:7px;position:absolute;transform:rotate(45deg);top:-3rpx;z-index:999;left:160rpx;"></text></view></block></view><view class="{{['text-center',currentIndex==2?'text-white chatBgColorVip':'chatVipText']}}" style="border:1px solid #E7C365;border-left:0;width:45.5%;padding:5rpx;border-radius:0 10rpx 10rpx 0;" data-id="{{2}}" data-event-opts="{{[['tap',[['toApplyVip',['$event']]]]]}}" bindtap="__e"><text>VIP室</text><block wx:if="{{currentIndex==2}}"><view style="position:relative;"><text class="{{['block bg-red',currentIndex==2?'text-white chatBgColorVip':'bg-white']}}" style="width:7px;height:7px;position:absolute;transform:rotate(45deg);top:-3rpx;z-index:999;left:160rpx;"></text></view></block></view></view><block wx:if="{{currentIndex==2}}"><view data-event-opts="{{[['tap',[['viewCustomerService',['$event']]]]]}}" style="position:fixed;bottom:240rpx;z-index:999;left:30rpx;" bindtap="__e"><view class="flex justify-center align-center" style="width:100rpx;height:100rpx;background-color:#476fff;border-radius:50%;"><image style="width:80rpx;height:80rpx;" src="../../../static/img/service.png" mode></image></view></view></block></view></view><view data-event-opts="{{[['touchstart',[['hideDrawer',['$event']]]]]}}" class="content" bindtouchstart="__e"><view style="position:relative;"><view class="{{['flex align-center',currentIndex==1?'chatText':'chatVipText']}}" style="{{'height:120rpx;background-color:#000;opacity:0.8;z-index:999;position:absolute;width:100%;'+('background-color:'+(currentIndex==1?'#000':'#F5E4B9')+';')}}"><block wx:if="{{currentIndex==1}}"><image style="width:64rpx;height:64rpx;margin-left:30rpx;" src="../../../static/img/icon-group-gray 2.png" mode></image></block><block wx:if="{{currentIndex==2}}"><image style="width:64rpx;height:64rpx;margin-left:30rpx;" src="../../../static/img/icon-group-yellow.png" mode></image></block><text style="font-size:30rpx;margin-left:30rpx;">{{"当前群内"+memberNum+"人"}}</text></view></view><scroll-view class="msg-list" style="{{(appHeight)}}" scroll-y="true" scroll-with-animation="{{scrollAnimation}}" scroll-top="{{scrollTop}}" scroll-into-view="{{scrollToView}}" upper-threshold="50" data-event-opts="{{[['scrolltoupper',[['loadHistory',['$event']]]],['scroll',[['scrollClick',['$event']]]]]}}" bindscrolltoupper="__e" bindscroll="__e"><view class="loading"><view class="spinner"><view class="rect1"></view><view class="rect2"></view><view class="rect3"></view><view class="rect4"></view><view class="rect5"></view></view></view><block wx:for="{{$root.l0}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="row" id="{{item.$orig.id}}"><block><block wx:if="{{item.$orig.flow=='out'}}"><view class="my"><view class="left"><block wx:if="{{item.$orig.type=='TIMTextElem'}}"><view class="bubble"><rich-text nodes="{{item.m0}}"></rich-text></view></block></view><view class="right"><image src="../../../static/img/default-avatar.png"></image></view></view></block><block wx:else><view class="other"><view class="left"><image src="../../../static/img/default-avatar.png"></image></view><view class="right"><view class="username"><view class="name">{{'用户'+item.$orig.from}}</view><view class="time">{{item.m1}}</view></view><block wx:if="{{item.$orig.type=='TIMTextElem'}}"><view class="bubble"><rich-text nodes="{{item.m2}}"></rich-text></view></block></view></view></block></block></view></block></scroll-view></view><view data-event-opts="{{[['touchmove',[['discard',['$event']]]]]}}" class="{{['popup-layer',popupLayerClass]}}" catchtouchmove="__e"><swiper class="{{['emoji-swiper',(hideEmoji)?'hidden':'']}}" indicator-dots="true" duration="150"><block wx:for="{{emojiList}}" wx:for-item="page" wx:for-index="pid" wx:key="pid"><swiper-item><block wx:for="{{page}}" wx:for-item="em" wx:for-index="eid" wx:key="eid"><view data-event-opts="{{[['tap',[['addEmoji',['$0'],[[['emojiList','',pid],['','',eid]]]]]]]}}" bindtap="__e"><image mode="widthFix" src="{{'/static/img/emoji/'+em.url}}"></image></view></block></swiper-item></block></swiper><view class="{{['more-layer',(hideMore)?'hidden':'']}}"><view class="list"><view data-event-opts="{{[['tap',[['chooseImage',['$event']]]]]}}" class="box" bindtap="__e"><view class="icon tupian2"></view></view><view data-event-opts="{{[['tap',[['camera',['$event']]]]]}}" class="box" bindtap="__e"><view class="icon paizhao"></view></view><view data-event-opts="{{[['tap',[['handRedEnvelopes',['$event']]]]]}}" class="box" bindtap="__e"><view class="icon hongbao"></view></view></view></view></view><view data-event-opts="{{[['touchmove',[['discard',['$event']]]]]}}" class="{{['input-box',popupLayerClass]}}" catchtouchmove="__e"><view class="voice"><view data-event-opts="{{[['tap',[['switchVoice',['$event']]]]]}}" class="{{['icon',isVoice?'jianpan':'yuyin']}}" bindtap="__e"></view></view><view class="textbox"><view data-event-opts="{{[['touchstart',[['voiceBegin',['$event']]]],['touchmove',[['voiceIng',['$event']]]],['touchend',[['voiceEnd',['$event']]]],['touchcancel',[['voiceCancel',['$event']]]]]}}" class="{{['voice-mode',isVoice?'':'hidden',recording?'recording':'']}}" bindtouchstart="__e" catchtouchmove="__e" bindtouchend="__e" bindtouchcancel="__e">{{voiceTis}}</view><view class="{{['text-mode',isVoice?'hidden':'']}}"><view class="box"><textarea auto-height="true" data-event-opts="{{[['focus',[['textareaFocus',['$event']]]],['input',[['__set_model',['','textMsg','$event',[]]]]]]}}" value="{{textMsg}}" bindfocus="__e" bindinput="__e"></textarea></view><view data-event-opts="{{[['tap',[['chooseEmoji',['$event']]]]]}}" class="em" bindtap="__e"><view class="icon biaoqing"></view></view></view></view><view data-event-opts="{{[['tap',[['showMore',['$event']]]]]}}" class="more" bindtap="__e"><view class="icon add"></view></view><view data-event-opts="{{[['tap',[['sendText',['$event']]]]]}}" class="{{['send',isVoice?'hidden':'']}}" bindtap="__e"><view class="btn">发送</view></view></view></view>