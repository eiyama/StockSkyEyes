(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/tabbar/home/applyVip"],{"47b3":function(t,e,n){"use strict";(function(t){n("8abb"),n("921b");i(n("66fd"));var e=i(n("f69a"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},"5f6f":function(t,e,n){"use strict";(function(t,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(n("a34a")),a=r(n("70be"));function r(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n,i,o,a,r){try{var s=t[a](r),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(i,o)}function u(t){return function(){var e=this,n=arguments;return new Promise(function(i,o){var a=t.apply(e,n);function r(t){s(a,i,o,r,u,"next",t)}function u(t){s(a,i,o,r,u,"throw",t)}r(void 0)})}}var c={data:function(){return{date:"",screenshotImg:"",imgList:[],index:0,indexnum:0,vipForm:{Realname:"",IdentifyType:"",IdentifyNo:"",Birthday:"",StockAge:"",SecuritiesCompany:"",StockAccount:"",AmountFunds:"",AccountImages:[]},token:"",certificateTypeValue:["身份证","港澳身份证","台胞证","中国护照"],certificateTypeLabel:["IdCard","GAIdCard","TaiwanesePassport","ChinaPassPort"],isApply:!1,applyInfo:{},screenHeight:""}},onReady:function(){},onLoad:function(){var e=t.getStorageSync("accountInfo");this.token=e.token,this.vipForm.IdentifyType=this.certificateTypeLabel[this.indexnum]},onShow:function(){this.getApplyInfo();var e=this;t.onKeyboardHeightChange(function(t){i("log",t.height," at pages\\tabbar\\home\\applyVip.vue:189"),e.screenHeight=t.height})},methods:{isCardNo:function(e){var n=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;if(!1===n.test(e))return t.showToast({icon:"none",title:"身份证输入不合法",duration:2e3}),void(this.vipForm.IdentifyNo="")},getApplyInfo:function(){var t=this;this.$http.get("/StockSkyEyes/App/GetVipInfo").then(function(e){e.data&&e.data.result&&(t.isApply=!0,t.applyInfo=e.data.result)})},changeCertificateType:function(t){this.indexnum=t.detail.value,this.vipForm.IdentifyType=this.certificateTypeLabel[this.indexnum]},getStandard:function(t){if("IdCard"==this.vipForm.IdentifyType){var e=t.detail.value;this.isCardNo(e);var n=this.getBirthdayFromIdCard(e);this.date=n,this.vipForm.Birthday=n}},getBirthdayFromIdCard:function(t){var e="";return null!=t&&""!=t&&(15==t.length?e="19"+t.substr(6,6):18==t.length&&(e=t.substr(6,8)),e=e.replace(/(.{4})(.{2})/,"$1-$2-")),e},DateChange:function(t){this.date=t.detail.value,this.vipForm.Birthday=this.date},SecuritiesCompany:function(t){this.vipForm.SecuritiesCompany=this.SecuritiesCompanyList[this.index]},submitForm:function(){},submitApplyVIP:function(){var e=this;this.vipForm.Realname?this.vipForm.Birthday?this.vipForm.StockAge?this.vipForm.AmountFunds?this.vipForm.SecuritiesCompany?this.vipForm.StockAccount?this.vipForm.IdentifyType?this.vipForm.IdentifyNo?this.vipForm.AccountImages.length<=0?t.showToast({icon:"none",title:"请上传股票账户截图",duration:2e3}):this.$http.post("/StockSkyEyes/App/VIPApply",this.vipForm).then(function(t){t.data&&t.data.result&&e.getApplyInfo()}):t.showToast({icon:"none",title:"请输入证件号码",duration:2e3}):t.showToast({icon:"none",title:"请选择证件类型",duration:2e3}):t.showToast({icon:"none",title:"请输入股票账户",duration:2e3}):t.showToast({icon:"none",title:"请输入开户卷商",duration:2e3}):t.showToast({icon:"none",title:"请输入资金量",duration:2e3}):t.showToast({icon:"none",title:"请输入股龄",duration:2e3}):t.showToast({icon:"none",title:"请输入出生年月",duration:2e3}):t.showToast({icon:"none",title:"请输入姓名",duration:2e3})},ageChange:function(){},chooseImage:function(){var e=u(o.default.mark(function e(){var n;return o.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=this,n.vipForm.AccountImages=[],t.chooseImage({sizeType:["compressed"],success:function(e){t.showLoading({title:"加载中"});var i=e.tempFilePaths;t.uploadFile({url:a.default.apiHost+"/StockSkyEyes/App/Upload?catalog=AssetImages",filePath:i[0],name:"file1",header:{Authorization:n.token},success:function(e){if(t.hideLoading(),e&&e.data){var i;i=JSON.parse(e.data),n.screenshotImg=i.result[0].url;var o=i.result[0].id;n.vipForm.AccountImages.push(o)}}})}});case 3:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}(),toFundsState:function(){t.navigateTo({url:"./successFunds"})}}};e.default=c}).call(this,n("6e42")["default"],n("0de9")["default"])},"6a99":function(t,e,n){"use strict";n.r(e);var i=n("5f6f"),o=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);e["default"]=o.a},"8ed2":function(t,e,n){"use strict";var i=n("c143"),o=n.n(i);o.a},9161:function(t,e,n){"use strict";var i,o=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"b",function(){return o}),n.d(e,"c",function(){return a}),n.d(e,"a",function(){return i})},c143:function(t,e,n){},f69a:function(t,e,n){"use strict";n.r(e);var i=n("9161"),o=n("6a99");for(var a in o)"default"!==a&&function(t){n.d(e,t,function(){return o[t]})}(a);n("8ed2");var r,s=n("f0c5"),u=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],r);e["default"]=u.exports}},[["47b3","common/runtime","common/vendor"]]]);